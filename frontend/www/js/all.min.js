(function(c,b){function a(a,c,d){if(d===b&&1===a.nodeType)if(d="data-"+c.replace(Dc,"-$1").toLowerCase(),d=a.getAttribute(d),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Ec.test(d)?k.parseJSON(d):d}catch(e){}k.data(a,c,d)}else d=b;return d}function d(b){for(var a in b)if(!("data"===a&&k.isEmptyObject(b[a]))&&"toJSON"!==a)return!1;return!0}function e(){return!1}function f(){return!0}function h(b){return!b||!b.parentNode||11===b.parentNode.nodeType}function j(b,
a){do b=b[a];while(b&&1!==b.nodeType);return b}function m(b,a,c){a=a||0;if(k.isFunction(a))return k.grep(b,function(b,d){return!!a.call(b,d,b)===c});if(a.nodeType)return k.grep(b,function(b){return b===a===c});if("string"==typeof a){var d=k.grep(b,function(b){return 1===b.nodeType});if(Gc.test(a))return k.filter(a,d,!c);a=k.filter(a,d)}return k.grep(b,function(b){return 0<=k.inArray(b,a)===c})}function p(b){var a=Wb.split("|");b=b.createDocumentFragment();if(b.createElement)for(;a.length;)b.createElement(a.pop());
return b}function g(b,a){if(1===a.nodeType&&k.hasData(b)){var c,d,e;d=k._data(b);var f=k._data(a,d),g=d.events;if(g)for(c in delete f.handle,f.events={},g){d=0;for(e=g[c].length;d<e;d++)k.event.add(a,c,g[c][d])}f.data&&(f.data=k.extend({},f.data))}}function n(b,a){var c;1===a.nodeType&&(a.clearAttributes&&a.clearAttributes(),a.mergeAttributes&&a.mergeAttributes(b),c=a.nodeName.toLowerCase(),"object"===c?(a.parentNode&&(a.outerHTML=b.outerHTML),k.support.html5Clone&&b.innerHTML&&!k.trim(a.innerHTML)&&
(a.innerHTML=b.innerHTML)):"input"===c&&Xb.test(b.type)?(a.defaultChecked=a.checked=b.checked,a.value!==b.value&&(a.value=b.value)):"option"===c?a.selected=b.defaultSelected:"input"===c||"textarea"===c?a.defaultValue=b.defaultValue:"script"===c&&a.text!==b.text&&(a.text=b.text),a.removeAttribute(k.expando))}function q(b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName("*"):"undefined"!=typeof b.querySelectorAll?b.querySelectorAll("*"):[]}function u(b){Xb.test(b.type)&&(b.defaultChecked=
b.checked)}function r(b,a){if(a in b)return a;for(var c=a.charAt(0).toUpperCase()+a.slice(1),d=a,e=Yb.length;e--;)if(a=Yb[e]+c,a in b)return a;return d}function x(b,a){return b=a||b,"none"===k.css(b,"display")||!k.contains(b.ownerDocument,b)}function y(b,a){for(var c,d,e=[],f=0,g=b.length;f<g;f++)c=b[f],c.style&&(e[f]=k._data(c,"olddisplay"),a?(!e[f]&&"none"===c.style.display&&(c.style.display=""),""===c.style.display&&x(c)&&(e[f]=k._data(c,"olddisplay",H(c.nodeName)))):(d=ka(c,"display"),!e[f]&&
"none"!==d&&k._data(c,"olddisplay",d)));for(f=0;f<g;f++)if(c=b[f],c.style&&(!a||"none"===c.style.display||""===c.style.display))c.style.display=a?e[f]||"":"none";return b}function w(b,a,c){return(b=Hc.exec(a))?Math.max(0,b[1]-(c||0))+(b[2]||"px"):a}function v(b,a,c,d){a=c===(d?"border":"content")?4:"width"===a?1:0;for(var e=0;4>a;a+=2)"margin"===c&&(e+=k.css(b,c+La[a],!0)),d?("content"===c&&(e-=parseFloat(ka(b,"padding"+La[a]))||0),"margin"!==c&&(e-=parseFloat(ka(b,"border"+La[a]+"Width"))||0)):(e+=
parseFloat(ka(b,"padding"+La[a]))||0,"padding"!==c&&(e+=parseFloat(ka(b,"border"+La[a]+"Width"))||0));return e}function D(b,a,c){var d="width"===a?b.offsetWidth:b.offsetHeight,e=!0,f=k.support.boxSizing&&"border-box"===k.css(b,"boxSizing");if(0>=d||null==d){d=ka(b,a);if(0>d||null==d)d=b.style[a];if(gb.test(d))return d;e=f&&(k.support.boxSizingReliable||d===b.style[a]);d=parseFloat(d)||0}return d+v(b,a,c||(f?"border":"content"),e)+"px"}function H(b){if(yb[b])return yb[b];var a=k("<"+b+">").appendTo(J.body),
c=a.css("display");a.remove();if("none"===c||""===c){Qa=J.body.appendChild(Qa||k.extend(J.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ra||!Qa.createElement)Ra=(Qa.contentWindow||Qa.contentDocument).document,Ra.write("<!doctype html><html><body>"),Ra.close();a=Ra.body.appendChild(Ra.createElement(b));c=ka(a,"display");J.body.removeChild(Qa)}return yb[b]=c,c}function s(b,a,c,d){var e;if(k.isArray(a))k.each(a,function(a,e){c||Ic.test(b)?d(b,e):s(b+"["+("object"==typeof e?a:"")+"]",
e,c,d)});else if(!c&&"object"===k.type(a))for(e in a)s(b+"["+e+"]",a[e],c,d);else d(b,a)}function E(b){return function(a,c){"string"!=typeof a&&(c=a,a="*");var d,e,f=a.toLowerCase().split(M),g=0,h=f.length;if(k.isFunction(c))for(;g<h;g++)d=f[g],(e=/^\+/.test(d))&&(d=d.substr(1)||"*"),d=b[d]=b[d]||[],d[e?"unshift":"push"](c)}}function G(a,c,d,e,f,g){f=f||c.dataTypes[0];g=g||{};g[f]=!0;var h;f=a[f];for(var j=0,n=f?f.length:0,k=a===zb;j<n&&(k||!h);j++)h=f[j](c,d,e),"string"==typeof h&&(!k||g[h]?h=b:
(c.dataTypes.unshift(h),h=G(a,c,d,e,h,g)));return(k||!h)&&!g["*"]&&(h=G(a,c,d,e,"*",g)),h}function C(a,c){var d,e,f=k.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&k.extend(!0,a,e)}function F(){try{return new c.XMLHttpRequest}catch(b){}}function A(){return setTimeout(function(){Sa=b},0),Sa=k.now()}function I(b,a,c){var d,e=0,f=hb.length,g=k.Deferred().always(function(){delete h.elem}),h=function(){for(var a=Sa||A(),a=Math.max(0,j.startTime+j.duration-a),c=1-(a/
j.duration||0),d=0,e=j.tweens.length;d<e;d++)j.tweens[d].run(c);return g.notifyWith(b,[j,c,a]),1>c&&e?a:(g.resolveWith(b,[j]),!1)},j=g.promise({elem:b,props:k.extend({},a),opts:k.extend(!0,{specialEasing:{}},c),originalProperties:a,originalOptions:c,startTime:Sa||A(),duration:c.duration,tweens:[],createTween:function(a,c){var d=k.Tween(b,j.opts,a,c,j.opts.specialEasing[a]||j.opts.easing);return j.tweens.push(d),d},stop:function(a){for(var c=0,d=a?j.tweens.length:0;c<d;c++)j.tweens[c].run(1);return a?
g.resolveWith(b,[j,a]):g.rejectWith(b,[j,a]),this}});a=j.props;c=j.opts.specialEasing;var n,q,m,B;for(d in a)if(n=k.camelCase(d),q=c[n],m=a[d],k.isArray(m)&&(q=m[1],m=a[d]=m[0]),d!==n&&(a[n]=m,delete a[d]),(B=k.cssHooks[n])&&"expand"in B)for(d in m=B.expand(m),delete a[n],m)d in a||(a[d]=m[d],c[d]=q);else c[n]=q;for(;e<f;e++)if(d=hb[e].call(j,b,a,j.opts))return d;var r=j;k.each(a,function(b,a){for(var c=(Za[b]||[]).concat(Za["*"]),d=0,e=c.length;d<e&&!c[d].call(r,b,a);d++);});return k.isFunction(j.opts.start)&&
j.opts.start.call(b,j),k.fx.timer(k.extend(h,{anim:j,queue:j.opts.queue,elem:b})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function K(b,a,c,d,e){return new K.prototype.init(b,a,c,d,e)}function L(b,a){var c,d={height:b},e=0;for(a=a?1:0;4>e;e+=2-a)c=La[e],d["margin"+c]=d["padding"+c]=b;return a&&(d.opacity=d.width=b),d}function R(b){return k.isWindow(b)?b:9===b.nodeType?b.defaultView||b.parentWindow:!1}var N,Q,J=c.document,O=c.location,T=
c.navigator,ha=c.jQuery,la=c.$,Z=Array.prototype.push,aa=Array.prototype.slice,ja=Array.prototype.indexOf,ba=Object.prototype.toString,oa=Object.prototype.hasOwnProperty,fa=String.prototype.trim,k=function(b,a){return new k.fn.init(b,a,N)},U=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,B=/\S/,M=/\s+/,P=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,V=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,S=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ia=/^[\],:{}\s]*$/,ma=/(?:^|:|,)(?:\s*\[)+/g,za=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
sa=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,Aa=/^-ms-/,da=/-([\da-z])/gi,na=function(b,a){return(a+"").toUpperCase()},Da=function(){J.addEventListener?(J.removeEventListener("DOMContentLoaded",Da,!1),k.ready()):"complete"===J.readyState&&(J.detachEvent("onreadystatechange",Da),k.ready())},ta={};k.fn=k.prototype={constructor:k,init:function(a,c,d){var e,f;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"==typeof a){"<"===a.charAt(0)&&
">"===a.charAt(a.length-1)&&3<=a.length?e=[null,a,null]:e=V.exec(a);if(e&&(e[1]||!c)){if(e[1])return c=c instanceof k?c[0]:c,f=c&&c.nodeType?c.ownerDocument||c:J,a=k.parseHTML(e[1],f,!0),S.test(e[1])&&k.isPlainObject(c)&&this.attr.call(a,c,!0),k.merge(this,a);if((c=J.getElementById(e[2]))&&c.parentNode){if(c.id!==e[2])return d.find(a);this.length=1;this[0]=c}return this.context=J,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return k.isFunction(a)?d.ready(a):(a.selector!==
b&&(this.selector=a.selector,this.context=a.context),k.makeArray(a,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return aa.call(this)},get:function(b){return null==b?this.toArray():0>b?this[this.length+b]:this[b]},pushStack:function(b,a,c){b=k.merge(this.constructor(),b);return b.prevObject=this,b.context=this.context,"find"===a?b.selector=this.selector+(this.selector?" ":"")+c:a&&(b.selector=this.selector+"."+a+"("+c+")"),b},each:function(b,a){return k.each(this,
b,a)},ready:function(b){return k.ready.promise().done(b),this},eq:function(b){return b=+b,-1===b?this.slice(b):this.slice(b,b+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(aa.apply(this,arguments),"slice",aa.call(arguments).join(","))},map:function(b){return this.pushStack(k.map(this,function(a,c){return b.call(a,c,a)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice};k.fn.init.prototype=
k.fn;k.extend=k.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},j=1,n=arguments.length,q=!1;"boolean"==typeof h&&(q=h,h=arguments[1]||{},j=2);"object"!=typeof h&&!k.isFunction(h)&&(h={});for(n===j&&(h=this,--j);j<n;j++)if(null!=(a=arguments[j]))for(c in a)d=h[c],e=a[c],h!==e&&(q&&e&&(k.isPlainObject(e)||(f=k.isArray(e)))?(f?(f=!1,g=d&&k.isArray(d)?d:[]):g=d&&k.isPlainObject(d)?d:{},h[c]=k.extend(q,g,e)):e!==b&&(h[c]=e));return h};k.extend({noConflict:function(b){return c.$===k&&(c.$=la),b&&
c.jQuery===k&&(c.jQuery=ha),k},isReady:!1,readyWait:1,holdReady:function(b){b?k.readyWait++:k.ready(!0)},ready:function(b){if(!(!0===b?--k.readyWait:k.isReady)){if(!J.body)return setTimeout(k.ready,1);k.isReady=!0;!0!==b&&0<--k.readyWait||(Q.resolveWith(J,[k]),k.fn.trigger&&k(J).trigger("ready").off("ready"))}},isFunction:function(b){return"function"===k.type(b)},isArray:Array.isArray||function(b){return"array"===k.type(b)},isWindow:function(b){return null!=b&&b==b.window},isNumeric:function(b){return!isNaN(parseFloat(b))&&
isFinite(b)},type:function(b){return null==b?String(b):ta[ba.call(b)]||"object"},isPlainObject:function(a){if(!a||"object"!==k.type(a)||a.nodeType||k.isWindow(a))return!1;try{if(a.constructor&&!oa.call(a,"constructor")&&!oa.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var d in a);return d===b||oa.call(a,d)},isEmptyObject:function(b){for(var a in b)return!1;return!0},error:function(b){throw Error(b);},parseHTML:function(b,a,c){var d;return!b||"string"!=typeof b?null:
("boolean"==typeof a&&(c=a,a=0),a=a||J,(d=S.exec(b))?[a.createElement(d[1])]:(d=k.buildFragment([b],a,c?null:[]),k.merge([],(d.cacheable?k.clone(d.fragment):d.fragment).childNodes)))},parseJSON:function(b){if(!b||"string"!=typeof b)return null;b=k.trim(b);if(c.JSON&&c.JSON.parse)return c.JSON.parse(b);if(ia.test(b.replace(za,"@").replace(sa,"]").replace(ma,"")))return(new Function("return "+b))();k.error("Invalid JSON: "+b)},parseXML:function(a){var d,e;if(!a||"string"!=typeof a)return null;try{c.DOMParser?
(e=new DOMParser,d=e.parseFromString(a,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(a))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&k.error("Invalid XML: "+a),d},noop:function(){},globalEval:function(b){b&&B.test(b)&&(c.execScript||function(b){c.eval.call(c,b)})(b)},camelCase:function(b){return b.replace(Aa,"ms-").replace(da,na)},nodeName:function(b,a){return b.nodeName&&b.nodeName.toLowerCase()===a.toLowerCase()},each:function(a,
c,d){var e,f=0,g=a.length,h=g===b||k.isFunction(a);if(d)if(h)for(e in a){if(!1===c.apply(a[e],d))break}else for(;f<g&&!1!==c.apply(a[f++],d););else if(h)for(e in a){if(!1===c.call(a[e],e,a[e]))break}else for(;f<g&&!1!==c.call(a[f],f,a[f++]););return a},trim:fa&&!fa.call("\ufeff\u00a0")?function(b){return null==b?"":fa.call(b)}:function(b){return null==b?"":(b+"").replace(P,"")},makeArray:function(b,a){var c,d=a||[];return null!=b&&(c=k.type(b),null==b.length||"string"===c||"function"===c||"regexp"===
c||k.isWindow(b)?Z.call(d,b):k.merge(d,b)),d},inArray:function(b,a,c){var d;if(a){if(ja)return ja.call(a,b,c);d=a.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in a&&a[c]===b)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;f<d;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(b,a,c){var d,e=[],f=0,g=b.length;for(c=!!c;f<g;f++)d=!!a(b[f],f),c!==d&&e.push(b[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,j=a.length;
if(a instanceof k||j!==b&&"number"==typeof j&&(0<j&&a[0]&&a[j-1]||0===j||k.isArray(a)))for(;h<j;h++)e=c(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),k.isFunction(a)?(e=aa.call(arguments,2),f=function(){return a.apply(c,e.concat(aa.call(arguments)))},f.guid=a.guid=a.guid||k.guid++,f):b},access:function(a,c,d,e,f,g,h){var j,n=null==d,q=0,m=a.length;
if(d&&"object"==typeof d){for(q in d)k.access(a,c,q,d[q],1,g,e);f=1}else if(e!==b){j=h===b&&k.isFunction(e);n&&(j?(j=c,c=function(b,a,c){return j.call(k(b),c)}):(c.call(a,e),c=null));if(c)for(;q<m;q++)c(a[q],d,j?e.call(a[q],q,c(a[q],d)):e,h);f=1}return f?a:n?c.call(a):m?c(a[0],d):g},now:function(){return(new Date).getTime()}});k.ready.promise=function(b){if(!Q)if(Q=k.Deferred(),"complete"===J.readyState)setTimeout(k.ready,1);else if(J.addEventListener)J.addEventListener("DOMContentLoaded",Da,!1),
c.addEventListener("load",k.ready,!1);else{J.attachEvent("onreadystatechange",Da);c.attachEvent("onload",k.ready);var a=!1;try{a=null==c.frameElement&&J.documentElement}catch(d){}a&&a.doScroll&&function Fc(){if(!k.isReady){try{a.doScroll("left")}catch(b){return setTimeout(Fc,50)}k.ready()}}()}return Q.promise(b)};k.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b,a){ta["[object "+a+"]"]=a.toLowerCase()});N=k(J);var qa={};k.Callbacks=function(a){var c;if("string"==
typeof a){if(!(c=qa[a])){c=a;var d=qa[c]={};c=(k.each(c.split(M),function(b,a){d[a]=!0}),d)}}else c=k.extend({},a);a=c;var e,f,g,h,j,n,q=[],m=!a.once&&[],B=function(b){e=a.memory&&b;f=!0;n=h||0;h=0;j=q.length;for(g=!0;q&&n<j;n++)if(!1===q[n].apply(b[0],b[1])&&a.stopOnFalse){e=!1;break}g=!1;q&&(m?m.length&&B(m.shift()):e?q=[]:r.disable())},r={add:function(){if(q){var b=q.length;(function Jc(b){k.each(b,function(b,c){var d=k.type(c);"function"===d?(!a.unique||!r.has(c))&&q.push(c):c&&c.length&&"string"!==
d&&Jc(c)})})(arguments);g?j=q.length:e&&(h=b,B(e))}return this},remove:function(){return q&&k.each(arguments,function(b,a){for(var c;-1<(c=k.inArray(a,q,c));)q.splice(c,1),g&&(c<=j&&j--,c<=n&&n--)}),this},has:function(b){return-1<k.inArray(b,q)},empty:function(){return q=[],this},disable:function(){return q=m=e=b,this},disabled:function(){return!q},lock:function(){return m=b,e||r.disable(),this},locked:function(){return!m},fireWith:function(b,a){return a=a||[],a=[b,a.slice?a.slice():a],q&&(!f||m)&&
(g?m.push(a):B(a)),this},fire:function(){return r.fireWith(this,arguments),this},fired:function(){return!!f}};return r};k.extend({Deferred:function(b){var a=[["resolve","done",k.Callbacks("once memory"),"resolved"],["reject","fail",k.Callbacks("once memory"),"rejected"],["notify","progress",k.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var b=arguments;return k.Deferred(function(c){k.each(a,function(a,
d){var f=d[0],g=b[a];e[d[1]](k.isFunction(g)?function(){var b=g.apply(this,arguments);b&&k.isFunction(b.promise)?b.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[b])}:c[f])});b=null}).promise()},promise:function(b){return null!=b?k.extend(b,d):d}},e={};return d.pipe=d.then,k.each(a,function(b,f){var g=f[2],h=f[3];d[f[1]]=g.add;h&&g.add(function(){c=h},a[b^1][2].disable,a[2][2].lock);e[f[0]]=g.fire;e[f[0]+"With"]=g.fireWith}),d.promise(e),b&&b.call(e,e),e},
when:function(b){var a=0,c=aa.call(arguments),d=c.length,e=1!==d||b&&k.isFunction(b.promise)?d:0,f=1===e?b:k.Deferred(),g=function(b,a,c){return function(d){a[b]=this;c[b]=1<arguments.length?aa.call(arguments):d;c===h?f.notifyWith(a,c):--e||f.resolveWith(a,c)}},h,j,n;if(1<d){h=Array(d);j=Array(d);for(n=Array(d);a<d;a++)c[a]&&k.isFunction(c[a].promise)?c[a].promise().done(g(a,n,c)).fail(f.reject).progress(g(a,j,h)):--e}return e||f.resolveWith(n,c),f.promise()}});var Ba=k,ua;var W,Fa,Ga,ib,jb,ea,xa,
Ha,Ab,va,$a,Y=J.createElement("div");Y.setAttribute("className","t");Y.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";Fa=Y.getElementsByTagName("*");Ga=Y.getElementsByTagName("a")[0];if(!Fa||!Ga||!Fa.length)ua={};else{ib=J.createElement("select");jb=ib.appendChild(J.createElement("option"));ea=Y.getElementsByTagName("input")[0];Ga.style.cssText="top:1px;float:left;opacity:.5";W={leadingWhitespace:3===Y.firstChild.nodeType,tbody:!Y.getElementsByTagName("tbody").length,
htmlSerialize:!!Y.getElementsByTagName("link").length,style:/top/.test(Ga.getAttribute("style")),hrefNormalized:"/a"===Ga.getAttribute("href"),opacity:/^0.5/.test(Ga.style.opacity),cssFloat:!!Ga.style.cssFloat,checkOn:"on"===ea.value,optSelected:jb.selected,getSetAttribute:"t"!==Y.className,enctype:!!J.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==J.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===J.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,
noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};ea.checked=!0;W.noCloneChecked=ea.cloneNode(!0).checked;ib.disabled=!0;W.optDisabled=!jb.disabled;try{delete Y.test}catch(Hd){W.deleteExpando=!1}!Y.addEventListener&&Y.attachEvent&&Y.fireEvent&&(Y.attachEvent("onclick",$a=function(){W.noCloneEvent=!1}),Y.cloneNode(!0).fireEvent("onclick"),Y.detachEvent("onclick",$a));ea=J.createElement("input");ea.value="t";ea.setAttribute("type",
"radio");W.radioValue="t"===ea.value;ea.setAttribute("checked","checked");ea.setAttribute("name","t");Y.appendChild(ea);xa=J.createDocumentFragment();xa.appendChild(Y.lastChild);W.checkClone=xa.cloneNode(!0).cloneNode(!0).lastChild.checked;W.appendChecked=ea.checked;xa.removeChild(ea);xa.appendChild(Y);if(Y.attachEvent)for(Ab in{submit:!0,change:!0,focusin:!0})Ha="on"+Ab,(va=Ha in Y)||(Y.setAttribute(Ha,"return;"),va="function"==typeof Y[Ha]),W[Ab+"Bubbles"]=va;ua=(k(function(){var b,a,d,e,f=J.getElementsByTagName("body")[0];
f&&(b=J.createElement("div"),b.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",f.insertBefore(b,f.firstChild),a=J.createElement("div"),b.appendChild(a),a.innerHTML="<table><tr><td></td><td>t</td></tr></table>",d=a.getElementsByTagName("td"),d[0].style.cssText="padding:0;margin:0;border:0;display:none",va=0===d[0].offsetHeight,d[0].style.display="",d[1].style.display="none",W.reliableHiddenOffsets=va&&0===d[0].offsetHeight,a.innerHTML="",a.style.cssText=
"box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",W.boxSizing=4===a.offsetWidth,W.doesNotIncludeMarginInBodyOffset=1!==f.offsetTop,c.getComputedStyle&&(W.pixelPosition="1%"!==(c.getComputedStyle(a,null)||{}).top,W.boxSizingReliable="4px"===(c.getComputedStyle(a,null)||{width:"4px"}).width,e=J.createElement("div"),e.style.cssText=a.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",
e.style.marginRight=e.style.width="0",a.style.width="1px",a.appendChild(e),W.reliableMarginRight=!parseFloat((c.getComputedStyle(e,null)||{}).marginRight)),"undefined"!=typeof a.style.zoom&&(a.innerHTML="",a.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",W.inlineBlockNeedsLayout=3===a.offsetWidth,a.style.display="block",a.style.overflow="visible",a.innerHTML="<div></div>",a.firstChild.style.width="5px",W.shrinkWrapBlocks=3!==a.offsetWidth,
b.style.zoom=1),f.removeChild(b))}),xa.removeChild(Y),Fa=Ga=ib=jb=ea=xa=Y=null,W)}Ba.support=ua;var Ec=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Dc=/([A-Z])/g;k.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(k.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(b){return b=b.nodeType?k.cache[b[k.expando]]:b[k.expando],!!b&&!d(b)},data:function(a,c,d,e){if(k.acceptData(a)){var f,g,h=k.expando,j="string"==typeof c,
n=a.nodeType,q=n?k.cache:a,m=n?a[h]:a[h]&&h;if(m&&q[m]&&(e||q[m].data)||!(j&&d===b)){m||(n?a[h]=m=k.deletedIds.pop()||k.guid++:m=h);q[m]||(q[m]={},n||(q[m].toJSON=k.noop));if("object"==typeof c||"function"==typeof c)e?q[m]=k.extend(q[m],c):q[m].data=k.extend(q[m].data,c);return f=q[m],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[k.camelCase(c)]=d),j?(g=f[c],null==g&&(g=f[k.camelCase(c)])):g=f,g}}},removeData:function(b,a,c){if(k.acceptData(b)){var e,f,g,h=b.nodeType,j=h?k.cache:b,n=h?b[k.expando]:
k.expando;if(j[n]){if(a&&(e=c?j[n]:j[n].data)){k.isArray(a)||(a in e?a=[a]:(a=k.camelCase(a),a in e?a=[a]:a=a.split(" ")));f=0;for(g=a.length;f<g;f++)delete e[a[f]];if(!(c?d:k.isEmptyObject)(e))return}if(!c&&(delete j[n].data,!d(j[n])))return;h?k.cleanData([b],!0):k.support.deleteExpando||j!=j.window?delete j[n]:j[n]=null}}},_data:function(b,a,c){return k.data(b,a,c,!0)},acceptData:function(b){var a=b.nodeName&&k.noData[b.nodeName.toLowerCase()];return!a||!0!==a&&b.getAttribute("classid")===a}});
k.fn.extend({data:function(c,d){var e,f,g,h,j,n=this[0],q=0,m=null;if(c===b){if(this.length&&(m=k.data(n),1===n.nodeType&&!k._data(n,"parsedAttrs"))){g=n.attributes;for(j=g.length;q<j;q++)h=g[q].name,h.indexOf("data-")||(h=k.camelCase(h.substring(5)),a(n,h,m[h]));k._data(n,"parsedAttrs",!0)}return m}return"object"==typeof c?this.each(function(){k.data(this,c)}):(e=c.split(".",2),e[1]=e[1]?"."+e[1]:"",f=e[1]+"!",k.access(this,function(d){if(d===b)return m=this.triggerHandler("getData"+f,[e[0]]),m===
b&&n&&(m=k.data(n,c),m=a(n,c,m)),m===b&&e[1]?this.data(e[0]):m;e[1]=d;this.each(function(){var b=k(this);b.triggerHandler("setData"+f,e);k.data(this,c,d);b.triggerHandler("changeData"+f,e)})},null,d,1<arguments.length,null,!1))},removeData:function(b){return this.each(function(){k.removeData(this,b)})}});k.extend({queue:function(b,a,c){var d;if(b)return a=(a||"fx")+"queue",d=k._data(b,a),c&&(!d||k.isArray(c)?d=k._data(b,a,k.makeArray(c)):d.push(c)),d||[]},dequeue:function(b,a){a=a||"fx";var c=k.queue(b,
a),d=c.length,e=c.shift(),f=k._queueHooks(b,a),g=function(){k.dequeue(b,a)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===a&&c.unshift("inprogress"),delete f.stop,e.call(b,g,f));!d&&f&&f.empty.fire()},_queueHooks:function(b,a){var c=a+"queueHooks";return k._data(b,c)||k._data(b,c,{empty:k.Callbacks("once memory").add(function(){k.removeData(b,a+"queue",!0);k.removeData(b,c,!0)})})}});k.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?k.queue(this[0],
a):c===b?this:this.each(function(){var b=k.queue(this,a,c);k._queueHooks(this,a);"fx"===a&&"inprogress"!==b[0]&&k.dequeue(this,a)})},dequeue:function(b){return this.each(function(){k.dequeue(this,b)})},delay:function(b,a){return b=k.fx?k.fx.speeds[b]||b:b,a=a||"fx",this.queue(a,function(a,c){var d=setTimeout(a,b);c.stop=function(){clearTimeout(d)}})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(a,c){var d,e=1,f=k.Deferred(),g=this,h=this.length,j=function(){--e||f.resolveWith(g,
[g])};"string"!=typeof a&&(c=a,a=b);for(a=a||"fx";h--;)(d=k._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(j));return j(),f.promise(c)}});var pa,Zb,ab,Ea=/[\t\r\n]/g,Ta=/\r/g,Ua=/^(?:button|input)$/i,Va=/^(?:button|input|object|select|textarea)$/i,kb=/^a(?:rea|)$/i,Bb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,$b=k.support.getSetAttribute;k.fn.extend({attr:function(b,a){return k.access(this,k.attr,b,a,1<arguments.length)},
removeAttr:function(b){return this.each(function(){k.removeAttr(this,b)})},prop:function(b,a){return k.access(this,k.prop,b,a,1<arguments.length)},removeProp:function(a){return a=k.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(b){var a,c,d,e,f,g,h;if(k.isFunction(b))return this.each(function(a){k(this).addClass(b.call(this,a,this.className))});if(b&&"string"==typeof b){a=b.split(M);c=0;for(d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(!e.className&&
1===a.length)e.className=b;else{f=" "+e.className+" ";g=0;for(h=a.length;g<h;g++)0>f.indexOf(" "+a[g]+" ")&&(f+=a[g]+" ");e.className=k.trim(f)}}return this},removeClass:function(a){var c,d,e,f,g,h,j;if(k.isFunction(a))return this.each(function(b){k(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b){c=(a||"").split(M);h=0;for(j=this.length;h<j;h++)if(e=this[h],1===e.nodeType&&e.className){d=(" "+e.className+" ").replace(Ea," ");f=0;for(g=c.length;f<g;f++)for(;0<=d.indexOf(" "+
c[f]+" ");)d=d.replace(" "+c[f]+" "," ");e.className=a?k.trim(d):""}}return this},toggleClass:function(b,a){var c=typeof b,d="boolean"==typeof a;return k.isFunction(b)?this.each(function(c){k(this).toggleClass(b.call(this,c,this.className,a),a)}):this.each(function(){if("string"===c)for(var e,f=0,g=k(this),h=a,j=b.split(M);e=j[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else if("undefined"===c||"boolean"===c)this.className&&k._data(this,"__className__",this.className),this.className=
this.className||!1===b?"":k._data(this,"__className__")||""})},hasClass:function(b){b=" "+b+" ";for(var a=0,c=this.length;a<c;a++)if(1===this[a].nodeType&&0<=(" "+this[a].className+" ").replace(Ea," ").indexOf(b))return!0;return!1},val:function(a){var c,d,e,f=this[0];if(arguments.length)return e=k.isFunction(a),this.each(function(d){var f,g=k(this);if(1===this.nodeType&&(e?f=a.call(this,d,g.val()):f=a,null==f?f="":"number"==typeof f?f+="":k.isArray(f)&&(f=k.map(f,function(b){return null==b?"":b+""})),
c=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()],!c||!("set"in c)||c.set(this,f,"value")===b))this.value=f});if(f)return c=k.valHooks[f.type]||k.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(Ta,""):null==d?"":d)}});k.extend({valHooks:{option:{get:function(b){var a=b.attributes.value;return!a||a.specified?b.value:b.text}},select:{get:function(b){for(var a,c=b.options,d=b.selectedIndex,e=(b="select-one"===b.type||
0>d)?null:[],f=b?d+1:c.length,g=0>d?f:b?d:0;g<f;g++)if(a=c[g],(a.selected||g===d)&&(k.support.optDisabled?!a.disabled:null===a.getAttribute("disabled"))&&(!a.parentNode.disabled||!k.nodeName(a.parentNode,"optgroup"))){a=k(a).val();if(b)return a;e.push(a)}return e},set:function(b,a){var c=k.makeArray(a);return k(b).find("option").each(function(){this.selected=0<=k.inArray(k(this).val(),c)}),c.length||(b.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h=a.nodeType;if(a&&!(3===h||8===
h||2===h)){if(e&&k.isFunction(k.fn[c]))return k(a)[c](d);if("undefined"==typeof a.getAttribute)return k.prop(a,c,d);(e=1!==h||!k.isXMLDoc(a))&&(c=c.toLowerCase(),g=k.attrHooks[c]||(Bb.test(c)?Zb:pa));if(d!==b){if(null===d){k.removeAttr(a,c);return}return g&&"set"in g&&e&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d)}return g&&"get"in g&&e&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f)}},removeAttr:function(b,a){var c,d,e,f,g=0;if(a&&1===b.nodeType)for(d=a.split(M);g<d.length;g++)(e=
d[g])&&(c=k.propFix[e]||e,f=Bb.test(e),f||k.attr(b,e,""),b.removeAttribute($b?e:c),f&&c in b&&(b[c]=!1))},attrHooks:{type:{set:function(b,a){if(Ua.test(b.nodeName)&&b.parentNode)k.error("type property can't be changed");else if(!k.support.radioValue&&"radio"===a&&k.nodeName(b,"input")){var c=b.value;return b.setAttribute("type",a),c&&(b.value=c),a}}},value:{get:function(b,a){return pa&&k.nodeName(b,"button")?pa.get(b,a):a in b?b.value:null},set:function(b,a,c){if(pa&&k.nodeName(b,"button"))return pa.set(b,
a,c);b.value=a}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&!(3===h||8===h||2===h))return g=1!==h||!k.isXMLDoc(a),g&&(c=k.propFix[c]||c,f=k.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==
(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Va.test(a.nodeName)||kb.test(a.nodeName)&&a.href?0:b}}}});Zb={get:function(a,c){var d,e=k.prop(a,c);return!0===e||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():b},set:function(b,a,c){var d;return!1===a?k.removeAttr(b,c):(d=k.propFix[c]||c,d in b&&(b[d]=!0),b.setAttribute(c,c.toLowerCase())),c}};$b||(ab={name:!0,id:!0,coords:!0},
pa=k.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(ab[c]?""!==d.value:d.specified)?d.value:b},set:function(b,a,c){var d=b.getAttributeNode(c);return d||(d=J.createAttribute(c),b.setAttributeNode(d)),d.value=a+""}},k.each(["width","height"],function(b,a){k.attrHooks[a]=k.extend(k.attrHooks[a],{set:function(b,c){if(""===c)return b.setAttribute(a,"auto"),c}})}),k.attrHooks.contenteditable={get:pa.get,set:function(b,a,c){""===a&&(a="false");pa.set(b,a,c)}});k.support.hrefNormalized||
k.each(["href","src","width","height"],function(a,c){k.attrHooks[c]=k.extend(k.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return null===a?b:a}})});k.support.style||(k.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(b,a){return b.style.cssText=a+""}});k.support.optSelected||(k.propHooks.selected=k.extend(k.propHooks.selected,{get:function(b){b=b.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}));k.support.enctype||
(k.propFix.enctype="encoding");k.support.checkOn||k.each(["radio","checkbox"],function(){k.valHooks[this]={get:function(b){return null===b.getAttribute("value")?"on":b.value}}});k.each(["radio","checkbox"],function(){k.valHooks[this]=k.extend(k.valHooks[this],{set:function(b,a){if(k.isArray(a))return b.checked=0<=k.inArray(k(b).val(),a)}})});var Cb=/^(?:textarea|input|select)$/i,ac=/^([^\.]*|)(?:\.(.+)|)$/,Kc=/(?:^|\s)hover(\.\S+|)\b/,Lc=/^key/,Mc=/^(?:mouse|contextmenu)|click/,bc=/^(?:focusinfocus|focusoutblur)$/,
cc=function(b){return k.event.special.hover?b:b.replace(Kc,"mouseenter$1 mouseleave$1")};k.event={add:function(a,c,d,e,f){var g,h,j,n,q,m,B,r,p;if(!(3===a.nodeType||8===a.nodeType||!c||!d||!(g=k._data(a)))){d.handler&&(B=d,d=B.handler,f=B.selector);d.guid||(d.guid=k.guid++);(j=g.events)||(g.events=j={});(h=g.handle)||(g.handle=h=function(a){return"undefined"==typeof k||a&&k.event.triggered===a.type?b:k.event.dispatch.apply(h.elem,arguments)},h.elem=a);c=k.trim(cc(c)).split(" ");for(g=0;g<c.length;g++){n=
ac.exec(c[g])||[];q=n[1];m=(n[2]||"").split(".").sort();p=k.event.special[q]||{};q=(f?p.delegateType:p.bindType)||q;p=k.event.special[q]||{};n=k.extend({type:q,origType:n[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&k.expr.match.needsContext.test(f),namespace:m.join(".")},B);r=j[q];if(!r&&(r=j[q]=[],r.delegateCount=0,!p.setup||!1===p.setup.call(a,e,m,h)))a.addEventListener?a.addEventListener(q,h,!1):a.attachEvent&&a.attachEvent("on"+q,h);p.add&&(p.add.call(a,n),n.handler.guid||(n.handler.guid=
d.guid));f?r.splice(r.delegateCount++,0,n):r.push(n);k.event.global[q]=!0}a=null}},global:{},remove:function(b,a,c,d,e){var f,g,h,j,n,q,m,B,r,p,u=k.hasData(b)&&k._data(b);if(u&&(m=u.events)){a=k.trim(cc(a||"")).split(" ");for(f=0;f<a.length;f++)if(g=ac.exec(a[f])||[],h=j=g[1],g=g[2],h){B=k.event.special[h]||{};h=(d?B.delegateType:B.bindType)||h;r=m[h]||[];n=r.length;g=g?RegExp("(^|\\.)"+g.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(q=0;q<r.length;q++)p=r[q],(e||j===p.origType)&&(!c||
c.guid===p.guid)&&(!g||g.test(p.namespace))&&(!d||d===p.selector||"**"===d&&p.selector)&&(r.splice(q--,1),p.selector&&r.delegateCount--,B.remove&&B.remove.call(b,p));0===r.length&&n!==r.length&&((!B.teardown||!1===B.teardown.call(b,g,u.handle))&&k.removeEvent(b,h,u.handle),delete m[h])}else for(h in m)k.event.remove(b,h+a[f],c,d,!0);k.isEmptyObject(m)&&(delete u.handle,k.removeData(b,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(a,d,e,f){if(!e||3!==e.nodeType&&
8!==e.nodeType){var g,h,j,n,q,m,B,r=a.type||a;n=[];if(!bc.test(r+k.event.triggered)&&(0<=r.indexOf("!")&&(r=r.slice(0,-1),g=!0),0<=r.indexOf(".")&&(n=r.split("."),r=n.shift(),n.sort()),e&&!k.event.customEvent[r]||k.event.global[r]))if(a="object"==typeof a?a[k.expando]?a:new k.Event(r,a):new k.Event(r),a.type=r,a.isTrigger=!0,a.exclusive=g,a.namespace=n.join("."),a.namespace_re=a.namespace?RegExp("(^|\\.)"+n.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n=0>r.indexOf(":")?"on"+r:"",e){if(a.result=b,a.target||
(a.target=e),d=null!=d?k.makeArray(d):[],d.unshift(a),q=k.event.special[r]||{},!(q.trigger&&!1===q.trigger.apply(e,d))){B=[[e,q.bindType||r]];if(!f&&!q.noBubble&&!k.isWindow(e)){h=q.delegateType||r;g=bc.test(h+r)?e:e.parentNode;for(j=e;g;g=g.parentNode)B.push([g,h]),j=g;j===(e.ownerDocument||J)&&B.push([j.defaultView||j.parentWindow||c,h])}for(h=0;h<B.length&&!a.isPropagationStopped();h++)g=B[h][0],a.type=B[h][1],(m=(k._data(g,"events")||{})[a.type]&&k._data(g,"handle"))&&m.apply(g,d),(m=n&&g[n])&&
k.acceptData(g)&&m.apply&&!1===m.apply(g,d)&&a.preventDefault();return a.type=r,!f&&!a.isDefaultPrevented()&&(!q._default||!1===q._default.apply(e.ownerDocument,d))&&("click"!==r||!k.nodeName(e,"a"))&&k.acceptData(e)&&n&&e[r]&&("focus"!==r&&"blur"!==r||0!==a.target.offsetWidth)&&!k.isWindow(e)&&(j=e[n],j&&(e[n]=null),k.event.triggered=r,e[r](),k.event.triggered=b,j&&(e[n]=j)),a.result}}else for(h in e=k.cache,e)e[h].events&&e[h].events[r]&&k.event.trigger(a,d,e[h].handle.elem,!0)}},dispatch:function(a){a=
k.event.fix(a||c.event);var d,e,f,g,h,j,n=(k._data(this,"events")||{})[a.type]||[],q=n.delegateCount,m=aa.call(arguments),r=!a.exclusive&&!a.namespace,B=k.event.special[a.type]||{},p=[];m[0]=a;a.delegateTarget=this;if(!(B.preDispatch&&!1===B.preDispatch.call(this,a))){if(q&&(!a.button||"click"!==a.type))for(e=a.target;e!=this;e=e.parentNode||this)if(!0!==e.disabled||"click"!==a.type){g={};h=[];for(d=0;d<q;d++)f=n[d],j=f.selector,g[j]===b&&(g[j]=f.needsContext?0<=k(j,this).index(e):k.find(j,this,null,
[e]).length),g[j]&&h.push(f);h.length&&p.push({elem:e,matches:h})}n.length>q&&p.push({elem:this,matches:n.slice(q)});for(d=0;d<p.length&&!a.isPropagationStopped();d++){g=p[d];a.currentTarget=g.elem;for(e=0;e<g.matches.length&&!a.isImmediatePropagationStopped();e++)if(f=g.matches[e],r||!a.namespace&&!f.namespace||a.namespace_re&&a.namespace_re.test(f.namespace))a.data=f.data,a.handleObj=f,f=((k.event.special[f.origType]||{}).handle||f.handler).apply(g.elem,m),f!==b&&(a.result=f,!1===f&&(a.preventDefault(),
a.stopPropagation()))}return B.postDispatch&&B.postDispatch.call(this,a),a.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||J,e=d.documentElement,f=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),!a.which&&g!==b&&(a.which=g&1?1:g&2?3:g&4?2:0),a}},fix:function(a){if(a[k.expando])return a;var b,
c,d=a,e=k.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;a=k.Event(d);for(b=f.length;b;)c=f[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||J),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){k.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=
null)}}},simulate:function(a,b,c,d){a=k.extend(new k.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?k.event.trigger(a,null,b):k.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};k.event.handle=k.event.dispatch;k.removeEvent=J.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&("undefined"==typeof a[b]&&(a[b]=null),a.detachEvent(b,c))};k.Event=function(a,b){if(!(this instanceof k.Event))return new k.Event(a,
b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?f:e):this.type=a;b&&k.extend(this,b);this.timeStamp=a&&a.timeStamp||k.now();this[k.expando]=!0};k.Event.prototype={preventDefault:function(){this.isDefaultPrevented=f;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=f;var a=this.originalEvent;a&&(a.stopPropagation&&
a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=f;this.stopPropagation()},isDefaultPrevented:e,isPropagationStopped:e,isImmediatePropagationStopped:e};k.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){k.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,e=a.handleObj;if(!d||d!==this&&!k.contains(this,d))a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b;return c}}});k.support.submitBubbles||
(k.event.special.submit={setup:function(){if(k.nodeName(this,"form"))return!1;k.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=k.nodeName(a,"input")||k.nodeName(a,"button")?a.form:b)&&!k._data(a,"_submit_attached")&&(k.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),k._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&k.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(k.nodeName(this,
"form"))return!1;k.event.remove(this,"._submit")}});k.support.changeBubbles||(k.event.special.change={setup:function(){if(Cb.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)k.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),k.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);k.event.simulate("change",this,a,!0)});return!1}k.event.add(this,"beforeactivate._change",
function(a){a=a.target;Cb.test(a.nodeName)&&!k._data(a,"_change_attached")&&(k.event.add(a,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&k.event.simulate("change",this.parentNode,a,!0)}),k._data(a,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){return k.event.remove(this,"._change"),!Cb.test(this.nodeName)}});
k.support.focusinBubbles||k.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){k.event.simulate(b,a.target,k.event.fix(a),!0)};k.event.special[b]={setup:function(){0===c++&&J.addEventListener(a,d,!0)},teardown:function(){0===--c&&J.removeEventListener(a,d,!0)}}});k.fn.extend({on:function(a,c,d,f,g){var h,j;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(j in a)this.on(j,c,d,a[j],g);return this}null==d&&null==f?(f=c,d=c=b):null==f&&("string"==typeof c?(f=d,d=b):
(f=d,d=c,c=b));if(!1===f)f=e;else if(!f)return this;return 1===g&&(h=f,f=function(a){return k().off(a),h.apply(this,arguments)},f.guid=h.guid||(h.guid=k.guid++)),this.each(function(){k.event.add(this,a,f,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var f,g;if(a&&a.preventDefault&&a.handleObj)return f=a.handleObj,k(a.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if("object"==typeof a){for(g in a)this.off(g,c,a[g]);return this}if(!1===
c||"function"==typeof c)d=c,c=b;return!1===d&&(d=e),this.each(function(){k.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return k(this.context).on(a,this.selector,b,c),this},die:function(a,b){return k(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,
b){return this.each(function(){k.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return k.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||k.guid++,d=0,e=function(c){var e=(k._data(this,"lastToggle"+a.guid)||0)%d;return k._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});k.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
function(a,b){k.fn[b]=function(a,c){return null==c&&(c=a,a=null),0<arguments.length?this.on(b,null,a,c):this.trigger(b)};Lc.test(b)&&(k.event.fixHooks[b]=k.event.keyHooks);Mc.test(b)&&(k.event.fixHooks[b]=k.event.mouseHooks)});var Nc=c,X=function(a,b,c,d){c=c||[];b=b||Ca;var e,f,g,h,j=b.nodeType;if(!a||"string"!=typeof a)return c;if(1!==j&&9!==j)return[];g=lb(b);if(!g&&!d&&(e=Oc.exec(a)))if(h=e[1])if(9===j){f=b.getElementById(h);if(!f||!f.parentNode)return c;if(f.id===h)return c.push(f),c}else{if(b.ownerDocument&&
(f=b.ownerDocument.getElementById(h))&&dc(b,f)&&f.id===h)return c.push(f),c}else{if(e[2])return Wa.apply(c,Xa.call(b.getElementsByTagName(a),0)),c;if((h=e[3])&&ec&&b.getElementsByClassName)return Wa.apply(c,Xa.call(b.getElementsByClassName(h),0)),c}return Db(a.replace(mb,"$1"),b,c,d,g)},bb=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}},fc=function(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}},Ma=function(a){return ya(function(b){return b=
+b,ya(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})},nb=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1},pb=function(a,b){var c,d,e,f,g,h,j;if(g=gc[ga][a+" "])return b?0:g.slice(0);g=a;h=[];for(j=ca.preFilter;g;){if(!c||(d=Pc.exec(g)))d&&(g=g.slice(d[0].length)||g),h.push(e=[]);c=!1;if(d=Qc.exec(g))e.push(c=new hc(d.shift())),g=g.slice(c.length),c.type=d[0].replace(mb," ");for(f in ca.filter)(d=ob[f].exec(g))&&
(!j[f]||(d=j[f](d)))&&(e.push(c=new hc(d.shift())),g=g.slice(c.length),c.type=f,c.matches=d);if(!c)break}return b?g.length:g?X.error(a):gc(a,h).slice(0)},Fb=function(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,f=Rc++;return b.first?function(b,c,f){for(;b=b[d];)if(e||1===b.nodeType)return a(b,c,f)}:function(b,c,g){if(g)for(;b=b[d];){if((e||1===b.nodeType)&&a(b,c,g))return b}else for(var h,j=db+" "+f+" ",n=j+Eb;b=b[d];)if(e||1===b.nodeType){if((h=b[ga])===n)return b.sizset;if("string"==typeof h&&0===
h.indexOf(j)){if(b.sizset)return b}else{b[ga]=n;if(a(b,c,g))return b.sizset=!0,b;b.sizset=!1}}}},Gb=function(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]},qb=function(a,b,c,d,e){for(var f,g=[],h=0,j=a.length,n=null!=b;h<j;h++)if(f=a[h])if(!c||c(f,d,e))g.push(f),n&&b.push(h);return g},Hb=function(a,b,c,d,e,f){return d&&!d[ga]&&(d=Hb(d)),e&&!e[ga]&&(e=Hb(e,f)),ya(function(f,g,h,j){var n,q,k=[],m=[],r=g.length,B;if(!(B=f)){B=b||"*";for(var p=h.nodeType?
[h]:h,u=[],x=0,V=p.length;x<V;x++)X(B,p[x],u);B=u}B=a&&(f||!b)?qb(B,k,a,h,j):B;p=c?e||(f?a:r||d)?[]:g:B;c&&c(B,p,h,j);if(d){n=qb(p,m);d(n,[],h,j);for(h=n.length;h--;)if(q=n[h])p[m[h]]=!(B[m[h]]=q)}if(f){if(e||a){if(e){n=[];for(h=p.length;h--;)(q=p[h])&&n.push(B[h]=q);e(null,p=[],n,j)}for(h=p.length;h--;)(q=p[h])&&-1<(n=e?Ib.call(f,q):k[h])&&(f[n]=!(g[n]=q))}}else p=qb(p===g?p.splice(r,p.length):p),e?e(null,g,p,j):Wa.apply(g,p)})},Jb=function(a){var b,c,d,e=a.length,f=ca.relative[a[0].type];c=f||ca.relative[" "];
for(var g=f?1:0,h=Fb(function(a){return a===b},c,!0),j=Fb(function(a){return-1<Ib.call(b,a)},c,!0),n=[function(a,c,d){return!f&&(d||c!==rb)||((b=c).nodeType?h(a,c,d):j(a,c,d))}];g<e;g++)if(c=ca.relative[a[g].type])n=[Fb(Gb(n),c)];else{c=ca.filter[a[g].type].apply(null,a[g].matches);if(c[ga]){for(d=++g;d<e&&!ca.relative[a[d].type];d++);return Hb(1<g&&Gb(n),1<g&&a.slice(0,g-1).join("").replace(mb,"$1"),c,g<d&&Jb(a.slice(g,d)),d<e&&Jb(a=a.slice(d)),d<e&&a.join(""))}n.push(c)}return Gb(n)},Db=function(a,
b,c,d,e){var f,g,h,j,n=pb(a);if(!d&&1===n.length){g=n[0]=n[0].slice(0);if(2<g.length&&"ID"===(h=g[0]).type&&9===b.nodeType&&!e&&ca.relative[g[1].type]){b=ca.find.ID(h.matches[0].replace(Na,""),b,e)[0];if(!b)return c;a=a.slice(g.shift().length)}for(f=ob.POS.test(a)?-1:g.length-1;0<=f;f--){h=g[f];if(ca.relative[j=h.type])break;if(j=ca.find[j])if(d=j(h.matches[0].replace(Na,""),Kb.test(g[0].type)&&b.parentNode||b,e)){g.splice(f,1);a=d.length&&g.join("");if(!a)return Wa.apply(c,Xa.call(d,0)),c;break}}}return Lb(a,
n)(d,b,e,c,Kb.test(a)),c},ic=function(){},Eb,Mb,ca,sb,lb,dc,Lb,Nb,eb,rb,jc=!0,ga=("sizcache"+Math.random()).replace(".",""),hc=String,Ca=Nc.document,wa=Ca.documentElement,db=0,Rc=0,Sc=[].pop,Wa=[].push,Xa=[].slice,Ib=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},ya=function(a,b){return a[ga]=null==b||b,a},Ob=function(){var a={},b=[];return ya(function(c,d){return b.push(c)>ca.cacheLength&&delete a[b.shift()],a[c+" "]=d},a)},kc=Ob(),gc=Ob(),lc=Ob(),mc=
"\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",Pb=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+mc+")|[^:]|\\\\.)*|.*))\\)|)",mb=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),Pc=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Qc=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,
Tc=RegExp(Pb),Oc=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Kb=/[\x20\t\r\n\f]*[+~]/,Uc=/h\d/i,Vc=/input|select|textarea|button/i,Na=/\\(?!\\)/g,ob={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+mc),PSEUDO:RegExp("^"+Pb),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)",
"i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Ia=function(a){var b=Ca.createElement("div");try{return a(b)}catch(c){return!1}finally{}},Wc=Ia(function(a){return a.appendChild(Ca.createComment("")),!a.getElementsByTagName("*").length}),Xc=Ia(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),
Yc=Ia(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),ec=Ia(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!a.getElementsByClassName||!a.getElementsByClassName("e").length?!1:(a.lastChild.className="e",2===a.getElementsByClassName("e").length)}),Zc=Ia(function(a){a.id=ga+0;a.innerHTML="<a name='"+ga+"'></a><div name='"+ga+"'></div>";wa.insertBefore(a,wa.firstChild);var b=Ca.getElementsByName&&
Ca.getElementsByName(ga).length===2+Ca.getElementsByName(ga+0).length;return Mb=!Ca.getElementById(ga),wa.removeChild(a),b});try{Xa.call(wa.childNodes,0)[0].nodeType}catch(Id){Xa=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}X.matches=function(a,b){return X(a,null,null,b)};X.matchesSelector=function(a,b){return 0<X(b,null,null,[a]).length};sb=X.getText=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=
a.nextSibling)c+=sb(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[d];d++)c+=sb(b);return c};lb=X.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};dc=X.contains=wa.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||!(1===d.nodeType&&c.contains&&c.contains(d)))}:wa.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;
return!1};X.attr=function(a,b){var c,d=lb(a);return d||(b=b.toLowerCase()),(c=ca.attrHandle[b])?c(a):d||Yc?a.getAttribute(b):(c=a.getAttributeNode(b),c?"boolean"==typeof a[b]?a[b]?b:null:c.specified?c.value:null:null)};ca=X.selectors={cacheLength:50,createPseudo:ya,match:ob,attrHandle:Xc?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:Mb?function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a))&&a.parentNode?
[a]:[]}:function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(b=b.getElementById(a))?b.id===a||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").value===a?[b]:void 0:[]},TAG:Wc?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c},NAME:Zc&&function(a,b){if("undefined"!==typeof b.getElementsByName)return b.getElementsByName(name)},
CLASS:ec&&function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(Na,""),a[3]=(a[4]||a[5]||"").replace(Na,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||X.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):
2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&X.error(a[0]),a},PSEUDO:function(a){var b,c;if(ob.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4])Tc.test(b)&&(c=pb(b,!0))&&(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b;return a.slice(0,3)}},filter:{ID:Mb?function(a){return a=a.replace(Na,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(Na,""),function(b){return(b="undefined"!==typeof b.getAttributeNode&&
b.getAttributeNode("id"))&&b.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(Na,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=kc[ga][a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&kc(a,function(a){return b.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){d=X.attr(d,a);return null==d?"!="===b:b?(d+=
"","="===b?d===c:"!="===b?d!==c:"^="===b?c&&0===d.indexOf(c):"*="===b?c&&-1<d.indexOf(c):"$="===b?c&&d.substr(d.length-c.length)===c:"~="===b?-1<(" "+d+" ").indexOf(c):"|="===b?d===c||d.substr(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,e;b=a.parentNode;if(1===c&&0===d)return!0;if(b){e=0;for(b=b.firstChild;b&&!(1===b.nodeType&&(e++,a===b));b=b.nextSibling);}return e-=d,e===c||0===e%c&&0<=e/c}:function(b){var c=b;switch(a){case "only":case "first":for(;c=
c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case "last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var c,d=ca.pseudos[a]||ca.setFilters[a.toLowerCase()]||X.error("unsupported pseudo: "+a);return d[ga]?d(b):1<d.length?(c=[a,a,"",b],ca.setFilters.hasOwnProperty(a.toLowerCase())?ya(function(a,c){for(var e,f=d(a,b),g=f.length;g--;)e=Ib.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:ya(function(a){var b=
[],c=[],d=Lb(a.replace(mb,"$1"));return d[ga]?ya(function(a,b,c,e){e=d(a,null,e,[]);for(var f=a.length;f--;)if(c=e[f])a[f]=!(b[f]=c)}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:ya(function(a){return function(b){return 0<X(a,b).length}}),contains:ya(function(a){return function(b){return-1<(b.textContent||b.innerText||sb(b)).indexOf(a)}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},parent:function(a){return!ca.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if("@"<a.nodeName||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return Uc.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:bb("radio"),
checkbox:bb("checkbox"),file:bb("file"),password:bb("password"),image:bb("image"),submit:fc("submit"),reset:fc("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},input:function(a){return Vc.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!(!a.type&&!a.href&&!~a.tabIndex)},active:function(a){return a===a.ownerDocument.activeElement},first:Ma(function(){return[0]}),last:Ma(function(a,
b){return[b-1]}),eq:Ma(function(a,b,c){return[0>c?c+b:c]}),even:Ma(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:Ma(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:Ma(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:Ma(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};Nb=wa.compareDocumentPosition?function(a,b){return a===b?(eb=!0,0):(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?
-1:1}:function(a,b){if(a===b)return eb=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[];c=a.parentNode;d=b.parentNode;var g=c;if(c===d)return nb(a,b);if(!c)return-1;if(!d)return 1;for(;g;)e.unshift(g),g=g.parentNode;for(g=d;g;)f.unshift(g),g=g.parentNode;c=e.length;d=f.length;for(g=0;g<c&&g<d;g++)if(e[g]!==f[g])return nb(e[g],f[g]);return g===c?nb(a,f[g],-1):nb(e[g],b,1)};[0,0].sort(Nb);jc=!eb;X.uniqueSort=function(a){var b,c=[],d=1,e=0;eb=jc;a.sort(Nb);if(eb){for(;b=
a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a};X.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};Lb=X.compile=function(a,b){var c,d=[],e=[],f=lc[ga][a+" "];if(!f){b||(b=pb(a));for(c=b.length;c--;)f=Jb(b[c]),f[ga]?d.push(f):e.push(f);var g=0<d.length,h=0<e.length,j=function(a,b,c,f,n){var q,k,m=[],r=0,B="0",p=a&&[],fb=null!=n,u=rb,x=a||h&&ca.find.TAG("*",n&&b.parentNode||b),V=db+=null==u?1:Math.E;for(fb&&(rb=b!==Ca&&b,Eb=j.el);null!=(n=x[B]);B++){if(h&&
n){for(q=0;k=e[q];q++)if(k(n,b,c)){f.push(n);break}fb&&(db=V,Eb=++j.el)}g&&((n=!k&&n)&&r--,a&&p.push(n))}r+=B;if(g&&B!==r){for(q=0;k=d[q];q++)k(p,m,b,c);if(a){if(0<r)for(;B--;)!p[B]&&!m[B]&&(m[B]=Sc.call(f));m=qb(m)}Wa.apply(f,m);fb&&!a&&0<m.length&&1<r+d.length&&X.uniqueSort(f)}return fb&&(db=V,rb=u),p};c=(j.el=0,g?ya(j):j);f=lc(a,c)}return f};if(Ca.querySelectorAll){var nc,$c=Db,ad=/'|\\/g,bd=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,Ja=[":focus"],tb=[":active"],ub=wa.matchesSelector||wa.mozMatchesSelector||
wa.webkitMatchesSelector||wa.oMatchesSelector||wa.msMatchesSelector;Ia(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||Ja.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||Ja.push(":checked")});Ia(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&Ja.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML="<input type='hidden'/>";
a.querySelectorAll(":enabled").length||Ja.push(":enabled",":disabled")});Ja=RegExp(Ja.join("|"));Db=function(a,b,c,d,e){if(!d&&!e&&!Ja.test(a)){var f,g,h=!0,j=ga;g=b;f=9===b.nodeType&&a;if(1===b.nodeType&&"object"!==b.nodeName.toLowerCase()){f=pb(a);(h=b.getAttribute("id"))?j=h.replace(ad,"\\$&"):b.setAttribute("id",j);j="[id='"+j+"'] ";for(g=f.length;g--;)f[g]=j+f[g].join("");g=Kb.test(a)&&b.parentNode||b;f=f.join(",")}if(f)try{return Wa.apply(c,Xa.call(g.querySelectorAll(f),0)),c}catch(n){}finally{h||
b.removeAttribute("id")}}return $c(a,b,c,d,e)};ub&&(Ia(function(a){nc=ub.call(a,"div");try{ub.call(a,"[test!='']:sizzle"),tb.push("!=",Pb)}catch(b){}}),tb=RegExp(tb.join("|")),X.matchesSelector=function(a,b){b=b.replace(bd,"='$1']");if(!lb(a)&&!tb.test(b)&&!Ja.test(b))try{var c=ub.call(a,b);if(c||nc||a.document&&11!==a.document.nodeType)return c}catch(d){}return 0<X(b,null,null,[a]).length})}ca.pseudos.nth=ca.pseudos.eq;ca.filters=ic.prototype=ca.pseudos;ca.setFilters=new ic;X.attr=k.attr;k.find=
X;k.expr=X.selectors;k.expr[":"]=k.expr.pseudos;k.unique=X.uniqueSort;k.text=X.getText;k.isXMLDoc=X.isXML;k.contains=X.contains;var cd=/Until$/,dd=/^(?:parents|prev(?:Until|All))/,Gc=/^.[^:#\[\.,]*$/,oc=k.expr.match.needsContext,ed={children:!0,contents:!0,next:!0,prev:!0};k.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!=typeof a)return k(a).filter(function(){b=0;for(c=h.length;b<c;b++)if(k.contains(h[b],this))return!0});g=this.pushStack("","find",a);b=0;for(c=this.length;b<c;b++)if(d=
g.length,k.find(a,this[b],g),0<b)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=k(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(k.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(m(this,a,!1),"not",a)},filter:function(a){return this.pushStack(m(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?oc.test(a)?0<=k(a,this.context).index(this[0]):0<k.filter(a,this).length:0<this.filter(a).length)},
closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=oc.test(a)||"string"!=typeof a?k(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?-1<g.index(c):k.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return f=1<f.length?k.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?k.inArray(this[0],k(a)):k.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=
"string"==typeof a?k(a,b):k.makeArray(a&&a.nodeType?[a]:a),d=k.merge(this.get(),c);return this.pushStack(h(c[0])||h(d[0])?d:k.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});k.fn.andSelf=k.fn.addBack;k.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return k.dir(a,"parentNode")},parentsUntil:function(a,b,c){return k.dir(a,"parentNode",c)},next:function(a){return j(a,"nextSibling")},prev:function(a){return j(a,
"previousSibling")},nextAll:function(a){return k.dir(a,"nextSibling")},prevAll:function(a){return k.dir(a,"previousSibling")},nextUntil:function(a,b,c){return k.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return k.dir(a,"previousSibling",c)},siblings:function(a){return k.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return k.sibling(a.firstChild)},contents:function(a){return k.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:k.merge([],a.childNodes)}},function(a,
b){k.fn[a]=function(c,d){var e=k.map(this,b,c);return cd.test(a)||(d=c),d&&"string"==typeof d&&(e=k.filter(d,e)),e=1<this.length&&!ed[a]?k.unique(e):e,1<this.length&&dd.test(a)&&(e=e.reverse()),this.pushStack(e,a,aa.call(arguments).join(","))}});k.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?k.find.matchesSelector(b[0],a)?[b[0]]:[]:k.find.matches(a,b)},dir:function(a,c,d){var e=[];for(a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!k(a).is(d));)1===a.nodeType&&e.push(a),
a=a[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Wb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fd=/ jQuery\d+="(?:null|\d+)"/g,Qb=/^\s+/,pc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qc=/<([\w:]+)/,gd=/<tbody/i,hd=/<|&#?\w+;/,id=/<(?:script|style|link)/i,jd=/<(?:script|object|embed|option|style)/i,
Rb=RegExp("<(?:"+Wb+")[\\s/>]","i"),Xb=/^(?:checkbox|radio)$/,rc=/checked\s*(?:[^=]|=\s*.checked.)/i,kd=/\/(java|ecma)script/i,ld=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,ra={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",
""]},sc=p(J),Sb=sc.appendChild(J.createElement("div"));ra.optgroup=ra.option;ra.tbody=ra.tfoot=ra.colgroup=ra.caption=ra.thead;ra.th=ra.td;k.support.htmlSerialize||(ra._default=[1,"X<div>","</div>"]);k.fn.extend({text:function(a){return k.access(this,function(a){return a===b?k.text(this):this.empty().append((this[0]&&this[0].ownerDocument||J).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(k.isFunction(a))return this.each(function(b){k(this).wrapAll(a.call(this,b))});if(this[0]){var b=
k(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return k.isFunction(a)?this.each(function(b){k(this).wrapInner(a.call(this,b))}):this.each(function(){var b=k(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=k.isFunction(a);return this.each(function(c){k(this).wrapAll(b?a.call(this,c):
a)})},unwrap:function(){return this.parent().each(function(){k.nodeName(this,"body")||k(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,
this)});if(arguments.length){var a=k.clean(arguments);return this.pushStack(k.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=k.clean(arguments);return this.pushStack(k.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)if(!a||k.filter(a,[c]).length)!b&&1===c.nodeType&&(k.cleanData(c.getElementsByTagName("*")),
k.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&k.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return k.clone(this,a,b)})},html:function(a){return k.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(fd,""):b;if("string"==
typeof a&&!id.test(a)&&(k.support.htmlSerialize||!Rb.test(a))&&(k.support.leadingWhitespace||!Qb.test(a))&&!ra[(qc.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(pc,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(k.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return h(this[0])?this.length?this.pushStack(k(k.isFunction(a)?a():a),"replaceWith",a):this:k.isFunction(a)?this.each(function(b){var c=
k(this),d=c.html();c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=k(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;k(this).remove();b?k(b).before(a):k(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h=0,j=a[0],n=[],q=this.length;if(!k.support.checkClone&&1<q&&"string"==typeof j&&rc.test(j))return this.each(function(){k(this).domManip(a,c,d)});if(k.isFunction(j))return this.each(function(e){var f=
k(this);a[0]=j.call(this,e,c?f.html():b);f.domManip(a,c,d)});if(this[0]){e=k.buildFragment(a,this,n);g=e.fragment;f=g.firstChild;1===g.childNodes.length&&(g=f);if(f){c=c&&k.nodeName(f,"tr");for(e=e.cacheable||q-1;h<q;h++)d.call(c&&k.nodeName(this[h],"table")?this[h].getElementsByTagName("tbody")[0]||this[h].appendChild(this[h].ownerDocument.createElement("tbody")):this[h],h===e?g:k.clone(g,!0,!0))}g=f=null;n.length&&k.each(n,function(a,b){b.src?k.ajax?k.ajax({url:b.src,type:"GET",dataType:"script",
async:!1,global:!1,"throws":!0}):k.error("no ajax"):k.globalEval((b.text||b.textContent||b.innerHTML||"").replace(ld,""));b.parentNode&&b.parentNode.removeChild(b)})}return this}});k.buildFragment=function(a,c,d){var e,f,g,h=a[0];return c=c||J,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,1===a.length&&"string"==typeof h&&512>h.length&&c===J&&"<"===h.charAt(0)&&!jd.test(h)&&(k.support.checkClone||!rc.test(h))&&(k.support.html5Clone||!Rb.test(h))&&(f=!0,e=k.fragments[h],g=e!==b),e||(e=c.createDocumentFragment(),
k.clean(a,c,e,d),f&&(k.fragments[h]=g&&e)),{fragment:e,cacheable:f}};k.fragments={};k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){k.fn[a]=function(c){var d,e=0,f=[];c=k(c);var g=c.length;d=1===this.length&&this[0].parentNode;if((null==d||d&&11===d.nodeType&&1===d.childNodes.length)&&1===g)return c[b](this[0]),this;for(;e<g;e++)d=(0<e?this.clone(!0):this).get(),k(c[e])[b](d),f=f.concat(d);return this.pushStack(f,a,c.selector)}});
k.extend({clone:function(a,b,c){var d,e,f,h;k.support.html5Clone||k.isXMLDoc(a)||!Rb.test("<"+a.nodeName+">")?h=a.cloneNode(!0):(Sb.innerHTML=a.outerHTML,Sb.removeChild(h=Sb.firstChild));if((!k.support.noCloneEvent||!k.support.noCloneChecked)&&(1===a.nodeType||11===a.nodeType)&&!k.isXMLDoc(a)){n(a,h);d=q(a);e=q(h);for(f=0;d[f];++f)e[f]&&n(d[f],e[f])}if(b&&(g(a,h),c)){d=q(a);e=q(h);for(f=0;d[f];++f)g(d[f],e[f])}return h},clean:function(a,b,c,d){var e,f,g,h,j,n,q,m=b===J&&sc,r=[];if(!b||"undefined"==
typeof b.createDocumentFragment)b=J;for(e=0;null!=(g=a[e]);e++)if("number"==typeof g&&(g+=""),g){if("string"==typeof g)if(hd.test(g)){m=m||p(b);n=b.createElement("div");m.appendChild(n);g=g.replace(pc,"<$1></$2>");f=(qc.exec(g)||["",""])[1].toLowerCase();h=ra[f]||ra._default;j=h[0];for(n.innerHTML=h[1]+g+h[2];j--;)n=n.lastChild;if(!k.support.tbody){j=gd.test(g);h="table"===f&&!j?n.firstChild&&n.firstChild.childNodes:"<table>"===h[1]&&!j?n.childNodes:[];for(f=h.length-1;0<=f;--f)k.nodeName(h[f],"tbody")&&
!h[f].childNodes.length&&h[f].parentNode.removeChild(h[f])}!k.support.leadingWhitespace&&Qb.test(g)&&n.insertBefore(b.createTextNode(Qb.exec(g)[0]),n.firstChild);g=n.childNodes;n.parentNode.removeChild(n)}else g=b.createTextNode(g);g.nodeType?r.push(g):k.merge(r,g)}n&&(g=n=m=null);if(!k.support.appendChecked)for(e=0;null!=(g=r[e]);e++)k.nodeName(g,"input")?u(g):"undefined"!=typeof g.getElementsByTagName&&k.grep(g.getElementsByTagName("input"),u);if(c){a=function(a){if(!a.type||kd.test(a.type))return d?
d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)};for(e=0;null!=(g=r[e]);e++)if(!k.nodeName(g,"script")||!a(g))c.appendChild(g),"undefined"!=typeof g.getElementsByTagName&&(q=k.grep(k.merge([],g.getElementsByTagName("script")),a),r.splice.apply(r,[e+1,0].concat(q)),e+=q.length)}return r},cleanData:function(a,b){for(var c,d,e,f,g=0,h=k.expando,j=k.cache,n=k.support.deleteExpando,q=k.event.special;null!=(e=a[g]);g++)if(b||k.acceptData(e))if(c=(d=e[h])&&j[d]){if(c.events)for(f in c.events)q[f]?
k.event.remove(e,f):k.removeEvent(e,f,c.handle);j[d]&&(delete j[d],n?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,k.deletedIds.push(d))}}});var vb,Ka;k.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};vb=k.uaMatch(T.userAgent);Ka={};vb.browser&&
(Ka[vb.browser]=!0,Ka.version=vb.version);Ka.chrome?Ka.webkit=!0:Ka.webkit&&(Ka.safari=!0);k.browser=Ka;k.sub=function(){function a(b,c){return new a.fn.init(b,c)}k.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,d){return d&&d instanceof k&&!(d instanceof a)&&(d=a(d)),k.fn.init.call(this,c,d,b)};a.fn.init.prototype=a.fn;var b=a(J);return a};var ka,Qa,Ra,Tb=/alpha\([^)]*\)/i,md=/opacity=([^)]*)/,nd=/^(top|right|bottom|left)$/,od=/^(none|table(?!-c[ea]).+)/,
tc=/^margin/,Hc=RegExp("^("+U+")(.*)$","i"),gb=RegExp("^("+U+")(?!px)[a-z%]+$","i"),pd=RegExp("^([-+])=("+U+")","i"),yb={BODY:"block"},qd={position:"absolute",visibility:"hidden",display:"block"},uc={letterSpacing:0,fontWeight:400},La=["Top","Right","Bottom","Left"],Yb=["Webkit","O","Moz","ms"],rd=k.fn.toggle;k.fn.extend({css:function(a,c){return k.access(this,function(a,c,d){return d!==b?k.style(a,c,d):k.css(a,c)},a,c,1<arguments.length)},show:function(){return y(this,!0)},hide:function(){return y(this)},
toggle:function(a,b){var c="boolean"==typeof a;return k.isFunction(a)&&k.isFunction(b)?rd.apply(this,arguments):this.each(function(){(c?a:x(this))?k(this).show():k(this).hide()})}});k.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=ka(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&!(3===a.nodeType||8===a.nodeType||
!a.style)){var f,g,h,j=k.camelCase(c),n=a.style;c=k.cssProps[j]||(k.cssProps[j]=r(n,j));h=k.cssHooks[c]||k.cssHooks[j];if(d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:n[c];g=typeof d;"string"===g&&(f=pd.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(k.css(a,c)),g="number");if(!(null==d||"number"===g&&isNaN(d)))if("number"===g&&!k.cssNumber[j]&&(d+="px"),!h||!("set"in h)||(d=h.set(a,d,e))!==b)try{n[c]=d}catch(q){}}},css:function(a,c,d,e){var f,g,h,j=k.camelCase(c);return c=k.cssProps[j]||(k.cssProps[j]=
r(a.style,j)),h=k.cssHooks[c]||k.cssHooks[j],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=ka(a,c)),"normal"===f&&c in uc&&(f=uc[c]),d||e!==b?(g=parseFloat(f),d||k.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e={};for(d in b)e[d]=a.style[d],a.style[d]=b[d];c=c.call(a);for(d in b)a.style[d]=e[d];return c}});c.getComputedStyle?ka=function(a,b){var d,e,f,g,h=c.getComputedStyle(a,null),j=a.style;return h&&(d=h.getPropertyValue(b)||h[b],""===d&&!k.contains(a.ownerDocument,a)&&(d=k.style(a,b)),gb.test(d)&&
tc.test(b)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=d,d=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),d}:J.documentElement.currentStyle&&(ka=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return null==e&&f&&f[b]&&(e=f[b]),gb.test(e)&&!nd.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),""===e?"auto":e});k.each(["height",
"width"],function(a,b){k.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&od.test(ka(a,"display"))?k.swap(a,qd,function(){return D(a,b,d)}):D(a,b,d)},set:function(a,c,d){return w(a,c,d?v(a,b,d,k.support.boxSizing&&"border-box"===k.css(a,"boxSizing")):0)}}});k.support.opacity||(k.cssHooks.opacity={get:function(a,b){return md.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=k.isNumeric(b)?
"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1;if(1<=b&&(""===k.trim(f.replace(Tb,""))&&c.removeAttribute)&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=Tb.test(f)?f.replace(Tb,e):f+" "+e}});k(function(){k.support.reliableMarginRight||(k.cssHooks.marginRight={get:function(a,b){return k.swap(a,{display:"inline-block"},function(){if(b)return ka(a,"marginRight")})}});!k.support.pixelPosition&&k.fn.position&&k.each(["top","left"],function(a,b){k.cssHooks[b]={get:function(a,
c){if(c){var d=ka(a,b);return gb.test(d)?k(a).position()[b]+"px":d}}}})});k.expr&&k.expr.filters&&(k.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!k.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ka(a,"display"))},k.expr.filters.visible=function(a){return!k.expr.filters.hidden(a)});k.each({margin:"",padding:"",border:"Width"},function(a,b){k.cssHooks[a+b]={expand:function(c){var d="string"==typeof c?c.split(" "):[c],e={};for(c=0;4>c;c++)e[a+La[c]+
b]=d[c]||d[c-2]||d[0];return e}};tc.test(a)||(k.cssHooks[a+b].set=w)});var sd=/%20/g,Ic=/\[\]$/,vc=/\r?\n/g,td=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ud=/^(?:select|textarea)/i;k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?k.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||
ud.test(this.nodeName)||td.test(this.type))}).map(function(a,b){var c=k(this).val();return null==c?null:k.isArray(c)?k.map(c,function(a){return{name:b.name,value:a.replace(vc,"\r\n")}}):{name:b.name,value:c.replace(vc,"\r\n")}}).get()}});k.param=function(a,c){var d,e=[],f=function(a,b){b=k.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=k.ajaxSettings&&k.ajaxSettings.traditional);if(k.isArray(a)||a.jquery&&!k.isPlainObject(a))k.each(a,function(){f(this.name,
this.value)});else for(d in a)s(d,a[d],c,f);return e.join("&").replace(sd,"+")};var Oa,Pa,vd=/#.*$/,wd=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xd=/^(?:GET|HEAD)$/,yd=/^\/\//,wc=/\?/,zd=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ad=/([?&])_=[^&]*/,xc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,yc=k.fn.load,zb={},zc={},Ac=["*/"]+["*"];try{Pa=O.href}catch(Jd){Pa=J.createElement("a"),Pa.href="",Pa=Pa.href}Oa=xc.exec(Pa.toLowerCase())||[];k.fn.load=function(a,c,d){if("string"!=typeof a&&yc)return yc.apply(this,
arguments);if(!this.length)return this;var e,f,g,h=this,j=a.indexOf(" ");return 0<=j&&(e=a.slice(j,a.length),a=a.slice(0,j)),k.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(f="POST"),k.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments;h.html(e?k("<div>").append(a.replace(zd,"")).find(e):a)}),this};k.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){k.fn[b]=function(a){return this.on(b,
a)}});k.each(["get","post"],function(a,c){k[c]=function(a,d,e,f){return k.isFunction(d)&&(f=f||e,e=d,d=b),k.ajax({type:c,url:a,data:d,success:e,dataType:f})}});k.extend({getScript:function(a,c){return k.get(a,b,c,"script")},getJSON:function(a,b,c){return k.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?C(a,k.ajaxSettings):(b=a,a=k.ajaxSettings),C(a,b),a},ajaxSettings:{url:Pa,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(Oa[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",
processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Ac},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":c.String,"text html":!0,"text json":k.parseJSON,"text xml":k.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:E(zb),ajaxTransport:E(zc),ajax:function(a,c){function d(a,c,g,n){var m,M,F,y,P,I=c;if(2!==O){O=2;j&&clearTimeout(j);
h=b;f=n||"";s.readyState=0<a?4:0;if(g){y=r;n=s;var w,A,S,ia,v=y.contents,T=y.dataTypes,K=y.responseFields;for(A in K)A in g&&(n[K[A]]=g[A]);for(;"*"===T[0];)T.shift(),w===b&&(w=y.mimeType||n.getResponseHeader("content-type"));if(w)for(A in v)if(v[A]&&v[A].test(w)){T.unshift(A);break}if(T[0]in g)S=T[0];else{for(A in g){if(!T[0]||y.converters[A+" "+T[0]]){S=A;break}ia||(ia=A)}S=S||ia}g=S?(S!==T[0]&&T.unshift(S),g[S]):void 0;y=g}if(200<=a&&300>a||304===a)if(r.ifModified&&(P=s.getResponseHeader("Last-Modified"),
P&&(k.lastModified[e]=P),P=s.getResponseHeader("Etag"),P&&(k.etag[e]=P)),304===a)I="notmodified",m=!0;else{var da;a:{m=r;M=y;var L,I=m.dataTypes.slice();g=I[0];w={};A=0;m.dataFilter&&(M=m.dataFilter(M,m.dataType));if(I[1])for(da in m.converters)w[da.toLowerCase()]=m.converters[da];for(;F=I[++A];)if("*"!==F){if("*"!==g&&g!==F){da=w[g+" "+F]||w["* "+F];if(!da)for(L in w)if(P=L.split(" "),P[1]===F&&(da=w[g+" "+P[0]]||w["* "+P[0]])){!0===da?da=w[L]:!0!==w[L]&&(F=P[0],I.splice(A--,0,F));break}if(!0!==
da)if(da&&m["throws"])M=da(M);else try{M=da(M)}catch(ma){da={state:"parsererror",error:da?ma:"No conversion from "+g+" to "+F};break a}}g=F}da={state:"success",data:M}}m=da;I=m.state;M=m.data;F=m.error;m=!F}else if(F=I,!I||a)I="error",0>a&&(a=0);s.status=a;s.statusText=(c||I)+"";m?u.resolveWith(B,[M,I,s]):u.rejectWith(B,[s,I,F]);s.statusCode(V);V=b;q&&p.trigger("ajax"+(m?"Success":"Error"),[s,r,m?M:F]);x.fireWith(B,[s,I]);q&&(p.trigger("ajaxComplete",[s,r]),--k.active||k.event.trigger("ajaxStop"))}}
"object"==typeof a&&(c=a,a=b);c=c||{};var e,f,g,h,j,n,q,m,r=k.ajaxSetup({},c),B=r.context||r,p=B!==r&&(B.nodeType||B instanceof k)?k(B):k.event,u=k.Deferred(),x=k.Callbacks("once memory"),V=r.statusCode||{},F={},y={},O=0,P="canceled",s={readyState:0,setRequestHeader:function(a,b){if(!O){var c=a.toLowerCase();a=y[c]=y[c]||a;F[a]=b}return this},getAllResponseHeaders:function(){return 2===O?f:null},getResponseHeader:function(a){var c;if(2===O){if(!g)for(g={};c=wd.exec(f);)g[c[1].toLowerCase()]=c[2];
c=g[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return O||(r.mimeType=a),this},abort:function(a){return a=a||P,h&&h.abort(a),d(0,a),this}};u.promise(s);s.success=s.done;s.error=s.fail;s.complete=x.add;s.statusCode=function(a){if(a){var b;if(2>O)for(b in a)V[b]=[V[b],a[b]];else b=a[s.status],s.always(b)}return this};r.url=((a||r.url)+"").replace(vd,"").replace(yd,Oa[1]+"//");r.dataTypes=k.trim(r.dataType||"*").toLowerCase().split(M);null==r.crossDomain&&(n=xc.exec(r.url.toLowerCase()),
r.crossDomain=!(!n||n[1]===Oa[1]&&n[2]===Oa[2]&&(n[3]||("http:"===n[1]?80:443))==(Oa[3]||("http:"===Oa[1]?80:443))));r.data&&r.processData&&"string"!=typeof r.data&&(r.data=k.param(r.data,r.traditional));G(zb,r,c,s);if(2===O)return s;q=r.global;r.type=r.type.toUpperCase();r.hasContent=!xd.test(r.type);q&&0===k.active++&&k.event.trigger("ajaxStart");if(!r.hasContent&&(r.data&&(r.url+=(wc.test(r.url)?"&":"?")+r.data,delete r.data),e=r.url,!1===r.cache)){n=k.now();var I=r.url.replace(Ad,"$1_="+n);r.url=
I+(I===r.url?(wc.test(r.url)?"&":"?")+"_="+n:"")}(r.data&&r.hasContent&&!1!==r.contentType||c.contentType)&&s.setRequestHeader("Content-Type",r.contentType);r.ifModified&&(e=e||r.url,k.lastModified[e]&&s.setRequestHeader("If-Modified-Since",k.lastModified[e]),k.etag[e]&&s.setRequestHeader("If-None-Match",k.etag[e]));s.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+("*"!==r.dataTypes[0]?", "+Ac+"; q=0.01":""):r.accepts["*"]);for(m in r.headers)s.setRequestHeader(m,
r.headers[m]);if(!r.beforeSend||!1!==r.beforeSend.call(B,s,r)&&2!==O){P="abort";for(m in{success:1,error:1,complete:1})s[m](r[m]);if(h=G(zc,r,c,s)){s.readyState=1;q&&p.trigger("ajaxSend",[s,r]);r.async&&0<r.timeout&&(j=setTimeout(function(){s.abort("timeout")},r.timeout));try{O=1,h.send(F,d)}catch(w){if(!(2>O))throw w;d(-1,w)}}else d(-1,"No Transport");return s}return s.abort()},active:0,lastModified:{},etag:{}});var Bc=[],Bd=/\?/,wb=/(=)\?(?=&|$)|\?\?/,Cd=k.now();k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=
Bc.pop()||k.expando+"_"+Cd++;return this[a]=!0,a}});k.ajaxPrefilter("json jsonp",function(a,d,e){var f,g,h,j=a.data,n=a.url,q=!1!==a.jsonp,r=q&&wb.test(n),m=q&&!r&&"string"==typeof j&&!(a.contentType||"").indexOf("application/x-www-form-urlencoded")&&wb.test(j);if("jsonp"===a.dataTypes[0]||r||m)return f=a.jsonpCallback=k.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,g=c[f],r?a.url=n.replace(wb,"$1"+f):m?a.data=j.replace(wb,"$1"+f):q&&(a.url+=(Bd.test(n)?"&":"?")+a.jsonp+"="+f),a.converters["script json"]=
function(){return h||k.error(f+" was not called"),h[0]},a.dataTypes[0]="json",c[f]=function(){h=arguments},e.always(function(){c[f]=g;a[f]&&(a.jsonpCallback=d.jsonpCallback,Bc.push(f));h&&k.isFunction(g)&&g(h[0]);h=g=b}),"script"});k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return k.globalEval(a),a}}});k.ajaxPrefilter("script",function(a){a.cache===
b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});k.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=J.head||J.getElementsByTagName("head")[0]||J.documentElement;return{send:function(e,f){c=J.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")};
d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var Ya,Ub=c.ActiveXObject?function(){for(var a in Ya)Ya[a](0,1)}:!1,Dd=0;k.ajaxSettings.xhr=c.ActiveXObject?function(){var a;if(!(a=!this.isLocal&&F()))a:{try{a=new c.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}a=void 0}return a}:F;var Vb=k.ajaxSettings.xhr();k.extend(k.support,{ajax:!!Vb,cors:!!Vb&&"withCredentials"in Vb});k.support.ajax&&k.ajaxTransport(function(a){if(!a.crossDomain||k.support.cors){var d;return{send:function(e,
f){var g,h,j=a.xhr();a.username?j.open(a.type,a.url,a.async,a.username,a.password):j.open(a.type,a.url,a.async);if(a.xhrFields)for(h in a.xhrFields)j[h]=a.xhrFields[h];a.mimeType&&j.overrideMimeType&&j.overrideMimeType(a.mimeType);!a.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)j.setRequestHeader(h,e[h])}catch(n){}j.send(a.hasContent&&a.data||null);d=function(c,e){var h,n,q,r,m;try{if(d&&(e||4===j.readyState))if(d=b,g&&(j.onreadystatechange=k.noop,Ub&&
delete Ya[g]),e)4!==j.readyState&&j.abort();else{h=j.status;q=j.getAllResponseHeaders();r={};(m=j.responseXML)&&m.documentElement&&(r.xml=m);try{r.text=j.responseText}catch(B){}try{n=j.statusText}catch(p){n=""}!h&&a.isLocal&&!a.crossDomain?h=r.text?200:404:1223===h&&(h=204)}}catch(u){e||f(-1,u)}r&&f(h,n,r,q)};a.async?4===j.readyState?setTimeout(d,0):(g=++Dd,Ub&&(Ya||(Ya={},k(c).unload(Ub)),Ya[g]=d),j.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Sa,xb,Ed=/^(?:toggle|show|hide)$/,
Fd=RegExp("^(?:([-+])=|)("+U+")([a-z%]*)$","i"),Gd=/queueHooks$/,hb=[function(a,b,c){var d,e,f,g,h,j,n=this,q=a.style,r={},m=[],B=a.nodeType&&x(a);c.queue||(h=k._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,j=h.empty.fire,h.empty.fire=function(){h.unqueued||j()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--;k.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[q.overflow,q.overflowX,q.overflowY],"inline"===k.css(a,"display")&&
"none"===k.css(a,"float")&&(!k.support.inlineBlockNeedsLayout||"inline"===H(a.nodeName)?q.display="inline-block":q.zoom=1));c.overflow&&(q.overflow="hidden",k.support.shrinkWrapBlocks||n.done(function(){q.overflow=c.overflow[0];q.overflowX=c.overflow[1];q.overflowY=c.overflow[2]}));for(d in b)f=b[d],Ed.exec(f)&&(delete b[d],e=e||"toggle"===f,f!==(B?"hide":"show")&&m.push(d));if(b=m.length){f=k._data(a,"fxshow")||k._data(a,"fxshow",{});"hidden"in f&&(B=f.hidden);e&&(f.hidden=!B);B?k(a).show():n.done(function(){k(a).hide()});
n.done(function(){var b;k.removeData(a,"fxshow",!0);for(b in r)k.style(a,b,r[b])});for(d=0;d<b;d++)e=m[d],g=n.createTween(e,B?f[e]:0),r[e]=f[e]||k.style(a,e),e in f||(f[e]=g.start,B&&(g.end=g.start,g.start="width"===e||"height"===e?1:0))}}],Za={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=Fd.exec(b),g=e.cur(),h=+g||0,j=1,n=20;if(f){c=+f[2];d=f[3]||(k.cssNumber[a]?"":"px");if("px"!==d&&h){h=k.css(e.elem,a,!0)||c||1;do j=j||".5",h/=j,k.style(e.elem,a,h+d);while(j!==(j=e.cur()/g)&&1!==j&&--n)}e.unit=
d;e.start=h;e.end=f[1]?h+(f[1]+1)*c:c}return e}]};k.Animation=k.extend(I,{tweener:function(a,b){k.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],Za[c]=Za[c]||[],Za[c].unshift(b)},prefilter:function(a,b){b?hb.unshift(a):hb.push(a)}});k.Tween=K;K.prototype={constructor:K,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=f||(k.cssNumber[c]?"":"px")},cur:function(){var a=K.propHooks[this.prop];
return a&&a.get?a.get(this):K.propHooks._default.get(this)},run:function(a){var b,c=K.propHooks[this.prop];return this.options.duration?this.pos=b=k.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):K.propHooks._default.set(this),this}};K.prototype.init.prototype=K.prototype;K.propHooks={_default:{get:function(a){var b;return null==
a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=k.css(a.elem,a.prop,!1,""),!b||"auto"===b?0:b):a.elem[a.prop]},set:function(a){k.fx.step[a.prop]?k.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[k.cssProps[a.prop]]||k.cssHooks[a.prop])?k.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};K.propHooks.scrollTop=K.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};k.each(["toggle","show","hide"],function(a,b){var c=k.fn[b];k.fn[b]=
function(d,e,f){return null==d||"boolean"==typeof d||!a&&k.isFunction(d)&&k.isFunction(e)?c.apply(this,arguments):this.animate(L(b,!0),d,e,f)}});k.fn.extend({fadeTo:function(a,b,c,d){return this.filter(x).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=k.isEmptyObject(a),f=k.speed(b,c,d);b=function(){var b=I(this,k.extend({},a),f);e&&b.stop(!0)};return e||!1===f.queue?this.each(b):this.queue(f.queue,b)},stop:function(a,c,d){var e=function(a){var b=a.stop;
delete a.stop;b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=k.timers,g=k._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Gd.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(null==a||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&k.dequeue(this,a)})}});k.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},
fadeToggle:{opacity:"toggle"}},function(a,b){k.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});k.speed=function(a,b,c){var d=a&&"object"==typeof a?k.extend({},a):{complete:c||!c&&b||k.isFunction(a)&&a,duration:a,easing:c&&b||b&&!k.isFunction(b)&&b};d.duration=k.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in k.fx.speeds?k.fx.speeds[d.duration]:k.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";return d.old=d.complete,d.complete=function(){k.isFunction(d.old)&&d.old.call(this);
d.queue&&k.dequeue(this,d.queue)},d};k.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}};k.timers=[];k.fx=K.prototype.init;k.fx.tick=function(){var a,c=k.timers,d=0;for(Sa=k.now();d<c.length;d++)a=c[d],!a()&&c[d]===a&&c.splice(d--,1);c.length||k.fx.stop();Sa=b};k.fx.timer=function(a){a()&&k.timers.push(a)&&!xb&&(xb=setInterval(k.fx.tick,k.fx.interval))};k.fx.interval=13;k.fx.stop=function(){clearInterval(xb);xb=null};k.fx.speeds={slow:600,fast:200,_default:400};
k.fx.step={};k.expr&&k.expr.filters&&(k.expr.filters.animated=function(a){return k.grep(k.timers,function(b){return a===b.elem}).length});var Cc=/^(?:body|html)$/i;k.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){k.offset.setOffset(this,a,b)});var c,d,e,f,g,h,j,n={top:0,left:0},q=this[0],r=q&&q.ownerDocument;if(r)return(d=r.body)===q?k.offset.bodyOffset(q):(c=r.documentElement,k.contains(c,q)?("undefined"!=typeof q.getBoundingClientRect&&(n=q.getBoundingClientRect()),
e=R(r),f=c.clientTop||d.clientTop||0,g=c.clientLeft||d.clientLeft||0,h=e.pageYOffset||c.scrollTop,j=e.pageXOffset||c.scrollLeft,{top:n.top+h-f,left:n.left+j-g}):n)};k.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return k.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(k.css(a,"marginTop"))||0,c+=parseFloat(k.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=k.css(a,"position");"static"===d&&(a.style.position="relative");var e=k(a),f=e.offset(),g=
k.css(a,"top"),h=k.css(a,"left"),j={},n={},q,r;("absolute"===d||"fixed"===d)&&-1<k.inArray("auto",[g,h])?(n=e.position(),q=n.top,r=n.left):(q=parseFloat(g)||0,r=parseFloat(h)||0);k.isFunction(b)&&(b=b.call(a,c,f));null!=b.top&&(j.top=b.top-f.top+q);null!=b.left&&(j.left=b.left-f.left+r);"using"in b?b.using.call(a,j):e.css(j)}};k.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=Cc.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(k.css(a,
"marginTop"))||0,c.left-=parseFloat(k.css(a,"marginLeft"))||0,d.top+=parseFloat(k.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(k.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||J.body;a&&!Cc.test(a.nodeName)&&"static"===k.css(a,"position");)a=a.offsetParent;return a||J.body})}});k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);k.fn[a]=function(e){return k.access(this,
function(a,e,f){var g=R(a);if(f===b)return g?c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?k(g).scrollLeft():f,d?f:k(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}});k.each({Height:"height",Width:"width"},function(a,c){k.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){k.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(!0===e||!0===f?"margin":"border");return k.access(this,function(c,d,e){var f;return k.isWindow(c)?c.document.documentElement["client"+
a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?k.css(c,d,e,h):k.style(c,d,e,h)},c,g?e:b,g,null)}})});c.jQuery=c.$=k;"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return k})})(window);
if(!jQuery.support.cors&&window.XDomainRequest){var httpRegEx=/^https?:\/\//i,getOrPostRegEx=/^get|post$/i,sameSchemeRegEx=RegExp("^"+location.protocol,"i"),jsonRegEx=/\/json/i,xmlRegEx=/\/xml/i;jQuery.ajaxTransport("text html xml json",function(c,b){if(c.crossDomain&&c.async&&getOrPostRegEx.test(c.type)){var a=null,d=(b.dataType||"").toLowerCase();return{send:function(e,f){a=new XDomainRequest;/^\d+$/.test(b.timeout)&&(a.timeout=b.timeout);a.ontimeout=function(){f(500,"timeout")};a.onload=function(){var b=
"Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,c=200,e="success",g={text:a.responseText};try{if("json"===d||"text"!==d&&jsonRegEx.test(a.contentType))try{g.json=$.parseJSON(a.responseText)}catch(h){c=500,e="parseerror"}else if("xml"===d||"text"!==d&&xmlRegEx.test(a.contentType)){var q=new ActiveXObject("Microsoft.XMLDOM");q.async=!1;try{q.loadXML(a.responseText)}catch(u){q=void 0}if(!q||!q.documentElement||q.getElementsByTagName("parsererror").length)throw"Invalid XML: "+
a.responseText;g.xml=q}}catch(r){throw r;}finally{f(c,e,g,b)}};a.onprogress=function(){};a.onerror=function(){f(500,"error",{text:a.responseText})};var h=b.data&&$.param(b.data)||"";a.open(c.type,c.url);a.send(h)},abort:function(){a&&a.abort()}}}})}
$.browser.msie&&function(){var c;c=window.console=new function(){function b(){this.__buffer.push(arguments)}var a=setInterval(function(){var b;if(window.console&&console.log&&!console.__buffer){clearInterval(a);b=Function.prototype.bind?Function.prototype.bind.call(console.log,console):console.log;for(var e=0;e<c.__buffer.length;e++)b.apply(console,c.__buffer[e])}},1E3);this.timeEnd=this.time=this.info=this.warn=this.error=this.log=b;this.__buffer=[]}}();
window.hs=function(){function c(b){var c=b.offsetHeight;b=b.offsetWidth;return c>a&&c<e&&b>d&&b<f}function b(){for(var a=document.getElementsByClassName(h),b=RegExp("\\b"+h+"\\b");0<a.length;)a[0].className=a[0].className.replace(b,"")}var a=30,d=30,e=350,f=350,h="mw-harlem_shake_me",j=["im_drunk","im_baked","im_trippin","im_blown"],m,p=document.documentElement;m=window.innerWidth?window.innerHeight:p&&!isNaN(p.clientHeight)?p.clientHeight:0;var g;g=window.pageYOffset?window.pageYOffset:Math.max(document.documentElement.scrollTop,
document.body.scrollTop);for(var p=document.getElementsByTagName("*"),n=null,q=0;q<p.length;q++){var u=p[q];if(c(u)){var r;r=u;for(var x=0;r;)x+=r.offsetTop,r=r.offsetParent;r=x;if(r>=g&&r<=m+g){n=u;break}}}if(null===u)console.warn("Could not find a node of the right size. Please try a different page.");else{u=document.createElement("link");u.setAttribute("type","text/css");u.setAttribute("rel","stylesheet");u.setAttribute("href","//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css");
u.setAttribute("class","mw_added_css");document.body.appendChild(u);u=document.createElement("audio");u.setAttribute("class","mw_added_css");u.src="//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";u.loop=!1;u.addEventListener("canplay",function(){setTimeout(function(){n.className+=" "+h+" im_first"},500);setTimeout(function(){b();var a=document.createElement("div");a.setAttribute("class","mw-strobe_light");document.body.appendChild(a);setTimeout(function(){document.body.removeChild(a)},
100);for(var c=0;c<y.length;c++){var d=y[c];d.className+=" "+h+" "+j[Math.floor(Math.random()*j.length)]}},15500)},!0);u.addEventListener("ended",function(){b();for(var a=document.getElementsByClassName("mw_added_css"),c=0;c<a.length;c++)document.body.removeChild(a[c])},!0);u.innerHTML=" <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";document.body.appendChild(u);u.play();for(var y=[],q=0;q<p.length;q++)u=
p[q],c(u)&&y.push(u)}};
var var_widthMAX=1390,var_widthMID=1290,var_widthMIN=1E3,var_valueMAX=var_widthMAX-var_widthMID,var_valueMIN=var_widthMID-var_widthMIN,var_widthLeftBlockMAX=295,var_widthLeftBlockMID=295,var_widthLeftBlockMIN=255,var_widthMiddleBlockOneMAX=935,var_widthMiddleBlockMAX=855,var_widthMiddleBlockMID=755,var_widthMiddleBlockMIN=585,var_widthFilterMAX=240,var_widthFilterMID=240,var_widthFilterMIN=200,var_paddingLeftMAX=12,var_paddingLeftMID=12,var_paddingLeftMIN=12,var_paddingRightSlideMAX=305,var_paddingRightSlideMID=
305,var_paddingRightSlideMIN=65,var_paddingLeftTelefonMAX=250,var_paddingLeftTelefonMID=250,var_paddingLeftTelefonMIN=220,var_widthMainBlockMAX=695,var_widthMainBlockMIN=530,var_iphone=0;window.hotelsScrollCallback=function(){};
function ResizeCenterBlock(){var c=$(".center-block");if(c.length){var b=$(".left-block");$(".head");var a=c.find(".main-block"),d=c.find(".main-block").find("#content"),e=c.find(".filter-block"),f=c.find(".logo"),h=c.find(".about"),j=$(".slide-turn-mode"),m=$(".telefon"),p=$(".ticket-content");$(".head-content");var g=$(".hotels-tickets"),n=$(".calenderWindow"),q=$(".allTrip .info"),u=$("#descr"),r,x,y,w=32,v,D,H,s,E,G,C,F,A,I,K,L,c=c.width(),R=0<b.length&&b.is(":visible"),N=0<a.length&&a.is(":visible"),
Q=0<e.length&&e.is(":visible"),n=0<n.length&&n.is(":visible"),u=0<u.length&&u.is(":visible");!R&&!Q&&N?c>=var_widthMAX?(x=var_widthMiddleBlockOneMAX,s=H="auto",w=var_paddingLeftMAX,v=var_paddingRightSlideMAX,D=var_paddingLeftTelefonMAX,A=x,v+=165):c<var_widthMAX&&c>=var_widthMID?(x=var_widthMiddleBlockOneMAX,s=H="auto",w=var_paddingLeftMID,v=var_paddingRightSlideMID,D=var_paddingLeftTelefonMID,A=x,v+=165):c<var_widthMID&&c>=var_widthMIN&&(x=var_widthMiddleBlockOneMAX,s=H="auto",w=Math.floor(var_paddingLeftMIN+
(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftMID-var_paddingLeftMIN))),v=Math.floor(var_paddingRightSlideMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingRightSlideMID-var_paddingRightSlideMIN))),D=Math.floor(var_paddingLeftTelefonMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftTelefonMID-var_paddingLeftTelefonMIN))),A=x,v+=100):!R&&Q&&N?c>=var_widthMAX?(x=var_widthMiddleBlockMAX,y=var_widthFilterMAX,H=w=Math.floor((c-(x+y))/2),s=y+w,E=w,w=var_paddingLeftMAX,v=var_paddingRightSlideMAX,D=var_paddingLeftTelefonMAX,
A=var_widthMainBlockMAX,C=F="auto",v+=165):c<var_widthMAX&&c>=var_widthMID?(x=Math.floor(var_widthMiddleBlockMID+(c-var_widthMID)/1),y=var_widthFilterMID,H=w=Math.floor((c-(x+y))/2),s=y+w,E=w,w=var_paddingLeftMID,v=var_paddingRightSlideMID,D=var_paddingLeftTelefonMID,A=var_widthMainBlockMAX,C=F="auto",v+=165):c<var_widthMID&&c>=var_widthMIN&&(y=Math.floor(220+(c-var_widthMIN)/(var_valueMIN/(var_widthFilterMID-220))),x=Math.floor(c-y-40),x>var_widthMiddleBlockMID&&(x=var_widthMiddleBlockMID),H=w=Math.floor((c-
(x+y))/2),s=y+w,E=w,w=Math.floor(var_paddingLeftMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftMID-var_paddingLeftMIN))),v=Math.floor(var_paddingRightSlideMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingRightSlideMID-var_paddingRightSlideMIN))),D=Math.floor(var_paddingLeftTelefonMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftTelefonMID-var_paddingLeftTelefonMIN))),A=var_widthMainBlockMAX,C=F="auto",v+=100):R&&Q&&N?c>=var_widthMAX?(r=var_widthLeftBlockMAX,x=var_widthMiddleBlockMAX,y=var_widthFilterMAX,
w=Math.floor((c-(x+y+r))/2),H=r,s=y,G=E=0,w=var_paddingLeftMAX,v=var_paddingRightSlideMAX,D=var_paddingLeftTelefonMAX,A=var_widthMainBlockMAX,v+=165):c<var_widthMAX&&c>=var_widthMID?(r=var_widthLeftBlockMID,x=Math.floor(var_widthMiddleBlockMID+(c-var_widthMID)/1),y=var_widthFilterMID,H=r,s=y,G=E=0,w=var_paddingLeftMID,v=var_paddingRightSlideMID,D=var_paddingLeftTelefonMID,A=var_widthMainBlockMAX,v+=165):c<var_widthMID&&c>=var_widthMIN&&(r=Math.floor(220+(c-var_widthMIN)/(var_valueMIN/(var_widthLeftBlockMID-
220))),x=Math.floor(var_widthMiddleBlockMIN+(c-var_widthMIN)/(var_valueMIN/(var_widthMiddleBlockMID-var_widthMiddleBlockMIN))),y=Math.floor(var_widthFilterMIN+(c-var_widthMIN)/(var_valueMIN/(var_widthFilterMID-var_widthFilterMIN))),w=Math.floor(var_paddingLeftMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftMID-var_paddingLeftMIN))),v=Math.floor(var_paddingRightSlideMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingRightSlideMID-var_paddingRightSlideMIN))),D=Math.floor(var_paddingLeftTelefonMIN+(c-
var_widthMIN)/(var_valueMIN/(var_paddingLeftTelefonMID-var_paddingLeftTelefonMIN))),H=r,s=y,G=E=0,A=Math.floor(var_widthMainBlockMIN+(c-var_widthMIN)/(var_valueMIN/(var_widthMainBlockMAX-var_widthMainBlockMIN))),v+=100):R&&N&&!Q?c>=var_widthMAX?(r=var_widthLeftBlockMAX,x=var_widthMiddleBlockOneMAX,s=w=80,H=r+w,G=0,w=var_paddingLeftMAX,v=var_paddingRightSlideMAX,D=var_paddingLeftTelefonMAX,F=0,A=x-F,C=0,I="auto",v+=165,K="auto",L="112px"):c<var_widthMAX&&c>=var_widthMID?(x=Math.floor(910+(c-var_widthMID)/
(var_valueMAX/25)),r=var_widthLeftBlockMID,s=w=Math.floor(30+(c-var_widthMID)/(var_valueMAX/50)),H=r+w,G=0,w=var_paddingLeftMID,v=var_paddingRightSlideMID,D=var_paddingLeftTelefonMID,F=0,A=x-F,C=0,I="auto",v+=165,K="auto",L="112px"):c<var_widthMID&&c>=var_widthMIN&&(r=Math.floor(220+(c-var_widthMIN)/(var_valueMIN/(var_widthLeftBlockMID-220))-3),x=Math.floor(685+(c-var_widthMIN)/(var_valueMIN/225)),s=w=39,H=r+w,G=0,w=Math.floor(var_paddingLeftMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftMID-
var_paddingLeftMIN))),v=Math.floor(var_paddingRightSlideMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingRightSlideMID-var_paddingRightSlideMIN))),D=Math.floor(var_paddingLeftTelefonMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftTelefonMID-var_paddingLeftTelefonMIN))),F=0,A=x-F,C=0,I="210px",v+=100,K=Math.floor(585+(c-var_widthMIN)/(var_valueMIN/149)),K+="px",L=Math.floor(36+(c-var_widthMIN)/(var_valueMIN/76))):c>=var_widthMAX?(w=var_paddingLeftMAX,v=var_paddingRightSlideMAX,D=var_paddingLeftTelefonMAX,
v+=165):c<var_widthMAX&&c>=var_widthMID?(w=var_paddingLeftMID,v=var_paddingRightSlideMID,D=var_paddingLeftTelefonMID,v+=165):c<var_widthMID&&c>=var_widthMIN&&(w=Math.floor(var_paddingLeftMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftMID-var_paddingLeftMIN))),v=Math.floor(var_paddingRightSlideMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingRightSlideMID-var_paddingRightSlideMIN))),D=Math.floor(var_paddingLeftTelefonMIN+(c-var_widthMIN)/(var_valueMIN/(var_paddingLeftTelefonMID-var_paddingLeftTelefonMIN))),
v+=100);"auto"!=H&&(H+="px");"auto"!=s&&(s+="px");"auto"!=F&&(F+="px");"auto"!=C&&(C+="px");"auto"!=E&&(E+="px");"auto"!=G&&(G+="px");N&&(a.css("width",x+"px").css("margin-left",H).css("margin-right",s),d.css("width",A+"px").css("margin-left",F).css("margin-right",C),q.css("width",K),$(".costItAll").css("padding-right",L),$(".calToursInner").css("padding-right",L));Q&&e.css("width",y+"px").css("margin-right",E);R&&b.css("width",r+"px").css("margin-left",G);n&&$(".innerCalendar, #voyanga-calendar").css("width",
c+"px");u&&($("#descr").find(".left").find(".descr-text .text").dotdotdot({watch:"window"}),$("#content .place-buy .street").css("width",I));0<$(".description .text").length&&$(".description .text").is(":visible")&&$(".description .text").dotdotdot({watch:"window"});f.css("left",w+"px");h.css("left",122+w+"px");j.css("right",v+"px");b.find(".left-content").css("margin-left",w+"px");m.css("left",D+"px");690>A?(b=Math.floor(253+(c-var_widthMIN)/(var_valueMIN/65)),$(".recommended-ticket").css("width",
b+"px"),$(".recommended-ticket").find(".ticket-items").addClass("small"),d.find("h1").find(".hideTitle").hide(),p.find(".ticket-items").addClass("small"),$(".block").find(".ticket-items").addClass("small"),g.addClass("small")):($(".recommended-ticket").find(".ticket-items").removeClass("small"),$(".recommended-ticket").css("width","318px"),p.find(".ticket-items").removeClass("small"),$(".block").find(".ticket-items").removeClass("small"),g.removeClass("small"),d.find("h1").find(".hideTitle").show());
1E3>$("body").width()?$("body").addClass("scrollYes"):$("body").removeClass("scrollYes");resizeLeftStage();resizeMainStage()}$(document).on("focus",".second-path",function(a){$(a.currentTarget).select()}).on("mouseup",".second-path",function(a){a.preventDefault()});$(".voyasha td").hover(function(){$(".ico-voyasha").addClass("active")},function(){$(".ico-voyasha").removeClass("active")})}
function smallTicketHeight(){if(0<$(".recommended-ticket").length&&$(".recommended-ticket").is(":visible")){var c=$(".recomended-content"),b=c.find(".recommended-ticket .ticket-items .content").height(),a=0,a="none"!==$(".two-way").css("display")?(b-24)/2:b-24,a=Math.floor(a);c.find(".prices-of-3days .ticket .schedule-of-prices").css("height",a+"px");c=a-65;$(".prices-of-3days .ticket  .schedule-of-prices")[0]&&(b=ko.contextFor($(".prices-of-3days .ticket  .schedule-of-prices")[0]),b=b.$data,b.graphHeight&&
b.graphHeight(c))}}function resizeLeftStage(){var c=$(".left-block"),b=c.width();c.find(".date");var a;a=b-215;a=75>a?a/1.3+100:170;105>a?c.find(".path").css("width","95px"):c.find(".path").css("width",a+"px");250>b?c.addClass("smallBlock"):c.removeClass("smallBlock")}
function resizeMainStage(){var c=$(".prices-of-3days"),b=$(".recommended-ticket").width();if(318>b){var a;a=Math.floor(b/7);b=7*a;c.find(".schedule-of-prices").css("width",b+"px");c.find(".schedule-of-prices li").css("width",a+"px");c.css("width",b+"px");c.find(".total-td .text").hide();c.find(".total-td").css("margin-left","-15px");c.find(".look-td").css("margin-right","-15px")}else c.find(".schedule-of-prices").css("width","318px"),c.find(".schedule-of-prices li").css("width","45px"),c.css("width",
"318px"),c.find(".total-td").css("margin-left","0px"),c.find(".look-td").css("margin-right","0px"),c.find(".total-td .text").show();290>b&&280<b?c.find(".schedule-of-prices li").find(".price").css("left","-1px"):280>b&&270<b?c.find(".schedule-of-prices li").find(".price").css("left","-2px"):270>b&&260<b?c.find(".schedule-of-prices li").find(".price").css("left","-3px"):260>b&&255<b?c.find(".schedule-of-prices li").find(".price").css("left","-4px"):255>b?c.find(".schedule-of-prices li").find(".price").css("left",
"-5px"):c.find(".schedule-of-prices li").find(".price").css("left","0px")}function ResizeAvia(){window.lastResizeCall||(window.lastResizeCall=0);var c=(new Date).getTime()-window.lastResizeCall;window.resizeAviaThrottle&&(clearTimeout(window.resizeAviaThrottle),window.resizeAviaThrottle=null);100>c?window.resizeAviaThrottle=setTimeout(ResizeAviaClb,100):ResizeAviaClb()}
function ResizeAviaClb(){window.lastResizeCall=(new Date).getTime();ResizeCenterBlock();inTheTwoLines();smallTicketHeight();CenterIMGResize();slideToursSlide();smallIMGresizeIndex();mapAllPageView();gradientResize();resizePanel();jsPaneScrollHeight();startIE();ifIpadLoad();slideToursPanel()}function ResizeFun(){ResizeAvia()}$(window).load(function(){$(window).scroll(function(c){scrollValue("avia",c);scrollValue("hotel",c);window.hotelsScrollCallback()})});
function readMoreService(c){$(c).hasClass("active")?($(".hideService").animate({height:"34px"},300),$(c).text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),$(c).removeClass("active")):($(".hideService").animate({height:"100%"},300),$(c).text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"),$(c).addClass("active"))}
function mapAllPageView(){var c=$("#all-hotels-map");if(0<c.length&&c.is(":visible")&&0<c.length&&c.is(":visible")){var b=$("#content").width();$("#content").height();var a=$(".main-block").width();if(0<$(".left-block").length&&$(".left-block").is(":visible")){var b=(a-b)/2,d=670>$(window).height()?670:$(window).height(),e=$("#content").offset();$("#content").css("height",d-70+"px");c.css("height",d-123+"px");c.css("width",a+"px").css("margin-left","-"+b+"px")}else d=670>$(window).height()?670:$(window).height(),
e=$("#content").offset(),$("#content").css("height",d-70+"px"),c.css("height",d-123+"px"),c.css("width",$(window).width()+"px").css("margin-left","-"+e.left+"px")}}var _GoOnScroll=!0,_jScrollingBootom=!1,_jScrollNonBottomInitted=!1;
function jsPaneScrollHeight(){var c=0<$("#all-hotels-map").length&&$("#all-hotels-map").is(":visible"),b=0<$(".left-block").length&&$(".left-block").is(":visible");if(!c||b){c=$("#content");c.css("height","auto");var b=$(window).height(),b=670<b?$(window).height()-132:538,a=c.innerHeight(),d=0;$(".scrollBlock").find(".div-filter").each(function(){d+=$(this).innerHeight()});d>a&&a>b&&d>b?(c.css("height",d+"px"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),
$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):d<a&&a>b&&d>b?(c.css("height","auto"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!0):d>a&&a<b&&d>b?(c.css("height",d+"px"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):d>a&&a>b&&d<b?(c.css("height",d+"px"),$(".filter-content").css("position","relative").css("top",
"auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):d<a&&a<b&&d>b?(c.css("height",b-70+"px"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):d>a&&a<b&&d<b?(c.css("height",b-70+"px"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):d<a&&a>b&&d<b?(c.css("height","auto"),$(".filter-content").css("position",
"relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!0):d<a&&a<b&&d<b?(c.css("height",b-70+"px"),$(".filter-content").css("position","relative").css("top","auto").css("bottom","auto"),$(".innerFilter").css("height",d+"px"),_GoOnScroll=!1):($(".innerFilter").css("height","100%"),_GoOnScroll=!0)}}
function scrollValue(c,b){if(!DetectMobileQuick()&&!DetectTierTablet()){var a=$(".filter-content."+c),d;d=b.target==document?!1:$(b.target).is("#scroll-pane");if(0<a.length&&a.is(":visible")&&!d){d=a.find(".innerFilter");$(".sub-head").css("margin-top");var e=$(window).scrollTop(),f=$(window).height();$("#content").height();if("avia"==c)var h=73,j="-67px"!=$(".sub-head").css("margin-top")?173:110;else h=23,j="-67px"!=$(".sub-head").css("margin-top")?125:61;if(_GoOnScroll){var m=!1;0==e?(m=!0,a.css("position",
"relative").css("top","auto").css("bottom","auto")):0<e&&e<j?(m=!0,a.css("position","relative").css("top","auto").css("bottom","auto")):e>j&&(e>$(".wrapper").height()-f-30?(a.css("position","fixed").css("top","-"+h+"px").css("bottom","auto"),a=30>e-($(".wrapper").height()-f-30)?e-($(".wrapper").height()-f-30):30,d.css("height",f-a+"px"),$("#scroll-pane").data("jsp")||$("#scroll-pane").jScrollPane({contentWidth:d.width()}),$("#scroll-pane").jScrollPane({contentWidth:d.width()}),!_jScrollingBootom&&
e==$(".wrapper").height()-$("body").height()&&(_jScrollingBootom=!0,window.setTimeout(function(){$("#scroll-pane").data("jsp").scrollToBottom()},50),window.setTimeout(function(){_jScrollNonBottomInitted=_jScrollingBootom=!1},500))):(a.css("position","fixed").css("top","-"+h+"px").css("bottom","auto"),d.css("height",f+"px"),$("#scroll-pane").data("jsp")||$("#scroll-pane").jScrollPane({contentWidth:d.width()}),_jScrollNonBottomInitted||(_jScrollNonBottomInitted=!0,$("#scroll-pane").jScrollPane({contentWidth:d.width()}))));
m&&$("#scroll-pane").data("jsp")&&$("#scroll-pane").data("jsp").destroy()}else return a=0<$("#all-hotels-map").length&&$("#all-hotels-map").is(":visible"),d=0<$(".left-block").length&&$(".left-block").is(":visible"),(!a||d)&&$("#scroll-pane").data("jsp")&&$("#scroll-pane").data("jsp").destroy(),!1}else return!1}}function reInitJScrollPane(){$("#scroll-pane").data("jsp")&&$("#scroll-pane").data("jsp").reinitialise()}
function minimizeFilter(){var c=0<$("#all-hotels-map").length&&$("#all-hotels-map").is(":visible"),b=0<$(".left-block").length&&$(".left-block").is(":visible");if(c&&!b)$(".innerFilter").find(".div-filter").each(function(a){1<a&&$(this).hide()}),$(".innerFilter").css("height","162px"),$(".filter-block").css("height","185px"),0<$(".filter-minimize").length&&$(".filter-minimize").is(":visible")?($(".filter-minimize").removeClass("hide").attr("onclick","filterShow()"),$("#scroll-pane").data("jsp")&&
$("#scroll-pane").data("jsp").destroy()):$(".filter-content").append('<div class="filter-minimize" onclick="filterShow()"></div>'),_GoOnScroll=!1;else return!1}
function filterShow(){$(".filter-block").css("height","100%");$(".innerFilter").css("height",$(".wrapper").height()-175+"px");$(".innerFilter").find(".div-filter").show();_GoOnScroll=!1;$("#scroll-pane").data("jsp")||$("#scroll-pane").jScrollPane({contentWidth:$(".innerFilter").width()});$(".filter-minimize").addClass("hide").attr("onclick","minimizeFilter()")}
function removeFilterShow(){$(".filter-minimize").remove();$(".filter-block").css("height","100%");$(".innerFilter").css("height","100%");$(".innerFilter").find(".div-filter").show();$(window).load(function(c){scrollValue("hotel",c)})}
function loadPayFly(){var c=$("#loadPayFly");if(0<c.length&&c.is(":visible")){var b=c.offset(),c=c.width()-290,a=$(".loadJet"),d=a.find(".jetFly");a.css("margin-left","-"+b.left+"px").css("width",b.left+c+"px");a.find(".overflowBlock").css("width",b.left+c+"px");a.find(".pathBlock").clone().prependTo(".loadJet").addClass("blue");a.find(".pathBlock").eq(1).attr("id","grey");var e=function(){d.animate({right:"0%"},2E4,"linear",function(){$(this).animate({right:"-241px"},4E3,"linear",function(){$(this).css("right",
"100%")})});setTimeout(function(){a.find("#grey").animate({width:"0%"},2E4,"linear",function(){a.find("#grey").css("opacity","0").css("width","100%");setTimeout(function(){a.find("#grey").animate({opacity:"1"},1E3,function(){e()})},4500)})},500)};e()}}var clickYes=!1;function closeAllPopup(){closePopUpProj();closePopUpContact()}
function openPopUpProj(){clickYes=!0;$(".mainWrapBg").show();$("body").css("overflow","hidden");var c=$(".textSlideProj"),b=$(".mainWrapBg").find(".centerImg"),a=$(".mainWrapBg").find(".itemsProj"),d=c.find("li").length;b.empty();c.find("li").each(function(){b.append('<img src="'+$(this).attr("rel")+'">')});c.find("li").eq(0).attr("rel");c=c.find("li").eq(0).html();$(".bgCount").empty().append("<span>1</span>/"+d);$(".mainWrapBg").find(".centerImg").find("img").hide().eq(0).show();a.empty().append(c);
$(".naviProj").find(".left").addClass("inactive");var e=!0;$(".projectPopUp").hover(function(){e=!1},function(){e=!0});$(".naviProj").hover(function(){e=!1},function(){e=!0});$(".mainWrapBg").mouseup(function(){e&&closeAllPopup()});$(window).on("keydown",function(a){if(clickYes)if(27==a.which)closeAllPopup();else if(39==a.which)ClikRightProj();else if(37==a.which)ClikLeftProj();else return!0});$(".mainWrapBg").find(".centerImg").click(function(){ClikRightProj()})}
function closePopUpProj(){$(".mainWrapBg").hide();$("body").css("overflow","auto");clickYes=!1}
function ClikRightProj(){var c=$(".textSlideProj").find("li").length,b=$(".bgCount").find("span").text();if(b>=c)return!1;b++;$(".naviProj").find(".left").removeClass("inactive");$(".naviProj").find(".right").removeClass("inactive");$(".mainWrapBg").find(".centerImg").find("img").hide().eq(b-1).show();var a=$(".textSlideProj").find("li").eq(b-1).html();$(".mainWrapBg").find(".itemsProj").empty().append(a);$(".bgCount").find("span").text(b);b==c&&$(".naviProj").find(".right").addClass("inactive")}
function ClikLeftProj(){var c=$(".bgCount").find("span").text();if(1>=c)return!1;c--;$(".naviProj").find(".left").removeClass("inactive");$(".naviProj").find(".right").removeClass("inactive");$(".mainWrapBg").find(".centerImg").find("img").hide().eq(c-1).show();var b=$(".textSlideProj").find("li").eq(c-1).html();$(".mainWrapBg").find(".itemsProj").empty().append(b);$(".bgCount").find("span").text(c);1==c&&$(".naviProj").find(".left").addClass("inactive")}
function PopUpInfoPath(){$(document).on("mousemove",".tooltip",function(c){var b=$(this).attr("rel");0<$(".PopUpInfoPath").length&&$(".PopUpInfoPath").is(":visible")||$("body").prepend('<div class="PopUpInfoPath">'+b+"</div> ");$(".PopUpInfoPath").css("left",c.pageX+8+"px").css("top",c.pageY+5+"px")});$(document).on("mouseout",".tooltip",function(){$(".PopUpInfoPath").remove()});$(document).on("mouseout",".close",function(){$(".PopUpInfoPath").remove()})}$(window).load(PopUpInfoPath);
function PopUpInfo(){var c=$(".tooltipClose"),b=!0;$(c).click(function(a){var c=$(this).attr("rel");0<$(".PopUpInfo").length&&$(".PopUpInfoPath").is(":visible")?($(".PopUpInfo").remove(),b=!0):($("body").prepend('<div class="PopUpInfo">'+c+'<div class="close"></div></div> '),c=a.pageX<$(".PopUpInfo").width()?5:a.pageX-300,$(".PopUpInfo").css("left",c+"px").css("top",a.pageY-10+"px"));$(".PopUpInfo").hover(function(){b=!1},function(){b=!0});$("body").mouseup(function(){if(b)$(".PopUpInfo").remove(),
b=!0;else return!1});$(".PopUpInfo").find(".close").click(function(){$(".PopUpInfo").remove();b=!0});$(window).on("keydown",function(a){27==a.which&&($(".PopUpInfo").remove(),b=!0)})})}$(window).load(PopUpInfo);
function openPopUpContact(){clickYes=!0;$(".contentWrapBg").show();$("body").css("overflow","hidden");var c=!0;$(".wrapDiv").hover(function(){c=!1},function(){c=!0});$(".contentWrapBg").mouseup(function(){c&&closeAllPopup()});var b=$(".contentWrapBg").scrollTop(),a=$(window).height(),d=$(".contentWrapBg .wrapDiv").innerHeight(),e=$(".contentWrapBg .wrapDiv").offset(),f=d+e.top-a;$(window).on("keydown",function(a){if(clickYes)if(27==a.which)closeAllPopup();else if(38==a.which)b-=15,-14<b?$(".contentWrapBg").scrollTop(b):
b=0;else if(40==a.which)b+=15,f+15>b?$(".contentWrapBg").scrollTop(b):b=f;else return!0})}function closePopUpContact(){$(".contentWrapBg").hide();$("body").css("overflow","auto");clickYes=!1}var scrollTrue=!0;
function resizeFAQ(){var c;1E3>=$(window).width()?c=10:1E3<$(window).width()&&(c=($(window).width()-977)/2.615);$(".wrapFAQ").css("margin-left",c+"px");$(".tableFAQ").each(function(b){$(".listFAQ").find("li").eq(b).attr("rel",$(this).offset().top)});scrollFAQ();$(".listFAQ").find("li").find("a").click(function(){scrollTrue=!1;$(".listFAQ").find("li").removeClass("active");$(this).parent().addClass("active");setTimeout(function(){scrollTrue=!0},650)})}
function scrollFAQ(){64<$(window).scrollTop()?$(".listFAQ").css("position","fixed").css("top","4px"):$(".listFAQ").css("position","absolute");$(".listFAQ").find("li").each(function(){scrollTrue&&$(window).scrollTop()+68>=$(this).attr("rel")&&($(".listFAQ").find("li").removeClass("active"),$(this).addClass("active"))})}$(window).load(resizeFAQ);$(window).resize(resizeFAQ);$(window).scroll(scrollFAQ);
function gradientResize(){if(!DetectMobileQuick()&&!DetectTierTablet()&&0<$(".wrapper .main-block").find("#content").length&&$(".wrapper .main-block").find("#content").is(":visible")){var c=$(".wrapper .main-block").find("#content"),b=c.offset(),a=$(window).width()-b.left,c=b.left+c.width();$(".gShR").show().css("left",c-180+"px").css("width",$(window).width()-(c-180)+"px");$(".gShL").show().css("right",a-40+"px").css("width",b.left+40+"px")}}
function openPopUpLogIn(c){clickYes=!0;0<$(".loginWrapBg").length&&$(".loginWrapBg").is(":visible")||($(".loginWrapBg").show(),$("body").css("overflow","hidden"));$(".loginWrapBg").find(".wrapContent > div:not(.boxClose)").hide();$(".loginWrapBg").find(".wrapContent > div."+c).show();var b=!0;$(".wrapDiv").hover(function(){b=!1},function(){b=!0});$(".loginWrapBg").mouseup(function(){b&&closePopUpLogIn()});$("div."+c).find("input").eq(0).focus();$(window).height();$(".contentWrapBg .wrapDiv").innerHeight();
$(".contentWrapBg .wrapDiv").offset();$(window).on("keydown",function(a){clickYes&&27==a.which&&closePopUpLogIn()});$(".registerOpen").click(function(){$(".enter").fadeOut();$(".fogoten").fadeOut();$(".reapetPass").fadeOut();$(".registrate").fadeIn()});$(".enterOpen").click(function(){$(".registrate").fadeOut();$(".fogoten").fadeOut();$(".reapetPass").fadeOut();$(".enter").fadeIn()});$(".fogotenOpen").click(function(){$(".registrate").fadeOut();$(".enter").fadeOut();$(".reapetPass").fadeOut();$(".fogoten").fadeIn()})}
function closePopUpLogIn(){$(".loginWrapBg").hide();$("body").css("overflow","auto");clickYes=!1}function hoverPayCard(){$(".paycard > div").hover(function(){$(this).find(".black").animate({opacity:0},400);$(this).find(".color").animate({opacity:1},400)},function(){$(this).find(".black").animate({opacity:1},300);$(this).find(".color").animate({opacity:0},300)})}$(window).load(hoverPayCard);
$(function(){$(".btnEnterLogin").on("click",function(){$("#login-errors").html("").hide();$.ajax({url:"/user/validate",dataType:"json",data:$("#login-form").serialize(),type:"POST"}).done(function(c){"ok"!=c.status?$("#login-errors").html("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d/\u043f\u0430\u0440\u043e\u043b\u044c").show():$("#login-form").submit()}).error(function(){$("#login-errors").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u043b\u043e\u0433\u0438\u043d\u0430/\u043f\u0430\u0440\u043e\u043b\u044f.").show()});
return!1})});
$(function(){$(".btnFogLogin").on("click",function(){$("#forget-errors").html("").hide();$.ajax({url:"/user/validateForgetPassword",dataType:"json",data:$("#forget-pwd-form").serialize(),type:"POST"}).done(function(c){"ok"!=c.status?$("#forget-errors").html(c.errors).show():$.ajax({url:"/user/newPassword",data:$("#forget-pwd-form").serialize(),type:"POST"}).done(function(){$("#forget-pwd-form").html("\u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f \u0432\u044b\u0441\u043b\u0430\u043d \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 e-mail")}).error(function(){$("#forget-errors").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0430\u0440\u043e\u043b\u044f.").show()})}).error(function(){$("#forget-errors").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0430\u0440\u043e\u043b\u044f.").show()});return!1})});
$(function(){$(".btnRegLogin").on("click",function(){$("#signup-errors").html("").hide();$.ajax({url:"/user/signup",dataType:"json",data:$("#signup-form").serialize(),type:"POST"}).done(function(c){"ok"!=c.status?$("#signup-errors").html(c.error).show():$("#signup-form").html("\u0412\u044b \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 \u0438 \u043c\u043e\u0436\u0435\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0432\u0430\u0448 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}).error(function(){$("#signup-errors").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438.").show()});
return!1})});
$(function(){$(".btnNewPwd").on("click",function(){$("#new-pwd-errors").html("").hide();$.ajax({url:"/user/newPassword/key/"+window.pwdKey,dataType:"json",data:$("#new-pwd-form").serialize(),type:"POST"}).done(function(c){"ok"!=c.status?$("#new-pwd-errors").html(c.errors).show():$("#new-pwd-form").html("\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d")}).error(function(){$("#new-pwd-form").html("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043f\u0430\u0440\u043e\u043b\u044f").show()});return!1})});
function resizePanel(){$(".panelTable").each(function(){var c=$(this),b,a;if(c.hasClass("avia")){b=c.find(".tdTumblr").innerWidth();var d=c.find(".tdPeople").innerWidth(),e=c.find(".tdButton").innerWidth(),f=c.find(".tdCityStart").innerWidth(),h=0,j=2}else c.hasClass("constructorTable")?($(this).find(".tdPeople").hasClass("notFinal")?$(this).find(".tdPeople.notFinal").css("width",$(".tdPeople.final").width()+"px"):$(this).find(".tdPeople").hasClass("final"),b=0,d=c.find(".tdPeople").innerWidth(),
e=c.find(".tdButton").innerWidth(),f=c.find(".tdCityStart").innerWidth(),h=c.find(".tdAddTour").innerWidth(),j=1):c.hasClass("hotel")&&(b=0,d=c.find(".tdPeople").innerWidth(),e=c.find(".tdButton").innerWidth(),f=c.find(".tdCityStart").innerWidth(),h=117,j=1);a=$(window).width();var m=c.innerWidth();c.find(".tdCity").find(".data");c.find(".tdCity").find(".data").find("input");a=1130>=a&&1E3<=a?a-230:1E3>a?770:900;b=m>=a?(a-b-d-e-f-h)/j:m<a?(a-b-d-e-f-h)/j:(m-b-d-e-f-h)/j;c.find(".tdCity").find(".data").css("width",
b+"px");c.find(".tdCity").find(".data").find("input").css("width",b-20+"px");c.innerWidth()})}function startIE(){if($.browser.msie)$(document).on("click",".data",function(){$(this).find(".second-path").focus()})}
function ifIpadLoad(){if(DetectMobileQuick()||DetectTierTablet())$("body").hasClass("fixed")?$("body").css("width","100%"):$("body").css("width","111%"),0<$(".maps").length&&$(".maps").is(":visible")&&1>$(".maps").find(".layers").length&&$(".maps").append('<div class="layers" style="position: absolute; width: 100%; height: 100%; z-index: 500; top:0px; left: 0px;"></div>')}
function slideToursPanel(){0<$(".board").length&&$(".board").is(":visible")&&(40>$(".board").offset().top&&$("body").css("position","relative").css("height",$(".board").height()+404+"px"),$(window).resize(function(){$(window).height()>$("body").height()&&$("body").css("position","fixed").css("height","100%")}))}
(function(c,b){function a(a,b,c){var d=p[b.type]||{};if(null==a)return c||!b.def?null:b.def;a=d.floor?~~a:parseFloat(a);return isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a}function d(a){var b=j(),d=b._rgba=[];a=a.toLowerCase();u(h,function(c,e){var f,g=e.re.exec(a);f=g&&e.parse(g);g=e.space||"rgba";if(f)return f=b[g](f),b[m[g].cache]=f[m[g].cache],d=b._rgba=f._rgba,!1});return d.length?("0,0,0,0"===d.join()&&c.extend(d,q.transparent),b):q[a]}function e(a,b,c){c=(c+1)%1;return 1>6*c?
a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var f=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),
parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=c.Color=function(a,b,d,e){return new c.Color.fn.parse(a,b,d,e)},m={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,
type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},g=j.support={},n=c("<p>")[0],q,u=c.each;n.style.cssText="background-color:rgba(1,1,1,.5)";g.rgba=-1<n.style.backgroundColor.indexOf("rgba");u(m,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});j.fn=c.extend(j.prototype,{parse:function(e,f,g,h){if(e===b)return this._rgba=[null,null,null,null],this;if(e.jquery||e.nodeType)e=
c(e).css(f),f=b;var n=this,p=c.type(e),H=this._rgba=[];f!==b&&(e=[e,f,g,h],p="array");if("string"===p)return this.parse(d(e)||q._default);if("array"===p)return u(m.rgba.props,function(b,c){H[c.idx]=a(e[c.idx],c)}),this;if("object"===p)return e instanceof j?u(m,function(a,b){e[b.cache]&&(n[b.cache]=e[b.cache].slice())}):u(m,function(b,d){var f=d.cache;u(d.props,function(b,c){if(!n[f]&&d.to){if("alpha"===b||null==e[b])return;n[f]=d.to(n._rgba)}n[f][c.idx]=a(e[b],c,!0)});n[f]&&0>c.inArray(null,n[f].slice(0,
3))&&(n[f][3]=1,d.from&&(n._rgba=d.from(n[f])))}),this},is:function(a){var b=j(a),c=!0,d=this;u(m,function(a,e){var f,g=b[e.cache];g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],u(e.props,function(a,b){if(null!=g[b.idx])return c=g[b.idx]===f[b.idx]}));return c});return c},_space:function(){var a=[],b=this;u(m,function(c,d){b[d.cache]&&a.push(c)});return a.pop()},transition:function(b,c){var d=j(b),e=d._space(),f=m[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),n=h.slice(),d=d[f.cache];
u(f.props,function(b,e){var f=e.idx,g=h[f],j=d[f],q=p[e.type]||{};null!==j&&(null===g?n[f]=j:(q.mod&&(j-g>q.mod/2?g+=q.mod:g-j>q.mod/2&&(g-=q.mod)),n[f]=a((j-g)*c+g,e)))});return this[e](n)},blend:function(a){if(1===this._rgba[3])return this;var b=this._rgba.slice(),d=b.pop(),e=j(a)._rgba;return j(c.map(b,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var a="rgba(",b=c.map(this._rgba,function(a,b){return null==a?2<b?1:0:a});1===b[3]&&(b.pop(),a="rgb(");return a+b.join()+")"},toHslaString:function(){var a=
"hsla(",b=c.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===b[3]&&(b.pop(),a="hsl(");return a+b.join()+")"},toHexString:function(a){var b=this._rgba.slice(),d=b.pop();a&&b.push(~~(255*d));return"#"+c.map(b,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});j.fn.parse.prototype=j.fn;m.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,
null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255;a=a[3];var e=Math.max(b,c,d),f=Math.min(b,c,d),g=e-f,h=e+f,j=0.5*h;return[Math.round(f===e?0:b===e?60*(c-d)/g+360:c===e?60*(d-b)/g+120:60*(b-c)/g+240)%360,0===j||1===j?j:0.5>=j?g/h:g/(2-h),j,null==a?1:a]};m.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2];a=a[3];c=0.5>=d?d*(1+c):d+c-d*c;d=2*d-c;return[Math.round(255*e(d,c,b+1/3)),Math.round(255*e(d,c,b)),Math.round(255*e(d,c,b-
1/3)),a]};u(m,function(d,e){var g=e.props,h=e.cache,n=e.to,q=e.from;j.fn[d]=function(d){n&&!this[h]&&(this[h]=n(this._rgba));if(d===b)return this[h].slice();var e,f=c.type(d),m="array"===f||"object"===f?d:arguments,r=this[h].slice();u(g,function(b,c){var d=m["object"===f?b:c.idx];null==d&&(d=r[c.idx]);r[c.idx]=a(d,c)});return q?(e=j(q(r)),e[h]=r,e):j(r)};u(g,function(a,b){j.fn[a]||(j.fn[a]=function(e){var g=c.type(e),h="alpha"===a?this._hsla?"hsla":"rgba":d,j=this[h](),n=j[b.idx];if("undefined"===
g)return n;"function"===g&&(e=e.call(this,n),g=c.type(e));if(null==e&&b.empty)return this;"string"===g&&(g=f.exec(e))&&(e=n+parseFloat(g[2])*("+"===g[1]?1:-1));j[b.idx]=e;return this[h](j)})})});j.hook=function(a){a=a.split(" ");u(a,function(a,b){c.cssHooks[b]={set:function(a,e){var f,h="";if("string"!==c.type(e)||(f=d(e))){e=j(f||e);if(!g.rgba&&1!==e._rgba[3]){for(f="backgroundColor"===b?a.parentNode:a;(""===h||"transparent"===h)&&f&&f.style;)try{h=c.css(f,"backgroundColor"),f=f.parentNode}catch(n){}e=
e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{a.style[b]=e}catch(q){}}};c.fx.step[b]=function(a){a.colorInit||(a.start=j(a.elem,b),a.end=j(a.end),a.colorInit=!0);c.cssHooks[b].set(a.elem,a.start.transition(a.end,a.pos))}})};j.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");c.cssHooks.borderColor={expand:function(a){var b={};u(["Top","Right","Bottom","Left"],function(c,
d){b["border"+d+"Color"]=a});return b}};q=c.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);function SizeBox(c){$("#"+c);0<$("#"+c).length&&$("#"+c).is(":visible")&&$("body").css("overflow","hidden")}
function ResizeBox(c){var b=$("#"+c),a=b.find("#layer");c=$(window).width();var d=$(window).height(),e=b.find(".pv_cont"),f=e.height(),d=(d-f)/2;10>=d&&(d=10);b.css("width",c+"px");a.css("width",c-16+"px");e.css("padding-top",d+"px");$(window).resize(function(){var c=$(window).width(),d=$(window).height(),e=b.find(".pv_cont"),f=e.height(),d=(d-f)/2;10>=d&&(d=10);b.css("width",c+"px");a.css("width",c-16+"px");e.css("padding-top",d+"px")})}function btnClosePopUp(){$("body").css("overflow","auto")}$(document).ready(function(){});
function resizePhotoWinHandler(){console.log("kk");var c=$("#imgContent").height(),b=$("#imgContent img").innerWidth();$(window).width();c=($(window).height()-(c+84)-78)/2;0>c&&(c=0);Math.round(c);$(".countAndClose").css("width",b+"px")}function resizePhotoWin(){console.log("try start");var c=$("#body-popup-Photo img").attr("src");(new Image).src=c}
function resizeLoad(){var c=$("#hotel-img-load").width(),b=$("#hotel-img-load").height(),a=$(window).width(),d=$(window).height(),c=(a-c)/2,b=(d-b)/2;0>b&&(b=0);$("#hotel-img-load").css("left",c-20+"px").css("top",b-20+"px")}$(window).resize(function(){resizeLoad()});
var var_marginHowLong=20,var_marginHowLongSmall=5,var_paddingDateTime=15,MAX_BIG_CITY_NAME_SMALL_TICKET=16,MAX_BIG_CITY_NAME=16,MAX_BIG_AIRPORT_NAME_SMALL_TICKET=16,MAX_BIG_AIRPORT_NAME=16,MIN_BIG_CITY_NAME_SMALL_TICKET=12,MIN_BIG_CITY_NAME=12,MIN_BIG_AIRPORT_NAME_SMALL_TICKET=12,MIN_BIG_AIRPORT_NAME=12;function minimizeListTime(){}
function inTheTwoLines(){var c=$(".recommended-ticket .ticket-items .other-time");0<c.length&&c.is(":visible")&&c.each(function(){var b=$(this).find("ul.minimize li").length,a=$(this).find("ul.minimize").height();30<a&&40>a?$(this).find(".variation").css("margin-top","0px"):40<a?($(this).find(".variation").css("margin-top","0px"),a=($(this).height()-40)/2,$(this).find(".left").css("top",a+"px"),$(this).find(".right").css("top",a+"px")):$(this).find(".variation").css("margin-top","10px");for(i=0;i<
b;i++)a=$(this).find("ul.minimize li").eq(i),!0==a.hasClass("active")&&1==i?$(this).find(".left").addClass("none"):!0==a.hasClass("active")&&i==b-1&&$(this).find(".right").addClass("none")})}function ratingHoverActive(c){$(c).parent().addClass("hover")}function ratingHoverNoActive(c){$(c).parent().removeClass("hover")}
function hideRecomendedBlockTicket(){$(this).hasClass("show")?($(this).removeClass("show"),$(".recomended-content").slideDown(function(){jsPaneScrollHeight()}),$(window).load(inTheTwoLines),setTimeout(smallTicketHeight,100)):($(".recomended-content").slideUp(function(){jsPaneScrollHeight()}),$(this).addClass("show"))}
$(function(){bindActions=function(){$(".minimize-rcomended .btn-minimizeRecomended").click(function(){});$(".order-show").click(function(){$(".recomended-content").slideDown();$(".minimize-rcomended .btn-minimizeRecomended").animate({top:"-19px"},500);$(window).load(inTheTwoLines);otherTimeSlide();widthHowLong();setTimeout(smallTicketHeight,100)});$(".descr").eq(1).hide();$(".place-buy .tmblr li a").click(function(b){b.preventDefault();$(this).hasClass("active")||(b=$(this).attr("href"),b=b.slice(1),
$(".place-buy .tmblr li").removeClass("active"),$(this).parent().addClass("active"),$(".descr").hide(),$("#"+b).show())});$(".read-more").click(function(){$(this).hasClass("active")?($(this).prev().css("height","54px"),$("#descr").find(".left").find(".descr-text .text").dotdotdot({watch:"window"}),$(this).removeClass("active").text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")):($(this).prev().css("height","auto"),$("#descr").find(".left").find(".descr-text .text").dotdotdot({watch:"window"}),
$(this).addClass("active").text("\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"))});$(".stars-li input").each(function(){"checked"==$(this).attr("checked")&&$(this).next().addClass("active")});$(".stars-li label").click(function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")});var c=$(".calendarSlide").height();$(".calendarSlide").css("top","-"+c+"px");$(".input-path").click(function(){$(".calendarSlide").animate({top:"0px"},400)});$(".cityStart .to a").click(function(){var b=
$(this).parent().parent();b.parent().find(".from").addClass("overflow").animate({width:"125px"},300);b.find(".startInputTo").show();b.animate({width:"261px"},300,function(){b.find(".startInputTo").find("input").focus()})});$(".board-content .from input").click(function(){$(this).parent().hasClass("overflow")&&($(this).parent().animate({width:"271px"},300,function(){$(this).removeClass("overflow")}),$(".cityStart").animate({width:"115px"},300),$(".cityStart").find(".startInputTo").animate({opacity:"1"},
300,function(){$(this).hide()}))})}});function deletePopUp(c){c=$(c).offset();$("body").prepend('<div class="deletePopUp">\u0423\u0434\u0430\u043b\u0438\u0442\u044c?</div>');$(".deletePopUp").css("top",c.top-28+"px").css("left",c.left-6+"px")}function deletePopUpHide(){$(".deletePopUp").remove()}
function telefonLoad(){if(0<$("#contactPhone").length&&$("#contactPhone").is(":visible")&&($("#contactPhone").mask("+7 (999) 999-99-99"),0<$(".allTicketsDIV .ticketBox").length&&$(".allTicketsDIV .ticketBox").is(":visible"))){var c=$(".allTicketsDIV .ticketBox").length;if(1==c)$(".allTicketsDIV .ticketBox").addClass("first-child").addClass("last-child");else for(i=0;i<c;i++)if(0==i)$(".allTicketsDIV .ticketBox").eq(i).addClass("first-child");else if(i==c-1)$(".allTicketsDIV .ticketBox").eq(i).addClass("last-child");
else return!0;$(".infoPassengers:eq(0) tbody .tdName:eq(0) input").focus(function(){Utils.scrollTo("#tableStartRun")})}}$(window).load(telefonLoad);
function onFocusInput(){$(".male input").each(function(c){"checked"==$(".male").eq(c).find("input").attr("checked")&&$(".male").eq(c).find("input").closest("label").addClass("active")});$(".female input").each(function(c){"checked"==$(".female").eq(c).find("input").attr("checked")&&$(".female").eq(c).find("input").closest("label").addClass("active")});$(".male input").focusin(function(){$(this).parent().addClass("focus");$(this).removeAttr("checked")});$(".male input").blur(function(){$(this).parent().removeClass("focus")});
$(".male input").change(function(){$(this).parent().removeClass("active");$(this).parent().next().removeClass("active");$(this).parent().addClass("active");$(this).attr("ckecked");$(this).parent().parent().next().find("input.dd").focus()});$(".female input").focusin(function(){$(this).parent().addClass("focus");$(this).removeAttr("checked")});$(".female input").blur(function(){$(this).parent().removeClass("focus")});$(".female input").change(function(){$(this).parent().removeClass("active");$(this).parent().prev().removeClass("active");
$(this).parent().addClass("active");$(this).attr("ckecked");$(this).parent().parent().next().find("input.dd").focus()});$(window).unbind("keydown");$(window).bind("keydown",function(c){0==c.which||9==c.which||39==c.which||37==c.which?0<$(c.target).parents(".male").length?(c.preventDefault(),c=$(c.target),$(c).is(":checked")?$(c).parent().parent().next().find("input.dd").focus():($(c).parent().next().find("input").focus(),$(c).parent().removeClass("active"))):0<$(c.target).parents(".female").length&&
(c.preventDefault(),c=$(c.target),$(c).is(":checked")?$(c).parent().parent().next().find("input.dd").focus():($(c).parent().prev().find("input").focus(),$(c).parent().removeClass("active"))):32==c.which&&(c=$(c.target),$(c).parent().addClass("active"))})}$(window).load(onFocusInput);
function showUserMenu(){$(".popupDown").slideDown(200,function(){$(".login-window").attr("onclick"," ")});var c=!0;$(".popupDown").hover(function(){c=!1},function(){c=!0});$("body").mouseup(function(){if(c)console.log(c),$(".popupDown").slideUp(100,function(){$(".login-window").attr("onclick","showUserMenu()")});else return!1})}
function hideFromCityInput(c){if(0<!$(c.target).parents(".cityStart").length){var b,a;if($(".startInputTo").is(":visible")&&(c=$(".cityStart").find(".second-path"),c=c.closest(".cityStart"),c.closest(".tdCityStart").animate({width:"-=130",300:300}),c.closest(".tdCityStart").find(".bgInput").animate({width:"-=150",300:300}),c.closest(".tdCityStart").next().find(".data").animate({width:"+=130",300:300}),$(".startInputTo .second-path"),b=$("div.startInputTo"),a=$("div.overflow"),b.is(":visible")))return a.animate({width:"271px"},
300,function(){return a.removeClass("overflow")}),$(".cityStart").animate({width:"115px"},300),b.animate({opacity:"1"},300,function(){return b.hide()})}else return!0}$(function(){$("html").on("click",function(c){hideFromCityInput(c)})});function nextSlideDownRules(c){$(c).hasClass("active")?$(c).next().slideUp():($(c).next().slideDown(),$(c).addClass("active"))}
function divInputBirthday(){0<$(".divInputBirthday").length&&$(".divInputBirthday").is(":visible")&&$(".divInputBirthday").find("input").focus(function(){$(this).attr("rel",$(this).val());$(this).val("");$(this).blur(function(){1>$(this).val()&&$(this).val($(this).attr("rel"))})})}$(window).load(divInputBirthday);
function getLink(){$("body").click(function(c){0<$(c.target).parents("#followLink").length||"followLink"==$(c.target).attr("id")?($("#followLink").find(".text").hide(),$("#followLink").find(".getLink").show(),$("#followLink").find(".getLink input").focus().select()):($("#followLink").find(".text").show(),$("#followLink").find(".getLink").hide())})}$(window).load(getLink);
(function(c){c.selectSlider={init:function(b,a){var d=c(b),e=d.attr("class");d.data("options",a);d.hide();var f=c('<div class="'+e+' jsslidecheckbox"><div class="slidecheckbox"><ul class="selectList" /><div class="switch"><i class="left"></i><i class="right"></i></div><i class="left"></i><i class="right"></i></div></div>');f.data("select",d);d.data("selectDiv",f);e=100/d.find("option").length;f.data("elementWidth",e);f.find(".switch").css("width",e+"%");d.find("option").each(function(a){var b=c('<li><a href="#" onclick="return false">'+
c(this).text()+"</a></li>");b.data("original_option",c(this));b.data("ind",a);b.data("option-value",c(this).val());b.css("width",f.data("elementWidth")+"%");b.click(function(){d.val()!=b.data("option-value")&&(d.val(b.data("option-value")),f.find(".switch").animate({left:f.data("elementWidth")*b.data("ind")+"%"}),f.data("active").find("a").css("text-shadow","none"),f.data("active").find("a").animate({color:"#2e333b"},function(){c(this).css("text-shadow","0px 1px 0px #FFF")}),f.data("active").removeClass("active"),
b.find("a").css("text-shadow","none"),b.find("a").animate({color:"white"},function(){c(this).css("text-shadow","0px 1px 0px #0b5b88");c(this).parent().addClass("active");d.change()}),f.data("active",b))});f.find(".selectList").append(b);0<b.data("original_option").filter(":selected").length&&(b.addClass("active"),f.data("active",b),f.find(".switch").css("left",f.data("elementWidth")*b.data("ind")+"%"))});d.after(f)},reSize:function(){c(this).show();c(this);c(this)}};c.fn.selectSlider=function(b,a){"string"!=
typeof b&&(a=b,a=c.extend({},{kg:"am"},a),c(this).each(function(){c.selectSlider.init(this,a)}))}})(jQuery);
(function(c){c.fn.syncTranslit=function(b){var a=c.extend({},c.fn.syncTranslit.defaults,b);return this.each(function(){$this=c(this);var b=c.meta?c.extend({},a,$this.data()):a,e=c("#"+a.destination);b.destinationObject=e;Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1});$this.keyup(function(){for(var a=c(this).val(),h="",j=0;j<a.length;j++)h+=c.fn.syncTranslit.transliterate(a.charAt(j),b);h=h.replace(RegExp("["+b.urlSeparator+"]{2,}",
"g"),b.urlSeparator);e.val(h)})})};c.fn.syncTranslit.transliterate=function(b,a){var c=!0,e;b.toLowerCase()!=b&&(c=!1);b=b.toLowerCase();e=a.dictOriginal.indexOf(b);e=-1==e?b:a.dictTranslate[e];if("url"==a.type){var f=e.charCodeAt(0);if(33<=f&&47>=f&&45!=f||58<=f&&64>=f||91<=f&&96>=f||123<=f&&126>=f||1072<=f)return"";if(" "==e||"-"==e)return a.urlSeparator}return"upper"==a.caseStyle?e.toUpperCase():"normal"==a.caseStyle?c?e.toLowerCase():e.toUpperCase():e};c.fn.syncTranslit.defaults={dictOriginal:"\u0430\u0431\u0432\u0433\u0434\u0435\u0451\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e\u044f\u0456\u0454\u0457\u0491".split(""),
dictTranslate:"a b v g d e e zh z i j k l m n o p r s t u f h ts ch sh sch  y  e ju ja i je ji g".split(" "),caseStyle:"lower",urlSeparator:" ",type:"raw"}})(jQuery);
var Hashtable=function(){function c(a){var b;if("string"==typeof a)return a;if(typeof a.hashCode==p)return b=a.hashCode(),"string"==typeof b?b:c(b);if(typeof a.toString==p)return a.toString();try{return String(a)}catch(d){return Object.prototype.toString.call(a)}}function b(a,b){return a.equals(b)}function a(a,b){return typeof b.equals==p?b.equals(a):a===b}function d(a){return function(b){if(null===b)throw Error("null is not a valid "+a);if("undefined"==typeof b)throw Error(a+" must not be undefined");
}}function e(a,b,c,d){this[0]=a;this.entries=[];this.addEntry(b,c);null!==d&&(this.getEqualityFunction=function(){return d})}function f(a){return function(b){for(var c=this.entries.length,d,e=this.getEqualityFunction(b);c--;)if(d=this.entries[c],e(b,d[0]))switch(a){case u:return!0;case r:return d;case x:return[c,d[1]]}return!1}}function h(a){return function(b){for(var c=b.length,d=0,e=this.entries.length;d<e;++d)b[c+d]=this.entries[d][a]}}function j(a,b){var c=a[b];return c&&c instanceof e?c:null}
function m(a,b){var d=this,f=[],h={},r=typeof a==p?a:c,u=typeof b==p?b:null;this.put=function(a,b){n(a);q(b);var c=r(a),d,g;return d=j(h,c),d?(g=d.getEntryForKey(a),g?g[1]=b:d.addEntry(a,b)):(d=new e(c,a,b,u),f[f.length]=d,h[c]=d),null};this.get=function(a){n(a);var b=r(a);if(b=j(h,b))if(a=b.getEntryForKey(a))return a[1];return null};this.containsKey=function(a){n(a);var b=r(a);return(b=j(h,b))?b.containsKey(a):!1};this.containsValue=function(a){q(a);for(var b=f.length;b--;)if(f[b].containsValue(a))return!0;
return!1};this.clear=function(){f.length=0;h={}};this.isEmpty=function(){return!f.length};var x=function(a){return function(){for(var b=[],c=f.length;c--;)f[c][a](b);return b}};this.keys=x("keys");this.values=x("values");this.entries=x("getEntries");this.remove=function(a){n(a);var b=r(a),c=null,d=j(h,b);if(d&&(c=d.removeEntryForKey(a),null!==c&&!d.entries.length)){a:{for(a=f.length;a--;)if(d=f[a],b===d[0])break a;a=null}g(f,a);delete h[b]}return c};this.size=function(){for(var a=0,b=f.length;b--;)a+=
f[b].entries.length;return a};this.each=function(a){for(var b=d.entries(),c=b.length,e;c--;)e=b[c],a(e[0],e[1])};this.putAll=function(a,b){for(var c=a.entries(),e,f,g,h=c.length,j=typeof b==p;h--;)e=c[h],f=e[0],e=e[1],j&&(g=d.get(f))&&(e=b(f,g,e)),d.put(f,e)};this.clone=function(){var c=new m(a,b);return c.putAll(d),c}}var p="function",g=typeof Array.prototype.splice==p?function(a,b){a.splice(b,1)}:function(a,b){var c,d,e;if(b===a.length-1)a.length=b;else{c=a.slice(b+1);a.length=b;d=0;for(e=c.length;d<
e;++d)a[b+d]=c[d]}},n=d("key"),q=d("value"),u=0,r=1,x=2;return e.prototype={getEqualityFunction:function(c){return typeof c.equals==p?b:a},getEntryForKey:f(r),getEntryAndIndexForKey:f(x),removeEntryForKey:function(a){return(a=this.getEntryAndIndexForKey(a))?(g(this.entries,a[0]),a[1]):null},addEntry:function(a,b){this.entries[this.entries.length]=[a,b]},keys:h(0),values:h(1),getEntries:function(a){for(var b=a.length,c=0,d=this.entries.length;c<d;++c)a[b+c]=this.entries[c].slice(0)},containsKey:f(u),
containsValue:function(a){for(var b=this.entries.length;b--;)if(a===this.entries[b][1])return!0;return!1}},m}();
(function(c){function b(a,b,c){this.dec=a;this.group=b;this.neg=c}function a(a,c){if(0==d.size())for(var m=0;m<f.length;m++){localeGroup=f[m];for(var p=0;p<localeGroup.length;p++)d.put(localeGroup[p],m)}m=".";p=",";0==c&&(-1!=a.indexOf("_")?a=a.split("_")[1].toLowerCase():-1!=a.indexOf("-")&&(a=a.split("-")[1].toLowerCase()));var g=d.get(a);g&&(g=e[g])&&(m=g[0],p=g[1]);return new b(m,p,"-")}var d=new Hashtable,e=[[".",","],[",","."],[","," "],[".","'"]],f=["ae au ca cn eg gb hk il in jp sk th tw us".split(" "),
"at br de dk es gr it nl pt tr vn".split(" "),"cz fi fr ru se pl".split(" "),["ch"]];c.fn.formatNumber=function(a,b,d){return this.each(function(){null==b&&(b=!0);null==d&&(d=!0);var e;c(this).is(":input")?e=new String(c(this).val()):e=new String(c(this).text());e=c.formatNumber(e,a);b&&(c(this).is(":input")?c(this).val(e):c(this).text(e));if(d)return e})};c.formatNumber=function(b,d){d=c.extend({},c.fn.formatNumber.defaults,d);a(d.locale.toLowerCase(),d.isFullLocale);for(var e="",f=!1,g=0;g<d.format.length;g++){if(-1!=
"0#-,.".indexOf(d.format.charAt(g))){if(0==g&&"-"==d.format.charAt(g)){f=!0;continue}break}e+=d.format.charAt(g)}for(var n="",g=d.format.length-1;0<=g&&-1=="0#-,.".indexOf(d.format.charAt(g));g--)n=d.format.charAt(g)+n;d.format=d.format.substring(e.length);d.format=d.format.substring(0,d.format.length-n.length);g=new Number(b);return c._formatNumber(g,d,n,e,f)};c._formatNumber=function(b,d,e,f,g){d=c.extend({},c.fn.formatNumber.defaults,d);var n=a(d.locale.toLowerCase(),d.isFullLocale),q=n.dec,u=
n.group,n=n.neg,r=!1;if(isNaN(b)){if(1!=d.nanForceZero)return null;b=0;r=!0}"%"==e&&(b*=100);var x="";if(-1<d.format.indexOf(".")){var y=q,w=d.format.substring(d.format.lastIndexOf(".")+1);1==d.round?b=new Number(b.toFixed(w.length)):(b=b.toString(),b=b.substring(0,b.lastIndexOf(".")+w.length+1),b=new Number(b));for(var v=new String((b%1).toFixed(w.length)),v=v.substring(v.lastIndexOf(".")+1),D=0;D<w.length;D++)if("#"==w.charAt(D)&&"0"!=v.charAt(D))y+=v.charAt(D);else{if("#"==w.charAt(D)&&"0"==v.charAt(D)){if(v.substring(D).match("[1-9]")){y+=
v.charAt(D);continue}break}"0"==w.charAt(D)&&(y+=v.charAt(D))}x+=y}else b=Math.round(b);D=Math.floor(b);0>b&&(D=Math.ceil(b));y="";-1==d.format.indexOf(".")?y=d.format:y=d.format.substring(0,d.format.indexOf("."));w="";if(0!=D||"#"!=y.substr(y.length-1)||r){r=new String(Math.abs(D));v=9999;-1!=y.lastIndexOf(",")&&(v=y.length-y.lastIndexOf(",")-1);for(var H=0,D=r.length-1;-1<D;D--)w=r.charAt(D)+w,H++,H==v&&0!=D&&(w=u+w,H=0);if(y.length>w.length&&(D=y.indexOf("0"),-1!=D)){D=y.length-D;for(r=y.length-
w.length-1;w.length<D;)v=y.charAt(r),","==v&&(v=u),w=v+w,r--}}return!w&&-1!==y.indexOf("0",y.length-1)&&(w="0"),x=w+x,0>b&&g&&0<f.length?f=n+f:0>b&&(x=n+x),d.decimalSeparatorAlwaysShown||x.lastIndexOf(q)==x.length-1&&(x=x.substring(0,x.length-1)),x=f+x+e,x};c.fn.parseNumber=function(a,b,d){null==b&&(b=!0);null==d&&(d=!0);var e;c(this).is(":input")?e=new String(c(this).val()):e=new String(c(this).text());if(a=c.parseNumber(e,a))if(b&&(c(this).is(":input")?c(this).val(a.toString()):c(this).text(a.toString())),
d)return a};c.parseNumber=function(b,d){d=c.extend({},c.fn.parseNumber.defaults,d);for(var e=a(d.locale.toLowerCase(),d.isFullLocale),f=e.dec,g=e.group,e=e.neg;-1<b.indexOf(g);)b=b.replace(g,"");b=b.replace(f,".").replace(e,"-");f="";g=!1;if("%"==b.charAt(b.length-1)||1==d.isPercentage)g=!0;for(e=0;e<b.length;e++)-1<"1234567890.-".indexOf(b.charAt(e))&&(f+=b.charAt(e));e=new Number(f);g&&(e/=100,g=f.indexOf("."),e=-1!=g?e.toFixed(f.length-g-1+2):e.toFixed(f.length-1));return e};c.fn.parseNumber.defaults=
{locale:"us",decimalSeparatorAlwaysShown:!1,isPercentage:!1,isFullLocale:!1};c.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0,isFullLocale:!1};Number.prototype.toFixed=function(a){return c._roundNumber(this,a)};c._roundNumber=function(a,b){var c=Math.pow(10,b||0),c=String(Math.round(a*c)/c);if(0<b){var d=c.indexOf(".");for(-1==d?(c+=".",d=0):d=c.length-(d+1);d<b;)c+="0",d++}return c}})(jQuery);
(function(){var c={};this.tmpl=function a(d,e){var f=/\W/.test(d)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+d.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):c[d]=c[d]||a(document.getElementById(d).innerHTML);return e?f(e):f}})();
(function(c){c.baseClass=function(b){return b=c(b),b.get(0).className.match(/([^ ]+)/)[1]};c.fn.addDependClass=function(b,a){var d=a?a:"-";return this.each(function(){var a=c.baseClass(this);a&&c(this).addClass(a+d+b)})};c.fn.removeDependClass=function(b,a){var d=a?a:"-";return this.each(function(){var a=c.baseClass(this);a&&c(this).removeClass(a+d+b)})};c.fn.toggleDependClass=function(b,a){var d=a?a:"-";return this.each(function(){var a=c.baseClass(this);a&&(c(this).is("."+a+d+b)?c(this).removeClass(a+
d+b):c(this).addClass(a+d+b))})}})(jQuery);
(function(c){function b(){this._init.apply(this,arguments)}b.prototype.oninit=function(){};b.prototype.events=function(){};b.prototype.onmousedown=function(){this.ptr.css({position:"absolute"})};b.prototype.onmousemove=function(a,b,c){this.ptr.css({left:b,top:c})};b.prototype.onmouseup=function(){};b.prototype.isDefault={drag:!1,clicked:!1,toclick:!0,mouseup:!1};b.prototype._init=function(){if(0<arguments.length){this.ptr=c(arguments[0]);this.outer=c(".draggable-outer");this.is={};c.extend(this.is,
this.isDefault);var a=this.ptr.offset();this.d={left:a.left,top:a.top,width:this.ptr.width(),height:this.ptr.height()};this.oninit.apply(this,arguments);this._events()}};b.prototype._getPageCoords=function(a){return a.targetTouches&&a.targetTouches[0]?{x:a.targetTouches[0].pageX,y:a.targetTouches[0].pageY}:{x:a.pageX,y:a.pageY}};b.prototype._bindEvent=function(a,b,c){this.supportTouches_?a.get(0).addEventListener(this.events_[b],c,!1):a.bind(this.events_[b],c)};b.prototype._events=function(){var a=
this;this.supportTouches_=c.browser.webkit&&-1!=navigator.userAgent.indexOf("Mobile");this.events_={click:this.supportTouches_?"touchstart":"click",down:this.supportTouches_?"touchstart":"mousedown",move:this.supportTouches_?"touchmove":"mousemove",up:this.supportTouches_?"touchend":"mouseup"};this._bindEvent(c(document),"move",function(b){a.is.drag&&(b.stopPropagation(),b.preventDefault(),a._mousemove(b))});this._bindEvent(c(document),"down",function(b){a.is.drag&&(b.stopPropagation(),b.preventDefault())});
this._bindEvent(c(document),"up",function(b){a._mouseup(b)});this._bindEvent(this.ptr,"down",function(b){return a._mousedown(b),!1});this._bindEvent(this.ptr,"up",function(b){a._mouseup(b)});this.ptr.find("a").click(function(){a.is.clicked=!0;if(!a.is.toclick)return a.is.toclick=!0,!1}).mousedown(function(b){return a._mousedown(b),!1});this.events()};b.prototype._mousedown=function(a){this.is.drag=!0;this.is.clicked=!1;this.is.mouseup=!1;var b=this.ptr.offset(),e=this._getPageCoords(a);this.cx=e.x-
b.left;this.cy=e.y-b.top;c.extend(this.d,{left:b.left,top:b.top,width:this.ptr.width(),height:this.ptr.height()});this.outer&&this.outer.get(0)&&this.outer.css({height:Math.max(this.outer.height(),c(document.body).height()),overflow:"hidden"});this.onmousedown(a)};b.prototype._mousemove=function(a){this.is.toclick=!1;var b=this._getPageCoords(a);this.onmousemove(a,b.x-this.cx,b.y-this.cy)};b.prototype._mouseup=function(a){this.is.drag&&(this.is.drag=!1,this.outer&&this.outer.get(0)&&(c.browser.mozilla?
this.outer.css({overflow:"hidden"}):this.outer.css({overflow:"visible"}),c.browser.msie&&"6.0"==c.browser.version?this.outer.css({height:"100%"}):this.outer.css({height:"auto"})),this.onmouseup(a))};window.Draggable=b})(jQuery);
(function(c){function b(a){return"undefined"==typeof a?!1:a instanceof Array||!(a instanceof Object)&&"[object Array]"==Object.prototype.toString.call(a)||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice")?!0:!1}function a(){return this.init.apply(this,arguments)}function d(){Draggable.apply(this,arguments)}c.jslider=function(b,d){var e=c(b);return e.data("jslider")||e.data("jslider",new a(b,d)),e.data("jslider")};
c.fn.jslider=function(a,d){var e,m=arguments;return this.each(function(){var p=c.jslider(this,a);if("string"==typeof a)switch(a){case "value":void 0!==m[1]&&void 0!==m[2]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0].set(m[1]),p[0].setIndexOver()),null!=p[1]&&null!=m[2]&&(p[1].set(m[2]),p[1].setIndexOver())):void 0!==m[1]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0].set(m[1]),p[0].setIndexOver())):e=p.getValue();break;case "prc":void 0!==m[1]&&void 0!==m[2]?(p=p.getPointers(),null!=p[0]&&null!=
m[1]&&(p[0]._set(m[1]),p[0].setIndexOver()),null!=p[1]&&null!=m[2]&&(p[1]._set(m[2]),p[1].setIndexOver())):void 0!==m[1]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0]._set(m[1]),p[0].setIndexOver())):e=p.getPrcValue();break;case "calculatedValue":var g=p.getValue().split(";");e="";for(var n=0;n<g.length;n++)e+=(0<n?";":"")+p.nice(g[n]);break;case "skin":p.setSkin(m[1])}else!a&&!d&&(b(e)||(e=[]),e.push(p))}),b(e)&&1==e.length&&(e=e[0]),e||this};var e={settings:{from:1,to:10,step:1,smooth:!0,limits:!0,
round:0,format:{format:"#,##0.##"},value:"5;7",dimension:""},className:"jslider",selector:".jslider-",template:tmpl('<span class="<%=className%>"><table><tr><td><div class="<%=className%>-bg"><i class="l"></i><i class="r"></i><i class="v"></i></div><div class="<%=className%>-pointer"></div><div class="<%=className%>-pointer <%=className%>-pointer-to"></div><div class="<%=className%>-label"><span><%=settings.from%></span></div><div class="<%=className%>-label <%=className%>-label-to"><span><%=settings.to%></span><%=settings.dimension%></div><div class="<%=className%>-value"><span></span><%=settings.dimension%></div><div class="<%=className%>-value <%=className%>-value-to"><span></span><%=settings.dimension%></div><div class="<%=className%>-scale"><%=scale%></div></td></tr></table></span>')};
a.prototype.init=function(a,b){this.settings=c.extend(!0,{},e.settings,b?b:{});this.inputNode=c(a).hide();this.settings.interval=this.settings.to-this.settings.from;this.settings.value=this.inputNode.attr("value");this.settings.calculate&&c.isFunction(this.settings.calculate)&&(this.nice=this.settings.calculate);this.settings.onstatechange&&c.isFunction(this.settings.onstatechange)&&(this.onstatechange=this.settings.onstatechange);this.is={init:!1};this.o={};this.create()};a.prototype.onstatechange=
function(){};a.prototype.create=function(){var a=this;this.domNode=c(e.template({className:e.className,settings:{from:this.nice(this.settings.from),to:this.nice(this.settings.to),dimension:this.settings.dimension},scale:this.generateScale()}));this.inputNode.after(this.domNode);this.drawScale();this.settings.skin&&0<this.settings.skin.length&&this.setSkin(this.settings.skin);this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};c.extend(this.o,{pointers:{},labels:{"0":{o:this.domNode.find(e.selector+
"value").not(e.selector+"value-to")},1:{o:this.domNode.find(e.selector+"value").filter(e.selector+"value-to")}},limits:{"0":this.domNode.find(e.selector+"label").not(e.selector+"label-to"),1:this.domNode.find(e.selector+"label").filter(e.selector+"label-to")}});c.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")});c.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")});a.settings.value.split(";")[1]||(this.settings.single=!0,this.domNode.addDependClass("single"));a.settings.limits||
this.domNode.addDependClass("limitless");this.domNode.find(e.selector+"pointer").each(function(b){var c=a.settings.value.split(";")[b];if(c){a.o.pointers[b]=new d(this,b,a);var e=a.settings.value.split(";")[b-1];e&&new Number(c)<new Number(e)&&(c=e);c=c<a.settings.from?a.settings.from:c;c=c>a.settings.to?a.settings.to:c;a.o.pointers[b].set(c,!0)}});this.o.value=this.domNode.find(".v");this.is.init=!0;c.each(this.o.pointers,function(){a.redraw(this)});var b=this;c(window).resize(function(){b.onresize()})};
a.prototype.setSkin=function(a){this.skin_&&this.domNode.removeDependClass(this.skin_,"_");this.domNode.addDependClass(this.skin_=a,"_")};a.prototype.setPointersIndex=function(){c.each(this.getPointers(),function(a){this.index(a)})};a.prototype.getPointers=function(){return this.o.pointers};a.prototype.generateScale=function(){if(this.settings.scale&&0<this.settings.scale.length){for(var a="",b=this.settings.scale,c=Math.round(10*(100/(b.length-1)))/10,d=0;d<b.length;d++)a+='<span style="left: '+
d*c+'%">'+("|"!=b[d]?"<ins>"+b[d]+"</ins>":"")+"</span>";return a}return""};a.prototype.drawScale=function(){this.domNode.find(e.selector+"scale span ins").each(function(){c(this).css({marginLeft:-c(this).outerWidth()/2})})};a.prototype.onresize=function(){var a=this;this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};c.each(this.o.pointers,function(){a.redraw(this)})};a.prototype.update=function(){this.onresize();this.drawScale()};a.prototype.limits=function(a,b){if(!this.settings.smooth){var c=
100*this.settings.step/this.settings.interval;a=Math.round(a/c)*c}c=this.o.pointers[1-b.uid];return c&&b.uid&&a<c.value.prc&&(a=c.value.prc),c&&!b.uid&&a>c.value.prc&&(a=c.value.prc),0>a&&(a=0),100<a&&(a=100),Math.round(10*a)/10};a.prototype.redraw=function(a){if(!this.is.init)return!1;this.setValue();this.o.pointers[0]&&this.o.pointers[1]&&this.o.value.css({left:this.o.pointers[0].value.prc+"%",width:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"});this.o.labels[a.uid].value.html(this.nice(a.value.origin));
this.redrawLabels(a)};a.prototype.redrawLabels=function(a){function b(a,d,e){return d.margin=-d.label/2,label_left=d.border+d.margin,0>label_left&&(d.margin-=label_left),d.border+d.label/2>c.sizes.domWidth?(d.margin=0,d.right=!0):d.right=!1,a.o.css({left:e+"%",marginLeft:d.margin,right:"auto"}),d.right&&a.o.css({left:"auto",right:0}),d}var c=this,d=this.o.labels[a.uid],e=a.value.prc,g={label:d.o.outerWidth(),right:!1,border:e*this.sizes.domWidth/100};if(!this.settings.single){var n=this.o.pointers[1-
a.uid],q=this.o.labels[n.uid];switch(a.uid){case 0:g.border+g.label/2>q.o.offset().left-this.sizes.domOffset.left?(q.o.css({visibility:"hidden"}),q.value.html(this.nice(n.value.origin)),d.o.css({visibility:"visible"}),e=(n.value.prc-e)/2+e,n.value.prc!=a.value.prc&&(d.value.html(this.nice(a.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(n.value.origin)),g.label=d.o.outerWidth(),g.border=e*this.sizes.domWidth/100)):q.o.css({visibility:"visible"});break;case 1:g.border-g.label/2<q.o.offset().left-this.sizes.domOffset.left+
q.o.outerWidth()?(q.o.css({visibility:"hidden"}),q.value.html(this.nice(n.value.origin)),d.o.css({visibility:"visible"}),e=(e-n.value.prc)/2+n.value.prc,n.value.prc!=a.value.prc&&(d.value.html(this.nice(n.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(a.value.origin)),g.label=d.o.outerWidth(),g.border=e*this.sizes.domWidth/100)):q.o.css({visibility:"visible"})}}g=b(d,g,e);q&&(g={label:q.o.outerWidth(),right:!1,border:n.value.prc*this.sizes.domWidth/100},g=b(q,g,n.value.prc));this.redrawLimits()};a.prototype.redrawLimits=
function(){if(this.settings.limits){var a=[!0,!0];for(key in this.o.pointers)if(!this.settings.single||0==key){var b=this.o.labels[this.o.pointers[key].uid],c=b.o.offset().left-this.sizes.domOffset.left,d=this.o.limits[0];c<d.outerWidth()&&(a[0]=!1);d=this.o.limits[1];c+b.o.outerWidth()>this.sizes.domWidth-d.outerWidth()&&(a[1]=!1)}for(b=0;b<a.length;b++)a[b]?this.o.limits[b].fadeIn("fast"):this.o.limits[b].fadeOut("fast")}};a.prototype.setValue=function(){var a=this.getValue();this.inputNode.attr("value",
a);this.onstatechange.call(this,a)};a.prototype.getValue=function(){if(!this.is.init)return!1;var a=this,b="";return c.each(this.o.pointers,function(c){void 0!=this.value.prc&&!isNaN(this.value.prc)&&(b+=(0<c?";":"")+a.prcToValue(this.value.prc))}),b};a.prototype.getPrcValue=function(){if(!this.is.init)return!1;var a="";return c.each(this.o.pointers,function(b){void 0!=this.value.prc&&!isNaN(this.value.prc)&&(a+=(0<b?";":"")+this.value.prc)}),a};a.prototype.prcToValue=function(a){if(this.settings.heterogeneity&&
0<this.settings.heterogeneity.length)for(var b=this.settings.heterogeneity,c=0,d=this.settings.from,e=0;e<=b.length;e++){var g=b[e]?b[e].split("/"):[100,this.settings.to];g[0]=new Number(g[0]);g[1]=new Number(g[1]);if(a>=c&&a<=g[0])var n=d+(a-c)*(g[1]-d)/(g[0]-c);c=g[0];d=g[1]}else n=this.settings.from+a*this.settings.interval/100;return this.round(n)};a.prototype.valueToPrc=function(a,b){if(this.settings.heterogeneity&&0<this.settings.heterogeneity.length)for(var c=this.settings.heterogeneity,d=
0,e=this.settings.from,g=0;g<=c.length;g++){var n=c[g]?c[g].split("/"):[100,this.settings.to];n[0]=new Number(n[0]);n[1]=new Number(n[1]);if(a>=e&&a<=n[1])var q=b.limits(d+(a-e)*(n[0]-d)/(n[1]-e));d=n[0];e=n[1]}else q=b.limits(100*(a-this.settings.from)/this.settings.interval);return q};a.prototype.round=function(a){return a=Math.round(a/this.settings.step)*this.settings.step,this.settings.round?a=Math.round(a*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round):a=Math.round(a),a};a.prototype.nice=
function(a){return a=a.toString().replace(/,/gi,".").replace(/ /gi,""),c.formatNumber?c.formatNumber(new Number(a),this.settings.format||{}).replace(/-/gi,"&minus;"):new Number(a)};d.prototype=new Draggable;d.prototype.oninit=function(a,b,c){this.uid=b;this.parent=c;this.value={};this.settings=this.parent.settings};d.prototype.onmousedown=function(){this._parent={offset:this.parent.domNode.offset(),width:this.parent.domNode.width()};this.ptr.addDependClass("hover");this.setIndexOver()};d.prototype.onmousemove=
function(a){a=this._getPageCoords(a);this._set(this.calc(a.x))};d.prototype.onmouseup=function(){this.parent.settings.callback&&c.isFunction(this.parent.settings.callback)&&this.parent.settings.callback.call(this.parent,this.parent.getValue());this.ptr.removeDependClass("hover")};d.prototype.setIndexOver=function(){this.parent.setPointersIndex(1);this.index(2)};d.prototype.index=function(a){this.ptr.css({zIndex:a})};d.prototype.limits=function(a){return this.parent.limits(a,this)};d.prototype.calc=
function(a){return this.limits(100*(a-this._parent.offset.left)/this._parent.width)};d.prototype.set=function(a,b){this.value.origin=this.parent.round(a);this._set(this.parent.valueToPrc(a,this),b)};d.prototype._set=function(a,b){b||(this.value.origin=this.parent.prcToValue(a));this.value.prc=a;this.ptr.css({left:a+"%"});this.parent.redraw(this)}})(jQuery);
(function(c){function b(a){return"undefined"==typeof a?!1:a instanceof Array||!(a instanceof Object)&&"[object Array]"==Object.prototype.toString.call(a)||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice")?!0:!1}function a(){return this.init.apply(this,arguments)}function d(){Draggable.apply(this,arguments)}c.jslider=function(b,d){var e=c(b);e.data("jslider")||e.data("jslider",new a(b,d));return e.data("jslider")};
c.fn.jslider=function(a,d){var e,m=arguments;this.each(function(){var p=c.jslider(this,a);if("string"==typeof a)switch(a){case "value":void 0!==m[1]&&void 0!==m[2]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0].set(m[1]),p[0].setIndexOver()),null!=p[1]&&null!=m[2]&&(p[1].set(m[2]),p[1].setIndexOver())):void 0!==m[1]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0].set(m[1]),p[0].setIndexOver())):e=p.getValue();break;case "prc":void 0!==m[1]&&void 0!==m[2]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&
(p[0]._set(m[1]),p[0].setIndexOver()),null!=p[1]&&null!=m[2]&&(p[1]._set(m[2]),p[1].setIndexOver())):void 0!==m[1]?(p=p.getPointers(),null!=p[0]&&null!=m[1]&&(p[0]._set(m[1]),p[0].setIndexOver())):e=p.getPrcValue();break;case "calculatedValue":var g=p.getValue().split(";");e="";for(var n=0;n<g.length;n++)e+=(0<n?";":"")+p.nice(g[n]);break;case "skin":p.setSkin(m[1])}else!a&&!d&&(b(e)||(e=[]),e.push(p))});b(e)&&1==e.length&&(e=e[0]);return e||this};var e={settings:{from:1,to:10,step:1,smooth:!0,limits:!0,
minInterval:0,round:0,format:{format:"#,##0.##"},value:"5;7",dimension:""},className:"jslider",selector:".jslider-",template:tmpl('<span class="<%=className%>"><table><tr><td><div class="<%=className%>-bg"><i class="l"></i><i class="r"></i><i class="v"></i></div><div class="<%=className%>-pointer"></div><div class="<%=className%>-pointer <%=className%>-pointer-to"></div><div class="<%=className%>-label"><span><%=settings.from%></span></div><div class="<%=className%>-label <%=className%>-label-to"><span><%=settings.to%></span><%=settings.dimension%></div><div class="<%=className%>-value"><span></span><%=settings.dimension%></div><div class="<%=className%>-value <%=className%>-value-to"><span></span><%=settings.dimension%></div><div class="<%=className%>-scale"><%=scale%></div></td></tr></table></span>')};
a.prototype.init=function(a,b){this.settings=c.extend(!0,{},e.settings,b?b:{});this.inputNode=c(a).hide();this.settings.interval=this.settings.to-this.settings.from;this.settings.value=this.inputNode.attr("value");this.settings.calculate&&c.isFunction(this.settings.calculate)&&(this.nice=this.settings.calculate);this.settings.onstatechange&&c.isFunction(this.settings.onstatechange)&&(this.onstatechange=this.settings.onstatechange);this.is={init:!1};this.o={};this.create()};a.prototype.onstatechange=
function(){};a.prototype.create=function(){var a=this;this.domNode=c(e.template({className:e.className,settings:{from:this.nice(this.settings.from),to:this.nice(this.settings.to),dimension:this.settings.dimension},scale:this.generateScale()}));this.inputNode.after(this.domNode);this.drawScale();this.settings.skin&&0<this.settings.skin.length&&this.setSkin(this.settings.skin);this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};c.extend(this.o,{pointers:{},labels:{"0":{o:this.domNode.find(e.selector+
"value").not(e.selector+"value-to")},1:{o:this.domNode.find(e.selector+"value").filter(e.selector+"value-to")}},limits:{"0":this.domNode.find(e.selector+"label").not(e.selector+"label-to"),1:this.domNode.find(e.selector+"label").filter(e.selector+"label-to")}});c.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")});c.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")});a.settings.value.split(";")[1]||(this.settings.single=!0,this.domNode.addDependClass("single"));a.settings.limits||
this.domNode.addDependClass("limitless");this.domNode.find(e.selector+"pointer").each(function(b){var c=a.settings.value.split(";")[b];if(c){a.o.pointers[b]=new d(this,b,a);var e=a.settings.value.split(";")[b-1];e&&new Number(c)<new Number(e)&&(c=e);c=c<a.settings.from?a.settings.from:c;c=c>a.settings.to?a.settings.to:c;a.o.pointers[b].set(c,!0)}});this.o.value=this.domNode.find(".v");this.is.init=!0;c.each(this.o.pointers,function(){a.redraw(this)});var b=this;c(window).resize(function(){b.onresize()});
var j=this;c(window).load(function(){j.onresize()})};a.prototype.setSkin=function(a){this.skin_&&this.domNode.removeDependClass(this.skin_,"_");this.domNode.addDependClass(this.skin_=a,"_")};a.prototype.setPointersIndex=function(){c.each(this.getPointers(),function(a){this.index(a)})};a.prototype.getPointers=function(){return this.o.pointers};a.prototype.generateScale=function(){if(this.settings.scale&&0<this.settings.scale.length){for(var a="",b=this.settings.scale,c=Math.round(10*(100/(b.length-
1)))/10,d=0;d<b.length;d++)a+='<span style="left: '+d*c+'%">'+("|"!=b[d]?"<ins>"+b[d]+"</ins>":"")+"</span>";return a}return""};a.prototype.drawScale=function(){this.domNode.find(e.selector+"scale span ins").each(function(){c(this).css({marginLeft:-c(this).outerWidth()/2})})};a.prototype.onresize=function(){var a=this;this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()};c.each(this.o.pointers,function(){a.redraw(this)})};a.prototype.update=function(){this.onresize();this.drawScale()};
a.prototype.limits=function(a,b){if(!this.settings.smooth){var c=100*this.settings.step/this.settings.interval;a=Math.round(a/c)*c}c=this.o.pointers[1-b.uid];this.prcToValue(a);var d=Math.round(1E3*(this.settings.minInterval/(this.settings.to-this.settings.from)))/10;c&&(b.uid&&a<c.value.prc+d)&&(a=c.value.prc+d);c&&(!b.uid&&a>c.value.prc-d)&&(a=c.value.prc-d);0>a&&(a=0);100<a&&(a=100);return Math.round(10*a)/10};a.prototype.redraw=function(a){if(!this.is.init)return!1;this.setValue();this.o.pointers[0]&&
this.o.pointers[1]?this.o.value.css({left:this.o.pointers[0].value.prc+"%",width:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"}):this.settings.single&&this.o.value.css({width:this.o.pointers[0].value.prc+"%"});this.o.labels[a.uid].value.html(this.nice(a.value.origin));this.redrawLabels(a)};a.prototype.redrawLabels=function(a){function b(a,d,e){d.margin=-d.label/2;label_left=d.border+d.margin;d.border+d.label/2>c.sizes.domWidth||(d.right=!1);var f=a.o.css("marginLeft"),f=f.substr(0,
f.length-2);if(0.7>Math.abs(f-d.margin))return d.margin=f,a.o.css({left:e+"%",right:"auto"}),d;a.o.css({left:e+"%",marginLeft:d.margin,right:"auto"});return d}var c=this,d=this.o.labels[a.uid],e=a.value.prc,g={label:d.o.outerWidth(),right:!1,border:e*this.sizes.domWidth/100};if(!this.settings.single){var n=this.o.pointers[1-a.uid],q=this.o.labels[n.uid];switch(a.uid){case 0:g.border+g.label/2>q.o.offset().left-this.sizes.domOffset.left?(q.o.css({visibility:"hidden"}),q.value.html(this.nice(n.value.origin)),
d.o.css({visibility:"visible"}),e=(n.value.prc-e)/2+e,n.value.prc!=a.value.prc&&(d.value.html(this.nice(a.value.origin)+"-"+this.nice(n.value.origin)),g.label=d.o.outerWidth(),g.border=e*this.sizes.domWidth/100)):q.o.css({visibility:"visible"});break;case 1:g.border-g.label/2<q.o.offset().left-this.sizes.domOffset.left+q.o.outerWidth()?(q.o.css({visibility:"hidden"}),q.value.html(this.nice(n.value.origin)),d.o.css({visibility:"visible"}),e=(e-n.value.prc)/2+n.value.prc,n.value.prc!=a.value.prc&&(d.value.html(this.nice(n.value.origin)+
"-"+this.nice(a.value.origin)),g.label=d.o.outerWidth(),g.border=e*this.sizes.domWidth/100)):q.o.css({visibility:"visible"})}}g=b(d,g,e);q&&(g={label:q.o.outerWidth(),right:!1,border:n.value.prc*this.sizes.domWidth/100},g=b(q,g,n.value.prc));this.redrawLimits()};a.prototype.redrawLimits=function(){if(this.settings.limits){var a=[!0,!0];for(key in this.o.pointers)if(!this.settings.single||0==key){var b=this.o.labels[this.o.pointers[key].uid],c=b.o.offset().left-this.sizes.domOffset.left,d=this.o.limits[0];
c<d.outerWidth()&&(a[0]=!1);d=this.o.limits[1];c+b.o.outerWidth()>this.sizes.domWidth-d.outerWidth()&&(a[1]=!1)}for(b=0;b<a.length;b++)a[b]?this.o.limits[b].fadeIn("fast"):this.o.limits[b].fadeOut("fast")}};a.prototype.setValue=function(){var a=this.getValue();this.inputNode.attr("value",a);this.onstatechange.call(this,a)};a.prototype.getValue=function(){if(!this.is.init)return!1;var a=this,b="";c.each(this.o.pointers,function(c){void 0!=this.value.prc&&!isNaN(this.value.prc)&&(b+=(0<c?";":"")+a.prcToValue(this.value.prc))});
return b};a.prototype.getPrcValue=function(){if(!this.is.init)return!1;var a="";c.each(this.o.pointers,function(b){void 0!=this.value.prc&&!isNaN(this.value.prc)&&(a+=(0<b?";":"")+this.value.prc)});return a};a.prototype.prcToValue=function(a){if(this.settings.heterogeneity&&0<this.settings.heterogeneity.length)for(var b=this.settings.heterogeneity,c=0,d=this.settings.from,e=0;e<=b.length;e++){var g=b[e]?b[e].split("/"):[100,this.settings.to];g[0]=new Number(g[0]);g[1]=new Number(g[1]);if(a>=c&&a<=
g[0])var n=d+(a-c)*(g[1]-d)/(g[0]-c);c=g[0];d=g[1]}else n=this.settings.from+a*this.settings.interval/100;return this.round(n)};a.prototype.valueToPrc=function(a,b){if(this.settings.heterogeneity&&0<this.settings.heterogeneity.length)for(var c=this.settings.heterogeneity,d=0,e=this.settings.from,g=0;g<=c.length;g++){var n=c[g]?c[g].split("/"):[100,this.settings.to];n[0]=new Number(n[0]);n[1]=new Number(n[1]);if(a>=e&&a<=n[1])var q=b.limits(d+(a-e)*(n[0]-d)/(n[1]-e));d=n[0];e=n[1]}else q=b.limits(100*
(a-this.settings.from)/this.settings.interval);return q};a.prototype.round=function(a){a=Math.round(a/this.settings.step)*this.settings.step;return a=this.settings.round?Math.round(a*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round):Math.round(a)};a.prototype.nice=function(a){a=a.toString().replace(/,/gi,".").replace(/ /gi,"");return c.formatNumber?c.formatNumber(new Number(a),this.settings.format||{}).replace(/-/gi,"&minus;"):new Number(a)};d.prototype=new Draggable;d.prototype.oninit=
function(a,b,c){this.uid=b;this.parent=c;this.value={};this.settings=this.parent.settings};d.prototype.onmousedown=function(){this._parent={offset:this.parent.domNode.offset(),width:this.parent.domNode.width()};this.ptr.addDependClass("hover");this.setIndexOver()};d.prototype.onmousemove=function(a){a=this._getPageCoords(a);this._set(this.calc(a.x))};d.prototype.onmouseup=function(){this.parent.settings.callback&&c.isFunction(this.parent.settings.callback)&&this.parent.settings.callback.call(this.parent,
this.parent.getValue());this.ptr.removeDependClass("hover")};d.prototype.setIndexOver=function(){this.parent.setPointersIndex(1);this.index(2)};d.prototype.index=function(a){this.ptr.css({zIndex:a})};d.prototype.limits=function(a){return this.parent.limits(a,this)};d.prototype.calc=function(a){return this.limits(100*(a-this._parent.offset.left)/this._parent.width)};d.prototype.set=function(a,b){this.value.origin=this.parent.round(a);this._set(this.parent.valueToPrc(a,this),b)};d.prototype._set=function(a,
b){b||(this.value.origin=this.parent.prcToValue(a));this.value.prc=a;this.ptr.css({left:a+"%"});this.parent.redraw(this)}})(jQuery);
(function(c){c.photoSlider={init:function(b,a){var d=c(b);d.attr("class");d.data("options",a);var e=this;e.obj=d;e.unloadedImages=0;e.totalImages=0;e.leftNavi=c('<div class="left-navi"></div>');e.leftNavi.hide();e.rightNavi=c('<div class="right-navi"></div>');e.rightNavi.hide();e.obj.after(e.rightNavi);e.obj.after(e.leftNavi);e.leftNavi.click(function(){e.leftClick()});e.rightNavi.click(function(){e.rightClick()});console.log("initing photoslider!!!!");console.log(d);console.log(e);d.find("img").each(function(a,
b){e.unloadedImages++;e.totalImages++;var d=new Image,m=c(b).attr("src");c(d).bind("load error",function(){console.log("image is loaded",this);e.unloadedImages--;0>=e.unloadedImages&&e.allImagesLoaded()});d.src=m})},testLimits:function(){var b="none"!=this.rightNavi.css("display");this.fullWidth-this.leftPosition>this.visibleWidth&&!b?this.rightNavi.fadeIn():this.fullWidth-this.leftPosition<=this.visibleWidth&&b&&this.rightNavi.fadeOut();b="none"!=this.leftNavi.css("display");0<this.indexPosition&&
!b?this.leftNavi.fadeIn():0>=this.indexPosition&&b&&this.leftNavi.fadeOut()},allImagesLoaded:function(){var b=this;console.log("allImages loaded");b.fullWidth=0;var a=b.obj.find("li:last").position(),d=b.obj.find("li:last").width();b.fullWidth=a.left+d;b.indexPosition=0;b.leftPosition=0;b.transitionProcess=!1;b.visibleWidth=b.obj.parent().width();b.testLimits();c(window).resize(function(){b.onresize()});console.log(b)},transit:function(){var b=this,a=b.obj.find("li:eq("+b.indexPosition+")").position();
0<b.indexPosition&&b.fullWidth-a.left<b.visibleWidth&&(a.left=b.fullWidth-b.visibleWidth);b.leftPosition=a.left;b.obj.animate({left:-a.left+"px"},200,function(){b.transitionProcess=!1;b.testLimits()})},rightClick:function(){!this.transitionProcess&&(this.fullWidth-this.leftPosition>this.visibleWidth&&this.indexPosition<this.totalImages)&&(this.transitionProcess=!0,this.indexPosition++,this.transit())},leftClick:function(){!this.transitionProcess&&0<this.indexPosition&&(this.transitionProcess=!0,this.indexPosition--,
this.transit())},onresize:function(){var b=this.fullWidth-this.leftPosition==this.visibleWidth;this.visibleWidth=this.obj.parent().width();b&&(this.leftPosition=this.fullWidth-this.visibleWidth,this.obj.css({left:-this.leftPosition+"px"}))}};c.fn.photoSlider=function(b,a){"string"!=typeof b&&(a=b,a=c.extend({},{kg:"am"},a),c(this).each(function(){var b=this;window.setTimeout(function(){c.photoSlider.init(b,a)},100)}))}})(jQuery);
var arr_textLoad=["\u042d\u0442\u043e \u0437\u0430\u0439\u043c\u0435\u0442 \u043e\u0442 5 \u0434\u043e 30 \u0441\u0435\u043a\u0443\u043d\u0434","\u041c\u044b \u0438\u0449\u0435\u043c \u0441\u0440\u0435\u0434\u0438 500 \u0430\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439","\u0423\u0436\u0435 \u043f\u043e\u0447\u0442\u0438 \u0433\u043e\u0442\u043e\u0432\u043e","\u0415\u0449\u0451 \u0441\u0435\u043a\u0443\u043d\u0434\u043e\u0447\u043a\u0443","\u041d\u0435\u043c\u043d\u043e\u0433\u043e \u0442\u0435\u0440\u043f\u0435\u043d\u0438\u044f"],
pointsInterval,textInterval,started=!1,var_loadTextCounts;function loaderChange(c){var b=$("#changeText");c?started||(var_loadTextCounts=0,b.text(arr_textLoad[var_loadTextCounts]),pointsInterval=setInterval(runPoints,500),textInterval=setInterval(runText,12E3),started=!0):(clearInterval(pointsInterval),clearInterval(textInterval),started=!1)}
function runPoints(){var c=$("#loadLight"),b=c.find("li.active").index(),b=b+1;b==c.find("li").length&&(b=0);c.find("li").removeClass("active");c.find("li").eq(b).addClass("active")}function runText(){var c=$("#changeText");var_loadTextCounts+=1;var_loadTextCounts==arr_textLoad.length&&(var_loadTextCounts=0);c.text(arr_textLoad[var_loadTextCounts])}var speedAnimateChangePic=500;
function slideToursSlide(){if(0<$(".innerBlockMain").length&&$(".innerBlockMain").is(":visible")){var c=$(window).width(),b=$(".slideTours"),a=$(".centerTours"),d;1E3>=c?d=1E3:1E3<c&&1050>c?d=c:1050<c&&1290>c?d=Math.floor(1050+(c-1050)/(240/155)):1290<c&&1390>c?d=1205:1390<c&&1490>c?d=Math.floor(1205+(c-1390)/(100/185)):1490<c&&(d=1390);a.css("width",d+"px");$(".slideTours .center").css("width",d+"px");var c=$(".slideTours .center").width(),e;1390<=c?e=Math.floor(c/8-2):1390>c&&1290<=c?e=Math.floor(c/
7-2):1290>c&&1E3<c?e=Math.floor(c/6-2):1E3>=c&&(e=Math.floor(c/5-2));b.find(".toursTicketsMain").css("width",e+"px")}}
function CenterIMGResize(c){void 0==c&&(c=0);if(0<$(".innerBlockMain").length&&$(".innerBlockMain").is(":visible")){var b=$("body").height();800>b?(b=b-38-158,$(".slideTours").addClass("small")):(b=b-38-214,$(".slideTours").removeClass("small"));$(".innerBlockMain").css("height",b+"px");var a=$(".innerBlockMain .IMGmain").eq(c).find("img"),d=0,e=$(".slideTours .center").width(),b=($("div.IMGmain").eq(c).find("img").height()-b)/2;0<$(".IMGmain").length&&$(".IMGmain").is(":visible")&&(0>b?(a.css("top",
"0px"),a.css("height",$(".innerBlockMain .IMGmain").eq(c).height()+"px").css("width","auto")):a.css("top","-"+b+"px"),1390<=e?d=(1390-e)/2:1390>e&&1290<=e?d=(1390-e)/2:1290>e&&1E3<e?d=(1390-e)/2:1E3>=e&&(d=(1390-e)/2),a.css("left","-"+d+"px"))}}
function smallIMGresizeIndex(){var c=$(".imgTours");0<c.length&&c.is(":visible")&&(c.find("img"),c.each(function(){var b=$(this).find("img"),a,c;c=$(this).height();b.load(function(){a=b.height();var e=(a-c)/2;0<e?b.css("margin-top","-"+e+"px"):(b.css("margin-top","0px"),a>c&&b.css("height",c+"px"))})}))}function indexIMGresizeCenter(c){c=$(".IMGmain").eq(c).find("img");c.css("width","100%");var b=c.height(),a=$(".innerBlockMain").height();a>b&&c.css("height",a+"px").css("width","auto")}
function WidthMine(){var c=$(".slide-turn-mode ul").find(".active"),b=c.index();if(!(0>b)){var a=$(".slide-turn-mode").find(".switch"),d=[[143,0],[135,155],[95,295],[148,403]];a.css("width",d[b][0]+"px").css("left",d[b][1]+"px");a.find(".c").css("width",d[b][0]-27+"px");$(".slide-turn-mode .btn").click(function(e){e.preventDefault();$(this).hasClass("active")||($(".btn").removeClass("active"),$(this).addClass("active"),c=$(".slide-turn-mode ul").find(".active"),b=c.index(),a.animate({width:d[b][0]+
"px",left:d[b][1]+"px"},400,function(){$(this).addClass("active")}),a.find(".c").animate({width:d[b][0]-27+"px"},400))})}}
function googleInfoDiv(){this.extend(googleInfoDiv,google.maps.OverlayView);this.show=__bind(this.show,this);this.hide=__bind(this.hide,this);this.getPosFromLatLng_=__bind(this.getPosFromLatLng_,this);this.onAdd=__bind(this.onAdd,this);this.draw=__bind(this.draw,this);this.setContent=__bind(this.setContent,this);this.setPosition=__bind(this.setPosition,this);this.latLng=this.div_=null;this.content="";googleInfoDiv.prototype.getProjection=google.maps.OverlayView.prototype.getProjection}
googleInfoDiv.prototype.extend=function(c,b){return function(a){for(var b in a.prototype)this.prototype[b]=a.prototype[b];return this}.apply(c,[b])};googleInfoDiv.prototype.setPosition=function(c){this.latLng=c;c=this.getPosFromLatLng_(this.latLng);this.div_&&this.div_.css({top:c.y+"px",left:c.x+"px"})};googleInfoDiv.prototype.setContent=function(c){this.content=c;this.div_&&this.div_.html(this.content)};
googleInfoDiv.prototype.draw=function(){var c;if(this.div_)return c=this.getPosFromLatLng_(this.latLng),this.div_.css({top:c.y+"px",left:c.x+"px"})};googleInfoDiv.prototype.onAdd=function(){var c,b;b=this.getPosFromLatLng_(this.latLng);c=$('<div style=" width: 5px; height: 5px;position: absolute">'+this.content+"</div>");c.css({top:b.y-20+"px",left:b.x+"px"});this.div_=c;b=this.getPanes();$(b.overlayMouseTarget).append(c)};
googleInfoDiv.prototype.getPosFromLatLng_=function(c){var b;this.getProjection()&&(b=this.getProjection().fromLatLngToDivPixel(c));return b};googleInfoDiv.prototype.hide=function(){this.div_&&this.div_.hide()};googleInfoDiv.prototype.show=function(){this.div_&&this.div_.show()};
(function(c){var b=(c.browser.msie?"paste":"input")+".mask",a=void 0!=window.orientation;c.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"};c.fn.extend({caret:function(a,b){if(0!=this.length){if("number"==typeof a)return b="number"==typeof b?b:a,this.each(function(){if(this.setSelectionRange)this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0);c.moveEnd("character",b);c.moveStart("character",a);c.select()}});if(this[0].setSelectionRange)a=
this[0].selectionStart,b=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-1E5);b=a+c.text.length}return{begin:a,end:b}}},unmask:function(){return this.trigger("unmask")},mask:function(d,e){if(!d&&0<this.length)return c(this[0]).data(c.mask.dataName)();e=c.extend({placeholder:"_",completed:null},e);var f=c.mask.definitions,h=[],j=d.length,m=null,p=d.length;c.each(d.split(""),function(a,b){"?"==
b?(p--,j=a):f[b]?(h.push(RegExp(f[b])),null==m&&(m=h.length-1)):h.push(null)});return this.trigger("unmask").each(function(){function g(a){for(;++a<=p&&!h[a];);return a}function n(a,b){if(!(0>a)){for(var c=a,d=g(b);c<p;c++)if(h[c]){if(d<p&&h[c].test(v[d]))v[c]=v[d],v[d]=e.placeholder;else break;d=g(d)}x();w.caret(Math.max(m,a))}}function q(b){b=b.which;if(8==b||46==b||a&&127==b){var c=w.caret(),d=c.begin,c=c.end;if(0==c-d){if(46!=b)for(;0<=--d&&!h[d];);else d=c=g(d-1);c=46==b?g(c):c}r(d,c);n(d,c-
1);return!1}if(27==b)return w.val(D),w.caret(0,y()),!1}function u(a){var b=a.which,c=w.caret();if(a.ctrlKey||a.altKey||a.metaKey||32>b)return!0;if(b){0!=c.end-c.begin&&(r(c.begin,c.end),n(c.begin,c.end-1));a=g(c.begin-1);if(a<p&&(b=String.fromCharCode(b),h[a].test(b))){for(var c=a,d=e.placeholder;c<p;c++)if(h[c]){var f=g(c),j=v[c];v[c]=d;if(f<p&&h[f].test(j))d=j;else break}v[a]=b;x();a=g(a);w.caret(a);e.completed&&a>=p&&e.completed.call(w)}return!1}}function r(a,b){for(var c=a;c<b&&c<p;c++)h[c]&&
(v[c]=e.placeholder)}function x(){return w.val(v.join("")).val()}function y(a){for(var b=w.val(),c=-1,d=0,f=0;d<p;d++)if(h[d]){for(v[d]=e.placeholder;f++<b.length;){var g=b.charAt(f-1);if(h[d].test(g)){v[d]=g;c=d;break}}if(f>b.length)break}else v[d]==b.charAt(f)&&d!=j&&(f++,c=d);if(!a&&c+1<j)w.val(""),r(0,p);else if(a||c+1>=j)x(),a||w.val(w.val().substring(0,c+1));return j?d:m}var w=c(this),v=c.map(d.split(""),function(a){if("?"!=a)return f[a]?e.placeholder:a}),D=w.val();w.data(c.mask.dataName,function(){return c.map(v,
function(a,b){return h[b]&&a!=e.placeholder?a:null}).join("")});w.attr("readonly")||w.one("unmask",function(){w.unbind(".mask").removeData(c.mask.dataName)}).bind("focus.mask",function(){D=w.val();var a=y();x();var b=function(){a==d.length?w.caret(0,a):w.caret(a)};(c.browser.msie?b:function(){setTimeout(b,0)})()}).bind("blur.mask",function(){y();w.val()!=D&&w.change()}).bind("keydown.mask",q).bind("keypress.mask",u).bind(b,function(){setTimeout(function(){w.caret(y(!0))},0)});y()})}})})(jQuery);
(function(c,b){var a={},d=c.TraceKit;a.noConflict=function(){c.TraceKit=d;return a};a._has=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var e=function(b,c){var d=null;if(!c||a.collectWindowErrors){for(var e in h)if(a._has(h,e))try{h[e].apply(null,[b].concat(Array.prototype.slice.call(arguments,2)))}catch(f){d=f}if(d)throw d;}},f=function(b){var d=Array.prototype.slice.call(arguments,1);if(m){if(j===b)return;var f=m;j=m=null;e.apply(null,[f,null].concat(d))}var g=a.computeStackTrace(b);
m=g;j=b;c.setTimeout(function(){j===b&&(j=m=null,e.apply(null,[g,null].concat(d)))},g.incomplete?2E3:0);throw b;},h=[],j=null,m=null,p=c.onerror;c.onerror=function(b,c,d){var f=null;m?(a.computeStackTrace.augmentStackTraceWithInitialElement(m,c,d,b),f=m,j=m=null):(f={url:c,line:d},f.func=a.computeStackTrace.guessFunctionName(f.url,f.line),f.context=a.computeStackTrace.gatherContext(f.url,f.line),f={mode:"onerror",message:b,url:document.location.href,stack:[f],useragent:navigator.userAgent});e(f,"from window.onerror");
return p?p.apply(this,arguments):!1};f.subscribe=function(a){h.push(a)};f.unsubscribe=function(a){for(var b=h.length-1;0<=b;--b)h[b]===a&&h.splice(b,1)};a.report=f;var g=function(b){if(!a._has(E,b)){var c;if(-1!==b.indexOf(document.domain))if(a.remoteFetching)try{var d=new ("undefined"===typeof XMLHttpRequest?function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}throw Error("No XHR.");
}:XMLHttpRequest);d.open("GET",b,!1);d.send("");c=d.responseText}catch(e){c=""}else c="";else c=[];E[b]=c.length?c.split("\n"):[]}return E[b]},n=function(a,c){var d=/function ([^(]*)\(([^)]*)\)/,e=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,f="",h=g(a),j;if(!h.length)return"?";for(var n=0;10>n;++n)if(f=h[c-n]+f,f!==b&&((j=e.exec(f))||(j=d.exec(f))))return j[1];return"?"},q=function(b,c){var d=g(b);if(!d.length)return null;for(var e=[],f=Math.floor(a.linesOfContext/2),h=f+a.linesOfContext%
2,f=Math.max(0,c-f-1),h=Math.min(d.length,c+h-1);f<h;++f)"undefined"!==typeof d[f]&&e.push(d[f]);return 0<e.length?e:null},u=function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")},r=function(a){return u(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")},x=function(a,b){for(var c,d,e=0,f=b.length;e<f;++e)if((c=g(b[e])).length)if(c=c.join("\n"),d=a.exec(c))return{url:b[e],line:c.substring(0,d.index).split("\n").length,
column:d.index-c.lastIndexOf("\n",d.index)-1};return null},y=function(a,b,c){b=g(b);a=RegExp("\\b"+u(a)+"\\b");var d;c-=1;return b&&b.length>c&&(d=a.exec(b[c]))?d.index:null},w=function(a){var b=[c.location.href],d=document.getElementsByTagName("script");a=""+a;var e;for(e=0;e<d.length;++e){var f=d[e];f.src&&b.push(f.src)}(d=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(a))?(e=d[1]?"\\s+"+d[1]:"",f=d[2].split(",").join("\\s*,\\s*"),d=u(d[3]).replace(/;$/,";?"),e=
RegExp("function"+e+"\\s*\\(\\s*"+f+"\\s*\\)\\s*{\\s*"+d+"\\s*}")):e=RegExp(u(a).replace(/\s+/g,"\\s+"));if(e=x(e,b))return e;if(d=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(a)){a=d[1];d=r(d[2]);e=RegExp("on"+a+"=[\\'\"]\\s*"+d+"\\s*[\\'\"]","i");if(e=x(e,b[0]))return e;e=RegExp(d);if(e=x(e,b))return e}return null},v=function(a,b,c,d){b={url:b,line:c};if(b.url&&b.line){a.incomplete=!1;b.func||(b.func=n(b.url,b.line));b.context||(b.context=q(b.url,b.line));if(d=/ '([^']+)' /.exec(d))b.column=
y(d[1],b.url,b.line);if(0<a.stack.length&&a.stack[0].url===b.url){if(a.stack[0].line===b.line)return!1;if(!a.stack[0].line&&a.stack[0].func===b.func)return a.stack[0].line=b.line,a.stack[0].context=b.context,!1}a.stack.unshift(b);return a.partial=!0}a.incomplete=!0;return!1},D=function(b,c){for(var d=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,e=[],f={},g=!1,h,j,q=D.caller;q&&!g;q=q.caller)if(!(q===H||q===a.report)){j={url:null,func:"?",line:null,column:null};if(q.name)j.func=
q.name;else if(h=d.exec(q.toString()))j.func=h[1];if(h=w(q)){j.url=h.url;j.line=h.line;"?"===j.func&&(j.func=n(j.url,j.line));var r=/ '([^']+)' /.exec(b.message||b.description);r&&(j.column=y(r[1],h.url,h.line))}f[""+q]?g=!0:f[""+q]=!0;e.push(j)}c&&e.splice(0,c);d={mode:"callers",name:b.name,message:b.message,url:document.location.href,stack:e,useragent:navigator.userAgent};v(d,b.sourceURL||b.fileName,b.line||b.lineNumber,b.message||b.description);return d},H=function(b,d){var e=null;d=null==d?0:
+d;try{for(var f=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,h=b.stacktrace.split("\n"),j=[],m,p=0,u=h.length;p<u;p+=2)if(m=f.exec(h[p])){var F={line:+m[1],column:+m[2],func:m[3]||m[4],args:m[5]?m[5].split(","):[],url:m[6]};!F.func&&F.line&&(F.func=n(F.url,F.line));if(F.line)try{F.context=q(F.url,F.line)}catch(A){}F.context||(F.context=[h[p+1]]);j.push(F)}if(e=!j.length?null:{mode:"stacktrace",name:b.name,message:b.message,url:document.location.href,
stack:j,useragent:navigator.userAgent})return e}catch(w){if(s)throw w;}try{if(b.stack){var f=/^\s*at (?:((?:\[object object\])?\S+) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,h=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i,v=b.stack.split("\n"),j=[],C,G,E=/^(.*) is undefined$/.exec(b.message);m=0;for(var H=v.length;m<H;++m){if(C=h.exec(v[m]))G={url:C[3],func:C[1]||"?",args:C[2]?C[2].split(","):"",line:+C[4],column:C[5]?+C[5]:null};else if(C=f.exec(v[m]))G=
{url:C[2],func:C[1]||"?",line:+C[3],column:C[4]?+C[4]:null};else continue;!G.func&&G.line&&(G.func=n(G.url,G.line));G.line&&(G.context=q(G.url,G.line));j.push(G)}j[0]&&(j[0].line&&!j[0].column&&E)&&(j[0].column=y(E[1],j[0].url,j[0].line));e=!j.length?null:{mode:"stack",name:b.name,message:b.message,url:document.location.href,stack:j,useragent:navigator.userAgent}}else e=null;if(e)return e}catch(k){if(s)throw k;}try{var U=b.message.split("\n");if(4>U.length)e=null;else{v=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i;
C=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i;G=/^\s*Line (\d+) of function script\s*$/i;var E=[],B=document.getElementsByTagName("script"),H=[],M,P,V,S;for(P in B)a._has(B,P)&&!B[P].src&&H.push(B[P]);P=2;for(V=U.length;P<V;P+=2){B=null;if(M=v.exec(U[P]))B={url:M[2],func:M[3],line:+M[1]};else if(M=C.exec(U[P])){var B={url:M[3],func:M[4]},ia=+M[1],ma=H[M[2]-1];if(ma&&(S=g(B.url))){S=S.join("\n");var za=S.indexOf(ma.innerText);0<=za&&(B.line=ia+S.substring(0,
za).split("\n").length)}}else if(M=G.exec(U[P])){var sa=c.location.href.replace(/#.*$/,""),Aa=M[1],da=RegExp(r(U[P+1]));S=x(da,[sa]);B={url:sa,line:S?S.line:Aa,func:""}}if(B){B.func||(B.func=n(B.url,B.line));var na=q(B.url,B.line),Da=na?na[Math.floor(na.length/2)]:null;B.context=na&&Da.replace(/^\s*/,"")===U[P+1].replace(/^\s*/,"")?na:[U[P+1]];E.push(B)}}e=!E.length?null:{mode:"multiline",name:b.name,message:U[0],url:document.location.href,stack:E,useragent:navigator.userAgent}}if(e)return e}catch(ta){if(s)throw ta;
}try{if(e=D(b,d+1))return e}catch(qa){if(s)throw qa;}return{mode:"failed"}},s=!1,E={};H.augmentStackTraceWithInitialElement=v;H.guessFunctionName=n;H.gatherContext=q;H.ofCaller=function(a){try{throw Error();}catch(b){return H(b,(null==a?0:+a)+2)}};a.computeStackTrace=H;f=function(b){var d=c[b];c[b]=function(){var b=Array.prototype.slice.call(arguments,0),c=b[0];"function"===typeof c&&(b[0]=function(){try{c.apply(this,arguments)}catch(b){throw a.report(b),b;}});return d.apply?d.apply(this,b):d(b[0],
b[1])}};f("setTimeout");f("setInterval");var G=c.jQuery;if(G){var C=G.event.add;G.event.add=function(b,c,d,e,f){var g;d.handler?(g=d.handler,d.handler=function(){try{return g.apply(this,arguments)}catch(b){throw a.report(b),b;}}):(g=d,d=function(){try{return g.apply(this,arguments)}catch(b){throw a.report(b),b;}});d.guid=g.guid?g.guid:g.guid=G.guid++;return C.call(this,b,c,d,e,f)};var F=G.fn.ready;G.fn.ready=function(b){return F.call(this,function(){try{return b.apply(this,arguments)}catch(c){throw a.report(c),
c;}})};var A=G.ajax;G.ajax=function(b){if(G.isFunction(b.complete)){var c=b.complete;b.complete=function(){try{return c.apply(this,arguments)}catch(b){throw a.report(b),b;}}}if(G.isFunction(b.error)){var d=b.error;b.error=function(){try{return d.apply(this,arguments)}catch(b){throw a.report(b),b;}}}if(G.isFunction(b.success)){var e=b.success;b.success=function(){try{return e.apply(this,arguments)}catch(b){throw a.report(b),b;}}}try{return A.call(this,b)}catch(f){throw a.report(f),f;}}}a.remoteFetching||
(a.remoteFetching=!0);a.collectWindowErrors||(a.collectWindowErrors=!0);if(!a.linesOfContext||1>a.linesOfContext)a.linesOfContext=11;c.TraceKit=a})(window);
(function(c,b){function a(a){return"undefined"===typeof a}function d(a){return"function"===typeof a}function e(b,c){var d,e;if(a(b.length))for(d in b)b.hasOwnProperty(d)&&c.call(null,d,b[d]);else{d=0;for(e=b.length;d<e;d++)c.call(null,d,b[d])}}function f(b,c){var d=[],e=0,f,g;if(b.stack&&(f=b.stack.length))for(;e<f;e++){var n=b.stack[e];if(n.url){g={filename:n.url,lineno:n.line,colno:n.column,"function":n.func||"?"};if(n.context&&x.fetchContext){for(var q=n.context,r=~~(q.length/2),m=q.length,p=!1;m--;)if(300<
q[m].length){p=!0;break}n=p?a(n.column)?void 0:[[],q[r].substr(n.column,50),[]]:[q.slice(0,r),q[r],q.slice(r+1)]}else n=void 0;if(n){q=3;for(r=["pre_context","context_line","post_context"];q--;)g[r[q]]=n[q]}g.in_app=!/(Raven|TraceKit)\./.test(g["function"])}else g=void 0;g&&d.push(g)}a:{e=b.name;f=b.message;g=b.url;for(var n=b.lineno,u,q=x.ignoreErrors.length;q--;)if(f===x.ignoreErrors[q])break a;d&&d.length?(u={frames:d},g=g||d[0].filename):g&&(u={frames:[{filename:g,lineno:n}]});for(q=x.ignoreUrls.length;q--;)if(x.ignoreUrls[q].test(g))break a;
j(h({"sentry.interfaces.Exception":{type:e,value:f},"sentry.interfaces.Stacktrace":u,culprit:g,message:n?f+" at "+n:f},c))}}function h(a,b){if(!b)return a;e(b,function(b,c){a[b]=c});return a}function j(a){if(m()){var b=r,e=x.logger,f=x.site,g={url:c.location.href,headers:{"User-Agent":navigator.userAgent}};c.document.referrer&&(g.headers.Referer=c.document.referrer);a=h({project:b,logger:e,site:f,platform:"javascript","sentry.interfaces.Http":g},a);q&&(a["sentry.interfaces.User"]=q);d(x.dataCallback)&&
(a=x.dataCallback(a));b=new Image;e=n;H||(f=["sentry_version=2.0","sentry_client=raven-js/"+w.VERSION],u&&f.push("sentry_key="+u),H="?"+f.join("&"));f=H;b.src=e+f+"&sentry_data="+encodeURIComponent(JSON.stringify(a))}}function m(){return!g?!1:!n?(console.error("Error: Raven has not been configured."),!1):!0}var p=c.Raven,g=!a(c.JSON),n,q,u,r,x={logger:"javascript",ignoreErrors:[],ignoreUrls:[]},y=TraceKit.noConflict();y.remoteFetching=!1;var w={VERSION:"1.0.4",noConflict:function(){c.Raven=p;return w},
config:function(a,b){for(var c=D.exec(a),d={},f=14;f--;)d[v[f]]=c[f]||"";c=d.path.lastIndexOf("/");f=d.path.substr(1,c);b&&e(b,function(a,b){x[a]=b});u=d.user;r=~~d.path.substr(c+1);n="//"+d.host+(d.port?":"+d.port:"")+"/"+f+"api/"+r+"/store/";d.protocol&&(n=d.protocol+":"+n);x.fetchContext&&(y.remoteFetching=!0);return w},install:function(){if(m())return y.report.subscribe(f),w},context:function(a,c,e){d(a)&&(e=c,c=a,a=b);w.wrap(a,c).apply(this,e)},wrap:function(a,c){d(a)&&(c=a,a=b);return function(){try{c.apply(this,
arguments)}catch(b){w.captureException(b,a)}}},uninstall:function(){y.report.unsubscribe(f);return w},captureException:function(a,b){try{y.report(a,b)}catch(c){if(a!==c)throw c;}return w},captureMessage:function(a,b){j(h({message:a},b));return w},setUser:function(a){q=a;return w}},v="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),D=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
H;c.Raven=w;"function"===typeof define&&define.amd&&define(function(){return w})})(window);
(function(){var c=!0,b=window,a=document,d=navigator,e=window.jQuery,f=void 0,h=function(h){function m(a,b,c,d){g.bindingHandlers[a]={init:function(a){g.utils.domData.set(a,O,{});return{controlsDescendantBindings:!0}},update:function(a,e,f,h,j){f=g.utils.domData.get(a,O);e=g.utils.unwrapObservable(e());h=!c!==!e;var n=!f.savedNodes;if(n||b||h!==f.didDisplayOnLastUpdate)n&&(f.savedNodes=g.utils.cloneNodes(g.virtualElements.childNodes(a),!0)),h?(n||g.virtualElements.setDomNodeChildren(a,g.utils.cloneNodes(f.savedNodes)),
g.applyBindingsToDescendants(d?d(j,e):j,a)):g.virtualElements.emptyNode(a),f.didDisplayOnLastUpdate=h}};g.expressionRewriting.bindingRewriteValidators[a]=!1;g.virtualElements.allowedBindings[a]=!0}function p(a,b,c){c&&b!==g.selectExtensions.readValue(a)&&g.selectExtensions.writeValue(a,b);b!==g.selectExtensions.readValue(a)&&g.dependencyDetection.ignore(g.utils.triggerEvent,null,[a,"change"])}var g="undefined"!==typeof h?h:{};g.exportSymbol=function(a,b){for(var c=a.split("."),d=g,e=0;e<c.length-
1;e++)d=d[c[e]];d[c[c.length-1]]=b};g.exportProperty=function(a,b,c){a[b]=c};g.version="2.2.0";g.exportSymbol("version",g.version);g.utils=new function(){function c(a,b){if("input"!==g.utils.tagNameLower(a)||!a.type||"click"!=b.toLowerCase())return!1;var d=a.type;return"checkbox"==d||"radio"==d}var h=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,j={},n={},q=/Firefox\/2/i.test(d.userAgent)?"KeyboardEvent":"UIEvents";j[q]=["keyup","keydown","keypress"];j.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");
for(var k in j)if(q=j[k],q.length)for(var r=0,m=q.length;r<m;r++)n[q[r]]=k;var p={propertychange:!0},u,j=3;k=a.createElement("div");for(q=k.getElementsByTagName("i");k.innerHTML="\x3c!--[if gt IE "+ ++j+"]><i></i><![endif]--\x3e",q[0];);u=4<j?j:f;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c])},arrayIndexOf:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,
b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},arrayFirst:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d]))return a[d];return null},arrayRemoveItem:function(a,b){var c=g.utils.arrayIndexOf(a,b);0<=c&&a.splice(c,1)},arrayGetDistinctValues:function(a){a=a||[];for(var b=[],c=0,d=a.length;c<d;c++)0>g.utils.arrayIndexOf(b,a[c])&&b.push(a[c]);return b},arrayMap:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;d<e;d++)c.push(b(a[d]));return c},arrayFilter:function(a,b){a=
a||[];for(var c=[],d=0,e=a.length;d<e;d++)b(a[d])&&c.push(a[d]);return c},arrayPushAll:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},extend:function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},emptyDomNode:function(a){for(;a.firstChild;)g.removeNode(a.firstChild)},moveCleanedNodesToContainerElement:function(b){b=g.utils.makeArray(b);for(var c=a.createElement("div"),d=0,e=b.length;d<e;d++){var f=b[d];3==f.nodeType&&
""==f.textContent.trim()?f.parentNode.removeChild(f):c.appendChild(g.cleanNode(f))}return c},cloneNodes:function(a,b){for(var c=0,d=a.length,e=[];c<d;c++){var f=a[c].cloneNode(!0);e.push(b?g.cleanNode(f):f)}return e},setDomNodeChildren:function(a,b){g.utils.emptyDomNode(a);if(b)for(var c=0,d=b.length;c<d;c++)a.appendChild(b[c])},replaceDomNodes:function(a,b){var c=a.nodeType?[a]:a;if(0<c.length){for(var d=c[0],e=d.parentNode,f=0,h=b.length;f<h;f++)e.insertBefore(b[f],d);f=0;for(h=c.length;f<h;f++)g.removeNode(c[f])}},
setOptionNodeSelectionState:function(a,b){7>u?a.setAttribute("selected",b):a.selected=b},stringTrim:function(a){return(a||"").replace(h,"")},stringTokenize:function(a,b){for(var c=[],d=(a||"").split(b),e=0,f=d.length;e<f;e++){var h=g.utils.stringTrim(d[e]);""!==h&&c.push(h)}return c},stringStartsWith:function(a,b){a=a||"";return b.length>a.length?!1:a.substring(0,b.length)===b},domNodeIsContainedBy:function(a,b){if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;null!=
a;){if(a==b)return!0;a=a.parentNode}return!1},domNodeIsAttachedToDocument:function(a){return g.utils.domNodeIsContainedBy(a,a.ownerDocument)},anyDomNodeIsAttachedToDocument:function(a){return!!g.utils.arrayFirst(a,g.utils.domNodeIsAttachedToDocument)},tagNameLower:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},registerEventHandler:function(a,b,d){var f=u&&p[b];if(!f&&"undefined"!=typeof e){if(c(a,b)){var g=d;d=function(a,b){var c=this.checked;b&&(this.checked=!0!==b.checkedStateBeforeEvent);
g.call(this,a);this.checked=c}}e(a).bind(b,d)}else if(!f&&"function"==typeof a.addEventListener)a.addEventListener(b,d,!1);else if("undefined"!=typeof a.attachEvent)a.attachEvent("on"+b,function(b){d.call(a,b)});else throw Error("Browser doesn't support addEventListener or attachEvent");},triggerEvent:function(d,f){if(!d||!d.nodeType)throw Error("element must be a DOM node when calling triggerEvent");if("undefined"!=typeof e){var g=[];c(d,f)&&g.push({checkedStateBeforeEvent:d.checked});e(d).trigger(f,
g)}else if("function"==typeof a.createEvent)if("function"==typeof d.dispatchEvent)g=a.createEvent(n[f]||"HTMLEvents"),g.initEvent(f,!0,!0,b,0,0,0,0,0,!1,!1,!1,!1,0,d),d.dispatchEvent(g);else throw Error("The supplied element doesn't support dispatchEvent");else if("undefined"!=typeof d.fireEvent)c(d,f)&&(d.checked=!0!==d.checked),d.fireEvent("on"+f);else throw Error("Browser doesn't support triggering events");},unwrapObservable:function(a){return g.isObservable(a)?a():a},peekObservable:function(a){return g.isObservable(a)?
a.peek():a},toggleDomNodeCssClass:function(a,b,c){if(b){var d=/[\w-]+/g,e=a.className.match(d)||[];g.utils.arrayForEach(b.match(d),function(a){var b=g.utils.arrayIndexOf(e,a);0<=b?c||e.splice(b,1):c&&e.push(a)});a.className=e.join(" ")}},setTextContent:function(b,c){var d=g.utils.unwrapObservable(c);if(null===d||d===f)d="";if(3===b.nodeType)b.data=d;else{var e=g.virtualElements.firstChild(b);!e||3!=e.nodeType||g.virtualElements.nextSibling(e)?g.virtualElements.setDomNodeChildren(b,[a.createTextNode(d)]):
e.data=d;g.utils.forceRefresh(b)}},setElementName:function(b,c){b.name=c;if(7>=u)try{b.mergeAttributes(a.createElement("<input name='"+b.name+"'/>"),!1)}catch(d){}},forceRefresh:function(a){9<=u&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},ensureSelectElementIsRenderedCorrectly:function(a){if(9<=u){var b=a.style.width;a.style.width=0;a.style.width=b}},range:function(a,b){a=g.utils.unwrapObservable(a);b=g.utils.unwrapObservable(b);for(var c=[],d=a;d<=b;d++)c.push(d);return c},
makeArray:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},isIe6:6===u,isIe7:7===u,ieVersion:u,getFormFields:function(a,b){for(var c=g.utils.makeArray(a.getElementsByTagName("input")).concat(g.utils.makeArray(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;0<=f;f--)d(c[f])&&e.push(c[f]);return e},parseJson:function(a){return"string"==typeof a&&(a=g.utils.stringTrim(a))?b.JSON&&b.JSON.parse?
b.JSON.parse(a):(new Function("return "+a))():null},stringifyJson:function(a,b,c){if("undefined"==typeof JSON||"undefined"==typeof JSON.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(g.utils.unwrapObservable(a),b,c)},postJson:function(b,c,d){d=d||{};var e=d.params||{},f=d.includeFields||this.fieldsIncludedWithJsonPost,
h=b;if("object"==typeof b&&"form"===g.utils.tagNameLower(b))for(var h=b.action,j=f.length-1;0<=j;j--)for(var n=g.utils.getFormFields(b,f[j]),q=n.length-1;0<=q;q--)e[n[q].name]=n[q].value;c=g.utils.unwrapObservable(c);var k=a.createElement("form");k.style.display="none";k.action=h;k.method="post";for(var B in c)b=a.createElement("input"),b.name=B,b.value=g.utils.stringifyJson(g.utils.unwrapObservable(c[B])),k.appendChild(b);for(B in e)b=a.createElement("input"),b.name=B,b.value=e[B],k.appendChild(b);
a.body.appendChild(k);d.submitter?d.submitter(k):k.submit();setTimeout(function(){k.parentNode.removeChild(k)},0)}}};g.exportSymbol("utils",g.utils);g.exportSymbol("utils.arrayForEach",g.utils.arrayForEach);g.exportSymbol("utils.arrayFirst",g.utils.arrayFirst);g.exportSymbol("utils.arrayFilter",g.utils.arrayFilter);g.exportSymbol("utils.arrayGetDistinctValues",g.utils.arrayGetDistinctValues);g.exportSymbol("utils.arrayIndexOf",g.utils.arrayIndexOf);g.exportSymbol("utils.arrayMap",g.utils.arrayMap);
g.exportSymbol("utils.arrayPushAll",g.utils.arrayPushAll);g.exportSymbol("utils.arrayRemoveItem",g.utils.arrayRemoveItem);g.exportSymbol("utils.extend",g.utils.extend);g.exportSymbol("utils.fieldsIncludedWithJsonPost",g.utils.fieldsIncludedWithJsonPost);g.exportSymbol("utils.getFormFields",g.utils.getFormFields);g.exportSymbol("utils.peekObservable",g.utils.peekObservable);g.exportSymbol("utils.postJson",g.utils.postJson);g.exportSymbol("utils.parseJson",g.utils.parseJson);g.exportSymbol("utils.registerEventHandler",
g.utils.registerEventHandler);g.exportSymbol("utils.stringifyJson",g.utils.stringifyJson);g.exportSymbol("utils.range",g.utils.range);g.exportSymbol("utils.toggleDomNodeCssClass",g.utils.toggleDomNodeCssClass);g.exportSymbol("utils.triggerEvent",g.utils.triggerEvent);g.exportSymbol("utils.unwrapObservable",g.utils.unwrapObservable);Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments);a=c.shift();return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}});
g.utils.domData=new function(){var a=0,b="__ko__"+(new Date).getTime(),c={};return{get:function(a,b){var c=g.utils.domData.getAll(a,!1);return c===f?f:c[b]},set:function(a,b,c){c===f&&g.utils.domData.getAll(a,!1)===f||(g.utils.domData.getAll(a,!0)[b]=c)},getAll:function(d,e){var g=d[b];if(!g||!("null"!==g&&c[g])){if(!e)return f;g=d[b]="ko"+a++;c[g]={}}return c[g]},clear:function(a){var d=a[b];return d?(delete c[d],a[b]=null,!0):!1}}};g.exportSymbol("utils.domData",g.utils.domData);g.exportSymbol("utils.domData.clear",
g.utils.domData.clear);g.utils.domNodeDisposal=new function(){function a(b,d){var e=g.utils.domData.get(b,c);e===f&&d&&(e=[],g.utils.domData.set(b,c,e));return e}function b(c){var d=a(c,!1);if(d)for(var d=d.slice(0),f=0;f<d.length;f++)d[f](c);g.utils.domData.clear(c);"function"==typeof e&&"function"==typeof e.cleanData&&e.cleanData([c]);if(h[c.nodeType])for(d=c.firstChild;c=d;)d=c.nextSibling,8===c.nodeType&&b(c)}var c="__ko_domNodeDisposal__"+(new Date).getTime(),d={1:!0,8:!0,9:!0},h={1:!0,9:!0};
return{addDisposeCallback:function(b,c){if("function"!=typeof c)throw Error("Callback must be a function");a(b,!0).push(c)},removeDisposeCallback:function(b,d){var e=a(b,!1);e&&(g.utils.arrayRemoveItem(e,d),0==e.length&&g.utils.domData.set(b,c,f))},cleanNode:function(a){if(d[a.nodeType]&&(b(a),h[a.nodeType])){var c=[];g.utils.arrayPushAll(c,a.getElementsByTagName("*"));for(var e=0,f=c.length;e<f;e++)b(c[e])}return a},removeNode:function(a){g.cleanNode(a);a.parentNode&&a.parentNode.removeChild(a)}}};
g.cleanNode=g.utils.domNodeDisposal.cleanNode;g.removeNode=g.utils.domNodeDisposal.removeNode;g.exportSymbol("cleanNode",g.cleanNode);g.exportSymbol("removeNode",g.removeNode);g.exportSymbol("utils.domNodeDisposal",g.utils.domNodeDisposal);g.exportSymbol("utils.domNodeDisposal.addDisposeCallback",g.utils.domNodeDisposal.addDisposeCallback);g.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",g.utils.domNodeDisposal.removeDisposeCallback);g.utils.parseHtmlFragment=function(c){var d;if("undefined"!=
typeof e){if((d=e.clean([c]))&&d[0]){for(c=d[0];c.parentNode&&11!==c.parentNode.nodeType;)c=c.parentNode;c.parentNode&&c.parentNode.removeChild(c)}}else{var f=g.utils.stringTrim(c).toLowerCase();d=a.createElement("div");f=f.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!f.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!f.indexOf("<td")||!f.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];c="ignored<div>"+f[1]+c+f[2]+"</div>";for("function"==typeof b.innerShiv?
d.appendChild(b.innerShiv(c)):d.innerHTML=c;f[0]--;)d=d.lastChild;d=g.utils.makeArray(d.lastChild.childNodes)}return d};g.utils.setHtml=function(a,b){g.utils.emptyDomNode(a);b=g.utils.unwrapObservable(b);if(null!==b&&b!==f)if("string"!=typeof b&&(b=b.toString()),"undefined"!=typeof e)e(a).html(b);else for(var c=g.utils.parseHtmlFragment(b),d=0;d<c.length;d++)a.appendChild(c[d])};g.exportSymbol("utils.parseHtmlFragment",g.utils.parseHtmlFragment);g.exportSymbol("utils.setHtml",g.utils.setHtml);var n=
function(a,b){if(a)if(8==a.nodeType){var c=g.memoization.parseMemoText(a.nodeValue);null!=c&&b.push({domNode:a,memoId:c})}else if(1==a.nodeType)for(var c=0,d=a.childNodes,e=d.length;c<e;c++)n(d[c],b)},q={};g.memoization={memoize:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);q[b]=a;return"\x3c!--[ko_memo:"+b+"]--\x3e"},
unmemoize:function(a,b){var c=q[a];if(c===f)throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return c.apply(null,b||[]),!0}finally{delete q[a]}},unmemoizeDomNodeAndDescendants:function(a,b){var c=[];n(a,c);for(var d=0,e=c.length;d<e;d++){var f=c[d].domNode,h=[f];b&&g.utils.arrayPushAll(h,b);g.memoization.unmemoize(c[d].memoId,h);f.nodeValue="";f.parentNode&&f.parentNode.removeChild(f)}},parseMemoText:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?
a[1]:null}};g.exportSymbol("memoization",g.memoization);g.exportSymbol("memoization.memoize",g.memoization.memoize);g.exportSymbol("memoization.unmemoize",g.memoization.unmemoize);g.exportSymbol("memoization.parseMemoText",g.memoization.parseMemoText);g.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",g.memoization.unmemoizeDomNodeAndDescendants);g.extenders={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return g.dependentObservable({read:a,write:function(d){clearTimeout(c);c=
setTimeout(function(){a(d)},b)}})},notify:function(a,b){a.equalityComparer="always"==b?function(){return!1}:g.observable.fn.equalityComparer;return a}};g.exportSymbol("extenders",g.extenders);g.subscription=function(a,b,c){this.target=a;this.callback=b;this.disposeCallback=c;g.exportProperty(this,"dispose",this.dispose)};g.subscription.prototype.dispose=function(){this.isDisposed=!0;this.disposeCallback()};g.subscribable=function(){this._subscriptions={};g.utils.extend(this,g.subscribable.fn);g.exportProperty(this,
"subscribe",this.subscribe);g.exportProperty(this,"extend",this.extend);g.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};g.subscribable.fn={subscribe:function(a,b,c){c=c||"change";a=b?a.bind(b):a;var d=new g.subscription(this,a,function(){g.utils.arrayRemoveItem(this._subscriptions[c],d)}.bind(this));this._subscriptions[c]||(this._subscriptions[c]=[]);this._subscriptions[c].push(d);return d},notifySubscribers:function(a,b){b=b||"change";this._subscriptions[b]&&g.dependencyDetection.ignore(function(){g.utils.arrayForEach(this._subscriptions[b].slice(0),
function(b){b&&!0!==b.isDisposed&&b.callback(a)})},this)},getSubscriptionsCount:function(){var a=0,b;for(b in this._subscriptions)this._subscriptions.hasOwnProperty(b)&&(a+=this._subscriptions[b].length);return a},extend:function(a){var b=this;if(a)for(var c in a){var d=g.extenders[c];"function"==typeof d&&(b=d(b,a[c]))}return b}};g.isSubscribable=function(a){return"function"==typeof a.subscribe&&"function"==typeof a.notifySubscribers};g.exportSymbol("subscribable",g.subscribable);g.exportSymbol("isSubscribable",
g.isSubscribable);var u=[];g.dependencyDetection={begin:function(a){u.push({callback:a,distinctDependencies:[]})},end:function(){u.pop()},registerDependency:function(a){if(!g.isSubscribable(a))throw Error("Only subscribable things can act as dependencies");if(0<u.length){var b=u[u.length-1];b&&!(0<=g.utils.arrayIndexOf(b.distinctDependencies,a))&&(b.distinctDependencies.push(a),b.callback(a))}},ignore:function(a,b,c){try{return u.push(null),a.apply(b,c||[])}finally{u.pop()}}};var r={undefined:!0,
"boolean":!0,number:!0,string:!0};g.observable=function(a){function b(){if(0<arguments.length){if(!b.equalityComparer||!b.equalityComparer(d,arguments[0]))b.valueWillMutate(),d=arguments[0],c&&(b._latestValue=d),b.valueHasMutated();return this}g.dependencyDetection.registerDependency(b);return d}var d=a;c&&(b._latestValue=d);g.subscribable.call(b);b.peek=function(){return d};b.valueHasMutated=function(){b.notifySubscribers(d)};b.valueWillMutate=function(){b.notifySubscribers(d,"beforeChange")};g.utils.extend(b,
g.observable.fn);g.exportProperty(b,"peek",b.peek);g.exportProperty(b,"valueHasMutated",b.valueHasMutated);g.exportProperty(b,"valueWillMutate",b.valueWillMutate);return b};g.observable.fn={equalityComparer:function(a,b){return null===a||typeof a in r?a===b:!1}};var x=g.observable.protoProperty="__ko_proto__";g.observable.fn[x]=g.observable;g.hasPrototype=function(a,b){return null===a||a===f||a[x]===f?!1:a[x]===b?!0:g.hasPrototype(a[x],b)};g.isObservable=function(a){return g.hasPrototype(a,g.observable)};
g.isWriteableObservable=function(a){return"function"==typeof a&&a[x]===g.observable||"function"==typeof a&&a[x]===g.dependentObservable&&a.hasWriteFunction?!0:!1};g.exportSymbol("observable",g.observable);g.exportSymbol("isObservable",g.isObservable);g.exportSymbol("isWriteableObservable",g.isWriteableObservable);g.observableArray=function(a){0==arguments.length&&(a=[]);if(null!==a&&a!==f&&!("length"in a))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");
var b=g.observable(a);g.utils.extend(b,g.observableArray.fn);return b};g.observableArray.fn={remove:function(a){for(var b=this.peek(),c=[],d="function"==typeof a?a:function(b){return b===a},e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.valueWillMutate(),c.push(f),b.splice(e,1),e--)}c.length&&this.valueHasMutated();return c},removeAll:function(a){if(a===f){var b=this.peek(),c=b.slice(0);this.valueWillMutate();b.splice(0,b.length);this.valueHasMutated();return c}return!a?[]:this.remove(function(b){return 0<=
g.utils.arrayIndexOf(a,b)})},destroy:function(a){var b=this.peek(),c="function"==typeof a?a:function(b){return b===a};this.valueWillMutate();for(var d=b.length-1;0<=d;d--)c(b[d])&&(b[d]._destroy=!0);this.valueHasMutated()},destroyAll:function(a){return a===f?this.destroy(function(){return!0}):!a?[]:this.destroy(function(b){return 0<=g.utils.arrayIndexOf(a,b)})},indexOf:function(a){var b=this();return g.utils.arrayIndexOf(b,a)},replace:function(a,b){var c=this.indexOf(a);0<=c&&(this.valueWillMutate(),
this.peek()[c]=b,this.valueHasMutated())}};g.utils.arrayForEach("pop push reverse shift sort splice unshift".split(" "),function(a){g.observableArray.fn[a]=function(){var b=this.peek();this.valueWillMutate();b=b[a].apply(b,arguments);this.valueHasMutated();return b}});g.utils.arrayForEach(["slice"],function(a){g.observableArray.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}});g.exportSymbol("observableArray",g.observableArray);g.dependentObservable=function(a,b,d){function e(){g.utils.arrayForEach(y,
function(a){a.dispose()});y=[]}function h(){var a=n.throttleEvaluation;a&&0<=a?(clearTimeout(s),s=setTimeout(j,a)):j()}function j(){if(!m)if(r&&F())O();else{m=!0;try{var a=g.utils.arrayMap(y,function(a){return a.target});g.dependencyDetection.begin(function(b){var c;0<=(c=g.utils.arrayIndexOf(a,b))?a[c]=f:y.push(b.subscribe(h))});for(var d=p.call(b),e=a.length-1;0<=e;e--)a[e]&&y.splice(e,1)[0].dispose();r=!0;n.notifySubscribers(k,"beforeChange");k=d;c&&(n._latestValue=k)}finally{g.dependencyDetection.end()}n.notifySubscribers(k);
m=!1;y.length||O()}}function n(){if(0<arguments.length){if("function"===typeof u)u.apply(b,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}r||j();g.dependencyDetection.registerDependency(n);return k}function q(){return!r||0<y.length}var k,r=!1,m=!1,p=a;p&&"object"==typeof p?(d=p,p=d.read):(d=d||{},p||(p=d.read));if("function"!=typeof p)throw Error("Pass a function that returns the value of the ko.computed");
var u=d.write,x=d.disposeWhenNodeIsRemoved||d.disposeWhenNodeIsRemoved||null,F=d.disposeWhen||d.disposeWhen||function(){return!1},O=e,y=[],s=null;b||(b=d.owner);n.peek=function(){r||j();return k};n.getDependenciesCount=function(){return y.length};n.hasWriteFunction="function"===typeof d.write;n.dispose=function(){O()};n.isActive=q;g.subscribable.call(n);g.utils.extend(n,g.dependentObservable.fn);g.exportProperty(n,"peek",n.peek);g.exportProperty(n,"dispose",n.dispose);g.exportProperty(n,"isActive",
n.isActive);g.exportProperty(n,"getDependenciesCount",n.getDependenciesCount);!0!==d.deferEvaluation&&j();if(x&&q()){O=function(){g.utils.domNodeDisposal.removeDisposeCallback(x,arguments.callee);e()};g.utils.domNodeDisposal.addDisposeCallback(x,O);var A=F,F=function(){return!g.utils.domNodeIsAttachedToDocument(x)||A()}}return n};g.isComputed=function(a){return g.hasPrototype(a,g.dependentObservable)};h=g.observable.protoProperty;g.dependentObservable[h]=g.observable;g.dependentObservable.fn={};g.dependentObservable.fn[h]=
g.dependentObservable;g.exportSymbol("dependentObservable",g.dependentObservable);g.exportSymbol("computed",g.dependentObservable);g.exportSymbol("isComputed",g.isComputed);var y=function(a,b,c){c=c||new w;a=b(a);if(!("object"==typeof a&&null!==a&&a!==f&&!(a instanceof Date)))return a;var d=a instanceof Array?[]:{};c.save(a,d);var e=a,g=function(e){var g=b(a[e]);switch(typeof g){case "boolean":case "number":case "string":case "function":d[e]=g;break;case "object":case "undefined":var h=c.get(g);d[e]=
h!==f?h:y(g,b,c)}};if(e instanceof Array){for(var h=0;h<e.length;h++)g(h);"function"==typeof e.toJSON&&g("toJSON")}else for(h in e)g(h);return d},w=function(){var a=[],b=[];this.save=function(c,d){var e=g.utils.arrayIndexOf(a,c);0<=e?b[e]=d:(a.push(c),b.push(d))};this.get=function(c){c=g.utils.arrayIndexOf(a,c);return 0<=c?b[c]:f}};g.toJS=function(a){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return y(a,function(a){for(var b=0;g.isObservable(a)&&
10>b;b++)a=a();return a})};g.toJSON=function(a,b,c){a=g.toJS(a);return g.utils.stringifyJson(a,b,c)};g.exportSymbol("toJS",g.toJS);g.exportSymbol("toJSON",g.toJSON);g.selectExtensions={readValue:function(a){switch(g.utils.tagNameLower(a)){case "option":return!0===a.__ko__hasDomDataOptionValue__?g.utils.domData.get(a,g.bindingHandlers.options.optionValueDomDataKey):7>=g.utils.ieVersion?a.getAttributeNode("value").specified?a.value:a.text:a.value;case "select":return 0<=a.selectedIndex?g.selectExtensions.readValue(a.options[a.selectedIndex]):
f;default:return a.value}},writeValue:function(a,b){switch(g.utils.tagNameLower(a)){case "option":switch(typeof b){case "string":g.utils.domData.set(a,g.bindingHandlers.options.optionValueDomDataKey,f);"__ko__hasDomDataOptionValue__"in a&&delete a.__ko__hasDomDataOptionValue__;a.value=b;break;default:g.utils.domData.set(a,g.bindingHandlers.options.optionValueDomDataKey,b),a.__ko__hasDomDataOptionValue__=!0,a.value="number"===typeof b?b:""}break;case "select":for(var c=a.options.length-1;0<=c;c--)if(g.selectExtensions.readValue(a.options[c])==
b){a.selectedIndex=c;break}break;default:if(null===b||b===f)b="";a.value=b}}};g.exportSymbol("selectExtensions",g.selectExtensions);g.exportSymbol("selectExtensions.readValue",g.selectExtensions.readValue);g.exportSymbol("selectExtensions.writeValue",g.selectExtensions.writeValue);var v=function(a,b){for(var c=null;a!=c;)c=a,a=a.replace(D,function(a,c){return b[c]});return a},D=/\@ko_token_(\d+)\@/g,H=["true","false"],s=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;g.expressionRewriting=
{bindingRewriteValidators:[],parseObjectLiteral:function(a){var b=g.utils.stringTrim(a);if(3>b.length)return[];"{"===b.charAt(0)&&(b=b.substring(1,b.length-1));a=[];for(var c=null,d,e=0;e<b.length;e++){var f=b.charAt(e);if(null===c)switch(f){case '"':case "'":case "/":c=e,d=f}else if(f==d&&"\\"!==b.charAt(e-1)){f=b.substring(c,e+1);a.push(f);var h="@ko_token_"+(a.length-1)+"@",b=b.substring(0,c)+h+b.substring(e+1),e=e-(f.length-h.length),c=null}}d=c=null;for(var j=0,n=null,e=0;e<b.length;e++){f=b.charAt(e);
if(null===c)switch(f){case "{":c=e;n=f;d="}";break;case "(":c=e;n=f;d=")";break;case "[":c=e,n=f,d="]"}f===n?j++:f===d&&(j--,0===j&&(f=b.substring(c,e+1),a.push(f),h="@ko_token_"+(a.length-1)+"@",b=b.substring(0,c)+h+b.substring(e+1),e-=f.length-h.length,c=null))}d=[];b=b.split(",");c=0;for(e=b.length;c<e;c++)n=b[c],f=n.indexOf(":"),0<f&&f<n.length-1?(j=n.substring(0,f),n=n.substring(f+1),d.push({key:v(j,a),value:v(n,a)})):d.push({unknown:v(n,a)});return d},preProcessBindings:function(a){var b="string"===
typeof a?g.expressionRewriting.parseObjectLiteral(a):a,c=[];a=[];for(var d,e=0;d=b[e];e++)if(0<c.length&&c.push(","),d.key){var f;a:{f=d.key;var h=g.utils.stringTrim(f);switch(h.length&&h.charAt(0)){case "'":case '"':break a;default:f="'"+h+"'"}}d=d.value;c.push(f);c.push(":");c.push(d);d=g.utils.stringTrim(d);0<=g.utils.arrayIndexOf(H,g.utils.stringTrim(d).toLowerCase())?d=!1:(h=d.match(s),d=null===h?!1:h[1]?"Object("+h[1]+")"+h[2]:d);d&&(0<a.length&&a.push(", "),a.push(f+" : function(__ko_value) { "+
d+" = __ko_value; }"))}else d.unknown&&c.push(d.unknown);b=c.join("");0<a.length&&(a=a.join(""),b=b+", '_ko_property_writers' : { "+a+" } ");return b},keyValueArrayContainsKey:function(a,b){for(var c=0;c<a.length;c++)if(g.utils.stringTrim(a[c].key)==b)return!0;return!1},writeValueToProperty:function(a,b,c,d,e){if(!a||!g.isWriteableObservable(a)){if((a=b()._ko_property_writers)&&a[c])a[c](d)}else(!e||a.peek()!==d)&&a(d)}};g.exportSymbol("expressionRewriting",g.expressionRewriting);g.exportSymbol("expressionRewriting.bindingRewriteValidators",
g.expressionRewriting.bindingRewriteValidators);g.exportSymbol("expressionRewriting.parseObjectLiteral",g.expressionRewriting.parseObjectLiteral);g.exportSymbol("expressionRewriting.preProcessBindings",g.expressionRewriting.preProcessBindings);g.exportSymbol("jsonExpressionRewriting",g.expressionRewriting);g.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",g.expressionRewriting.preProcessBindings);var E=function(a){return 8==a.nodeType&&(A?a.text:a.nodeValue).match(I)},G=function(a){return 8==
a.nodeType&&(A?a.text:a.nodeValue).match(K)},C=function(a,b){for(var c=a,d=1,e=[];c=c.nextSibling;){if(G(c)&&(d--,0===d))return e;e.push(c);E(c)&&d++}if(!b)throw Error("Cannot find closing comment tag to match: "+a.nodeValue);return null},F=function(a,b){var c=C(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null},A="\x3c!--test--\x3e"===a.createComment("test").text,I=A?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,K=A?/^\x3c!--\s*\/ko\s*--\x3e$/:
/^\s*\/ko\s*$/,L={ul:!0,ol:!0};g.virtualElements={allowedBindings:{},childNodes:function(a){return E(a)?C(a):a.childNodes},emptyNode:function(a){if(E(a)){a=g.virtualElements.childNodes(a);for(var b=0,c=a.length;b<c;b++)g.removeNode(a[b])}else g.utils.emptyDomNode(a)},setDomNodeChildren:function(a,b){if(E(a)){g.virtualElements.emptyNode(a);for(var c=a.nextSibling,d=0,e=b.length;d<e;d++)c.parentNode.insertBefore(b[d],c)}else g.utils.setDomNodeChildren(a,b)},prepend:function(a,b){E(a)?a.parentNode.insertBefore(b,
a.nextSibling):a.firstChild?a.insertBefore(b,a.firstChild):a.appendChild(b)},insertAfter:function(a,b,c){c?E(a)?a.parentNode.insertBefore(b,c.nextSibling):c.nextSibling?a.insertBefore(b,c.nextSibling):a.appendChild(b):g.virtualElements.prepend(a,b)},firstChild:function(a){return!E(a)?a.firstChild:!a.nextSibling||G(a.nextSibling)?null:a.nextSibling},nextSibling:function(a){E(a)&&(a=F(a));return a.nextSibling&&G(a.nextSibling)?null:a.nextSibling},virtualNodeBindingValue:function(a){return(a=E(a))?a[1]:
null},normaliseVirtualElementDomStructure:function(a){if(L[g.utils.tagNameLower(a)]){var b=a.firstChild;if(b){do if(1===b.nodeType){var c;c=b.firstChild;var d=null;if(c){do if(d)d.push(c);else if(E(c)){var e=F(c,!0);e?c=e:d=[c]}else G(c)&&(d=[c]);while(c=c.nextSibling)}if(c=d){d=b.nextSibling;for(e=0;e<c.length;e++)d?a.insertBefore(c[e],d):a.appendChild(c[e])}}while(b=b.nextSibling)}}}};g.exportSymbol("virtualElements",g.virtualElements);g.exportSymbol("virtualElements.allowedBindings",g.virtualElements.allowedBindings);
g.exportSymbol("virtualElements.emptyNode",g.virtualElements.emptyNode);g.exportSymbol("virtualElements.insertAfter",g.virtualElements.insertAfter);g.exportSymbol("virtualElements.prepend",g.virtualElements.prepend);g.exportSymbol("virtualElements.setDomNodeChildren",g.virtualElements.setDomNodeChildren);g.bindingProvider=function(){this.bindingCache={}};g.utils.extend(g.bindingProvider.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute("data-bind");case 8:return null!=
g.virtualElements.virtualNodeBindingValue(a);default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):null},getBindingsString:function(a){switch(a.nodeType){case 1:return a.getAttribute("data-bind");case 8:return g.virtualElements.virtualNodeBindingValue(a);default:return null}},parseBindingsString:function(a,b,c){try{var d;if(!(d=this.bindingCache[a])){var e=this.bindingCache,f,h="with($context){with($data||{}){return{"+g.expressionRewriting.preProcessBindings(a)+
"}}}";f=new Function("$context","$element",h);d=e[a]=f}return d(b,c)}catch(j){throw Error("Unable to parse bindings.\nMessage: "+j+";\nBindings value: "+a);}}});g.bindingProvider.instance=new g.bindingProvider;g.exportSymbol("bindingProvider",g.bindingProvider);var R=function(a,b,c){for(var d=g.virtualElements.firstChild(b);b=d;)d=g.virtualElements.nextSibling(b),N(a,b,c)},N=function(a,b,c){var d=!0,e=1===b.nodeType;e&&g.virtualElements.normaliseVirtualElementDomStructure(b);if(e&&c||g.bindingProvider.instance.nodeHasBindings(b))d=
Q(b,null,a,c).shouldBindDescendants;d&&R(a,b,!e)},Q=function(a,b,c,d){function e(a){return function(){return n[a]}}function h(){return n}var j=0,n,q;g.dependentObservable(function(){var k=c&&c instanceof g.bindingContext?c:new g.bindingContext(g.utils.unwrapObservable(c)),r=k.$data;d&&g.storedBindingContextForNode(a,k);if(n=("function"==typeof b?b(k,a):b)||g.bindingProvider.instance.getBindings(a,k)){if(0===j){j=1;for(var m in n){var p=g.bindingHandlers[m];if(p&&8===a.nodeType&&!g.virtualElements.allowedBindings[m])throw Error("The binding '"+
m+"' cannot be used with virtual elements");if(p&&"function"==typeof p.init&&(p=(0,p.init)(a,e(m),h,r,k))&&p.controlsDescendantBindings){if(q!==f)throw Error("Multiple bindings ("+q+" and "+m+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");q=m}}j=2}if(2===j)for(m in n)(p=g.bindingHandlers[m])&&"function"==typeof p.update&&(0,p.update)(a,e(m),h,r,k)}},null,{disposeWhenNodeIsRemoved:a});return{shouldBindDescendants:q===
f}};g.bindingHandlers={};g.bindingContext=function(a,b,c){b?(g.utils.extend(this,b),this.$parentContext=b,this.$parent=b.$data,this.$parents=(b.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=a,this.ko=g);this.$data=a;c&&(this[c]=a)};g.bindingContext.prototype.createChildContext=function(a,b){return new g.bindingContext(a,this,b)};g.bindingContext.prototype.extend=function(a){var b=g.utils.extend(new g.bindingContext,this);return g.utils.extend(b,a)};g.storedBindingContextForNode=
function(a,b){if(2==arguments.length)g.utils.domData.set(a,"__ko_bindingContext__",b);else return g.utils.domData.get(a,"__ko_bindingContext__")};g.applyBindingsToNode=function(a,b,c){1===a.nodeType&&g.virtualElements.normaliseVirtualElementDomStructure(a);return Q(a,b,c,!0)};g.applyBindingsToDescendants=function(a,b){(1===b.nodeType||8===b.nodeType)&&R(a,b,!0)};g.applyBindings=function(a,c){if(c&&1!==c.nodeType&&8!==c.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");
c=c||b.document.body;N(a,c,!0)};g.contextFor=function(a){switch(a.nodeType){case 1:case 8:var b=g.storedBindingContextForNode(a);if(b)return b;if(a.parentNode)return g.contextFor(a.parentNode)}return f};g.dataFor=function(a){return(a=g.contextFor(a))?a.$data:f};g.exportSymbol("bindingHandlers",g.bindingHandlers);g.exportSymbol("applyBindings",g.applyBindings);g.exportSymbol("applyBindingsToDescendants",g.applyBindingsToDescendants);g.exportSymbol("applyBindingsToNode",g.applyBindingsToNode);g.exportSymbol("contextFor",
g.contextFor);g.exportSymbol("dataFor",g.dataFor);var J={"class":"className","for":"htmlFor"};g.bindingHandlers.attr={update:function(a,b){var c=g.utils.unwrapObservable(b())||{},d;for(d in c)if("string"==typeof d){var e=g.utils.unwrapObservable(c[d]),h=!1===e||null===e||e===f;h&&a.removeAttribute(d);8>=g.utils.ieVersion&&d in J?(d=J[d],h?a.removeAttribute(d):a[d]=e):h||a.setAttribute(d,e.toString());"name"===d&&g.utils.setElementName(a,h?"":e.toString())}}};g.bindingHandlers.checked={init:function(a,
b,c){g.utils.registerEventHandler(a,"click",function(){var d;if("checkbox"==a.type)d=a.checked;else if("radio"==a.type&&a.checked)d=a.value;else return;var e=b(),f=g.utils.unwrapObservable(e);"checkbox"==a.type&&f instanceof Array?(d=g.utils.arrayIndexOf(f,a.value),a.checked&&0>d?e.push(a.value):!a.checked&&0<=d&&e.splice(d,1)):g.expressionRewriting.writeValueToProperty(e,c,"checked",d,!0)});"radio"==a.type&&!a.name&&g.bindingHandlers.uniqueName.init(a,function(){return!0})},update:function(a,b){var c=
g.utils.unwrapObservable(b());"checkbox"==a.type?a.checked=c instanceof Array?0<=g.utils.arrayIndexOf(c,a.value):c:"radio"==a.type&&(a.checked=a.value==c)}};g.bindingHandlers.css={update:function(a,b){var c=g.utils.unwrapObservable(b());if("object"==typeof c)for(var d in c){var e=g.utils.unwrapObservable(c[d]);g.utils.toggleDomNodeCssClass(a,d,e)}else c=String(c||""),g.utils.toggleDomNodeCssClass(a,a.__ko__cssValue,!1),a.__ko__cssValue=c,g.utils.toggleDomNodeCssClass(a,c,!0)}};g.bindingHandlers.enable=
{update:function(a,b){var c=g.utils.unwrapObservable(b());c&&a.disabled?a.removeAttribute("disabled"):!c&&!a.disabled&&(a.disabled=!0)}};g.bindingHandlers.disable={update:function(a,b){g.bindingHandlers.enable.update(a,function(){return!g.utils.unwrapObservable(b())})}};g.bindingHandlers.event={init:function(a,b,c,d){var e=b()||{},f;for(f in e)(function(){var e=f;"string"==typeof e&&g.utils.registerEventHandler(a,e,function(a){var f,h=b()[e];if(h){var j=c();try{var n=g.utils.makeArray(arguments);
n.unshift(d);f=h.apply(d,n)}finally{!0!==f&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}!1===j[e+"Bubble"]&&(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})()}};g.bindingHandlers.foreach={makeTemplateValueAccessor:function(a){return function(){var b=a(),c=g.utils.peekObservable(b);if(!c||"number"==typeof c.length)return{foreach:b,templateEngine:g.nativeTemplateEngine.instance};g.utils.unwrapObservable(b);return{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,
beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:g.nativeTemplateEngine.instance}}},init:function(a,b){return g.bindingHandlers.template.init(a,g.bindingHandlers.foreach.makeTemplateValueAccessor(b))},update:function(a,b,c,d,e){return g.bindingHandlers.template.update(a,g.bindingHandlers.foreach.makeTemplateValueAccessor(b),c,d,e)}};g.expressionRewriting.bindingRewriteValidators.foreach=!1;g.virtualElements.allowedBindings.foreach=
!0;g.bindingHandlers.hasfocus={init:function(a,b,c){var d=function(d){a.__ko_hasfocusUpdating=!0;var e=a.ownerDocument;"activeElement"in e&&(d=e.activeElement===a);e=b();g.expressionRewriting.writeValueToProperty(e,c,"hasfocus",d,!0);a.__ko_hasfocusLastValue=d;a.__ko_hasfocusUpdating=!1},e=d.bind(null,!0),d=d.bind(null,!1);g.utils.registerEventHandler(a,"focus",e);g.utils.registerEventHandler(a,"focusin",e);g.utils.registerEventHandler(a,"blur",d);g.utils.registerEventHandler(a,"focusout",d)},update:function(a,
b){var c=!!g.utils.unwrapObservable(b());!a.__ko_hasfocusUpdating&&a.__ko_hasfocusLastValue!==c&&(c?a.focus():a.blur(),g.dependencyDetection.ignore(g.utils.triggerEvent,null,[a,c?"focusin":"focusout"]))}};g.bindingHandlers.hasFocus=g.bindingHandlers.hasfocus;g.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){g.utils.setHtml(a,b())}};var O="__ko_withIfBindingData";m("if");m("ifnot",!1,!0);m("with",!0,!1,function(a,b){return a.createChildContext(b)});
g.bindingHandlers.options={update:function(b,c,d){if("select"!==g.utils.tagNameLower(b))throw Error("options binding applies only to SELECT elements");for(var e=0==b.length,h=g.utils.arrayMap(g.utils.arrayFilter(b.childNodes,function(a){return a.tagName&&"option"===g.utils.tagNameLower(a)&&a.selected}),function(a){return g.selectExtensions.readValue(a)||a.innerText||a.textContent}),j=b.scrollTop,n=g.utils.unwrapObservable(c());0<b.length;)g.cleanNode(b.options[0]),b.remove(0);if(n){d=d();var q=d.optionsIncludeDestroyed;
"number"!=typeof n.length&&(n=[n]);if(d.optionsCaption){var k=a.createElement("option");g.utils.setHtml(k,d.optionsCaption);g.selectExtensions.writeValue(k,f);b.appendChild(k)}c=0;for(var r=n.length;c<r;c++){var m=n[c];if(!m||!m._destroy||q){var k=a.createElement("option"),u=function(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c},x=u(m,d.optionsValue,m);g.selectExtensions.writeValue(k,g.utils.unwrapObservable(x));m=u(m,d.optionsText,x);g.utils.setTextContent(k,m);b.appendChild(k)}}n=
b.getElementsByTagName("option");c=q=0;for(r=n.length;c<r;c++)0<=g.utils.arrayIndexOf(h,g.selectExtensions.readValue(n[c]))&&(g.utils.setOptionNodeSelectionState(n[c],!0),q++);b.scrollTop=j;e&&"value"in d&&p(b,g.utils.peekObservable(d.value),!0);g.utils.ensureSelectElementIsRenderedCorrectly(b)}}};g.bindingHandlers.options.optionValueDomDataKey="__ko.optionValueDomData__";g.bindingHandlers.selectedOptions={init:function(a,b,c){g.utils.registerEventHandler(a,"change",function(){var d=b(),e=[];g.utils.arrayForEach(a.getElementsByTagName("option"),
function(a){a.selected&&e.push(g.selectExtensions.readValue(a))});g.expressionRewriting.writeValueToProperty(d,c,"value",e)})},update:function(a,b){if("select"!=g.utils.tagNameLower(a))throw Error("values binding applies only to SELECT elements");var c=g.utils.unwrapObservable(b());c&&"number"==typeof c.length&&g.utils.arrayForEach(a.getElementsByTagName("option"),function(a){var b=0<=g.utils.arrayIndexOf(c,g.selectExtensions.readValue(a));g.utils.setOptionNodeSelectionState(a,b)})}};g.bindingHandlers.style=
{update:function(a,b){var c=g.utils.unwrapObservable(b()||{}),d;for(d in c)if("string"==typeof d){var e=g.utils.unwrapObservable(c[d]);a.style[d]=e||""}}};g.bindingHandlers.submit={init:function(a,b,c,d){if("function"!=typeof b())throw Error("The value for a submit binding must be a function");g.utils.registerEventHandler(a,"submit",function(c){var e,f=b();try{e=f.call(d,a)}finally{!0!==e&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}};g.bindingHandlers.text={update:function(a,b){g.utils.setTextContent(a,
b())}};g.virtualElements.allowedBindings.text=!0;g.bindingHandlers.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++g.bindingHandlers.uniqueName.currentIndex;g.utils.setElementName(a,c)}}};g.bindingHandlers.uniqueName.currentIndex=0;g.bindingHandlers.value={init:function(a,b,c){var d=["change"],e=c().valueUpdate,f=!1;e&&("string"==typeof e&&(e=[e]),g.utils.arrayPushAll(d,e),d=g.utils.arrayGetDistinctValues(d));var h=function(){f=!1;var d=b(),e=g.selectExtensions.readValue(a);g.expressionRewriting.writeValueToProperty(d,
c,"value",e)};if(g.utils.ieVersion&&("input"==a.tagName.toLowerCase()&&"text"==a.type&&"off"!=a.autocomplete&&(!a.form||"off"!=a.form.autocomplete))&&-1==g.utils.arrayIndexOf(d,"propertychange"))g.utils.registerEventHandler(a,"propertychange",function(){f=!0}),g.utils.registerEventHandler(a,"blur",function(){f&&h()});g.utils.arrayForEach(d,function(b){var c=h;g.utils.stringStartsWith(b,"after")&&(c=function(){setTimeout(h,0)},b=b.substring(5));g.utils.registerEventHandler(a,b,c)})},update:function(a,
b){var c="select"===g.utils.tagNameLower(a),d=g.utils.unwrapObservable(b()),e=g.selectExtensions.readValue(a),f=d!=e;0===d&&(0!==e&&"0"!==e)&&(f=!0);f&&(e=function(){g.selectExtensions.writeValue(a,d)},e(),c&&setTimeout(e,0));c&&0<a.length&&p(a,d,!1)}};g.bindingHandlers.visible={update:function(a,b){var c=g.utils.unwrapObservable(b()),d="none"!=a.style.display;c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}};g.bindingHandlers.click={init:function(a,b,c,d){return g.bindingHandlers.event.init.call(this,
a,function(){var a={};a.click=b();return a},c,d)}};g.templateEngine=function(){};g.templateEngine.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource");};g.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock");};g.templateEngine.prototype.makeTemplateSource=function(b,c){if("string"==typeof b){c=c||a;var d=c.getElementById(b);if(!d)throw Error("Cannot find template with ID "+b);return new g.templateSources.domElement(d)}if(1==
b.nodeType||8==b.nodeType)return new g.templateSources.anonymousTemplate(b);throw Error("Unknown template type: "+b);};g.templateEngine.prototype.renderTemplate=function(a,b,c,d){a=this.makeTemplateSource(a,d);return this.renderTemplateSource(a,b,c)};g.templateEngine.prototype.isTemplateRewritten=function(a,b){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,b).data("isRewritten")};g.templateEngine.prototype.rewriteTemplate=function(a,b,c){a=this.makeTemplateSource(a,c);b=b(a.text());
a.text(b);a.data("isRewritten",!0)};g.exportSymbol("templateEngine",g.templateEngine);var T=function(a,b,c){a=g.expressionRewriting.parseObjectLiteral(a);for(var d=g.expressionRewriting.bindingRewriteValidators,e=0;e<a.length;e++){var f=a[e].key;if(d.hasOwnProperty(f)){var h=d[f];if("function"===typeof h){if(f=h(a[e].value))throw Error(f);}else if(!h)throw Error("This template engine does not support the '"+f+"' binding within its templates");}}a="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+
g.expressionRewriting.preProcessBindings(a)+" } })()})";return c.createJavaScriptEvaluatorBlock(a)+b},ha=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,la=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;g.templateRewriting={ensureTemplateIsRewritten:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return g.templateRewriting.memoizeBindingAttributeSyntax(a,b)},c)},memoizeBindingAttributeSyntax:function(a,b){return a.replace(ha,
function(a,c,d,e,f,g,h){return T(h,c,b)}).replace(la,function(a,c){return T(c,"\x3c!-- ko --\x3e",b)})},applyMemoizedBindingsToNextSibling:function(a){return g.memoization.memoize(function(b,c){b.nextSibling&&g.applyBindingsToNode(b.nextSibling,a,c)})}};g.exportSymbol("__tr_ambtns",g.templateRewriting.applyMemoizedBindingsToNextSibling);g.templateSources={};g.templateSources.domElement=function(a){this.domElement=a};g.templateSources.domElement.prototype.text=function(){var a=g.utils.tagNameLower(this.domElement),
a="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.domElement[a];var b=arguments[0];"innerHTML"===a?g.utils.setHtml(this.domElement,b):this.domElement[a]=b};g.templateSources.domElement.prototype.data=function(a){if(1===arguments.length)return g.utils.domData.get(this.domElement,"templateSourceData_"+a);g.utils.domData.set(this.domElement,"templateSourceData_"+a,arguments[1])};g.templateSources.anonymousTemplate=function(a){this.domElement=a};g.templateSources.anonymousTemplate.prototype=
new g.templateSources.domElement;g.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var a=g.utils.domData.get(this.domElement,"__ko_anon_template__")||{};a.textData===f&&a.containerData&&(a.textData=a.containerData.innerHTML);return a.textData}g.utils.domData.set(this.domElement,"__ko_anon_template__",{textData:arguments[0]})};g.templateSources.domElement.prototype.nodes=function(){if(0==arguments.length)return(g.utils.domData.get(this.domElement,"__ko_anon_template__")||
{}).containerData;g.utils.domData.set(this.domElement,"__ko_anon_template__",{containerData:arguments[0]})};g.exportSymbol("templateSources",g.templateSources);g.exportSymbol("templateSources.domElement",g.templateSources.domElement);g.exportSymbol("templateSources.anonymousTemplate",g.templateSources.anonymousTemplate);var Z=function(a,b,c){var d;for(b=g.virtualElements.nextSibling(b);a&&(d=a)!==b;)a=g.virtualElements.nextSibling(d),(1===d.nodeType||8===d.nodeType)&&c(d)},aa=function(a,b){if(a.length){var c=
a[0],d=a[a.length-1];Z(c,d,function(a){g.applyBindings(b,a)});Z(c,d,function(a){g.memoization.unmemoizeDomNodeAndDescendants(a,[b])})}},ja=function(a){return a.nodeType?a:0<a.length?a[0]:null},ba=function(a,b,c,d,e){e=e||{};var f=a&&ja(a),f=f&&f.ownerDocument,h=e.templateEngine||oa;g.templateRewriting.ensureTemplateIsRewritten(c,h,f);c=h.renderTemplate(c,d,e,f);if("number"!=typeof c.length||0<c.length&&"number"!=typeof c[0].nodeType)throw Error("Template engine must return an array of DOM nodes");
f=!1;switch(b){case "replaceChildren":g.virtualElements.setDomNodeChildren(a,c);f=!0;break;case "replaceNode":g.utils.replaceDomNodes(a,c);f=!0;break;case "ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+b);}f&&(aa(c,d),e.afterRender&&g.dependencyDetection.ignore(e.afterRender,null,[c,d.$data]));return c},oa;g.setTemplateEngine=function(a){if(a!=f&&!(a instanceof g.templateEngine))throw Error("templateEngine must inherit from ko.templateEngine");oa=a};g.renderTemplate=function(a,
b,c,d,e){c=c||{};if((c.templateEngine||oa)==f)throw Error("Set a template engine before calling renderTemplate");e=e||"replaceChildren";if(d){var h=ja(d);return g.dependentObservable(function(){var f=b&&b instanceof g.bindingContext?b:new g.bindingContext(g.utils.unwrapObservable(b)),j="function"==typeof a?a(f.$data,f):a,f=ba(d,e,j,f,c);"replaceNode"==e&&(d=f,h=ja(d))},null,{disposeWhen:function(){return!h||!g.utils.domNodeIsAttachedToDocument(h)},disposeWhenNodeIsRemoved:h&&"replaceNode"==e?h.parentNode:
h})}return g.memoization.memoize(function(d){g.renderTemplate(a,b,c,d,"replaceNode")})};g.renderTemplateForEach=function(a,b,c,d,e){var h,j=g.dependentObservable(function(){return(g.utils.unwrapObservable(b)||[]).length},null,{disposeWhenNodeIsRemoved:d}),n=function(b,d){h=e.createChildContext(g.utils.unwrapObservable(b),c.as);h.$index=d;h.$length=j;var f="function"==typeof a?a(b,h):a;return ba(null,"ignoreTargetNode",f,h,c)},q=function(a,b){aa(b,h);c.afterRender&&c.afterRender(b,a)};return g.dependentObservable(function(){var a=
g.utils.unwrapObservable(b)||[];"undefined"==typeof a.length&&(a=[a]);a=g.utils.arrayFilter(a,function(a){return c.includeDestroyed||a===f||null===a||!g.utils.unwrapObservable(a._destroy)});g.dependencyDetection.ignore(g.utils.setDomNodeChildrenFromArrayMapping,null,[d,a,n,c,q])},null,{disposeWhenNodeIsRemoved:d})};g.bindingHandlers.template={init:function(a,b){var c=g.utils.unwrapObservable(b());if("string"!=typeof c&&!c.name&&(1==a.nodeType||8==a.nodeType))c=1==a.nodeType?a.childNodes:g.virtualElements.childNodes(a),
c=g.utils.moveCleanedNodesToContainerElement(c),(new g.templateSources.anonymousTemplate(a)).nodes(c);return{controlsDescendantBindings:!0}},update:function(a,b,c,d,e){b=g.utils.unwrapObservable(b());c={};d=!0;var h,j=null;"string"!=typeof b&&(c=b,b=c.name,"if"in c&&(d=g.utils.unwrapObservable(c["if"])),d&&"ifnot"in c&&(d=!g.utils.unwrapObservable(c.ifnot)),h=g.utils.unwrapObservable(c.data));"foreach"in c?j=g.renderTemplateForEach(b||a,d&&c.foreach||[],c,a,e):d?(e="data"in c?e.createChildContext(h,
c.as):e,j=g.renderTemplate(b||a,e,c,a)):g.virtualElements.emptyNode(a);e=j;(h=g.utils.domData.get(a,"__ko__templateComputedDomDataKey__"))&&"function"==typeof h.dispose&&h.dispose();g.utils.domData.set(a,"__ko__templateComputedDomDataKey__",e&&e.isActive()?e:f)}};g.expressionRewriting.bindingRewriteValidators.template=function(a){a=g.expressionRewriting.parseObjectLiteral(a);return 1==a.length&&a[0].unknown||g.expressionRewriting.keyValueArrayContainsKey(a,"name")?null:"This template engine does not support anonymous templates nested within its templates"};
g.virtualElements.allowedBindings.template=!0;g.exportSymbol("setTemplateEngine",g.setTemplateEngine);g.exportSymbol("renderTemplate",g.renderTemplate);var fa=function(a,b,c,d,e){var f=Math.min,g=Math.max,h=[],j,n=a.length,q,k=b.length,r=k-n||1,m=n+k+1,p,u,x;for(j=0;j<=n;j++){u=p;h.push(p=[]);x=f(k,j+r);for(q=g(0,j-1);q<=x;q++)p[q]=q?j?a[j-1]===b[q-1]?u[q-1]:f(u[q]||m,p[q-1]||m)+1:q+1:j+1}f=[];g=[];r=[];j=n;for(q=k;j||q;)k=h[j][q]-1,q&&k===h[j][q-1]?g.push(f[f.length]={status:c,value:b[--q],index:q}):
j&&k===h[j-1][q]?r.push(f[f.length]={status:d,value:a[--j],index:j}):(f.push({status:"retained",value:b[--q]}),--j);if(g.length&&r.length){a=10*n;var F;for(b=c=0;(e||b<a)&&(F=g[c]);c++){for(d=0;h=r[d];d++)if(F.value===h.value){F.moved=h.index;h.moved=F.index;r.splice(d,1);b=d=0;break}b+=d}}return f.reverse()};g.utils.compareArrays=function(a,b,c){a=a||[];b=b||[];return a.length<=b.length?fa(a,b,"added","deleted",c):fa(b,a,"deleted","added",c)};g.exportSymbol("utils.compareArrays",g.utils.compareArrays);
var k=function(a){for(;a.length&&!g.utils.domNodeIsAttachedToDocument(a[0]);)a.splice(0,1);if(1<a.length){for(var b=a[0],c=a[a.length-1],d=[b];b!==c;){b=b.nextSibling;if(!b)return;d.push(b)}Array.prototype.splice.apply(a,[0,a.length].concat(d))}return a},U=function(a,b,c,d,e){var h=[];a=g.dependentObservable(function(){var a=b(c,e)||[];0<h.length&&(g.utils.replaceDomNodes(k(h),a),d&&g.dependencyDetection.ignore(d,null,[c,a,e]));h.splice(0,h.length);g.utils.arrayPushAll(h,a)},null,{disposeWhenNodeIsRemoved:a,
disposeWhen:function(){return!g.utils.anyDomNodeIsAttachedToDocument(h)}});return{mappedNodes:h,dependentObservable:a.isActive()?a:f}};g.utils.setDomNodeChildrenFromArrayMapping=function(a,b,c,d,e){function h(a,b){s=q[b];x!==b&&(y[a]=s);s.indexObservable(x++);k(s.mappedNodes);p.push(s);O.push(s)}function j(a,b){if(a)for(var c=0,d=b.length;c<d;c++)b[c]&&g.utils.arrayForEach(b[c].mappedNodes,function(d){a(d,c,b[c].arrayEntry)})}b=b||[];d=d||{};var n=g.utils.domData.get(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===
f,q=g.utils.domData.get(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],r=g.utils.arrayMap(q,function(a){return a.arrayEntry}),m=g.utils.compareArrays(r,b),p=[],u=0,x=0,F=[],O=[];b=[];for(var y=[],r=[],s,A=0,T,w;T=m[A];A++)switch(w=T.moved,T.status){case "deleted":w===f&&(s=q[u],s.dependentObservable&&s.dependentObservable.dispose(),F.push.apply(F,k(s.mappedNodes)),d.beforeRemove&&(b[A]=s,O.push(s)));u++;break;case "retained":h(A,u++);break;case "added":w!==f?h(A,w):(s={arrayEntry:T.value,
indexObservable:g.observable(x++)},p.push(s),O.push(s),n||(r[A]=s))}j(d.beforeMove,y);g.utils.arrayForEach(F,d.beforeRemove?g.cleanNode:g.removeNode);for(var A=0,n=g.virtualElements.firstChild(a),I;s=O[A];A++){s.mappedNodes||g.utils.extend(s,U(a,c,s.arrayEntry,e,s.indexObservable));for(u=0;m=s.mappedNodes[u];n=m.nextSibling,I=m,u++)m!==n&&g.virtualElements.insertAfter(a,m,I);!s.initialized&&e&&(e(s.arrayEntry,s.mappedNodes,s.indexObservable),s.initialized=!0)}j(d.beforeRemove,b);j(d.afterMove,y);
j(d.afterAdd,r);g.utils.domData.set(a,"setDomNodeChildrenFromArrayMapping_lastMappingResult",p)};g.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",g.utils.setDomNodeChildrenFromArrayMapping);g.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1};g.nativeTemplateEngine.prototype=new g.templateEngine;g.nativeTemplateEngine.prototype.renderTemplateSource=function(a){var b=!(9>g.utils.ieVersion)&&a.nodes?a.nodes():null;if(b)return g.utils.makeArray(b.cloneNode(!0).childNodes);a=a.text();
return g.utils.parseHtmlFragment(a)};g.nativeTemplateEngine.instance=new g.nativeTemplateEngine;g.setTemplateEngine(g.nativeTemplateEngine.instance);g.exportSymbol("nativeTemplateEngine",g.nativeTemplateEngine);g.jqueryTmplTemplateEngine=function(){var b=this.jQueryTmplVersion=function(){if("undefined"==typeof e||!e.tmpl)return 0;try{if(0<=e.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=function(c,d,f){f=f||{};if(2>b)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");
var g=c.data("precompiled");g||(g=c.text()||"",g=e.template(null,"{{ko_with $item.koBindingContext}}"+g+"{{/ko_with}}"),c.data("precompiled",g));c=[d.$data];d=e.extend({koBindingContext:d},f.templateOptions);d=e.tmpl(g,c,d);d.appendTo(a.createElement("div"));e.fragments={};return d};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"};this.addTemplate=function(b,c){a.write("<script type='text/html' id='"+b+"'>"+c+"\x3c/script>")};0<b&&(e.tmpl.tag.ko_code=
{open:"__.push($1 || '');"},e.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};g.jqueryTmplTemplateEngine.prototype=new g.templateEngine;h=new g.jqueryTmplTemplateEngine;0<h.jQueryTmplVersion&&g.setTemplateEngine(h);g.exportSymbol("jqueryTmplTemplateEngine",g.jqueryTmplTemplateEngine)};"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?h(module.exports||exports):"function"===typeof define&&define.amd?define(["exports"],h):h(b.ko={});!0})();
(function(c){"function"===typeof define&&define.amd?define(["knockout"],c):c(window.ko)})(function(c){c.bindingFlags||(c.bindingFlags={});var b;a:{var a=c.observable.fn,d=c.observable,e;for(e in a)if(a.hasOwnProperty(e)&&a[e]===d){b=e;break a}b=void 0}c.bindingHandlers.repeat={flags:c.bindingFlags.contentBind,init:function(a,d,e,m,p){if((e=c.utils.unwrapObservable(d()))&&"object"==typeof e&&!("length"in e))var g=e.index,n=e.item,q=e.step,u=e.reverse,r=e.bind,x=e.init,y=e.update;g=g||"$index";n=n||
c.bindingHandlers.repeat.itemName||"$item";q=q||1;u=u||!1;c.cleanNode(a);a.removeAttribute("data-bind");r||(r=a.getAttribute("data-repeat-bind"))&&a.removeAttribute("data-repeat-bind");var w=a.cloneNode(!0);"string"==typeof r&&(w.setAttribute("data-bind",r),r=null);var v=a.parentNode,D=document.createComment("ko_repeatplaceholder");v.replaceChild(D,a);var H=0,s=c.observable(),E;x&&x(v);return{controlsDescendantBindings:!0,subscribable:c.dependentObservable(function(){function a(d){var e=function(a){var b=
E[d];if(arguments.length){if(c.isObservable(b))return b(a);E[d]=a}else return s(),c.utils.unwrapObservable(b)};e[b]=c.observable;return e}function e(a,b,c){return E?function(){return r.call(m,a,b,c)}:function(){return r.call(m,b,c)}}var f=c.utils.unwrapObservable(d()),j=0;f&&"object"==typeof f?"length"in f?(E=f,j=E.length):("foreach"in f&&(j=(E=c.utils.unwrapObservable(f.foreach))&&E.length||0),"count"in f&&(j=c.utils.unwrapObservable(f.count)||j),"limit"in f&&(j=Math.min(j,c.utils.unwrapObservable(f.limit))||
j)):j=f||0;for(;H>j;H-=q)c.removeNode(u?D.nextSibling:D.previousSibling);for(s.notifySubscribers();H<j;H+=q){f=w.cloneNode(!0);v.insertBefore(f,u?D.nextSibling:D);f.setAttribute("data-repeat-index",H);if(E&&"$data"==n)var x=p.createChildContext(a(H));else x=p.extend?p.extend():c.utils.extend(new p.constructor,p),E&&(x[n]=a(H));x[g]=H;if(r)var K=c.applyBindingsToNode(f,e(x[n],H,x),x,!0),L=K&&K.shouldBindDescendants;(!r||K&&!1!==L)&&c.applyBindings(x,f)}y&&y(v)},null,{disposeWhenNodeIsRemoved:D})}}}});
(function(c,b){function a(a,b){for(var c in a)if(a.hasOwnProperty(c)&&0<=a[c].toString().indexOf(b))return c}function d(a,b){for(var c in a)if(a.hasOwnProperty(c)&&a[c]===b)return c}var e=function(a){try{for(var c=a||0;c<m.length;c++){g=c;var d=m[c],e=d.evaluator;d.processed||(d.processed=!0,e.apply(d.object,d.args||[]))}}finally{a?m.splice(a,m.length):(m=[],j=b),g=b}},f=function(){e()},h=window.setImmediate?"setImmediate":"setTimeout",j,m=[],p=[],g,n={processImmediate:function(a,b,c){p.push(m.length);
try{return a.apply(b,c||[])}finally{a=p.pop(),m.length>a&&e(a)}},processDelayed:function(a,d,e){if(d=d||d===b)a:{d=g||(p.length?p[p.length-1]:0);for(var n=m.length;d<n;d++)if(m[d].evaluator==a&&!m[d].processed){e&&c.utils.extend(m[d],e);d=!0;break a}d=!1}if(d)return!1;m.push(c.utils.extend({evaluator:a},e||{}));!p.length&&!j&&(j=window[h](f));return!0},makeProcessedCallback:function(a){return function(){return n.processImmediate(a,this,arguments)}}};c.processDeferredBindingUpdatesForNode=c.processAllDeferredBindingUpdates=
function(){for(var a=0;a<m.length;a++){var b=m[a];b.node&&!b.processed&&(b.processed=!0,b=m[a].evaluator,b())}};c.processAllDeferredUpdates=f;c.evaluateAsynchronously=function(a,b){return setTimeout(n.makeProcessedCallback(a),b)};c.tasks=n;var q;a:{var u=c,r;for(r in u)if(u.hasOwnProperty(r)&&u[r]&&u[r].end){q=u[r];break a}q=void 0}var x=a(q,".push({"),y=a(q,".length"),u=c.computed;r=d(c,u);var w=d(u.fn,u),v=c.computed(function(){}),D=d(v,v.peek)||"peek",H=d(v,v.isActive)||"isActive",s=d(v,v.getDependenciesCount),
E=d(v,!1),G=d(v,v.dispose),C="disposeWhenNodeIsRemoved",F="disposeWhen";if("hasWriteFunction"!=E){var v=u.toString(),A;if(A=v.match(/.\.disposeWhenNodeIsRemoved\|\|.\.([^|]+)\|\|/))C=A[1];if(v=v.match(/.\.disposeWhen\|\|.\.([^|]+)\|\|/))F=v[1]}var I=a(c.utils,"ocument)"),v=c.subscribable.fn;A=a(v,".bind(");var K=(new c.subscribable).subscribe(),L=K.constructor.prototype,R=d(L,K.dispose),N=L[R];K.dispose();K=null;c.ignoreDependencies=function(a,b,c){try{return q[x](function(){}),a.apply(b,c||[])}finally{q.end()}};
v.oldSubscribe=v[A];v[A]=function(a,b,d,e,f){d=d||"change";if(f)g=function(b){a(b,d)},"change"==d&&(this.dependents=this.dependents||[],this.dependents.push(f));else var g=function(f){(Q.deferUpdates&&!1!==e||e)&&"change"==d?c.tasks.processDelayed(a,!1,{object:b,args:[f,d]}):c.ignoreDependencies(a,b,[f,d])};g=this.oldSubscribe(g,null,d);g.target=this;g.event=d;g.dependent=f;return g};v.getDependents=function(){return this.dependents?this.dependents.slice(0):[]};L[R]=function(){N.call(this);this.dependent&&
"change"==this.event&&c.utils.arrayRemoveItem(this.target.dependents,this.dependent)};var Q=function(a,d,e){function f(){c.utils.arrayForEach(V,function(a){a.dispose()});V=[];k=u=!1}function g(a,b){var d="dirty"==b,e=d&&!k&&!u;d?k=!0:u=!0;(d=r.throttleEvaluation)&&0<=d?(clearTimeout(S),S=c.evaluateAsynchronously(n,d)):Q.deferUpdates&&!1!==r.deferUpdates||r.deferUpdates?e=c.tasks.processDelayed(n,!0,{node:L}):u&&(e=n());e&&r.notifySubscribers&&(r.notifySubscribers(p,"dirty"),!k&&d&&clearTimeout(S))}
function h(){u=!0}function j(a){var b="change";a[w]===Q&&(V.push(a.subscribe(h,null,"change",!1,r)),b="dirty");V.push(a.subscribe(g,null,b,!1,r))}function n(a){if(A||!u&&!0!==a)return k=u,!1;if(N&&N())return r.dispose(),!1;A=!0;try{var e=c.utils.arrayMap(V,function(a){return a.target});q[x](function(a){for(var d,f=!1;0<=(d=c.utils.arrayIndexOf(e,a));)e[d]=b,f=!0;f||j(a)});for(var f=v.call(d),g=e.length-1;0<=g;g--)e[g]&&V.splice(g,1)[0].dispose();k=u=!1;r.notifySubscribers(p,"beforeChange");p=f}finally{q.end()}r.notifySubscribers(p);
A=!1;return!0}function r(){if(0<arguments.length){if("function"===typeof K){var a=r.deferUpdates;r.deferUpdates=!1;K.apply(d,arguments);r.deferUpdates=a}else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}(u||k)&&n(!0);q[y](r);return p}function m(){return u||k||0<V.length}var p,k=!1,u=!0,A=!1,v=a;v&&"object"==typeof v?(e=v,v=e.read):(e=e||{},v||(v=e.read));if("function"!=typeof v)throw Error("Pass a function that returns the value of the ko.computed");
var K=e.write;d||(d=e.owner);var V=[],S=null,L=e[C]||e.disposeWhenNodeIsRemoved||null;if(!0!==e.deferEvaluation){A=!0;try{q[x](j),p=v.call(d)}finally{q.end()}u=A=!1}var R=f,N=e[F]||e.disposeWhen||function(){return!1};if(L&&m()){R=function(){c.utils.domNodeDisposal.removeDisposeCallback(L,arguments.callee);f()};c.utils.domNodeDisposal.addDisposeCallback(L,R);var sa=N,N=function(){return!c.utils[I](L)||sa()}}c.subscribable.call(r);c.utils.extend(r,Q.fn);r[D]=r.peek=function(){(u||k)&&n(!0);return p};
r[s]=r.getDependenciesCount=function(){return V.length};r[E]=r.hasWriteFunction="function"===typeof K;r[G]=r.dispose=function(){R()};r[H]=r.isActive=m;r.getDependencies=function(){return c.utils.arrayMap(c.utils.arrayFilter(V,function(a){return"change"==a.event}),function(a){return a.target})};return r};Q[w]=u[w];Q.fn=u.fn;Q.fn[w]=Q;Q.deferUpdates=!0;c[r]=c.computed=c.dependentObservable=Q;u=v=null;c.extenders.throttle=function(a,b){if(c.isWriteableObservable(a)){var d=null;return c.dependentObservable({read:a,
write:function(e){clearTimeout(d);d=c.evaluateAsynchronously(function(){a(e)},b)}})}a.throttleEvaluation=b;return a}})(ko);
(function(){function c(a,b,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a._chain&&(a=a._wrapped);b._chain&&(b=b._wrapped);if(a.isEqual&&s.isFunction(a.isEqual))return a.isEqual(b);if(b.isEqual&&s.isFunction(b.isEqual))return b.isEqual(a);var e=m.call(a);if(e!=m.call(b))return!1;switch(e){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==
b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=d.length;f--;)if(d[f]==a)return!0;d.push(a);var f=0,g=!0;if("[object Array]"==e){if(f=a.length,g=f==b.length)for(;f--&&(g=f in a==f in b&&c(a[f],b[f],d)););}else{if("constructor"in a!="constructor"in b||a.constructor!=b.constructor)return!1;for(var h in a)if(s.has(a,h)&&(f++,!(g=s.has(b,h)&&c(a[h],b[h],d))))break;if(g){for(h in b)if(s.has(b,h)&&!f--)break;
g=!f}}d.pop();return g}var b=this,a=b._,d={},e=Array.prototype,f=Object.prototype,h=e.slice,j=e.unshift,m=f.toString,p=f.hasOwnProperty,g=e.forEach,n=e.map,q=e.reduce,u=e.reduceRight,r=e.filter,x=e.every,y=e.some,w=e.indexOf,v=e.lastIndexOf,f=Array.isArray,D=Object.keys,H=Function.prototype.bind,s=function(a){return new Q(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=s),exports._=s):b._=s;s.VERSION="1.3.3";var E=s.each=s.forEach=function(a,
b,c){if(null!=a)if(g&&a.forEach===g)a.forEach(b,c);else if(a.length===+a.length)for(var e=0,f=a.length;e<f&&!(e in a&&b.call(c,a[e],e,a)===d);e++);else for(e in a)if(s.has(a,e)&&b.call(c,a[e],e,a)===d)break};s.map=s.collect=function(a,b,c){var d=[];if(null==a)return d;if(n&&a.map===n)return a.map(b,c);E(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)});a.length===+a.length&&(d.length=a.length);return d};s.reduce=s.foldl=s.inject=function(a,b,c,d){var e=2<arguments.length;null==a&&(a=[]);if(q&&a.reduce===
q)return d&&(b=s.bind(b,d)),e?a.reduce(b,c):a.reduce(b);E(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c};s.reduceRight=s.foldr=function(a,b,c,d){var e=2<arguments.length;null==a&&(a=[]);if(u&&a.reduceRight===u)return d&&(b=s.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=s.toArray(a).reverse();d&&!e&&(b=s.bind(b,d));return e?s.reduce(f,b,c,d):s.reduce(f,b)};s.find=s.detect=function(a,b,c){var d;G(a,function(a,
e,f){if(b.call(c,a,e,f))return d=a,!0});return d};s.filter=s.select=function(a,b,c){var d=[];if(null==a)return d;if(r&&a.filter===r)return a.filter(b,c);E(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)});return d};s.reject=function(a,b,c){var d=[];if(null==a)return d;E(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)});return d};s.every=s.all=function(a,b,c){var e=!0;if(null==a)return e;if(x&&a.every===x)return a.every(b,c);E(a,function(a,f,g){if(!(e=e&&b.call(c,a,f,g)))return d});return!!e};
var G=s.some=s.any=function(a,b,c){b||(b=s.identity);var e=!1;if(null==a)return e;if(y&&a.some===y)return a.some(b,c);E(a,function(a,f,g){if(e||(e=b.call(c,a,f,g)))return d});return!!e};s.include=s.contains=function(a,b){var c=!1;return null==a?c:w&&a.indexOf===w?-1!=a.indexOf(b):c=G(a,function(a){return a===b})};s.invoke=function(a,b){var c=h.call(arguments,2);return s.map(a,function(a){return(s.isFunction(b)?b||a:a[b]).apply(a,c)})};s.pluck=function(a,b){return s.map(a,function(a){return a[b]})};
s.max=function(a,b,c){if(!b&&s.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&s.isEmpty(a))return-Infinity;var d={computed:-Infinity};E(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e>=d.computed&&(d={value:a,computed:e})});return d.value};s.min=function(a,b,c){if(!b&&s.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&s.isEmpty(a))return Infinity;var d={computed:Infinity};E(a,function(a,e,f){e=b?b.call(c,a,e,f):a;e<d.computed&&(d={value:a,computed:e})});return d.value};s.shuffle=
function(a){var b=[],c;E(a,function(a,d){c=Math.floor(Math.random()*(d+1));b[d]=b[c];b[c]=a});return b};s.sortBy=function(a,b,c){var d=s.isFunction(b)?b:function(a){return a[b]};return s.pluck(s.map(a,function(a,b,e){return{value:a,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return void 0===c?1:void 0===d?-1:c<d?-1:c>d?1:0}),"value")};s.groupBy=function(a,b){var c={},d=s.isFunction(b)?b:function(a){return a[b]};E(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)});
return c};s.sortedIndex=function(a,b,c){c||(c=s.identity);for(var d=0,e=a.length;d<e;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d};s.toArray=function(a){return!a?[]:s.isArray(a)||s.isArguments(a)?h.call(a):a.toArray&&s.isFunction(a.toArray)?a.toArray():s.values(a)};s.size=function(a){return s.isArray(a)?a.length:s.keys(a).length};s.first=s.head=s.take=function(a,b,c){return null!=b&&!c?h.call(a,0,b):a[0]};s.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))};s.last=function(a,
b,c){return null!=b&&!c?h.call(a,Math.max(a.length-b,0)):a[a.length-1]};s.rest=s.tail=function(a,b,c){return h.call(a,null==b||c?1:b)};s.compact=function(a){return s.filter(a,function(a){return!!a})};s.flatten=function(a,b){return s.reduce(a,function(a,c){if(s.isArray(c))return a.concat(b?c:s.flatten(c));a[a.length]=c;return a},[])};s.without=function(a){return s.difference(a,h.call(arguments,1))};s.uniq=s.unique=function(a,b,c){c=c?s.map(a,c):a;var d=[];3>a.length&&(b=!0);s.reduce(c,function(c,e,
f){if(b?s.last(c)!==e||!c.length:!s.include(c,e))c.push(e),d.push(a[f]);return c},[]);return d};s.union=function(){return s.uniq(s.flatten(arguments,!0))};s.intersection=s.intersect=function(a){var b=h.call(arguments,1);return s.filter(s.uniq(a),function(a){return s.every(b,function(b){return 0<=s.indexOf(b,a)})})};s.difference=function(a){var b=s.flatten(h.call(arguments,1),!0);return s.filter(a,function(a){return!s.include(b,a)})};s.zip=function(){for(var a=h.call(arguments),b=s.max(s.pluck(a,"length")),
c=Array(b),d=0;d<b;d++)c[d]=s.pluck(a,""+d);return c};s.indexOf=function(a,b,c){if(null==a)return-1;var d;if(c)return c=s.sortedIndex(a,b),a[c]===b?c:-1;if(w&&a.indexOf===w)return a.indexOf(b);c=0;for(d=a.length;c<d;c++)if(c in a&&a[c]===b)return c;return-1};s.lastIndexOf=function(a,b){if(null==a)return-1;if(v&&a.lastIndexOf===v)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1};s.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var d=
Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f};var C=function(){};s.bind=function(a,b){var c,d;if(a.bind===H&&H)return H.apply(a,h.call(arguments,1));if(!s.isFunction(a))throw new TypeError;d=h.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,d.concat(h.call(arguments)));C.prototype=a.prototype;var e=new C,f=a.apply(e,d.concat(h.call(arguments)));return Object(f)===f?f:e}};s.bindAll=function(a){var b=h.call(arguments,1);0==b.length&&(b=s.functions(a));
E(b,function(b){a[b]=s.bind(a[b],a)});return a};s.memoize=function(a,b){var c={};b||(b=s.identity);return function(){var d=b.apply(this,arguments);return s.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}};s.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};s.defer=function(a){return s.delay.apply(s,[a,1].concat(h.call(arguments,1)))};s.throttle=function(a,b){var c,d,e,f,g,h,j=s.debounce(function(){g=f=!1},b);return function(){c=this;d=arguments;e||
(e=setTimeout(function(){e=null;g&&a.apply(c,d);j()},b));f?g=!0:h=a.apply(c,d);j();f=!0;return h}};s.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments;c&&!d&&a.apply(e,f);clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,f)},b)}};s.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}};s.wrap=function(a,b){return function(){var c=[a].concat(h.call(arguments,0));return b.apply(this,c)}};s.compose=function(){var a=arguments;
return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};s.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};s.keys=D||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)s.has(a,c)&&(b[b.length]=c);return b};s.values=function(a){return s.map(a,s.identity)};s.functions=s.methods=function(a){var b=[],c;for(c in a)s.isFunction(a[c])&&b.push(c);return b.sort()};s.extend=function(a){E(h.call(arguments,
1),function(b){for(var c in b)a[c]=b[c]});return a};s.pick=function(a){var b={};E(s.flatten(h.call(arguments,1)),function(c){c in a&&(b[c]=a[c])});return b};s.defaults=function(a){E(h.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])});return a};s.clone=function(a){return!s.isObject(a)?a:s.isArray(a)?a.slice():s.extend({},a)};s.tap=function(a,b){b(a);return a};s.isEqual=function(a,b){return c(a,b,[])};s.isEmpty=function(a){if(null==a)return!0;if(s.isArray(a)||s.isString(a))return 0===
a.length;for(var b in a)if(s.has(a,b))return!1;return!0};s.isElement=function(a){return!!(a&&1==a.nodeType)};s.isArray=f||function(a){return"[object Array]"==m.call(a)};s.isObject=function(a){return a===Object(a)};s.isArguments=function(a){return"[object Arguments]"==m.call(a)};s.isArguments(arguments)||(s.isArguments=function(a){return!(!a||!s.has(a,"callee"))});s.isFunction=function(a){return"[object Function]"==m.call(a)};s.isString=function(a){return"[object String]"==m.call(a)};s.isNumber=function(a){return"[object Number]"==
m.call(a)};s.isFinite=function(a){return s.isNumber(a)&&isFinite(a)};s.isNaN=function(a){return a!==a};s.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==m.call(a)};s.isDate=function(a){return"[object Date]"==m.call(a)};s.isRegExp=function(a){return"[object RegExp]"==m.call(a)};s.isNull=function(a){return null===a};s.isUndefined=function(a){return void 0===a};s.has=function(a,b){return p.call(a,b)};s.noConflict=function(){b._=a;return this};s.identity=function(a){return a};s.times=
function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)};s.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};s.result=function(a,b){if(null==a)return null;var c=a[b];return s.isFunction(c)?c.call(a):c};s.mixin=function(a){E(s.functions(a),function(b){var c=s[b]=a[b];Q.prototype[b]=function(){var a=h.call(arguments);j.call(a,this._wrapped);return J(c.apply(s,a),this._chain)}})};var F=0;s.uniqueId=
function(a){var b=F++;return a?a+b:b};s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/.^/,I={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},K;for(K in I)I[I[K]]=K;var L=/\\|'|\r|\n|\t|\u2028|\u2029/g,R=/\\(\\|'|r|n|t|u2028|u2029)/g,N=function(a){return a.replace(R,function(a,b){return I[b]})};s.template=function(a,b,c){c=s.defaults(c||{},s.templateSettings);a="__p+='"+a.replace(L,function(a){return"\\"+I[a]}).replace(c.escape||
A,function(a,b){return"'+\n_.escape("+N(b)+")+\n'"}).replace(c.interpolate||A,function(a,b){return"'+\n("+N(b)+")+\n'"}).replace(c.evaluate||A,function(a,b){return"';\n"+N(b)+"\n;__p+='"})+"';\n";c.variable||(a="with(obj||{}){\n"+a+"}\n");a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var d=new Function(c.variable||"obj","_",a);if(b)return d(b,s);b=function(a){return d.call(this,a,s)};b.source="function("+(c.variable||"obj")+"){\n"+a+"}";return b};
s.chain=function(a){return s(a).chain()};var Q=function(a){this._wrapped=a};s.prototype=Q.prototype;var J=function(a,b){return b?s(a).chain():a};s.mixin(s);E("pop push reverse shift sort splice unshift".split(" "),function(a){var b=e[a];Q.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;("shift"==a||"splice"==a)&&0===d&&delete c[0];return J(c,this._chain)}});E(["concat","join","slice"],function(a){var b=e[a];Q.prototype[a]=function(){return J(b.apply(this._wrapped,arguments),
this._chain)}});Q.prototype.chain=function(){this._chain=!0;return this};Q.prototype.value=function(){return this._wrapped}}).call(this);
(function(){var c=this,b=c.Backbone,a=Array.prototype.slice,d=Array.prototype.splice,e;e="undefined"!==typeof exports?exports:c.Backbone={};e.VERSION="0.9.2";var f=c._;!f&&"undefined"!==typeof require&&(f=require("underscore"));var h=c.jQuery||c.Zepto||c.ender;e.setDomLibrary=function(a){h=a};e.noConflict=function(){c.Backbone=b;return this};e.emulateHTTP=!1;e.emulateJSON=!1;var j=/\s+/,m=e.Events={on:function(a,b,c){var d,e,f,g,h;if(!b)return this;a=a.split(j);for(d=this._callbacks||(this._callbacks=
{});e=a.shift();)f=(h=d[e])?h.tail:{},f.next=g={},f.context=c,f.callback=b,d[e]={tail:g,next:h?h.next:f};return this},off:function(a,b,c){var d,e,g,h,n,q;if(e=this._callbacks){if(!a&&!b&&!c)return delete this._callbacks,this;for(a=a?a.split(j):f.keys(e);d=a.shift();)if(g=e[d],delete e[d],g&&(b||c))for(h=g.tail;(g=g.next)!==h;)if(n=g.callback,q=g.context,b&&n!==b||c&&q!==c)this.on(d,n,q);return this}},trigger:function(b){var c,d,e,f,g,h;if(!(e=this._callbacks))return this;g=e.all;b=b.split(j);for(h=
a.call(arguments,1);c=b.shift();){if(d=e[c])for(f=d.tail;(d=d.next)!==f;)d.callback.apply(d.context||this,h);if(d=g){f=d.tail;for(c=[c].concat(h);(d=d.next)!==f;)d.callback.apply(d.context||this,c)}}return this}};m.bind=m.on;m.unbind=m.off;var p=e.Model=function(a,b){var c;a||(a={});b&&b.parse&&(a=this.parse(a));if(c=G(this,"defaults"))a=f.extend({},c,a);b&&b.collection&&(this.collection=b.collection);this.attributes={};this._escapedAttributes={};this.cid=f.uniqueId("c");this.changed={};this._silent=
{};this._pending={};this.set(a,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=f.clone(this.attributes);this.initialize.apply(this,arguments)};f.extend(p.prototype,m,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;b=this.get(a);return this._escapedAttributes[a]=f.escape(null==
b?"":""+b)},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c||(c={});if(!d)return this;d instanceof p&&(d=d.attributes);if(c.unset)for(e in d)d[e]=void 0;if(!this._validate(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);b=c.changes={};var g=this.attributes,h=this._escapedAttributes,j=this._previousAttributes||{};for(e in d){a=d[e];if(!f.isEqual(g[e],a)||c.unset&&f.has(g,e))delete h[e],(c.silent?this._silent:
b)[e]=!0;c.unset?delete g[e]:g[e]=a;!f.isEqual(j[e],a)||f.has(g,e)!=f.has(j,e)?(this.changed[e]=a,c.silent||(this._pending[e]=!0)):(delete this.changed[e],delete this._pending[e])}c.silent||this.change(c);return this},unset:function(a,b){(b||(b={})).unset=!0;return this.set(a,null,b)},clear:function(a){(a||(a={})).unset=!0;return this.set(f.clone(this.attributes),a)},fetch:function(a){a=a?f.clone(a):{};var b=this,c=a.success;a.success=function(d,e,f){if(!b.set(b.parse(d,f),a))return!1;c&&c(b,d)};
a.error=e.wrapError(a.error,b,a);return(this.sync||e.sync).call(this,"read",this,a)},save:function(a,b,c){var d,g;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b);c=c?f.clone(c):{};if(c.wait){if(!this._validate(d,c))return!1;g=f.clone(this.attributes)}a=f.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?a:c))return!1;var h=this,j=c.success;c.success=function(a,b,e){b=h.parse(a,e);c.wait&&(delete c.wait,b=f.extend(d||{},b));if(!h.set(b,c))return!1;j?j(h,a):h.trigger("sync",h,a,c)};c.error=e.wrapError(c.error,
h,c);b=this.isNew()?"create":"update";b=(this.sync||e.sync).call(this,b,this,c);c.wait&&this.set(g,a);return b},destroy:function(a){a=a?f.clone(a):{};var b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d(),!1;a.success=function(e){a.wait&&d();c?c(b,e):b.trigger("sync",b,e,a)};a.error=e.wrapError(a.error,b,a);var g=(this.sync||e.sync).call(this,"delete",this,a);a.wait||d();return g},url:function(){var a=G(this,"urlRoot")||G(this.collection,"url")||C();
return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){a||(a={});var b=this._changing;this._changing=!0;for(var c in this._silent)this._pending[c]=!0;var d=f.extend({},a.changes,this._silent);this._silent={};for(c in d)this.trigger("change:"+c,this,this.get(c),a);if(b)return this;for(;!f.isEmpty(this._pending);){this._pending=
{};this.trigger("change",this,a);for(c in this.changed)!this._pending[c]&&!this._silent[c]&&delete this.changed[c];this._previousAttributes=f.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(a){return!arguments.length?!f.isEmpty(this.changed):f.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this.changed):!1;var b,c=!1,d=this._previousAttributes,e;for(e in a)if(!f.isEqual(d[e],b=a[e]))(c||(c={}))[e]=b;return c},previous:function(a){return!arguments.length||
!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return f.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;a=f.extend({},this.attributes,a);var c=this.validate(a,b);if(!c)return!0;b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b);return!1}});var g=e.Collection=function(a,b){b||(b={});b.model&&(this.model=b.model);b.comparator&&(this.comparator=b.comparator);
this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,{silent:!0,parse:b.parse})};f.extend(g.prototype,m,{model:p,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},add:function(a,b){var c,e,g,h,j,n={},q={},r=[];b||(b={});a=f.isArray(a)?a.slice():[a];c=0;for(e=a.length;c<e;c++){if(!(g=a[c]=this._prepareModel(a[c],b)))throw Error("Can't add an invalid model to a collection");h=g.cid;j=g.id;n[h]||this._byCid[h]||null!=j&&(q[j]||this._byId[j])?
r.push(c):n[h]=q[j]=g}for(c=r.length;c--;)a.splice(r[c],1);c=0;for(e=a.length;c<e;c++)(g=a[c]).on("all",this._onModelEvent,this),this._byCid[g.cid]=g,null!=g.id&&(this._byId[g.id]=g);this.length+=e;d.apply(this.models,[null!=b.at?b.at:this.models.length,0].concat(a));this.comparator&&this.sort({silent:!0});if(b.silent)return this;c=0;for(e=this.models.length;c<e;c++)if(n[(g=this.models[c]).cid])b.index=c,g.trigger("add",g,this,b);return this},remove:function(a,b){var c,d,e,g;b||(b={});a=f.isArray(a)?
a.slice():[a];c=0;for(d=a.length;c<d;c++)if(g=this.getByCid(a[c])||this.get(a[c]))delete this._byId[g.id],delete this._byCid[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,b);return a},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,f.extend({at:0},b));return a},
shift:function(a){var b=this.at(0);this.remove(b,a);return b},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return f.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var b=f.bind(this.comparator,this);1==this.comparator.length?
this.models=this.sortBy(b):this.models.sort(b);a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return f.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]);b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);this._reset();this.add(a,f.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},fetch:function(a){a=a?f.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d,
e,f){b[a.add?"add":"reset"](b.parse(d,f),a);c&&c(b,d)};a.error=e.wrapError(a.error,b,a);return(this.sync||e.sync).call(this,"read",this,a)},create:function(a,b){var c=this;b=b?f.clone(b):{};a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;b.success=function(e,f){b.wait&&c.add(e,b);d?d(e,f):e.trigger("sync",a,f,b)};a.save(null,b);return a},parse:function(a){return a},chain:function(){return f(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId=
{};this._byCid={}},_prepareModel:function(a,b){b||(b={});a instanceof p?a.collection||(a.collection=this):(b.collection=this,a=new this.model(a,b),a._validate(a.attributes,b)||(a=!1));return a},_removeReference:function(a){this==a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,
arguments))}});f.each("forEach each map reduce reduceRight find detect filter select reject every all some any include contains invoke max min sortBy sortedIndex toArray size first initial rest last without indexOf shuffle lastIndexOf isEmpty groupBy".split(" "),function(a){g.prototype[a]=function(){return f[a].apply(f,[this.models].concat(f.toArray(arguments)))}});var n=e.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},q=/:\w+/g,
u=/\*\w+/g,r=/[-[\]{}()+?.,\\^$|#\s]/g;f.extend(n.prototype,m,{initialize:function(){},route:function(a,b,c){e.history||(e.history=new x);f.isRegExp(a)||(a=this._routeToRegExp(a));c||(c=this[b]);e.history.route(a,f.bind(function(d){d=this._extractParameters(a,d);c&&c.apply(this,d);this.trigger.apply(this,["route:"+b].concat(d));e.history.trigger("route",this,b,d)},this));return this},navigate:function(a,b){e.history.navigate(a,b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,
this.routes[b]]);b=0;for(var c=a.length;b<c;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){a=a.replace(r,"\\$&").replace(q,"([^/]+)").replace(u,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var x=e.History=function(){this.handlers=[];f.bindAll(this,"checkUrl")},y=/^[#\/]/,w=/msie [\w.]+/;x.started=!1;f.extend(x.prototype,m,{interval:50,getHash:function(a){return(a=(a?a.location:window.location).href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c)}else a=this.getHash();a.indexOf(this.options.root)||(a=a.substr(this.options.root.length));return a.replace(y,"")},start:function(a){if(x.started)throw Error("Backbone.history has already been started");x.started=!0;this.options=f.extend({},{root:"/"},this.options,a);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=
!(!this.options.pushState||!window.history||!window.history.pushState);a=this.getFragment();var b=document.documentMode;if(b=w.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))this.iframe=h('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?h(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!b?h(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,
this.interval));this.fragment=a;a=window.location;b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(y,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},
stop:function(){h(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);x.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return f.any(this.handlers,
function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!x.started)return!1;if(!b||!0===b)b={trigger:b};var c=(a||"").replace(y,"");this.fragment!=c&&(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.getHash(this.iframe))&&(b.replace||
this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var v=e.View=function(a){this.cid=f.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},D=/^(\S+)\s*(.*)$/,H="model collection el id attributes className tagName".split(" ");
f.extend(v.prototype,m,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(a,b,c){a=document.createElement(a);b&&h(a).attr(b);c&&h(a).html(c);return a},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof h?a:h(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(a||(a=G(this,"events"))){this.undelegateEvents();
for(var b in a){var c=a[b];f.isFunction(c)||(c=this[a[b]]);if(!c)throw Error('Method "'+a[b]+'" does not exist');var d=b.match(D),e=d[1],d=d[2],c=f.bind(c,this),e=e+(".delegateEvents"+this.cid);""===d?this.$el.bind(e,c):this.$el.delegate(d,e,c)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},this.options,a));for(var b=0,c=H.length;b<c;b++){var d=H[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,
!1);else{var a=G(this,"attributes")||{};this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);this.setElement(this.make(this.tagName,a),!1)}}});p.extend=g.extend=n.extend=v.extend=function(a,b){var c=this,d;d=a&&a.hasOwnProperty("constructor")?a.constructor:function(){c.apply(this,arguments)};f.extend(d,c);E.prototype=c.prototype;d.prototype=new E;a&&f.extend(d.prototype,a);b&&f.extend(d,b);d.prototype.constructor=d;d.__super__=c.prototype;d.extend=this.extend;return d};var s={create:"POST",
update:"PUT","delete":"DELETE",read:"GET"};e.sync=function(a,b,c){var d=s[a];c||(c={});var g={type:d,dataType:"json"};c.url||(g.url=G(b,"url")||C());if(!c.data&&b&&("create"==a||"update"==a))g.contentType="application/json",g.data=JSON.stringify(b.toJSON());e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(e.emulateHTTP&&("PUT"===d||"DELETE"===d))e.emulateJSON&&(g.data._method=d),g.type="POST",g.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",
d)};"GET"!==g.type&&!e.emulateJSON&&(g.processData=!1);return h.ajax(f.extend(g,c))};e.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d;a?a(b,e,c):b.trigger("error",b,e,c)}};var E=function(){},G=function(a,b){return!a||!a[b]?null:f.isFunction(a[b])?a[b]():a[b]},C=function(){throw Error('A "url" property or function must be specified');}}).call(this);
(function(c,b){function a(a,b){var h=a.nodeName.toLowerCase();if("area"===h){var h=a.parentNode,j=h.name,m;return!a.href||!j||"map"!==h.nodeName.toLowerCase()?!1:(m=c("img[usemap=#"+j+"]")[0],!!m&&d(m))}return(/input|select|textarea|button|object/.test(h)?!a.disabled:"a"==h?a.href||b:b)&&d(a)}function d(a){return!c(a).parents().andSelf().filter(function(){return"hidden"===c.curCSS(this,"visibility")||c.expr.filters.hidden(this)}).length}c.ui=c.ui||{};c.ui.version||(c.extend(c.ui,{version:"1.8.22",
keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),c.fn.extend({propAttr:c.fn.prop||c.fn.attr,_focus:c.fn.focus,focus:function(a,b){return"number"==typeof a?this.each(function(){var d=
this;setTimeout(function(){c(d).focus();b&&b.call(d)},a)}):this._focus.apply(this,arguments)},scrollParent:function(){var a;return c.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?a=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(c.curCSS(this,"position",1))&&/(auto|scroll)/.test(c.curCSS(this,"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0):a=this.parents().filter(function(){return/(auto|scroll)/.test(c.curCSS(this,
"overflow",1)+c.curCSS(this,"overflow-y",1)+c.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!a.length?c(document):a},zIndex:function(a){if(a!==b)return this.css("zIndex",a);if(this.length){a=c(this[0]);for(var d;a.length&&a[0]!==document;){d=a.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(a.css("zIndex"),10),!isNaN(d)&&0!==d)return d;a=a.parent()}}return 0},disableSelection:function(){return this.bind((c.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),c("<a>").outerWidth(1).jquery||c.each(["Width","Height"],function(a,d){function h(a,b,d,e){return c.each(j,function(){b-=parseFloat(c.curCSS(a,"padding"+this,!0))||0;d&&(b-=parseFloat(c.curCSS(a,"border"+this+"Width",!0))||0);e&&(b-=parseFloat(c.curCSS(a,"margin"+this,!0))||0)}),b}var j="Width"===d?["Left","Right"]:["Top","Bottom"],m=d.toLowerCase(),p={innerWidth:c.fn.innerWidth,
innerHeight:c.fn.innerHeight,outerWidth:c.fn.outerWidth,outerHeight:c.fn.outerHeight};c.fn["inner"+d]=function(a){return a===b?p["inner"+d].call(this):this.each(function(){c(this).css(m,h(this,a)+"px")})};c.fn["outer"+d]=function(a,b){return"number"!=typeof a?p["outer"+d].call(this,a):this.each(function(){c(this).css(m,h(this,a,!0,b)+"px")})}}),c.extend(c.expr[":"],{data:c.expr.createPseudo?c.expr.createPseudo(function(a){return function(b){return!!c.data(b,a)}}):function(a,b,d){return!!c.data(a,
d[3])},focusable:function(b){return a(b,!isNaN(c.attr(b,"tabindex")))},tabbable:function(b){var d=c.attr(b,"tabindex"),h=isNaN(d);return(h||0<=d)&&a(b,!h)}}),c(function(){var a=document.body,b=a.appendChild(b=document.createElement("div"));b.offsetHeight;c.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});c.support.minHeight=100===b.offsetHeight;c.support.selectstart="onselectstart"in b;a.removeChild(b).style.display="none"}),c.curCSS||(c.curCSS=c.css),c.extend(c.ui,{plugin:{add:function(a,
b,d){a=c.ui[a].prototype;for(var j in d)a.plugins[j]=a.plugins[j]||[],a.plugins[j].push([b,d[j]])},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(a,b){if("hidden"===c(a).css("overflow"))return!1;var d=b&&"left"===b?"scrollLeft":"scrollTop";return 0<a[d]?!0:(a[d]=1,a[d]=
0,!1)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(a,b,d,j,m,p){return c.ui.isOverAxis(a,d,m)&&c.ui.isOverAxis(b,j,p)}}))})(jQuery);
(function(c,b){if(c.cleanData){var a=c.cleanData;c.cleanData=function(b){for(var d=0,h;null!=(h=b[d]);d++)try{c(h).triggerHandler("remove")}catch(j){}a(b)}}else{var d=c.fn.remove;c.fn.remove=function(a,b){return this.each(function(){return b||(!a||c.filter(a,[this]).length)&&c("*",this).add([this]).each(function(){try{c(this).triggerHandler("remove")}catch(a){}}),d.call(c(this),a,b)})}}c.widget=function(a,b,d){var j=a.split(".")[0],m;a=a.split(".")[1];m=j+"-"+a;d||(d=b,b=c.Widget);c.expr[":"][m]=
function(b){return!!c.data(b,a)};c[j]=c[j]||{};c[j][a]=function(a,b){arguments.length&&this._createWidget(a,b)};b=new b;b.options=c.extend(!0,{},b.options);c[j][a].prototype=c.extend(!0,b,{namespace:j,widgetName:a,widgetEventPrefix:c[j][a].prototype.widgetEventPrefix||a,widgetBaseClass:m},d);c.widget.bridge(a,c[j][a])};c.widget.bridge=function(a,d){c.fn[a]=function(h){var j="string"==typeof h,m=Array.prototype.slice.call(arguments,1),p=this;return h=!j&&m.length?c.extend.apply(null,[!0,h].concat(m)):
h,j&&"_"===h.charAt(0)?p:(j?this.each(function(){var d=c.data(this,a),f=d&&c.isFunction(d[h])?d[h].apply(d,m):d;if(f!==d&&f!==b)return p=f,!1}):this.each(function(){var b=c.data(this,a);b?b.option(h||{})._init():c.data(this,a,new d(h,this))}),p)}};c.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,b){c.data(b,this.widgetName,this);this.element=c(b);this.options=c.extend(!0,{},
this.options,this._getCreateOptions(),a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+
"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(a,d){var h=a;if(0===arguments.length)return c.extend({},this.options);if("string"==typeof a){if(d===b)return this.options[a];h={};h[a]=d}return this._setOptions(h),this},_setOptions:function(a){var b=this;return c.each(a,function(a,c){b._setOption(a,c)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",
b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,b,d){var j,m=this.options[a];d=d||{};b=c.Event(b);b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();b.target=this.element[0];if(a=b.originalEvent)for(j in a)j in b||(b[j]=a[j]);return this.element.trigger(b,d),!(c.isFunction(m)&&!1===m.call(this.element[0],b,d)||b.isDefaultPrevented())}}})(jQuery);
(function(c){var b=!1;c(document).mouseup(function(){b=!1});c.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(!0===c.data(b.target,a.widgetName+".preventClickEvent"))return c.removeData(b.target,a.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(a){if(!b){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var d=this,e=1==a.which,f="string"==typeof this.options.cancel&&a.target.nodeName?c(a.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(a))return!0;(this.mouseDelayMet=!this.options.delay)||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=
!0},this.options.delay));return this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=!1!==this._mouseStart(a),!this._mouseStarted)?(a.preventDefault(),!0):(!0===c.data(a.target,this.widgetName+".preventClickEvent")&&c.removeData(a.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,
this._mouseUpDelegate),a.preventDefault(),b=!0,!0)}},_mouseMove:function(a){return!c.browser.msie||9<=document.documentMode||a.button?this._mouseStarted?(this._mouseDrag(a),a.preventDefault()):(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a),this._mouseStarted?this._mouseDrag(a):this._mouseUp(a)),!this._mouseStarted):this._mouseUp(a)},_mouseUp:function(a){return c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+
this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&c.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(c){c.ui=c.ui||{};var b=/left|center|right/,a=/top|center|bottom/,d={},e=c.fn.position,f=c.fn.offset;c.fn.position=function(f){if(!f||!f.of)return e.apply(this,arguments);f=c.extend({},f);var g=c(f.of),h=g[0],j=(f.collision||"flip").split(" "),m=f.offset?f.offset.split(" "):[0,0],p,w,v;return 9===h.nodeType?(p=g.width(),w=g.height(),v={top:0,left:0}):h.setTimeout?(p=g.width(),w=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):h.preventDefault?(f.at="left top",p=w=0,v={top:f.of.pageY,
left:f.of.pageX}):(p=g.outerWidth(),w=g.outerHeight(),v=g.offset()),c.each(["my","at"],function(){var c=(f[this]||"").split(" ");1===c.length&&(c=b.test(c[0])?c.concat(["center"]):a.test(c[0])?["center"].concat(c):["center","center"]);c[0]=b.test(c[0])?c[0]:"center";c[1]=a.test(c[1])?c[1]:"center";f[this]=c}),1===j.length&&(j[1]=j[0]),m[0]=parseInt(m[0],10)||0,1===m.length&&(m[1]=m[0]),m[1]=parseInt(m[1],10)||0,"right"===f.at[0]?v.left+=p:"center"===f.at[0]&&(v.left+=p/2),"bottom"===f.at[1]?v.top+=
w:"center"===f.at[1]&&(v.top+=w/2),v.left+=m[0],v.top+=m[1],this.each(function(){var a=c(this),b=a.outerWidth(),e=a.outerHeight(),g=parseInt(c.curCSS(this,"marginLeft",!0))||0,h=parseInt(c.curCSS(this,"marginTop",!0))||0,q=b+g+(parseInt(c.curCSS(this,"marginRight",!0))||0),u=e+h+(parseInt(c.curCSS(this,"marginBottom",!0))||0),A=c.extend({},v),I;"right"===f.my[0]?A.left-=b:"center"===f.my[0]&&(A.left-=b/2);"bottom"===f.my[1]?A.top-=e:"center"===f.my[1]&&(A.top-=e/2);d.fractions||(A.left=Math.round(A.left),
A.top=Math.round(A.top));I={left:A.left-g,top:A.top-h};c.each(["left","top"],function(a,d){c.ui.position[j[a]]&&c.ui.position[j[a]][d](A,{targetWidth:p,targetHeight:w,elemWidth:b,elemHeight:e,collisionPosition:I,collisionWidth:q,collisionHeight:u,offset:m,my:f.my,at:f.at})});c.fn.bgiframe&&a.bgiframe();a.offset(c.extend(A,{using:f.using}))})};c.ui.position={fit:{left:function(a,b){var d=c(window),d=b.collisionPosition.left+b.collisionWidth-d.width()-d.scrollLeft();a.left=0<d?a.left-d:Math.max(a.left-
b.collisionPosition.left,a.left)},top:function(a,b){var d=c(window),d=b.collisionPosition.top+b.collisionHeight-d.height()-d.scrollTop();a.top=0<d?a.top-d:Math.max(a.top-b.collisionPosition.top,a.top)}},flip:{left:function(a,b){if("center"!==b.at[0]){var d=c(window),d=b.collisionPosition.left+b.collisionWidth-d.width()-d.scrollLeft(),e="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,f="left"===b.at[0]?b.targetWidth:-b.targetWidth,g=-2*b.offset[0];a.left+=0>b.collisionPosition.left?e+
f+g:0<d?e+f+g:0}},top:function(a,b){if("center"!==b.at[1]){var d=c(window),d=b.collisionPosition.top+b.collisionHeight-d.height()-d.scrollTop(),e="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,f="top"===b.at[1]?b.targetHeight:-b.targetHeight,g=-2*b.offset[1];a.top+=0>b.collisionPosition.top?e+f+g:0<d?e+f+g:0}}}};c.offset.setOffset||(c.offset.setOffset=function(a,b){/static/.test(c.curCSS(a,"position"))&&(a.style.position="relative");var d=c(a),e=d.offset(),f=parseInt(c.curCSS(a,"top",
!0),10)||0,g=parseInt(c.curCSS(a,"left",!0),10)||0,e={top:b.top-e.top+f,left:b.left-e.left+g};"using"in b?b.using.call(a,e):d.css(e)},c.fn.offset=function(a){var b=this[0];return!b||!b.ownerDocument?null:a?c.isFunction(a)?this.each(function(b){c(this).offset(a.call(this,b,c(this).offset()))}):this.each(function(){c.offset.setOffset(this,a)}):f.call(this)});var h=document.getElementsByTagName("body")[0],j=document.createElement("div"),m,p;m=document.createElement(h?"div":"body");p={visibility:"hidden",
width:0,height:0,border:0,margin:0,background:"none"};h&&c.extend(p,{position:"absolute",left:"-1000px",top:"-1000px"});for(var g in p)m.style[g]=p[g];m.appendChild(j);p=h||document.documentElement;p.insertBefore(m,p.firstChild);j.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";j=c(j).offset(function(a,b){return b}).offset();m.innerHTML="";p.removeChild(m);h=j.top+j.left+(h?2E3:0);d.fractions=21<h&&22>h})(jQuery);
(function(c){c.widget("ui.draggable",c.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(b){var a=this.options;return this.helper||a.disabled||c(b.target).is(".ui-resizable-handle")?
!1:(this.handle=this._getHandle(b),this.handle?(a.iframeFix&&c(!0===a.iframeFix?"iframe":a.iframeFix).each(function(){c('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(c(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(b){var a=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),
c.ui.ddmanager&&(c.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},c.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),
this.originalPageX=b.pageX,this.originalPageY=b.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),a.containment&&this._setContainment(),!1===this._trigger("start",b)?(this._clear(),!1):(this._cacheHelperProportions(),c.ui.ddmanager&&!a.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),c.ui.ddmanager&&c.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,a){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!a){var d=
this._uiHash();if(!1===this._trigger("drag",b,d))return this._mouseUp({}),!1;this.position=d.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";return c.ui.ddmanager&&c.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var a=!1;c.ui.ddmanager&&!this.options.dropBehaviour&&(a=c.ui.ddmanager.drop(this,b));this.dropped&&(a=this.dropped,this.dropped=!1);
for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!a||"valid"==this.options.revert&&a||!0===this.options.revert||c.isFunction(this.options.revert)&&this.options.revert.call(this.element,a)){var f=this;c(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==f._trigger("stop",b)&&f._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},
_mouseUp:function(b){return!0===this.options.iframeFix&&c("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),c.ui.ddmanager&&c.ui.ddmanager.dragStop(this,b),c.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){var a=!this.options.handle||!c(this.options.handle,this.element).length?!0:!1;return c(this.options.handle,this.element).find("*").andSelf().each(function(){this==
b.target&&(a=!0)}),a},_createHelper:function(b){var a=this.options;b=c.isFunction(a.helper)?c(a.helper.apply(this.element[0],[b])):"clone"==a.helper?this.element.clone().removeAttr("id"):this.element;return b.parents("body").length||b.appendTo("parent"==a.appendTo?this.element[0].parentNode:a.appendTo),b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute"),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));c.isArray(b)&&(b={left:+b[0],
top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],
this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&c.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.element.position();return{top:b.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:c(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:c(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:c(window).scrollLeft())+c("document"==b.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:c(window).scrollTop())+(c("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var b=c(b.containment),a=b[0];if(a){b.offset();var d="hidden"!=c(a).css("overflow");this.containment=[(parseInt(c(a).css("borderLeftWidth"),10)||0)+(parseInt(c(a).css("paddingLeft"),
10)||0),(parseInt(c(a).css("borderTopWidth"),10)||0)+(parseInt(c(a).css("paddingTop"),10)||0),(d?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(c(a).css("borderLeftWidth"),10)||0)-(parseInt(c(a).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(c(a).css("borderTopWidth"),10)||0)-(parseInt(c(a).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=b}}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,a){a||(a=this.position);var d="absolute"==b?1:-1,e="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:a.top+this.offset.relative.top*d+this.offset.parent.top*d-(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d),left:a.left+this.offset.relative.left*d+this.offset.parent.left*d-(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var a=this.options,d="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
e=/(html|body)/i.test(d[0].tagName),f=b.pageX,h=b.pageY;if(this.originalPosition){var j;this.containment&&(this.relative_container?(j=this.relative_container.offset(),j=[this.containment[0]+j.left,this.containment[1]+j.top,this.containment[2]+j.left,this.containment[3]+j.top]):j=this.containment,b.pageX-this.offset.click.left<j[0]&&(f=j[0]+this.offset.click.left),b.pageY-this.offset.click.top<j[1]&&(h=j[1]+this.offset.click.top),b.pageX-this.offset.click.left>j[2]&&(f=j[2]+this.offset.click.left),
b.pageY-this.offset.click.top>j[3]&&(h=j[3]+this.offset.click.top));a.grid&&(h=a.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,h=j?h-this.offset.click.top<j[1]||h-this.offset.click.top>j[3]?h-this.offset.click.top<j[1]?h+a.grid[1]:h-a.grid[1]:h:h,f=a.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,f=j?f-this.offset.click.left<j[0]||f-this.offset.click.left>j[2]?f-this.offset.click.left<j[0]?
f+a.grid[0]:f-a.grid[0]:f:f)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&526>c.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,a,d){return d=d||this._uiHash(),c.ui.plugin.call(this,b,[a,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),c.Widget.prototype._trigger.call(this,b,a,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});c.extend(c.ui.draggable,{version:"1.8.22"});
c.ui.plugin.add("draggable","connectToSortable",{start:function(b,a){var d=c(this).data("draggable"),e=d.options,f=c.extend({},a,{item:d.element});d.sortables=[];c(e.connectToSortable).each(function(){var a=c.data(this,"sortable");a&&!a.options.disabled&&(d.sortables.push({instance:a,shouldRevert:a.options.revert}),a.refreshPositions(),a._trigger("activate",b,f))})},stop:function(b,a){var d=c(this).data("draggable"),e=c.extend({},a,{item:d.element});c.each(d.sortables,function(){this.instance.isOver?
(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,a){var d=c(this).data("draggable"),e=this;c.each(d.sortables,function(){this.instance.positionAbs=
d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=c(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return a.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,
!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&
(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}});c.ui.plugin.add("draggable","cursor",{start:function(){var b=c("body"),a=c(this).data("draggable").options;
b.css("cursor")&&(a._cursor=b.css("cursor"));b.css("cursor",a.cursor)},stop:function(){var b=c(this).data("draggable").options;b._cursor&&c("body").css("cursor",b._cursor)}});c.ui.plugin.add("draggable","opacity",{start:function(b,a){var d=c(a.helper),e=c(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity"));d.css("opacity",e.opacity)},stop:function(b,a){var d=c(this).data("draggable").options;d._opacity&&c(a.helper).css("opacity",d._opacity)}});c.ui.plugin.add("draggable",
"scroll",{start:function(){var b=c(this).data("draggable");b.scrollParent[0]!=document&&"HTML"!=b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var a=c(this).data("draggable"),d=a.options,e=!1;if(a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName){if(!d.axis||"x"!=d.axis)a.overflowOffset.top+a.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?a.scrollParent[0].scrollTop=e=a.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-a.overflowOffset.top<
d.scrollSensitivity&&(a.scrollParent[0].scrollTop=e=a.scrollParent[0].scrollTop-d.scrollSpeed);if(!d.axis||"y"!=d.axis)a.overflowOffset.left+a.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?a.scrollParent[0].scrollLeft=e=a.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-a.overflowOffset.left<d.scrollSensitivity&&(a.scrollParent[0].scrollLeft=e=a.scrollParent[0].scrollLeft-d.scrollSpeed)}else{if(!d.axis||"x"!=d.axis)b.pageY-c(document).scrollTop()<d.scrollSensitivity?e=c(document).scrollTop(c(document).scrollTop()-
d.scrollSpeed):c(window).height()-(b.pageY-c(document).scrollTop())<d.scrollSensitivity&&(e=c(document).scrollTop(c(document).scrollTop()+d.scrollSpeed));if(!d.axis||"y"!=d.axis)b.pageX-c(document).scrollLeft()<d.scrollSensitivity?e=c(document).scrollLeft(c(document).scrollLeft()-d.scrollSpeed):c(window).width()-(b.pageX-c(document).scrollLeft())<d.scrollSensitivity&&(e=c(document).scrollLeft(c(document).scrollLeft()+d.scrollSpeed))}!1!==e&&c.ui.ddmanager&&!d.dropBehaviour&&c.ui.ddmanager.prepareOffsets(a,
b)}});c.ui.plugin.add("draggable","snap",{start:function(){var b=c(this).data("draggable"),a=b.options;b.snapElements=[];c(a.snap.constructor!=String?a.snap.items||":data(draggable)":a.snap).each(function(){var a=c(this),e=a.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:a.outerWidth(),height:a.outerHeight(),top:e.top,left:e.left})})},drag:function(b,a){for(var d=c(this).data("draggable"),e=d.options,f=e.snapTolerance,h=a.offset.left,j=h+d.helperProportions.width,m=a.offset.top,
p=m+d.helperProportions.height,g=d.snapElements.length-1;0<=g;g--){var n=d.snapElements[g].left,q=n+d.snapElements[g].width,u=d.snapElements[g].top,r=u+d.snapElements[g].height;if(n-f<h&&h<q+f&&u-f<m&&m<r+f||n-f<h&&h<q+f&&u-f<p&&p<r+f||n-f<j&&j<q+f&&u-f<m&&m<r+f||n-f<j&&j<q+f&&u-f<p&&p<r+f){if("inner"!=e.snapMode){var x=Math.abs(u-p)<=f,y=Math.abs(r-m)<=f,w=Math.abs(n-j)<=f,v=Math.abs(q-h)<=f;x&&(a.position.top=d._convertPositionTo("relative",{top:u-d.helperProportions.height,left:0}).top-d.margins.top);
y&&(a.position.top=d._convertPositionTo("relative",{top:r,left:0}).top-d.margins.top);w&&(a.position.left=d._convertPositionTo("relative",{top:0,left:n-d.helperProportions.width}).left-d.margins.left);v&&(a.position.left=d._convertPositionTo("relative",{top:0,left:q}).left-d.margins.left)}var D=x||y||w||v;"outer"!=e.snapMode&&(x=Math.abs(u-m)<=f,y=Math.abs(r-p)<=f,w=Math.abs(n-h)<=f,v=Math.abs(q-j)<=f,x&&(a.position.top=d._convertPositionTo("relative",{top:u,left:0}).top-d.margins.top),y&&(a.position.top=
d._convertPositionTo("relative",{top:r-d.helperProportions.height,left:0}).top-d.margins.top),w&&(a.position.left=d._convertPositionTo("relative",{top:0,left:n}).left-d.margins.left),v&&(a.position.left=d._convertPositionTo("relative",{top:0,left:q-d.helperProportions.width}).left-d.margins.left));!d.snapElements[g].snapping&&(x||y||w||v||D)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,c.extend(d._uiHash(),{snapItem:d.snapElements[g].item}));d.snapElements[g].snapping=x||y||w||v||D}else d.snapElements[g].snapping&&
d.options.snap.release&&d.options.snap.release.call(d.element,b,c.extend(d._uiHash(),{snapItem:d.snapElements[g].item})),d.snapElements[g].snapping=!1}}});c.ui.plugin.add("draggable","stack",{start:function(){var b=c(this).data("draggable").options,b=c.makeArray(c(b.stack)).sort(function(a,b){return(parseInt(c(a).css("zIndex"),10)||0)-(parseInt(c(b).css("zIndex"),10)||0)});if(b.length){var a=parseInt(b[0].style.zIndex)||0;c(b).each(function(b){this.style.zIndex=a+b});this[0].style.zIndex=a+b.length}}});
c.ui.plugin.add("draggable","zIndex",{start:function(b,a){var d=c(a.helper),e=c(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex"));d.css("zIndex",e.zIndex)},stop:function(b,a){var d=c(this).data("draggable").options;d._zIndex&&c(a.helper).css("zIndex",d._zIndex)}})})(jQuery);
(function(c){c.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,a=b.accept;this.isover=0;this.isout=1;this.accept=c.isFunction(a)?a:function(b){return b.is(a)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};c.ui.ddmanager.droppables[b.scope]=c.ui.ddmanager.droppables[b.scope]||[];c.ui.ddmanager.droppables[b.scope].push(this);
b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=c.ui.ddmanager.droppables[this.options.scope],a=0;a<b.length;a++)b[a]==this&&b.splice(a,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,a){"accept"==b&&(this.accept=c.isFunction(a)?a:function(b){return b.is(a)});c.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var a=c.ui.ddmanager.current;this.options.activeClass&&
this.element.addClass(this.options.activeClass);a&&this._trigger("activate",b,this.ui(a))},_deactivate:function(b){var a=c.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);a&&this._trigger("deactivate",b,this.ui(a))},_over:function(b){var a=c.ui.ddmanager.current;if(a&&(a.currentItem||a.element)[0]!=this.element[0])this.accept.call(this.element[0],a.currentItem||a.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",
b,this.ui(a)))},_out:function(b){var a=c.ui.ddmanager.current;if(a&&(a.currentItem||a.element)[0]!=this.element[0])this.accept.call(this.element[0],a.currentItem||a.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(a)))},_drop:function(b,a){var d=a||c.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var a=
c.data(this,"droppable");if(a.options.greedy&&!a.options.disabled&&a.options.scope==d.options.scope&&a.accept.call(a.element[0],d.currentItem||d.element)&&c.ui.intersect(d,c.extend(a,{offset:a.element.offset()}),a.options.tolerance))return e=!0,!1}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),
this.element):!1},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}});c.extend(c.ui.droppable,{version:"1.8.22"});c.ui.intersect=function(b,a,d){if(!a.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,h=(b.positionAbs||b.position.absolute).top,j=h+b.helperProportions.height,m=a.offset.left,p=m+a.proportions.width,g=a.offset.top,n=g+a.proportions.height;switch(d){case "fit":return m<=e&&f<=
p&&g<=h&&j<=n;case "intersect":return m<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<p&&g<h+b.helperProportions.height/2&&j-b.helperProportions.height/2<n;case "pointer":return c.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,g,m,a.proportions.height,a.proportions.width);case "touch":return(h>=g&&h<=n||j>=g&&j<=n||h<g&&j>n)&&(e>=m&&e<=p||f>=m&&f<=p||e<m&&f>p);default:return!1}};
c.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,a){var d=c.ui.ddmanager.droppables[b.options.scope]||[],e=a?a.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf(),h=0;a:for(;h<d.length;h++)if(!(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))){for(var j=0;j<f.length;j++)if(f[j]==d[h].element[0]){d[h].proportions.height=0;continue a}d[h].visible="none"!=d[h].element.css("display");d[h].visible&&("mousedown"==
e&&d[h]._activate.call(d[h],a),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight})}},drop:function(b,a){var d=!1;return c.each(c.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&c.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,a)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=
0,this._deactivate.call(this,a)))}),d},dragStart:function(b,a){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||c.ui.ddmanager.prepareOffsets(b,a)})},drag:function(b,a){b.options.refreshPositions&&c.ui.ddmanager.prepareOffsets(b,a);c.each(c.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=c.ui.intersect(b,this,this.options.tolerance);if(d=!d&&1==this.isover?"isout":d&&0==this.isover?
"isover":null){var e;if(this.options.greedy){var f=this.element.parents(":data(droppable):eq(0)");f.length&&(e=c.data(f[0],"droppable"),e.greedyChild="isover"==d?1:0)}e&&"isover"==d&&(e.isover=0,e.isout=1,e._out.call(e,a));this[d]=1;this["isout"==d?"isover":"isout"]=0;this["isover"==d?"_over":"_out"].call(this,a);e&&"isout"==d&&(e.isout=0,e.isover=1,e._over.call(e,a))}}})},dragStop:function(b,a){b.element.parents(":not(body,html)").unbind("scroll.droppable");b.options.refreshPositions||c.ui.ddmanager.prepareOffsets(b,
a)}}})(jQuery);
(function(c){c.widget("ui.resizable",c.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var a=this,b=this.options;this.element.addClass("ui-resizable");c.extend(this,{_aspectRatio:!!b.aspectRatio,aspectRatio:b.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],
_helper:b.helper||b.ghost||b.animate?b.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(c('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=
!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,
display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=b.handles||(c(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var f=this.handles.split(",");this.handles=
{};for(var h=0;h<f.length;h++){var j=c.trim(f[h]),m=c('<div class="ui-resizable-handle ui-resizable-'+j+'"></div>');m.css({zIndex:b.zIndex});"se"==j&&m.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[j]=".ui-resizable-"+j;this.element.append(m)}}this._renderAxis=function(a){a=a||this.element;for(var b in this.handles){this.handles[b].constructor==String&&(this.handles[b]=c(this.handles[b],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=
c(this.handles[b],this.element),e=0,e=/sw|ne|nw|se|n|s/.test(b)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");a.css(d,e);this._proportionallyResize()}c(this.handles[b])}};this._renderAxis(this.element);this._handles=c(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!a.resizing){if(this.className)var b=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);a.axis=
b&&b[1]?b[1]:"se"}});b.autoHide&&(this._handles.hide(),c(this.element).addClass("ui-resizable-autohide").hover(function(){b.disabled||(c(this).removeClass("ui-resizable-autohide"),a._handles.show())},function(){b.disabled||a.resizing||(c(this).addClass("ui-resizable-autohide"),a._handles.hide())}));this._mouseInit()},destroy:function(){this._mouseDestroy();var a=function(a){c(a).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){a(this.element);var b=this.element;b.after(this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),a(this.originalElement),this},_mouseCapture:function(a){var b=!1,f;for(f in this.handles)c(this.handles[f])[0]==a.target&&(b=!0);return!this.options.disabled&&b},_mouseStart:function(a){var e=this.options,f=this.element.position(),
h=this.element;this.resizing=!0;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};(h.is(".ui-draggable")||/absolute/.test(h.css("position")))&&h.css({position:"absolute",top:f.top,left:f.left});this._renderProxy();var f=b(this.helper.css("left")),j=b(this.helper.css("top"));e.containment&&(f+=c(e.containment).scrollLeft()||0,j+=c(e.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:f,top:j};this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:
{width:h.width(),height:h.height()};this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()};this.originalPosition={left:f,top:j};this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()};this.originalMousePosition={left:a.pageX,top:a.pageY};this.aspectRatio="number"==typeof e.aspectRatio?e.aspectRatio:this.originalSize.width/this.originalSize.height||1;e=c(".ui-resizable-"+this.axis).css("cursor");return c("body").css("cursor",
"auto"==e?this.axis+"-resize":e),h.addClass("ui-resizable-resizing"),this._propagate("start",a),!0},_mouseDrag:function(a){var b=this.helper,c=this.originalMousePosition,h=this._change[this.axis];if(!h)return!1;c=h.apply(this,[a,a.pageX-c.left||0,a.pageY-c.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)c=this._updateRatio(c,a);return c=this._respectSize(c,a),this._propagate("resize",a),b.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(c),this._trigger("resize",a,this.ui()),!1},_mouseStop:function(a){this.resizing=!1;var b=this.options;if(this._helper){var f=this._proportionallyResizeElements,h=f.length&&/textarea/i.test(f[0].nodeName),f=h&&c.ui.hasScroll(f[0],"left")?0:this.sizeDiff.height,h=h?0:this.sizeDiff.width,h={width:this.helper.width()-h,height:this.helper.height()-f},f=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,j=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;b.animate||this.element.css(c.extend(h,{top:j,left:f}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!b.animate&&this._proportionallyResize()}return c("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",a),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(b){var c=
this.options,f,h,j,c={minWidth:a(c.minWidth)?c.minWidth:0,maxWidth:a(c.maxWidth)?c.maxWidth:Infinity,minHeight:a(c.minHeight)?c.minHeight:0,maxHeight:a(c.maxHeight)?c.maxHeight:Infinity};if(this._aspectRatio||b)b=c.minHeight*this.aspectRatio,h=c.minWidth/this.aspectRatio,f=c.maxHeight*this.aspectRatio,j=c.maxWidth/this.aspectRatio,b>c.minWidth&&(c.minWidth=b),h>c.minHeight&&(c.minHeight=h),f<c.maxWidth&&(c.maxWidth=f),j<c.maxHeight&&(c.maxHeight=j);this._vBoundaries=c},_updateCache:function(b){this.offset=
this.helper.offset();a(b.left)&&(this.position.left=b.left);a(b.top)&&(this.position.top=b.top);a(b.height)&&(this.size.height=b.height);a(b.width)&&(this.size.width=b.width)},_updateRatio:function(b){var c=this.position,f=this.size,h=this.axis;return a(b.height)?b.width=b.height*this.aspectRatio:a(b.width)&&(b.height=b.width/this.aspectRatio),"sw"==h&&(b.left=c.left+(f.width-b.width),b.top=null),"nw"==h&&(b.top=c.top+(f.height-b.height),b.left=c.left+(f.width-b.width)),b},_respectSize:function(b){var c=
this._vBoundaries,f=this.axis,h=a(b.width)&&c.maxWidth&&c.maxWidth<b.width,j=a(b.height)&&c.maxHeight&&c.maxHeight<b.height,m=a(b.width)&&c.minWidth&&c.minWidth>b.width,p=a(b.height)&&c.minHeight&&c.minHeight>b.height;m&&(b.width=c.minWidth);p&&(b.height=c.minHeight);h&&(b.width=c.maxWidth);j&&(b.height=c.maxHeight);var g=this.originalPosition.left+this.originalSize.width,n=this.position.top+this.size.height,q=/sw|nw|w/.test(f),f=/nw|ne|n/.test(f);m&&q&&(b.left=g-c.minWidth);h&&q&&(b.left=g-c.maxWidth);
p&&f&&(b.top=n-c.minHeight);j&&f&&(b.top=n-c.maxHeight);c=!b.width&&!b.height;return c&&!b.left&&b.top?b.top=null:c&&!b.top&&b.left&&(b.left=null),b},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a=this.helper||this.element,b=0;b<this._proportionallyResizeElements.length;b++){var f=this._proportionallyResizeElements[b];if(!this.borderDif){var h=[f.css("borderTopWidth"),f.css("borderRightWidth"),f.css("borderBottomWidth"),f.css("borderLeftWidth")],j=[f.css("paddingTop"),
f.css("paddingRight"),f.css("paddingBottom"),f.css("paddingLeft")];this.borderDif=c.map(h,function(a,b){var c=parseInt(a,10)||0,d=parseInt(j[b],10)||0;return c+d})}if(!c.browser.msie||!c(a).is(":hidden")&&!c(a).parents(":hidden").length)f.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var a=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');
var b=c.browser.msie&&7>c.browser.version,f=b?1:0,b=b?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+b,height:this.element.outerHeight()+b,position:"absolute",left:this.elementOffset.left-f+"px",top:this.elementOffset.top-f+"px",zIndex:++a.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-
b}},n:function(a,b,c){return{top:this.originalPosition.top+c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(a,b,f){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,b,f]))},sw:function(a,b,f){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,b,f]))},ne:function(a,b,f){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,b,f]))},nw:function(a,b,
f){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,b,f]))}},_propagate:function(a,b){c.ui.plugin.call(this,a,[b,this.ui()]);"resize"!=a&&this._trigger(a,b,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.extend(c.ui.resizable,{version:"1.8.22"});c.ui.plugin.add("resizable","alsoResize",
{start:function(){var a=c(this).data("resizable").options,b=function(a){c(a).each(function(){var a=c(this);a.data("resizable-alsoresize",{width:parseInt(a.width(),10),height:parseInt(a.height(),10),left:parseInt(a.css("left"),10),top:parseInt(a.css("top"),10)})})};"object"==typeof a.alsoResize&&!a.alsoResize.parentNode?a.alsoResize.length?(a.alsoResize=a.alsoResize[0],b(a.alsoResize)):c.each(a.alsoResize,function(a){b(a)}):b(a.alsoResize)},resize:function(a,b){var f=c(this).data("resizable"),h=f.options,
j=f.originalSize,m=f.originalPosition,p={height:f.size.height-j.height||0,width:f.size.width-j.width||0,top:f.position.top-m.top||0,left:f.position.left-m.left||0},g=function(a,d){c(a).each(function(){var a=c(this),f=c(this).data("resizable-alsoresize"),g={},h=d&&d.length?d:a.parents(b.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(h,function(a,b){var c=(f[b]||0)+(p[b]||0);c&&0<=c&&(g[b]=c||null)});a.css(g)})};"object"==typeof h.alsoResize&&!h.alsoResize.nodeType?
c.each(h.alsoResize,function(a,b){g(a,b)}):g(h.alsoResize)},stop:function(){c(this).removeData("resizable-alsoresize")}});c.ui.plugin.add("resizable","animate",{stop:function(a){var b=c(this).data("resizable"),f=b.options,h=b._proportionallyResizeElements,j=h.length&&/textarea/i.test(h[0].nodeName),m=j&&c.ui.hasScroll(h[0],"left")?0:b.sizeDiff.height,j={width:b.size.width-(j?0:b.sizeDiff.width),height:b.size.height-m},m=parseInt(b.element.css("left"),10)+(b.position.left-b.originalPosition.left)||
null,p=parseInt(b.element.css("top"),10)+(b.position.top-b.originalPosition.top)||null;b.element.animate(c.extend(j,p&&m?{top:p,left:m}:{}),{duration:f.animateDuration,easing:f.animateEasing,step:function(){var f={width:parseInt(b.element.css("width"),10),height:parseInt(b.element.css("height"),10),top:parseInt(b.element.css("top"),10),left:parseInt(b.element.css("left"),10)};h&&h.length&&c(h[0]).css({width:f.width,height:f.height});b._updateCache(f);b._propagate("resize",a)}})}});c.ui.plugin.add("resizable",
"containment",{start:function(){var a=c(this).data("resizable"),e=a.element,f=a.options.containment;if(e=f instanceof c?f.get(0):/parent/.test(f)?e.parent().get(0):f)if(a.containerElement=c(e),/document/.test(f)||f==document)a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight};else{var h=c(e),j=[];c(["Top","Right","Left","Bottom"]).each(function(a,
c){j[a]=b(h.css("padding"+c))});a.containerOffset=h.offset();a.containerPosition=h.position();a.containerSize={height:h.innerHeight()-j[3],width:h.innerWidth()-j[1]};var f=a.containerOffset,m=a.containerSize.height,p=a.containerSize.width,p=c.ui.hasScroll(e,"left")?e.scrollWidth:p,m=c.ui.hasScroll(e)?e.scrollHeight:m;a.parentData={element:e,left:f.left,top:f.top,width:p,height:m}}},resize:function(a){var b=c(this).data("resizable"),f=b.options,h=b.containerOffset,j=b.position;a=b._aspectRatio||a.shiftKey;
var m={top:0,left:0},p=b.containerElement;p[0]!=document&&/static/.test(p.css("position"))&&(m=h);j.left<(b._helper?h.left:0)&&(b.size.width+=b._helper?b.position.left-h.left:b.position.left-m.left,a&&(b.size.height=b.size.width/b.aspectRatio),b.position.left=f.helper?h.left:0);j.top<(b._helper?h.top:0)&&(b.size.height+=b._helper?b.position.top-h.top:b.position.top,a&&(b.size.width=b.size.height*b.aspectRatio),b.position.top=b._helper?h.top:0);b.offset.left=b.parentData.left+b.position.left;b.offset.top=
b.parentData.top+b.position.top;f=Math.abs(b.offset.left-m.left+b.sizeDiff.width);h=Math.abs((b._helper?b.offset.top-m.top:b.offset.top-h.top)+b.sizeDiff.height);j=b.containerElement.get(0)==b.element.parent().get(0);m=/relative|absolute/.test(b.containerElement.css("position"));j&&m&&(f-=b.parentData.left);f+b.size.width>=b.parentData.width&&(b.size.width=b.parentData.width-f,a&&(b.size.height=b.size.width/b.aspectRatio));h+b.size.height>=b.parentData.height&&(b.size.height=b.parentData.height-h,
a&&(b.size.width=b.size.height*b.aspectRatio))},stop:function(){var a=c(this).data("resizable"),b=a.options,f=a.containerOffset,h=a.containerPosition,j=a.containerElement,m=c(a.helper),p=m.offset(),g=m.outerWidth()-a.sizeDiff.width,m=m.outerHeight()-a.sizeDiff.height;a._helper&&!b.animate&&/relative/.test(j.css("position"))&&c(this).css({left:p.left-h.left-f.left,width:g,height:m});a._helper&&!b.animate&&/static/.test(j.css("position"))&&c(this).css({left:p.left-h.left-f.left,width:g,height:m})}});
c.ui.plugin.add("resizable","ghost",{start:function(){var a=c(this).data("resizable"),b=a.options,f=a.size;a.ghost=a.originalElement.clone();a.ghost.css({opacity:0.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof b.ghost?b.ghost:"");a.ghost.appendTo(a.helper)},resize:function(){var a=c(this).data("resizable");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},stop:function(){var a=
c(this).data("resizable");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}});c.ui.plugin.add("resizable","grid",{resize:function(){var a=c(this).data("resizable"),b=a.options,f=a.size,h=a.originalSize,j=a.originalPosition,m=a.axis;b.grid="number"==typeof b.grid?[b.grid,b.grid]:b.grid;var p=Math.round((f.width-h.width)/(b.grid[0]||1))*(b.grid[0]||1),b=Math.round((f.height-h.height)/(b.grid[1]||1))*(b.grid[1]||1);/^(se|s|e)$/.test(m)?(a.size.width=h.width+p,a.size.height=h.height+b):
/^(ne)$/.test(m)?(a.size.width=h.width+p,a.size.height=h.height+b,a.position.top=j.top-b):/^(sw)$/.test(m)?(a.size.width=h.width+p,a.size.height=h.height+b,a.position.left=j.left-p):(a.size.width=h.width+p,a.size.height=h.height+b,a.position.top=j.top-b,a.position.left=j.left-p)}});var b=function(a){return parseInt(a,10)||0},a=function(a){return!isNaN(parseInt(a,10))}})(jQuery);
(function(c){c.widget("ui.selectable",c.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var a;this.refresh=function(){a=c(b.options.filter,b.element[0]);a.addClass("ui-selectee");a.each(function(){var a=c(this),b=a.offset();c.data(this,"selectable-item",{element:this,$element:a,left:b.left,top:b.top,right:b.left+a.outerWidth(),bottom:b.top+a.outerHeight(),startselected:!1,
selected:a.hasClass("ui-selected"),selecting:a.hasClass("ui-selecting"),unselecting:a.hasClass("ui-unselecting")})})};this.refresh();this.selectees=a.addClass("ui-selectee");this._mouseInit();this.helper=c("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var a=
this;this.opos=[b.pageX,b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=c(d.filter,this.element[0]);this._trigger("start",b);c(d.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var d=c.data(this,"selectable-item");d.startselected=!0;!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),
d.unselecting=!0,a._trigger("unselecting",b,{unselecting:d.element}))});c(b.target).parents().andSelf().each(function(){var d=c.data(this,"selectable-item");if(d){var f=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(f?"ui-unselecting":"ui-selected").addClass(f?"ui-selecting":"ui-unselecting"),d.unselecting=!f,d.selecting=f,d.selected=f,f?a._trigger("selecting",b,{selecting:d.element}):a._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var a=
this;this.dragged=!0;if(!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],h=b.pageX,j=b.pageY;if(e>h)var m=h,h=e,e=m;f>j&&(m=j,j=f,f=m);return this.helper.css({left:e,top:f,width:h-e,height:j-f}),this.selectees.each(function(){var m=c.data(this,"selectable-item");if(m&&m.element!=a.element[0]){var g=!1;"touch"==d.tolerance?g=!(m.left>h||m.right<e||m.top>j||m.bottom<f):"fit"==d.tolerance&&(g=m.left>e&&m.right<h&&m.top>f&&m.bottom<j);g?(m.selected&&(m.$element.removeClass("ui-selected"),
m.selected=!1),m.unselecting&&(m.$element.removeClass("ui-unselecting"),m.unselecting=!1),m.selecting||(m.$element.addClass("ui-selecting"),m.selecting=!0,a._trigger("selecting",b,{selecting:m.element}))):(m.selecting&&((b.metaKey||b.ctrlKey)&&m.startselected?(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.$element.addClass("ui-selected"),m.selected=!0):(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.startselected&&(m.$element.addClass("ui-unselecting"),m.unselecting=!0),a._trigger("unselecting",
b,{unselecting:m.element}))),m.selected&&!b.metaKey&&!b.ctrlKey&&!m.startselected&&(m.$element.removeClass("ui-selected"),m.selected=!1,m.$element.addClass("ui-unselecting"),m.unselecting=!0,a._trigger("unselecting",b,{unselecting:m.element})))}}),!1}},_mouseStop:function(b){var a=this;this.dragged=!1;return c(".ui-unselecting",this.element[0]).each(function(){var d=c.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=!1;d.startselected=!1;a._trigger("unselected",
b,{unselected:d.element})}),c(".ui-selecting",this.element[0]).each(function(){var d=c.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;a._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}});c.extend(c.ui.selectable,{version:"1.8.22"})})(jQuery);
(function(c){c.widget("ui.sortable",c.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var b=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===b.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},destroy:function(){c.Widget.prototype.destroy.call(this);this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var b=this.items.length-1;0<=b;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,
a){"disabled"===b?(this.options[b]=a,this.widget()[a?"addClass":"removeClass"]("ui-sortable-disabled")):c.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,a){var d=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var e=null,f=this;c(b.target).parents().each(function(){if(c.data(this,d.widgetName+"-item")==f)return e=c(this),!1});c.data(b.target,d.widgetName+"-item")==f&&(e=c(b.target));if(!e)return!1;if(this.options.handle&&
!a){var h=!1;c(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(h=!0)});if(!h)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,a,d){a=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};c.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();a.containment&&this._setContainment();a.cursor&&(c("body").css("cursor")&&(this._storedCursor=c("body").css("cursor")),c("body").css("cursor",a.cursor));a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity));a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex));this.scrollParent[0]!=
document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",b,this._uiHash(this));return c.ui.ddmanager&&(c.ui.ddmanager.current=this),c.ui.ddmanager&&!a.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),
!0},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var a=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+a.scrollSpeed:b.pageY-this.overflowOffset.top<a.scrollSensitivity&&
(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+a.scrollSpeed:b.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(b.pageY-c(document).scrollTop()<a.scrollSensitivity?d=c(document).scrollTop(c(document).scrollTop()-a.scrollSpeed):c(window).height()-
(b.pageY-c(document).scrollTop())<a.scrollSensitivity&&(d=c(document).scrollTop(c(document).scrollTop()+a.scrollSpeed)),b.pageX-c(document).scrollLeft()<a.scrollSensitivity?d=c(document).scrollLeft(c(document).scrollLeft()-a.scrollSpeed):c(window).width()-(b.pageX-c(document).scrollLeft())<a.scrollSensitivity&&(d=c(document).scrollLeft(c(document).scrollLeft()+a.scrollSpeed)));!1!==d&&c.ui.ddmanager&&!a.dropBehaviour&&c.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");
if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";for(a=this.items.length-1;0<=a;a--){var d=this.items[a],e=d.item[0],f=this._intersectsWithPointer(d);if(f&&e!=this.currentItem[0]&&this.placeholder[1==f?"next":"prev"]()[0]!=e&&!c.ui.contains(this.placeholder[0],e)&&("semi-dynamic"==this.options.type?!c.ui.contains(this.element[0],e):1)){this.direction=1==f?"down":
"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(d))this._rearrange(b,d);else break;this._trigger("change",b,this._uiHash());break}}return this._contactContainers(b),c.ui.ddmanager&&c.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,a){if(b){c.ui.ddmanager&&!this.options.dropBehaviour&&c.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0;c(this.helper).animate({left:e.left-
this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,a);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();
for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),c.extend(this,{helper:null,dragging:!1,
reverting:!1,_noFinalSort:null}),this.domPosition.prev?c(this.domPosition.prev).after(this.currentItem):c(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var a=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c(a).each(function(){var a=(c(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);a&&d.push((b.key||a[1]+"[]")+"="+(b.key&&b.expression?a[1]:a[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var a=
this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a.each(function(){d.push(c(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(b){var a=this.positionAbs.left,c=a+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,h=b.left,j=h+b.width,m=b.top,p=m+b.height,g=this.offset.click.top,n=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?
"width":"height"]>b[this.floating?"width":"height"]?e+g>m&&e+g<p&&a+n>h&&a+n<j:h<a+this.helperProportions.width/2&&c-this.helperProportions.width/2<j&&m<e+this.helperProportions.height/2&&f-this.helperProportions.height/2<p},_intersectsWithPointer:function(b){var a="x"===this.options.axis||c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b="y"===this.options.axis||c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);a=a&&b;b=this._getDragVerticalDirection();
var d=this._getDragHorizontalDirection();return a?this.floating?d&&"right"==d||"down"==b?2:1:b&&("down"==b?2:1):!1},_intersectsWithSides:function(b){var a=c.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=c.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"==e&&b||"left"==e&&!b:d&&("down"==d&&a||"up"==d&&!a)},_getDragVerticalDirection:function(){var b=
this.positionAbs.top-this.lastPositionAbs.top;return 0!=b&&(0<b?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return 0!=b&&(0<b?"right":"left")},refresh:function(b){return this._refreshItems(b),this.refreshPositions(),this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(b){var a=[],d=[],e=this._connectWith();if(e&&b)for(b=e.length-1;0<=b;b--)for(var f=
c(e[b]),h=f.length-1;0<=h;h--){var j=c.data(f[h],this.widgetName);j&&j!=this&&!j.options.disabled&&d.push([c.isFunction(j.options.items)?j.options.items.call(j.element):c(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}d.push([c.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):c(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=d.length-
1;0<=b;b--)d[b][0].each(function(){a.push(this)});return c(a)},_removeCurrentsFromItems:function(){for(var b=this.currentItem.find(":data("+this.widgetName+"-item)"),a=0;a<this.items.length;a++)for(var c=0;c<b.length;c++)b[c]==this.items[a].item[0]&&this.items.splice(a,1)},_refreshItems:function(b){this.items=[];this.containers=[this];var a=this.items,d=[[c.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):c(this.options.items,this.element),this]],e=
this._connectWith();if(e&&this.ready)for(var f=e.length-1;0<=f;f--)for(var h=c(e[f]),j=h.length-1;0<=j;j--){var m=c.data(h[j],this.widgetName);m&&m!=this&&!m.options.disabled&&(d.push([c.isFunction(m.options.items)?m.options.items.call(m.element[0],b,{item:this.currentItem}):c(m.options.items,m.element),m]),this.containers.push(m))}for(f=d.length-1;0<=f;f--){b=d[f][1];e=d[f][0];j=0;for(h=e.length;j<h;j++)m=c(e[j]),m.data(this.widgetName+"-item",b),a.push({item:m,instance:b,width:0,height:0,left:0,
top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var a=this.items.length-1;0<=a;a--){var d=this.items[a];if(!(d.instance!=this.currentContainer&&this.currentContainer&&d.item[0]!=this.currentItem[0])){var e=this.options.toleranceElement?c(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());e=e.offset();d.left=e.left;d.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(a=this.containers.length-1;0<=a;a--)e=this.containers[a].element.offset(),this.containers[a].containerCache.left=e.left,this.containers[a].containerCache.top=e.top,this.containers[a].containerCache.width=this.containers[a].element.outerWidth(),this.containers[a].containerCache.height=this.containers[a].element.outerHeight();return this},_createPlaceholder:function(b){var a=b||this,d=a.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=
c(document.createElement(a.currentItem[0].nodeName)).addClass(e||a.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return e||(b.style.visibility="hidden"),b},update:function(b,c){if(!e||d.forcePlaceholderSize)c.height()||c.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),c.width()||c.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||
0,10))}}}a.placeholder=c(d.placeholder.element.call(a.element,a.currentItem));a.currentItem.after(a.placeholder);d.placeholder.update(a,a.placeholder)},_contactContainers:function(b){for(var a=null,d=null,e=this.containers.length-1;0<=e;e--)if(!c.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!a||!c.ui.contains(this.containers[e].element[0],a.element[0]))a=this.containers[e],d=e}else this.containers[e].containerCache.over&&
(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);if(a)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var a=1E4,e=null,f=this.positionAbs[this.containers[d].floating?"left":"top"],h=this.items.length-1;0<=h;h--)if(c.ui.contains(this.containers[d].element[0],this.items[h].item[0])){var j=this.containers[d].floating?
this.items[h].item.offset().left:this.items[h].item.offset().top;Math.abs(j-f)<a&&(a=Math.abs(j-f),e=this.items[h],this.direction=0<j-f?"down":"up")}if(e||this.options.dropOnEmpty)this.currentContainer=this.containers[d],e?this._rearrange(b,e,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",
b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var a=this.options;b=c.isFunction(a.helper)?c(a.helper.apply(this.element[0],[b,this.currentItem])):"clone"==a.helper?this.currentItem.clone():this.currentItem;return b.parents("body").length||c("parent"!=a.appendTo?a.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]),b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==b[0].style.width||a.forceHelperSize)&&b.width(this.currentItem.width()),(""==b[0].style.height||a.forceHelperSize)&&b.height(this.currentItem.height()),b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));c.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);"top"in
b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&c.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&
"html"==this.offsetParent[0].tagName.toLowerCase()&&c.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,
0-this.offset.relative.top-this.offset.parent.top,c("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(c("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var a=c(b.containment)[0],b=c(b.containment).offset(),d="hidden"!=c(a).css("overflow");this.containment=[b.left+(parseInt(c(a).css("borderLeftWidth"),10)||
0)+(parseInt(c(a).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(c(a).css("borderTopWidth"),10)||0)+(parseInt(c(a).css("paddingTop"),10)||0)-this.margins.top,b.left+(d?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(c(a).css("borderLeftWidth"),10)||0)-(parseInt(c(a).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(d?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(c(a).css("borderTopWidth"),10)||0)-(parseInt(c(a).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,a){a||(a=this.position);var d="absolute"==b?1:-1,e="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:a.top+this.offset.relative.top*d+this.offset.parent.top*d-(c.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():
f?0:e.scrollTop())*d),left:a.left+this.offset.relative.left*d+this.offset.parent.left*d-(c.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d)}},_generatePosition:function(b){var a=this.options,d="absolute"==this.cssPosition&&(this.scrollParent[0]==document||!c.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==
document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,h=b.pageY;this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&
(h=this.containment[3]+this.offset.click.top)),a.grid&&(h=this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1],h=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+a.grid[1]:h-a.grid[1]:h:h,f=this.originalPageX+Math.round((f-this.originalPageX)/a.grid[0])*a.grid[0],f=this.containment?f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2]?f-this.offset.click.left<
this.containment[0]?f+a.grid[0]:f-a.grid[0]:f:f));return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(c.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(c.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_rearrange:function(b,a,c,e){c?c[0].appendChild(this.placeholder[0]):
a.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?a.item[0]:a.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,h=this.counter;window.setTimeout(function(){h==f.counter&&f.refreshPositions(!e)},0)},_clear:function(b,a){this.reverting=!1;var d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if("auto"==this._storedCSS[e]||
"static"==this._storedCSS[e])this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!a&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!a&&d.push(function(a){this._trigger("update",a,this._uiHash())});if(!c.ui.contains(this.element[0],
this.currentItem[0])){a||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(e=this.containers.length-1;0<=e;e--)c.ui.contains(this.containers[e].element[0],this.currentItem[0])&&!a&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.containers[e])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[e])))}for(e=this.containers.length-1;0<=e;e--)a||d.push(function(a){return function(b){a._trigger("deactivate",
b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);this._storedCursor&&c("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!a){this._trigger("beforeStop",
b,this._uiHash());for(e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!1}a||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!a){for(e=0;e<d.length;e++)d[e].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===c.Widget.prototype._trigger.apply(this,arguments)&&
this.cancel()},_uiHash:function(b){var a=b||this;return{helper:a.helper,placeholder:a.placeholder||c([]),position:a.position,originalPosition:a.originalPosition,offset:a.positionAbs,item:a.currentItem,sender:b?b.element:null}}});c.extend(c.ui.sortable,{version:"1.8.22"})})(jQuery);
(function(c){c.widget("ui.slider",c.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,a=this.options,d=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),e=a.values&&a.values.length||1,f=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+
this.orientation+" ui-widget ui-widget-content ui-corner-all"+(a.disabled?" ui-slider-disabled ui-disabled":""));this.range=c([]);a.range&&(!0===a.range&&(a.values||(a.values=[this._valueMin(),this._valueMin()]),a.values.length&&2!==a.values.length&&(a.values=[a.values[0],a.values[0]])),this.range=c("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===a.range||"max"===a.range?" ui-slider-range-"+a.range:"")));for(var h=d.length;h<e;h+=1)f.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=d.add(c(f.join("")).appendTo(b.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){a.disabled||c(this).addClass("ui-state-hover")},function(){c(this).removeClass("ui-state-hover")}).focus(function(){a.disabled?c(this).blur():(c(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),c(this).addClass("ui-state-focus"))}).blur(function(){c(this).removeClass("ui-state-focus")});this.handles.each(function(a){c(this).data("index.ui-slider-handle",
a)});this.handles.keydown(function(a){var d=c(this).data("index.ui-slider-handle"),e,f,h;if(!b.options.disabled){switch(a.keyCode){case c.ui.keyCode.HOME:case c.ui.keyCode.END:case c.ui.keyCode.PAGE_UP:case c.ui.keyCode.PAGE_DOWN:case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(a.preventDefault(),!b._keySliding&&(b._keySliding=!0,c(this).addClass("ui-state-active"),e=b._start(a,d),!1===e))return}e=b.options.step;b.options.values&&b.options.values.length?
f=h=b.values(d):f=h=b.value();switch(a.keyCode){case c.ui.keyCode.HOME:h=b._valueMin();break;case c.ui.keyCode.END:h=b._valueMax();break;case c.ui.keyCode.PAGE_UP:h=b._trimAlignValue(f+(b._valueMax()-b._valueMin())/5);break;case c.ui.keyCode.PAGE_DOWN:h=b._trimAlignValue(f-(b._valueMax()-b._valueMin())/5);break;case c.ui.keyCode.UP:case c.ui.keyCode.RIGHT:if(f===b._valueMax())return;h=b._trimAlignValue(f+e);break;case c.ui.keyCode.DOWN:case c.ui.keyCode.LEFT:if(f===b._valueMin())return;h=b._trimAlignValue(f-
e)}b._slide(a,d,h)}}).keyup(function(a){var d=c(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(a,d),b._change(a,d),c(this).removeClass("ui-state-active"))});this._refreshValue();this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},
_mouseCapture:function(b){var a=this.options,d,e,f,h,j,m,p,g,n;return a.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),d={x:b.pageX,y:b.pageY},e=this._normValueFromMouse(d),f=this._valueMax()-this._valueMin()+1,j=this,this.handles.each(function(a){var b=Math.abs(e-j.values(a));f>b&&(f=b,h=c(this),m=a)}),!0===a.range&&this.values(1)===a.min&&(m+=1,h=c(this.handles[m])),p=this._start(b,m),!1===p?!1:(this._mouseSliding=
!0,j._handleIndex=m,h.addClass("ui-state-active").focus(),g=h.offset(),n=!c(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=n?{left:0,top:0}:{left:b.pageX-g.left-h.width()/2,top:b.pageY-g.top-h.height()/2-(parseInt(h.css("borderTopWidth"),10)||0)-(parseInt(h.css("borderBottomWidth"),10)||0)+(parseInt(h.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,m,e),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(b){var a=
this._normValueFromMouse({x:b.pageX,y:b.pageY});return this._slide(b,this._handleIndex,a),!1},_mouseStop:function(b){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(b,this._handleIndex),this._change(b,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(b){var a,c,e,f,h;return"horizontal"===
this.orientation?(a=this.elementSize.width,c=b.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(a=this.elementSize.height,c=b.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),e=c/a,1<e&&(e=1),0>e&&(e=0),"vertical"===this.orientation&&(e=1-e),f=this._valueMax()-this._valueMin(),h=this._valueMin()+e*f,this._trimAlignValue(h)},_start:function(b,a){var c={handle:this.handles[a],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=
this.values(a),c.values=this.values()),this._trigger("start",b,c)},_slide:function(b,a,c){var e,f,h;this.options.values&&this.options.values.length?(e=this.values(a?0:1),2===this.options.values.length&&!0===this.options.range&&(0===a&&c>e||1===a&&c<e)&&(c=e),c!==this.values(a)&&(f=this.values(),f[a]=c,h=this._trigger("slide",b,{handle:this.handles[a],value:c,values:f}),this.values(a?0:1),!1!==h&&this.values(a,c,!0))):c!==this.value()&&(h=this._trigger("slide",b,{handle:this.handles[a],value:c}),!1!==
h&&this.value(c))},_stop:function(b,a){var c={handle:this.handles[a],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(a),c.values=this.values());this._trigger("stop",b,c)},_change:function(b,a){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[a],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(a),c.values=this.values());this._trigger("change",b,c)}},value:function(b){if(arguments.length)this.options.value=
this._trimAlignValue(b),this._refreshValue(),this._change(null,0);else return this._value()},values:function(b,a){var d,e,f;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(a),this._refreshValue(),this._change(null,b);else{if(!arguments.length)return this._values();if(!c.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();d=this.options.values;e=arguments[0];for(f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,
f);this._refreshValue()}},_setOption:function(b,a){var d,e=0;c.isArray(this.options.values)&&(e=this.options.values.length);c.Widget.prototype._setOption.apply(this,arguments);switch(b){case "disabled":a?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(d=0;d<e;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b),b},_values:function(b){var a,c;if(arguments.length)return a=this.options.values[b],a=this._trimAlignValue(a),a;a=this.options.values.slice();for(c=0;c<a.length;c+=1)a[c]=
this._trimAlignValue(a[c]);return a},_trimAlignValue:function(b){if(b<=this._valueMin())return this._valueMin();if(b>=this._valueMax())return this._valueMax();var a=0<this.options.step?this.options.step:1,c=(b-this._valueMin())%a;b-=c;return 2*Math.abs(c)>=a&&(b+=0<c?a:-a),parseFloat(b.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b=this.options.range,a=this.options,d=this,e=this._animateOff?!1:a.animate,f,h={},
j,m,p,g;this.options.values&&this.options.values.length?this.handles.each(function(b){f=100*((d.values(b)-d._valueMin())/(d._valueMax()-d._valueMin()));h["horizontal"===d.orientation?"left":"bottom"]=f+"%";c(this).stop(1,1)[e?"animate":"css"](h,a.animate);!0===d.options.range&&("horizontal"===d.orientation?(0===b&&d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},a.animate),1===b&&d.range[e?"animate":"css"]({width:f-j+"%"},{queue:!1,duration:a.animate})):(0===b&&d.range.stop(1,1)[e?"animate":"css"]({bottom:f+
"%"},a.animate),1===b&&d.range[e?"animate":"css"]({height:f-j+"%"},{queue:!1,duration:a.animate})));j=f}):(m=this.value(),p=this._valueMin(),g=this._valueMax(),f=g!==p?100*((m-p)/(g-p)):0,h["horizontal"===d.orientation?"left":"bottom"]=f+"%",this.handle.stop(1,1)[e?"animate":"css"](h,a.animate),"min"===b&&"horizontal"===this.orientation&&this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},a.animate),"max"===b&&"horizontal"===this.orientation&&this.range[e?"animate":"css"]({width:100-f+"%"},{queue:!1,
duration:a.animate}),"min"===b&&"vertical"===this.orientation&&this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},a.animate),"max"===b&&"vertical"===this.orientation&&this.range[e?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:a.animate}))}});c.extend(c.ui.slider,{version:"1.8.22"})})(jQuery);
jQuery.effects||function(c,b){function a(a){var b;return a&&a.constructor==Array&&3==a.length?a:(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10)]:(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(b[1]),2.55*parseFloat(b[2]),2.55*parseFloat(b[3])]:(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(b[1],16),parseInt(b[2],
16),parseInt(b[3],16)]:(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(a)?m.transparent:m[c.trim(a).toLowerCase()]}function d(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]])for(var e=a.length;e--;)c=a[e],"string"==typeof a[c]&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)"string"==
typeof a[c]&&(b[c]=a[c]);return b}function e(a){var b,d;for(b in a)d=a[b],(null==d||c.isFunction(d)||b in g||/scrollbar/.test(b)||!/color/i.test(b)&&isNaN(parseFloat(d)))&&delete a[b];return a}function f(a,b){var c={_:0},d;for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function h(a,b,d,e){"object"==typeof a&&(e=b,d=null,b=a,a=b.effect);c.isFunction(b)&&(e=b,d=null,b={});if("number"==typeof b||c.fx.speeds[b])e=d,d=b,b={};return c.isFunction(d)&&(e=d,d=null),b=b||{},d=d||b.duration,d=c.fx.off?0:"number"==
typeof d?d:d in c.fx.speeds?c.fx.speeds[d]:c.fx.speeds._default,e=e||b.complete,[a,b,d,e]}function j(a){return!a||"number"==typeof a||c.fx.speeds[a]?!0:"string"==typeof a&&!c.effects[a]?!0:!1}c.effects={};c.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor borderColor color outlineColor".split(" "),function(b,d){c.fx.step[d]=function(b){if(!b.colorInit){var e;e=b.elem;var f=d,g;do{g=(c.curCSS||c.css)(e,f);if(""!=g&&"transparent"!=g||c.nodeName(e,"body"))break;
f="backgroundColor"}while(e=e.parentNode);e=a(g);b.start=e;b.end=a(b.end);b.colorInit=!0}b.elem.style[d]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var m={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,
255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},p=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};c.effects.animateClass=function(a,b,g,h){return c.isFunction(g)&&(h=g,g=null),this.queue(function(){var j=
c(this),m=j.attr("style")||" ",w=e(d.call(this)),v,D=j.attr("class")||"";c.each(p,function(b,c){a[c]&&j[c+"Class"](a[c])});v=e(d.call(this));j.attr("class",D);j.animate(f(w,v),{queue:!1,duration:b,easing:g,complete:function(){c.each(p,function(b,c){a[c]&&j[c+"Class"](a[c])});"object"==typeof j.attr("style")?(j.attr("style").cssText="",j.attr("style").cssText=m):j.attr("style",m);h&&h.apply(this,arguments);c.dequeue(this)}})})};c.fn.extend({_addClass:c.fn.addClass,addClass:function(a,b,d,e){return b?
c.effects.animateClass.apply(this,[{add:a},b,d,e]):this._addClass(a)},_removeClass:c.fn.removeClass,removeClass:function(a,b,d,e){return b?c.effects.animateClass.apply(this,[{remove:a},b,d,e]):this._removeClass(a)},_toggleClass:c.fn.toggleClass,toggleClass:function(a,d,e,f,g){return"boolean"==typeof d||d===b?e?c.effects.animateClass.apply(this,[d?{add:a}:{remove:a},e,f,g]):this._toggleClass(a,d):c.effects.animateClass.apply(this,[{toggle:a},d,e,f])},switchClass:function(a,b,d,e,f){return c.effects.animateClass.apply(this,
[{add:b,remove:a},d,e,f])}});c.extend(c.effects,{version:"1.8.22",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=
0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent();var b={width:a.outerWidth(!0),height:a.outerHeight(!0),"float":a.css("float")},d=c("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body}return a.wrap(d),(a[0]===e||c.contains(a[0],e))&&c(e).focus(),
d=a.parent(),"static"==a.css("position")?(d.css({position:"relative"}),a.css({position:"relative"})):(c.extend(b,{position:a.css("position"),zIndex:a.css("z-index")}),c.each(["top","left","bottom","right"],function(c,d){b[d]=a.css(d);isNaN(parseInt(b[d],10))&&(b[d]="auto")}),a.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(b).show()},removeWrapper:function(a){var b,d=document.activeElement;return a.parent().is(".ui-effects-wrapper")?(b=a.parent().replaceWith(a),(a[0]===
d||c.contains(a[0],d))&&c(d).focus(),b):a},setTransition:function(a,b,d,e){return e=e||{},c.each(b,function(b,c){var f=a.cssUnit(c);0<f[0]&&(e[c]=f[0]*d+f[1])}),e}});c.fn.extend({effect:function(a,b,d,e){var f=h.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},f=g.options.mode,j=c.effects[a];return c.fx.off||!j?f?this[f](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):j.call(this,g)},_show:c.fn.show,show:function(a){if(j(a))return this._show.apply(this,
arguments);var b=h.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:c.fn.hide,hide:function(a){if(j(a))return this._hide.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:c.fn.toggle,toggle:function(a){if(j(a)||"boolean"==typeof a||c.isFunction(a))return this.__toggle.apply(this,arguments);var b=h.apply(this,arguments);return b[1].mode="toggle",this.effect.apply(this,b)},cssUnit:function(a){var b=this.css(a),
d=[];return c.each(["em","px","%","pt"],function(a,c){0<b.indexOf(c)&&(d=[parseFloat(b),c])}),d}});c.easing.jswing=c.easing.swing;c.extend(c.easing,{def:"easeOutQuad",swing:function(a,b,d,e,f){return c.easing[c.easing.def](a,b,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,
b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return 1>(b/=e/2)?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return 1>
(b/=e/2)?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:1>(b/=e/2)?d/2*Math.pow(2,10*
(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return 1>(b/=e/2)?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;if(0==b)return c;if(1==(b/=e))return c+d;f||(f=0.3*e);g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(b-=1))*Math.sin(2*
(b*e-a)*Math.PI/f))+c},easeOutElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;if(0==b)return c;if(1==(b/=e))return c+d;f||(f=0.3*e);g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g);return g*Math.pow(2,-10*b)*Math.sin(2*(b*e-a)*Math.PI/f)+d+c},easeInOutElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;if(0==b)return c;if(2==(b/=e/2))return c+d;f||(f=1.5*0.3*e);g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g);return 1>b?-0.5*g*Math.pow(2,10*(b-=1))*Math.sin(2*(b*e-a)*Math.PI/f)+c:
0.5*g*Math.pow(2,-10*(b-=1))*Math.sin(2*(b*e-a)*Math.PI/f)+d+c},easeInBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){return g==b&&(g=1.70158),1>(c/=f/2)?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(a,b,d,e,f){return e-c.easing.easeOutBounce(a,f-b,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=
e)<1/2.75?7.5625*d*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+0.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+0.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+0.984375)+c},easeInOutBounce:function(a,b,d,e,f){return b<f/2?0.5*c.easing.easeInBounce(a,2*b,0,e,f)+d:0.5*c.easing.easeOutBounce(a,2*b-f,0,e,f)+0.5*e+d}})}(jQuery);
(function(c){c.effects.blind=function(b){return this.queue(function(){var a=c(this),d=["position","top","bottom","left","right"],e=c.effects.setMode(a,b.options.mode||"hide"),f=b.options.direction||"vertical";c.effects.save(a,d);a.show();var h=c.effects.createWrapper(a).css({overflow:"hidden"}),j="vertical"==f?"height":"width",f="vertical"==f?h.height():h.width();"show"==e&&h.css(j,0);var m={};m[j]="show"==e?f:0;h.animate(m,b.duration,b.options.easing,function(){"hide"==e&&a.hide();c.effects.restore(a,
d);c.effects.removeWrapper(a);b.callback&&b.callback.apply(a[0],arguments);a.dequeue()})})}})(jQuery);
(function(c){c.effects.bounce=function(b){return this.queue(function(){var a=c(this),d=["position","top","bottom","left","right"],e=c.effects.setMode(a,b.options.mode||"effect"),f=b.options.direction||"up",h=b.options.distance||20,j=b.options.times||5,m=b.duration||250;/show|hide/.test(e)&&d.push("opacity");c.effects.save(a,d);a.show();c.effects.createWrapper(a);var p="up"==f||"down"==f?"top":"left",f="up"==f||"left"==f?"pos":"neg",h=b.options.distance||("top"==p?a.outerHeight(!0)/3:a.outerWidth(!0)/
3);"show"==e&&a.css("opacity",0).css(p,"pos"==f?-h:h);"hide"==e&&(h/=2*j);"hide"!=e&&j--;if("show"==e){var g={opacity:1};g[p]=("pos"==f?"+=":"-=")+h;a.animate(g,m/2,b.options.easing);h/=2;j--}for(g=0;g<j;g++){var n={},q={};n[p]=("pos"==f?"-=":"+=")+h;q[p]=("pos"==f?"+=":"-=")+h;a.animate(n,m/2,b.options.easing).animate(q,m/2,b.options.easing);h="hide"==e?2*h:h/2}"hide"==e?(g={opacity:0},g[p]=("pos"==f?"-=":"+=")+h,a.animate(g,m/2,b.options.easing,function(){a.hide();c.effects.restore(a,d);c.effects.removeWrapper(a);
b.callback&&b.callback.apply(this,arguments)})):(n={},q={},n[p]=("pos"==f?"-=":"+=")+h,q[p]=("pos"==f?"+=":"-=")+h,a.animate(n,m/2,b.options.easing).animate(q,m/2,b.options.easing,function(){c.effects.restore(a,d);c.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments)}));a.queue("fx",function(){a.dequeue()});a.dequeue()})}})(jQuery);
(function(c){c.effects.clip=function(b){return this.queue(function(){var a=c(this),d="position top bottom left right height width".split(" "),e=c.effects.setMode(a,b.options.mode||"hide"),f=b.options.direction||"vertical";c.effects.save(a,d);a.show();var h=c.effects.createWrapper(a).css({overflow:"hidden"}),h="IMG"==a[0].tagName?h:a,j="vertical"==f?"height":"width",m="vertical"==f?"top":"left",f="vertical"==f?h.height():h.width();"show"==e&&(h.css(j,0),h.css(m,f/2));var p={};p[j]="show"==e?f:0;p[m]=
"show"==e?0:f/2;h.animate(p,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&a.hide();c.effects.restore(a,d);c.effects.removeWrapper(a);b.callback&&b.callback.apply(a[0],arguments);a.dequeue()}})})}})(jQuery);
(function(c){c.effects.drop=function(b){return this.queue(function(){var a=c(this),d="position top bottom left right opacity".split(" "),e=c.effects.setMode(a,b.options.mode||"hide"),f=b.options.direction||"left";c.effects.save(a,d);a.show();c.effects.createWrapper(a);var h="up"==f||"down"==f?"top":"left",f="up"==f||"left"==f?"pos":"neg",j=b.options.distance||("top"==h?a.outerHeight(!0)/2:a.outerWidth(!0)/2);"show"==e&&a.css("opacity",0).css(h,"pos"==f?-j:j);var m={opacity:"show"==e?1:0};m[h]=("show"==
e?"pos"==f?"+=":"-=":"pos"==f?"-=":"+=")+j;a.animate(m,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&a.hide();c.effects.restore(a,d);c.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
(function(c){c.effects.explode=function(b){return this.queue(function(){var a=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode="toggle"==b.options.mode?c(this).is(":visible")?"hide":"show":b.options.mode;var e=c(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0;f.left-=parseInt(e.css("marginLeft"),10)||0;for(var h=e.outerWidth(!0),j=e.outerHeight(!0),m=0;m<a;m++)for(var p=
0;p<d;p++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*(h/d),top:-m*(j/a)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:h/d,height:j/a,left:f.left+p*(h/d)+("show"==b.options.mode?(p-Math.floor(d/2))*(h/d):0),top:f.top+m*(j/a)+("show"==b.options.mode?(m-Math.floor(a/2))*(j/a):0),opacity:"show"==b.options.mode?0:1}).animate({left:f.left+p*(h/d)+("show"==b.options.mode?0:(p-Math.floor(d/2))*(h/d)),top:f.top+
m*(j/a)+("show"==b.options.mode?0:(m-Math.floor(a/2))*(j/a)),opacity:"show"==b.options.mode?1:0},b.duration||500);setTimeout(function(){"show"==b.options.mode?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide();b.callback&&b.callback.apply(e[0]);e.dequeue();c("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);
(function(c){c.effects.fade=function(b){return this.queue(function(){var a=c(this),d=c.effects.setMode(a,b.options.mode||"hide");a.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
(function(c){c.effects.fold=function(b){return this.queue(function(){var a=c(this),d=["position","top","bottom","left","right"],e=c.effects.setMode(a,b.options.mode||"hide"),f=b.options.size||15,h=!!b.options.horizFirst,j=b.duration?b.duration/2:c.fx.speeds._default/2;c.effects.save(a,d);a.show();var m=c.effects.createWrapper(a).css({overflow:"hidden"}),p="show"==e!=h,g=p?["width","height"]:["height","width"],p=p?[m.width(),m.height()]:[m.height(),m.width()],n=/([0-9]+)%/.exec(f);n&&(f=parseInt(n[1],
10)/100*p["hide"==e?0:1]);"show"==e&&m.css(h?{height:0,width:f}:{height:f,width:0});h={};n={};h[g[0]]="show"==e?p[0]:f;n[g[1]]="show"==e?p[1]:0;m.animate(h,j,b.options.easing).animate(n,j,b.options.easing,function(){"hide"==e&&a.hide();c.effects.restore(a,d);c.effects.removeWrapper(a);b.callback&&b.callback.apply(a[0],arguments);a.dequeue()})})}})(jQuery);
(function(c){c.effects.highlight=function(b){return this.queue(function(){var a=c(this),d=["backgroundImage","backgroundColor","opacity"],e=c.effects.setMode(a,b.options.mode||"show"),f={backgroundColor:a.css("backgroundColor")};"hide"==e&&(f.opacity=0);c.effects.save(a,d);a.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&a.hide();c.effects.restore(a,d);"show"==e&&!c.support.opacity&&
this.style.removeAttribute("filter");b.callback&&b.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
(function(c){c.effects.pulsate=function(b){return this.queue(function(){var a=c(this),d=c.effects.setMode(a,b.options.mode||"show"),e=2*(b.options.times||5)-1,f=b.duration?b.duration/2:c.fx.speeds._default/2,h=a.is(":visible"),j=0;h||(a.css("opacity",0).show(),j=1);("hide"==d&&h||"show"==d&&!h)&&e--;for(d=0;d<e;d++)a.animate({opacity:j},f,b.options.easing),j=(j+1)%2;a.animate({opacity:j},f,b.options.easing,function(){0==j&&a.hide();b.callback&&b.callback.apply(this,arguments)});a.queue("fx",function(){a.dequeue()}).dequeue()})}})(jQuery);
(function(c){c.effects.puff=function(b){return this.queue(function(){var a=c(this),d=c.effects.setMode(a,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,h={height:a.height(),width:a.width()};c.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?h:{height:h.height*f,width:h.width*f}});a.effect("scale",b.options,b.duration,b.callback);a.dequeue()})};c.effects.scale=function(b){return this.queue(function(){var a=c(this),d=c.extend(!0,{},b.options),e=c.effects.setMode(a,
b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),h=b.options.direction||"both",j=b.options.origin;"effect"!=e&&(d.origin=j||["middle","center"],d.restore=!0);j={height:a.height(),width:a.width()};a.from=b.options.from||("show"==e?{height:0,width:0}:j);a.to={height:j.height*("horizontal"!=h?f/100:1),width:j.width*("vertical"!=h?f/100:1)};b.options.fade&&("show"==e&&(a.from.opacity=0,a.to.opacity=1),"hide"==e&&(a.from.opacity=1,a.to.opacity=
0));d.from=a.from;d.to=a.to;d.mode=e;a.effect("size",d,b.duration,b.callback);a.dequeue()})};c.effects.size=function(b){return this.queue(function(){var a=c(this),d="position top bottom left right width height overflow opacity".split(" "),e="position top bottom left right overflow opacity".split(" "),f=["width","height","overflow"],h=["fontSize"],j=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],m=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=c.effects.setMode(a,
b.options.mode||"effect"),g=b.options.restore||!1,n=b.options.scale||"both",q=b.options.origin,u={height:a.height(),width:a.width()};a.from=b.options.from||u;a.to=b.options.to||u;q&&(q=c.effects.getBaseline(q,u),a.from.top=(u.height-a.from.height)*q.y,a.from.left=(u.width-a.from.width)*q.x,a.to.top=(u.height-a.to.height)*q.y,a.to.left=(u.width-a.to.width)*q.x);var r=a.from.height/u.height,x=a.from.width/u.width,y=a.to.height/u.height,w=a.to.width/u.width;if("box"==n||"both"==n)r!=y&&(d=d.concat(j),
a.from=c.effects.setTransition(a,j,r,a.from),a.to=c.effects.setTransition(a,j,y,a.to)),x!=w&&(d=d.concat(m),a.from=c.effects.setTransition(a,m,x,a.from),a.to=c.effects.setTransition(a,m,w,a.to));("content"==n||"both"==n)&&r!=y&&(d=d.concat(h),a.from=c.effects.setTransition(a,h,r,a.from),a.to=c.effects.setTransition(a,h,y,a.to));c.effects.save(a,g?d:e);a.show();c.effects.createWrapper(a);a.css("overflow","hidden").css(a.from);if("content"==n||"both"==n)j=j.concat(["marginTop","marginBottom"]).concat(h),
m=m.concat(["marginLeft","marginRight"]),f=d.concat(j).concat(m),a.find("*[width]").each(function(){var a=c(this);g&&c.effects.save(a,f);var d=a.height(),e=a.width();a.from={height:d*r,width:e*x};a.to={height:d*y,width:e*w};r!=y&&(a.from=c.effects.setTransition(a,j,r,a.from),a.to=c.effects.setTransition(a,j,y,a.to));x!=w&&(a.from=c.effects.setTransition(a,m,x,a.from),a.to=c.effects.setTransition(a,m,w,a.to));a.css(a.from);a.animate(a.to,b.duration,b.options.easing,function(){g&&c.effects.restore(a,
f)})});a.animate(a.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){0===a.to.opacity&&a.css("opacity",a.from.opacity);"hide"==p&&a.hide();c.effects.restore(a,g?d:e);c.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
(function(c){c.effects.shake=function(b){return this.queue(function(){var a=c(this),d=["position","top","bottom","left","right"];c.effects.setMode(a,b.options.mode||"effect");var e=b.options.direction||"left",f=b.options.distance||20,h=b.options.times||3,j=b.duration||b.options.duration||140;c.effects.save(a,d);a.show();c.effects.createWrapper(a);var m="up"==e||"down"==e?"top":"left",p="up"==e||"left"==e?"pos":"neg",e={},g={},n={};e[m]=("pos"==p?"-=":"+=")+f;g[m]=("pos"==p?"+=":"-=")+2*f;n[m]=("pos"==
p?"-=":"+=")+2*f;a.animate(e,j,b.options.easing);for(f=1;f<h;f++)a.animate(g,j,b.options.easing).animate(n,j,b.options.easing);a.animate(g,j,b.options.easing).animate(e,j/2,b.options.easing,function(){c.effects.restore(a,d);c.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments)});a.queue("fx",function(){a.dequeue()});a.dequeue()})}})(jQuery);
(function(c){c.effects.slide=function(b){return this.queue(function(){var a=c(this),d=["position","top","bottom","left","right"],e=c.effects.setMode(a,b.options.mode||"show"),f=b.options.direction||"left";c.effects.save(a,d);a.show();c.effects.createWrapper(a).css({overflow:"hidden"});var h="up"==f||"down"==f?"top":"left",f="up"==f||"left"==f?"pos":"neg",j=b.options.distance||("top"==h?a.outerHeight(!0):a.outerWidth(!0));"show"==e&&a.css(h,"pos"==f?isNaN(j)?"-"+j:-j:j);var m={};m[h]=("show"==e?"pos"==
f?"+=":"-=":"pos"==f?"-=":"+=")+j;a.animate(m,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&a.hide();c.effects.restore(a,d);c.effects.removeWrapper(a);b.callback&&b.callback.apply(this,arguments);a.dequeue()}})})}})(jQuery);
(function(c){c.effects.transfer=function(b){return this.queue(function(){var a=c(this),d=c(b.options.to),e=d.offset(),d={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},e=a.offset(),f=c('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:e.top,left:e.left,height:a.innerHeight(),width:a.innerWidth(),position:"absolute"}).animate(d,b.duration,b.options.easing,function(){f.remove();b.callback&&b.callback.apply(a[0],arguments);a.dequeue()})})}})(jQuery);
jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(c,b,a,d,e){return jQuery.easing[jQuery.easing.def](c,b,a,d,e)}});
(function(c){function b(a,b,c,j){a="("+c.replace(d,"\\$1")+")";b.name.replace(RegExp(a,"gi"),"<strong>$1</strong>");a='<span class="city">'+b.name+', </span><span class="country">'+b.country+"</span>";j&&(a+='<span class="code">'+b.code+"</span>");return a}function a(a,d){this.el=c(a);this.el.attr("autocomplete","off");this.suggestions=[];this.data=[];this.badQueries=[];this.selectedIndex=-1;this.currentValue=this.el.val();this.intervalId=0;this.cachedResponse=[];this.onChange=this.onChangeInterval=
null;this.ignoreValueChange=!1;this.serviceUrl=d.serviceUrl;this.isLocal=!1;this.options={showCode:!0,autoSubmit:!1,minChars:1,maxHeight:300,deferRequestBy:0,width:0,highlight:!0,params:{},fnFormatResult:b,delimiter:null,zIndex:9999};this.initialize();this.setOptions(d);this.el.data("autocomplete",this)}var d=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");c.fn.autocomplete=function(b,d){var h;if("string"==typeof b){if(h=this.data("autocomplete"),"function"==typeof h[b])h[b](d)}else h=
new a(this.get(0)||c("<input />"),b);return h};a.prototype={killerFn:null,initialize:function(){var a,b,d;a=this;b=Math.floor(1048576*Math.random()).toString(16);d="Autocomplete_"+b;this.killerFn=function(b){0===c(b.target).parents(".autocomplete").size()&&(a.killSuggestions(),a.disableKillerFn())};this.options.width||(this.options.width=this.el.innerWidth()-1);this.mainContainerId="AutocompleteContainter_"+b;c('<div id="'+this.mainContainerId+'" style="position:absolute;z-index:9999;"><div class="autocomplete-w1"><div class="left"></div><div class="center"></div><div class="right"></div><div class="autocomplete" id="'+
d+'" style="display:none;"></div></div></div>').appendTo("body");this.container=c("#"+d);this.fixPosition();window.opera?this.el.keypress(function(b){a.onKeyPress(b)}):this.el.keydown(function(b){a.onKeyPress(b)});this.el.keyup(function(b){a.onKeyUp(b)});this.el.blur(function(){a.enableKillerFn()});this.el.focus(function(){a.fixPosition()});this.el.change(function(){a.onValueChanged()})},extendOptions:function(a){c.extend(this.options,a)},setOptions:function(a){var b=this.options;this.extendOptions(a);
if(b.lookup||b.isLocal)this.isLocal=!0,c.isArray(b.lookup)&&(b.lookup={suggestions:b.lookup,data:[]});c("#"+this.mainContainerId).css({zIndex:b.zIndex});this.container.css({width:b.width+1})},clearCache:function(){this.cachedResponse=[];this.badQueries=[]},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},fixPosition:function(){var a=this.el.offset();c("#"+this.mainContainerId).css({top:a.top+this.el.innerHeight()+"px",left:a.left+"px"})},enableKillerFn:function(){c(document).bind("click",
this.killerFn)},disableKillerFn:function(){c(document).unbind("click",this.killerFn)},killSuggestions:function(){var a=this;this.stopKillSuggestions();this.intervalId=window.setInterval(function(){a.hide();a.stopKillSuggestions()},300)},stopKillSuggestions:function(){window.clearInterval(this.intervalId)},onValueChanged:function(){this.change(this.selectedIndex)},onKeyPress:function(a){if(!this.disabled&&this.enabled){switch(a.keyCode){case 27:this.el.val(this.currentValue);this.hide();break;case 9:case 13:if(-1===
this.selectedIndex){this.hide();return}this.select(this.selectedIndex);if(9===a.keyCode)return;break;case 38:this.moveUp();break;case 40:this.moveDown();break;default:return}a.stopImmediatePropagation();a.preventDefault()}},onKeyUp:function(a){if(!this.disabled){switch(a.keyCode){case 38:case 40:return}clearInterval(this.onChangeInterval);if(this.currentValue!==this.el.val())if(0<this.options.deferRequestBy){var b=this;this.onChangeInterval=setInterval(function(){b.onValueChange(a)},this.options.deferRequestBy)}else this.onValueChange(a)}},
onValueChange:function(a){clearInterval(this.onChangeInterval);this.currentValue=this.el.val();var b=this.getQuery(this.currentValue);this.selectedIndex=-1;this.ignoreValueChange?this.ignoreValueChange=!1:""===b||b.length<this.options.minChars?this.hide():this.getSuggestions(b,a)},getQuery:function(a){var b;b=this.options.delimiter;if(!b)return c.trim(a);a=a.split(b);return c.trim(a[a.length-1])},getSuggestionsLocal:function(a){var b,c,d,m,p;c=this.options.lookup;d=c.suggestions.length;b={suggestions:[],
data:[]};a=a.toLowerCase();for(p=0;p<d;p++)m=c.suggestions[p],0===m.toLowerCase().indexOf(a)&&(b.suggestions.push(m),b.data.push(c.data[p]));return b},getSuggestions:function(a,b){var d,j;(d=this.isLocal?this.getSuggestionsLocal(a):this.cachedResponse[a])&&c.isArray(d.suggestions)?(this.suggestions=d.suggestions,this.data=d.data,this.suggest(b)):this.isBadQuery(a)||(j=this,j.options.params.query=a,c.get(this.serviceUrl,j.options.params,function(a){j.processResponse(a)},"json"))},isBadQuery:function(a){for(var b=
this.badQueries.length;b--;)if(0===a.indexOf(this.badQueries[b]))return!0;return!1},hide:function(){this.enabled=!1;this.selectedIndex=-1;this.container.hide()},suggest:function(a){if(0===this.suggestions.length)this.hide();else{var b,d,j,m,p,g,n,q;b=this;d=this.suggestions.length;m=this.options.fnFormatResult;p=this.getQuery(this.currentValue);n=function(a){return function(){b.activate(a)}};q=function(a){return function(){b.select(a)}};this.container.hide().empty();for(g=0;g<d;g++)j=this.suggestions[g],
j=c((b.selectedIndex===g?'<div class="selected"':"<div")+' title="'+j+'">'+m(j,this.data[g],p,this.options.showCode)+"</div>"),j.mouseover(n(g)),j.click(q(g)),this.container.append(j);1==d?(!a||!("keyup"==a.type&&8==a.keyCode))&&this.select(0):(this.enabled=!0,this.container.show())}},processResponse:function(a){c.isArray(a.data)||(a.data=[]);this.options.noCache||(this.cachedResponse[a.query]=a)&&(a.suggestions&&0===a.suggestions.length)&&this.badQueries.push(a.query);a.query===this.getQuery(this.currentValue)&&
(this.suggestions=a.suggestions,this.data=a.data,a=c.Event("processRespond"),this.suggest(a))},activate:function(a){var b,d;b=this.container.children();-1!==this.selectedIndex&&b.length>this.selectedIndex&&c(b.get(this.selectedIndex)).removeClass();this.selectedIndex=a;-1!==this.selectedIndex&&b.length>this.selectedIndex&&(d=b.get(this.selectedIndex),c(d).addClass("selected"),this.onActivate(this.selectedIndex));return d},deactivate:function(a,b){a.className="";this.selectedIndex===b&&(this.selectedIndex=
-1)},select:function(a){var b;if(b=this.suggestions[a])this.el.val(b),this.options.autoSubmit&&(b=this.el.parents("form"),0<b.length&&b.get(0).submit()),this.ignoreValueChange=!0,this.hide(),this.onSelect(a);this.el.trigger("autocompleted")},change:function(a){if(this.suggestions[a]){var b,d;b=this.suggestions[a];d=this.data[a];this.el.val(this.getValue(b))}else b="",d=-1;a=this.options.onChange;c.isFunction(a)&&a(b,d,this.el)},moveUp:function(){-1!==this.selectedIndex&&(0===this.selectedIndex?(this.container.children().get(0).className=
"",this.selectedIndex=-1,this.el.val(""),this.el.trigger("change"),this.el.val(this.currentValue)):this.adjustScroll(this.selectedIndex-1))},moveDown:function(){this.selectedIndex!==this.suggestions.length-1&&this.adjustScroll(this.selectedIndex+1)},adjustScroll:function(a){var b,c,d;b=this.activate(a).offsetTop;c=this.container.scrollTop();d=c+this.options.maxHeight-25;b<c?this.container.scrollTop(b):b>d&&this.container.scrollTop(b-this.options.maxHeight+25);this.el.val(this.data[a].name)},onSelect:function(a){var b,
d;b=this.options.onSelect;d=this.suggestions[a];a=this.data[a];this.el.val(this.getValue(d));c.isFunction(b)&&b(d,a,this.el)},onActivate:function(a){var b,d;b=this.options.onActivate;d=this.suggestions[a];a=this.data[a];this.el.val(this.getValue(d));c.isFunction(b)&&b(d,a,this.el)},getValue:function(a){var b,c;b=this.options.delimiter;if(!b)return a;c=this.currentValue;b=c.split(b);return 1===b.length?a:c.substr(0,c.length-b[b.length-1].length)+a}}})(jQuery);
(function(c){if(!c.fn.dotdotdot){c.fn.dotdotdot=function(){};c.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:" ,;.!?".split(""),noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1};var b=c.fn.html;c.fn.html=function(a){return"undefined"!=typeof a?this.data("dotdotdot")&&"function"!=typeof a?this.trigger("update",[a]):b.call(this,a):b.call(this)};var a=c.fn.text;c.fn.text=function(b){if("undefined"!=typeof b){if(this.data("dotdotdot")){var e=
c("<div />");e.text(b);b=e.html();e.remove();return this.trigger("update",[b])}return a.call(this,b)}return a.call(this)}}})(jQuery);
(function(c,b){function a(a,b,c){this._d=a;this._isUTC=!!b;this._a=a._a||null;a._a=null;this._lang=c||!1}function d(a){var b=this._data={},c=a.years||a.y||0,d=a.months||a.M||0,f=a.weeks||a.w||0,g=a.days||a.d||0,h=a.hours||a.h||0,j=a.minutes||a.m||0,n=a.seconds||a.s||0;a=a.milliseconds||a.ms||0;this._milliseconds=a+1E3*n+6E4*j+36E5*h;this._days=g+7*f;this._months=d+12*c;b.milliseconds=a%1E3;n+=e(a/1E3);b.seconds=n%60;j+=e(n/60);b.minutes=j%60;h+=e(j/60);b.hours=h%24;g+=e(h/24);g+=7*f;b.days=g%30;d+=
e(g/30);b.months=d%12;c+=e(d/12);b.years=c;this._lang=!1}function e(a){return 0>a?Math.ceil(a):Math.floor(a)}function f(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function h(a,b,c){var d=b._milliseconds,e=b._days;b=b._months;d&&a._d.setTime(+a+d*c);e&&a.date(a.date()+e*c);b&&(d=a.date(),a.date(1).month(a.month()+b*c).date(Math.min(d,a.daysInMonth())))}function j(a){return"[object Array]"===Object.prototype.toString.call(a)}function m(a,b){var c=Math.min(a.length,b.length),d=Math.abs(a.length-
b.length),e=0,f;for(f=0;f<c;f++)~~a[f]!==~~b[f]&&e++;return e+d}function p(a,b){var d;for(d=1;7>d;d++)a[d]=null==a[d]?2===d?1:0:a[d];a[7]=b;d=new c(0);b?(d.setUTCFullYear(a[0],a[1],a[2]),d.setUTCHours(a[3],a[4],a[5],a[6])):(d.setFullYear(a[0],a[1],a[2]),d.setHours(a[3],a[4],a[5],a[6]));d._a=a;return d}function g(a,b){var c,d,e=[];!b&&A&&(b=require("./lang/"+a));for(c=0;c<I.length;c++)b[I[c]]=b[I[c]]||C.en[I[c]];for(c=0;12>c;c++)d=s([2E3,c]),e[c]=RegExp("^"+(b.months[c]||b.months(d,""))+"|^"+(b.monthsShort[c]||
b.monthsShort(d,"")).replace(".",""),"i");b.monthsParse=b.monthsParse||e;return C[a]=b}function n(a){return(a="string"===typeof a&&a||a&&a._lang||null)?C[a]||g(a):s}function q(a){return B[a]?"'+("+B[a]+")+'":a.replace(N,"").replace(/\\?'/g,"\\'")}function u(a){return n().longDateFormat[a]||a}function r(a,b){for(var c=n(a);R.test(b);)b=b.replace(R,u);if(!U[b]){var d=U,e=b,g;g="var a,b;return '"+b.replace(L,q)+"';";g=new Function("t","v","o","p","m",g);d[e]=g}return U[b](a,function(d,e){return c[d].call?
c[d](a,b):c[d][e]},c.ordinal,f,c.meridiem)}function x(a){switch(a){case "DDDD":return T;case "YYYY":return ha;case "S":case "SS":case "SSS":case "DDD":return O;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":case "a":case "A":return la;case "Z":case "ZZ":return Z;case "T":return aa;case "MM":case "DD":case "YY":case "HH":case "hh":case "mm":case "ss":case "M":case "D":case "d":case "H":case "h":case "m":case "s":return J;default:return RegExp(a.replace("\\",""))}}function y(a,b){var c=[0,
0,1,0,0,0,0],d={tzh:0,tzm:0},e=b.match(L),f,g;for(f=0;f<e.length;f++){g=(x(e[f]).exec(a)||[])[0];a=a.replace(x(e[f]),"");var h=c,j=d,k=void 0;switch(e[f]){case "M":case "MM":h[1]=null==g?0:~~g-1;break;case "MMM":case "MMMM":for(k=0;12>k;k++)if(n().monthsParse[k].test(g)){h[1]=k;break}break;case "D":case "DD":case "DDD":case "DDDD":null!=g&&(h[2]=~~g);break;case "YY":g=~~g;h[0]=g+(70<g?1900:2E3);break;case "YYYY":h[0]=~~Math.abs(g);break;case "a":case "A":j.isPm="pm"===(g+"").toLowerCase();break;case "H":case "HH":case "h":case "hh":h[3]=
~~g;break;case "m":case "mm":h[4]=~~g;break;case "s":case "ss":h[5]=~~g;break;case "S":case "SS":case "SSS":h[6]=~~(1E3*("0."+g));break;case "Z":case "ZZ":j.isUTC=!0;if((k=(g+"").match(oa))&&k[1])j.tzh=~~k[1];k&&k[2]&&(j.tzm=~~k[2]);k&&"+"===k[0]&&(j.tzh=-j.tzh,j.tzm=-j.tzm)}}d.isPm&&12>c[3]&&(c[3]+=12);!1===d.isPm&&12===c[3]&&(c[3]=0);c[3]+=d.tzh;c[4]+=d.tzm;return p(c,d.isUTC)}function w(a,b,c,d,e){e=e.relativeTime[a];return"function"===typeof e?e(b||1,!!c,a,d):e.replace(/%d/i,b||1)}function v(a,
b){s.fn[a]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),this):this._d["get"+c+b]()}}function D(a){s.duration.fn[a]=function(){return this._data[a]}}function H(a,b){s.duration.fn["as"+a]=function(){return+this/b}}for(var s,E=Math.round,G,C={},F="en",A="undefined"!==typeof module&&module.exports,I="months monthsShort weekdays weekdaysShort weekdaysMin longDateFormat calendar relativeTime ordinal meridiem".split(" "),K=/^\/?Date\((\-?\d+)/i,L=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?)/g,
R=/(LT|LL?L?L?)/g,N=/(^\[)|(\\)|\]$/g,Q=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,J=/\d\d?/,O=/\d{1,3}/,T=/\d{3}/,ha=/\d{1,4}/,la=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,Z=/Z|[\+\-]\d\d:?\d\d/i,aa=/T/i,ja=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,ba=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],oa=/([\+\-]|\d\d)/gi,fa="Month Date Hours Minutes Seconds Milliseconds".split(" "),
k={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},U={},B={M:"(a=t.month()+1)",MMM:'v("monthsShort",t.month())',MMMM:'v("months",t.month())',D:"(a=t.date())",DDD:"(a=new Date(t.year(),t.month(),t.date()),b=new Date(t.year(),0,1),a=~~(((a-b)/864e5)+1.5))",d:"(a=t.day())",dd:'v("weekdaysMin",t.day())',ddd:'v("weekdaysShort",t.day())',dddd:'v("weekdays",t.day())',w:"(a=new Date(t.year(),t.month(),t.date()-t.day()+5),b=new Date(a.getFullYear(),0,4),a=~~((a-b)/864e5/7+1.5))",
YY:"p(t.year()%100,2)",YYYY:"p(t.year(),4)",a:"m(t.hours(),t.minutes(),!0)",A:"m(t.hours(),t.minutes(),!1)",H:"t.hours()",h:"t.hours()%12||12",m:"t.minutes()",s:"t.seconds()",S:"~~(t.milliseconds()/100)",SS:"p(~~(t.milliseconds()/10),2)",SSS:"p(t.milliseconds(),3)",Z:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(a/60),2)+":"+p(~~a%60,2)',ZZ:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(10*a/6),4)'},M=["DDD","w","M","D","d"],P="MDHhmsw".split("");M.length;)G=M.pop(),B[G+"o"]=B[G]+"+o(a)";for(;P.length;)G=P.pop(),
B[G+G]="p("+B[G]+",2)";B.DDDD="p("+B.DDD+",3)";s=function(d,e){if(null===d||""===d)return null;var f;if(s.isMoment(d))return new a(new c(+d._d),d._isUTC,d._lang);if(e)if(j(e)){var g=d.match(Q)||[],h,n=99,k,q;for(k=0;k<e.length;k++)q=y(d,e[k]),h=r(new a(q),e[k]).match(Q)||[],h=m(g,h),h<n&&(n=h,f=q)}else f=y(d,e);else if(f=K.exec(d),d===b)f=new c;else if(f)f=new c(+f[1]);else if(d instanceof c)f=d;else if(j(d))f=p(d);else if("string"===typeof d)if(f="YYYY-MM-DDT",ja.exec(d)){for(g=0;4>g;g++)if(ba[g][1].exec(d)){f+=
ba[g][0];break}f=Z.exec(d)?y(d,f+" Z"):y(d,f)}else f=new c(d);else f=new c(d);return new a(f)};s.utc=function(b,c){if(j(b))return new a(p(b,!0),!0);"string"===typeof b&&!Z.exec(b)&&(b+=" +0000",c&&(c+=" Z"));return s(b,c).utc()};s.unix=function(a){return s(1E3*a)};s.duration=function(a,b){var c=s.isDuration(a),e="number"===typeof a,f=c?a._data:e?{}:a;e&&(b?f[b]=a:f.milliseconds=a);e=new d(f);c&&(e._lang=a._lang);return e};s.humanizeDuration=function(a,b,c){return s.duration(a,!0===b?null:b).humanize(!0===
b?!0:c)};s.version="1.7.0";s.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";s.lang=function(a,b){var c;if(!a)return F;(b||!C[a])&&g(a,b);if(C[a]){for(c=0;c<I.length;c++)s[I[c]]=C[a][I[c]];s.monthsParse=C[a].monthsParse;F=a}};s.langData=n;s.isMoment=function(b){return b instanceof a};s.isDuration=function(a){return a instanceof d};s.lang("en",{months:"January February March April May June July August September October November December".split(" "),monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},
relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}});s.fn=a.prototype={clone:function(){return s(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1E3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},
toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?!m(this._a,(this._a[7]?s.utc(this):this).toArray()):!isNaN(this._d.getTime())},utc:function(){this._isUTC=!0;return this},local:function(){this._isUTC=!1;return this},format:function(a){return r(this,a?a:s.defaultFormat)},add:function(a,b){var c=b?s.duration(+b,a):s.duration(a);h(this,c,1);return this},subtract:function(a,b){var c=
b?s.duration(+b,a):s.duration(a);h(this,c,-1);return this},diff:function(a,b,c){a=this._isUTC?s(a).utc():s(a).local();var d=6E4*(this.zone()-a.zone()),d=this._d-a._d-d,e=this.year()-a.year(),f=this.month()-a.month();a=this.date()-a.date();b="months"===b?12*e+f+a/30:"years"===b?e+(f+a/30)/12:"seconds"===b?d/1E3:"minutes"===b?d/6E4:"hours"===b?d/36E5:"days"===b?d/864E5:"weeks"===b?d/6048E5:d;return c?b:E(b)},from:function(a,b){return s.duration(this.diff(a)).lang(this._lang).humanize(!b)},fromNow:function(a){return this.from(s(),
a)},calendar:function(){var a=this.diff(s().sod(),"days",!0),b=this.lang().calendar,c=b.sameElse,a=-6>a?c:-1>a?b.lastWeek:0>a?b.lastDay:1>a?b.sameDay:2>a?b.nextDay:7>a?b.nextWeek:c;return this.format("function"===typeof a?a.apply(this):a)},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<s([this.year()]).zone()||this.zone()<s([this.year(),5]).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==
a?b:this.add({d:a-b})},startOf:function(a){switch(a.replace(/s$/,"")){case "year":this.month(0);case "month":this.date(1);case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}return this},endOf:function(a){return this.startOf(a).add(a.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},
daysInMonth:function(){return s.utc([this.year(),this.month()+1,0]).date()},lang:function(a){if(a===b)return n(this);this._lang=a;return this}};for(G=0;G<fa.length;G++)v(fa[G].toLowerCase(),fa[G]);v("year","FullYear");s.duration.fn=d.prototype={weeks:function(){return e(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+2592E6*this._months},humanize:function(a){var b=+this,c=this.lang().relativeTime,d;d=!a;var e=this.lang(),f=E(Math.abs(b)/1E3),g=E(f/60),h=E(g/60),j=E(h/
24),n=E(j/365),f=45>f&&["s",f]||1===g&&["m"]||45>g&&["mm",g]||1===h&&["h"]||22>h&&["hh",h]||1===j&&["d"]||25>=j&&["dd",j]||45>=j&&["M"]||345>j&&["MM",E(j/30)]||1===n&&["y"]||["yy",n];f[2]=d;f[3]=0<b;f[4]=e;d=w.apply({},f);a&&(d=(0>=b?c.past:c.future).replace(/%s/i,d));return d},lang:s.fn.lang};for(G in k)k.hasOwnProperty(G)&&(H(G,k[G]),D(G.toLowerCase()));H("Weeks",6048E5);A&&(module.exports=s);"undefined"===typeof ender&&(this.moment=s);"function"===typeof define&&define.amd&&define("moment",[],
function(){return s})}).call(this,Date);
(function(){var c=[function(a){return 1===a%10&&11!==a%100},function(a){return 2<=a%10&&(4>=a%10&&0===a%10%1)&&(12>a%100||14<a%100)},function(a){return 0===a%10||5<=a%10&&9>=a%10&&0===a%10%1||11<=a%100&&14>=a%100&&0===a%100%1},function(){return!0}],b=function(a,b,e){if("m"===e)return b?"\u043c\u0438\u043d\u0443\u0442\u0430":"\u043c\u0438\u043d\u0443\u0442\u0443";b=a+" ";a:{a=+a;e={mm:"\u043c\u0438\u043d\u0443\u0442\u0430_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442_\u043c\u0438\u043d\u0443\u0442\u044b",hh:"\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043e\u0432_\u0447\u0430\u0441\u0430",
dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u044f_\u0434\u043d\u0435\u0439_\u0434\u043d\u044f",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u0430_\u043c\u0435\u0441\u044f\u0446\u0435\u0432_\u043c\u0435\u0441\u044f\u0446\u0430",yy:"\u0433\u043e\u0434_\u0433\u043e\u0434\u0430_\u043b\u0435\u0442_\u0433\u043e\u0434\u0430"}[e].split("_");for(var f=Math.min(c.length,e.length),h=-1;++h<f;)if(c[h](a)){a=e[h];break a}a=e[f-1]}return b+a},b={months:function(a,b){return{nominative:"\u044f\u043d\u0432\u0430\u0440\u044c \u0444\u0435\u0432\u0440\u0430\u043b\u044c \u043c\u0430\u0440\u0442 \u0430\u043f\u0440\u0435\u043b\u044c \u043c\u0430\u0439 \u0438\u044e\u043d\u044c \u0438\u044e\u043b\u044c \u0430\u0432\u0433\u0443\u0441\u0442 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u043e\u043a\u0442\u044f\u0431\u0440\u044c \u043d\u043e\u044f\u0431\u0440\u044c \u0434\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),
accusative:"\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f".split(" ")}[/D[oD]? *MMMM?/.test(b)?"accusative":"nominative"][a.month()]},
monthsShort:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" "),weekdays:function(a,b){return{nominative:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),
accusative:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0443 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0443 \u0441\u0443\u0431\u0431\u043e\u0442\u0443".split(" ")}[/\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e)? ?\] ?dddd/.test(b)?
"accusative":"nominative"][a.day()]},weekdaysShort:"\u0432\u0441\u043a \u043f\u043d\u0434 \u0432\u0442\u0440 \u0441\u0440\u0434 \u0447\u0442\u0432 \u043f\u0442\u043d \u0441\u0431\u0442".split(" "),weekdaysMin:"\u0432\u0441 \u043f\u043d \u0432\u0442 \u0441\u0440 \u0447\u0442 \u043f\u0442 \u0441\u0431".split(" "),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., LT",LLLL:"dddd, D MMMM YYYY \u0433., LT"},calendar:{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432] LT",
nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430 \u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432] LT",nextWeek:function(){return 2===this.day()?"[\u0412\u043e] dddd [\u0432] LT":"[\u0412] dddd [\u0432] LT"},lastWeek:function(){switch(this.day()){case 0:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u043e\u0435] dddd [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u044b\u0439] dddd [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u0443\u044e] dddd [\u0432] LT"}},
sameElse:"L"},relativeTime:{future:"\u0447\u0435\u0440\u0435\u0437 %s",past:"%s \u043d\u0430\u0437\u0430\u0434",s:"\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434",m:b,mm:b,h:"\u0447\u0430\u0441",hh:b,d:"\u0434\u0435\u043d\u044c",dd:b,M:"\u043c\u0435\u0441\u044f\u0446",MM:b,y:"\u0433\u043e\u0434",yy:b},ordinal:function(){return"."}};"undefined"!==typeof module&&module.exports&&(module.exports=b);"undefined"!==typeof window&&(this.moment&&this.moment.lang)&&
this.moment.lang("ru",b)})();
(function(c){function b(a){var b=a||window.event,d=[].slice.call(arguments,1),j=0,m=0,p=0;a=c.event.fix(b);a.type="mousewheel";b.wheelDelta&&(j=b.wheelDelta/120);b.detail&&(j=-b.detail/3);p=j;void 0!==b.axis&&b.axis===b.HORIZONTAL_AXIS&&(p=0,m=-1*j);void 0!==b.wheelDeltaY&&(p=b.wheelDeltaY/120);void 0!==b.wheelDeltaX&&(m=-1*b.wheelDeltaX/120);d.unshift(a,j,m,p);return(c.event.dispatch||c.event.handle).apply(this,d)}var a=["DOMMouseScroll","mousewheel"];if(c.event.fixHooks)for(var d=a.length;d;)c.event.fixHooks[a[--d]]=
c.event.mouseHooks;c.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var c=a.length;c;)this.addEventListener(a[--c],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var c=a.length;c;)this.removeEventListener(a[--c],b,!1);else this.onmousewheel=null}};c.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
(function(c,b,a){c.fn.jScrollPane=function(d){function e(d,e){function j(e){var h,k,ea,xa,Ha,W=!1,va=!1;C=e;if(A===a)xa=d.scrollTop(),Ha=d.scrollLeft(),d.css({overflow:"hidden",padding:0}),I=d.innerWidth()+na,K=d.innerHeight(),d.width(I),A=c('<div class="jspPane" />').css("padding",da).append(d.children()),L=c('<div class="jspContainer" />').css({width:I+"px",height:K+"px"}).append(A).appendTo(d);else{d.css("width","");if(W=C.stickToBottom)W=N-K,W=20<W&&10>W-E();if(va=C.stickToRight)va=R-I,va=20<
va&&10>va-s();if(ea=d.innerWidth()+na!=I||d.outerHeight()!=K)I=d.innerWidth()+na,K=d.innerHeight(),L.css({width:I+"px",height:K+"px"});if(!ea&&Da==R&&A.outerHeight()==N){d.width(I);return}Da=R;A.css("width","");d.width(I);L.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}A.css("overflow","auto");R=e.contentWidth?e.contentWidth:A[0].scrollWidth;N=A[0].scrollHeight;A.css("overflow","");Q=R/I;J=N/K;O=1<J;T=1<Q;if(!T&&!O)d.removeClass("jspScrollable"),A.css({top:0,width:L.width()-na}),L.unbind(Fa),
A.find(":input,a").unbind("focus.jsp"),d.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),q();else{d.addClass("jspScrollable");if(e=C.maintainPosition&&(Z||ba))h=s(),k=E();O&&(L.append(c('<div class="jspVerticalBar" />').append(c('<div class="jspCap jspCapTop" />'),c('<div class="jspTrack" />').append(c('<div class="jspDrag" />').append(c('<div class="jspDragTop" />'),c('<div class="jspDragBottom" />'))),c('<div class="jspCap jspCapBottom" />'))),oa=L.find(">.jspVerticalBar"),
fa=oa.find(">.jspTrack"),ha=fa.find(">.jspDrag"),C.showArrows&&(M=c('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",n(0,-1)).bind("click.jsp",G),P=c('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",n(0,1)).bind("click.jsp",G),C.arrowScrollOnHover&&(M.bind("mouseover.jsp",n(0,-1,M)),P.bind("mouseover.jsp",n(0,1,P))),g(fa,C.verticalArrowPositions,M,P)),U=K,L.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){U-=c(this).outerHeight()}),ha.hover(function(){ha.addClass("jspHover")},
function(){ha.removeClass("jspHover")}).bind("mousedown.jsp",function(a){c("html").bind("dragstart.jsp selectstart.jsp",G);ha.addClass("jspActive");var b=a.pageY-ha.position().top;c("html").bind("mousemove.jsp",function(a){r(a.pageY-b,!1)}).bind("mouseup.jsp mouseleave.jsp",u);return!1}),m());T&&(L.append(c('<div class="jspHorizontalBar" />').append(c('<div class="jspCap jspCapLeft" />'),c('<div class="jspTrack" />').append(c('<div class="jspDrag" />').append(c('<div class="jspDragLeft" />'),c('<div class="jspDragRight" />'))),
c('<div class="jspCap jspCapRight" />'))),V=L.find(">.jspHorizontalBar"),S=V.find(">.jspTrack"),aa=S.find(">.jspDrag"),C.showArrows&&(za=c('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",n(-1,0)).bind("click.jsp",G),sa=c('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",n(1,0)).bind("click.jsp",G),C.arrowScrollOnHover&&(za.bind("mouseover.jsp",n(-1,0,za)),sa.bind("mouseover.jsp",n(1,0,sa))),g(S,C.horizontalArrowPositions,za,sa)),aa.hover(function(){aa.addClass("jspHover")},
function(){aa.removeClass("jspHover")}).bind("mousedown.jsp",function(a){c("html").bind("dragstart.jsp selectstart.jsp",G);aa.addClass("jspActive");var b=a.pageX-aa.position().left;c("html").bind("mousemove.jsp",function(a){y(a.pageX-b,!1)}).bind("mouseup.jsp mouseleave.jsp",u);return!1}),ia=L.innerWidth(),p());if(T&&O){ea=S.outerHeight();var $a=fa.outerWidth();U-=ea;c(V).find(">.jspCap:visible,>.jspArrow").each(function(){ia+=c(this).outerWidth()});ia-=$a;K-=$a;I-=ea;S.parent().append(c('<div class="jspCorner" />').css("width",
ea+"px"));m();p()}T&&A.width(L.outerWidth()-na+"px");N=A.outerHeight();J=N/K;T&&(ma=Math.ceil(1/Q*ia),ma>C.horizontalDragMaxWidth?ma=C.horizontalDragMaxWidth:ma<C.horizontalDragMinWidth&&(ma=C.horizontalDragMinWidth),aa.width(ma+"px"),ja=ia-ma,w(ba));O&&(B=Math.ceil(1/J*U),B>C.verticalDragMaxHeight?B=C.verticalDragMaxHeight:B<C.verticalDragMinHeight&&(B=C.verticalDragMinHeight),ha.height(B+"px"),la=U-B,x(Z));e&&(D(va?R-I:h,!1),v(W?N-K:k,!1));A.find(":input,a").unbind("focus.jsp").bind("focus.jsp",
function(a){H(a.target,!1)});L.unbind(Fa).bind(Fa,function(a,b,c,d){a=ba;b=Z;F.scrollBy(c*C.mouseWheelSpeed,-d*C.mouseWheelSpeed,!1);return a==ba&&b==Z});var Y,ta,qa,ua,pa,Ba=!1;L.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(a){a=a.originalEvent.touches[0];Y=s();ta=E();qa=a.pageX;ua=a.pageY;pa=!1;Ba=!0}).bind("touchmove.jsp",function(a){if(Ba){a=a.originalEvent.touches[0];var b=ba,c=Z;F.scrollTo(Y+qa-a.pageX,ta+ua-a.pageY);pa=pa||5<Math.abs(qa-
a.pageX)||5<Math.abs(ua-a.pageY);return b==ba&&c==Z}}).bind("touchend.jsp",function(){Ba=!1}).bind("click.jsp-touchclick",function(){if(pa)return pa=!1});if(C.enableKeyboardNavigation){var ab=function(){var a=ba,b=Z;switch(Ea){case 40:F.scrollByY(C.keyboardSpeed,!1);break;case 38:F.scrollByY(-C.keyboardSpeed,!1);break;case 34:case 32:F.scrollByY(K*C.scrollPagePercent,!1);break;case 33:F.scrollByY(-K*C.scrollPagePercent,!1);break;case 39:F.scrollByX(C.keyboardSpeed,!1);break;case 37:F.scrollByX(-C.keyboardSpeed,
!1)}return Ta=a!=ba||b!=Z},Ea,Ta,Ua=[];T&&Ua.push(V[0]);O&&Ua.push(oa[0]);A.focus(function(){d.focus()});d.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(a){if(!(a.target!==this&&(!Ua.length||!c(a.target).closest(Ua).length))){var b=ba,d=Z;switch(a.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:Ea=a.keyCode;ab();break;case 35:v(N-K);Ea=null;break;case 36:v(0),Ea=null}Ta=a.keyCode==Ea&&b!=ba||d!=Z;return!Ta}}).bind("keypress.jsp",function(a){a.keyCode==
Ea&&ab();return!Ta});C.hideFocus?(d.css("outline","none"),"hideFocus"in L[0]&&d.attr("hideFocus",!0)):(d.css("outline",""),"hideFocus"in L[0]&&d.attr("hideFocus",!1))}C.clickOnTrack&&(q(),O&&fa.bind("mousedown.jsp",function(b){if(b.originalTarget===a||b.originalTarget==b.currentTarget){var d=c(this),e=d.offset(),f=b.pageY-e.top-Z,g,h=!0,j=function(){var a=d.offset(),a=b.pageY-a.top-B/2,c=K*C.scrollPagePercent,e=la*c/(N-K);if(0>f)Z-e>a?F.scrollByY(-c):r(a);else if(0<f)Z+e<a?F.scrollByY(c):r(a);else{n();
return}g=setTimeout(j,h?C.initialDelay:C.trackClickRepeatFreq);h=!1},n=function(){g&&clearTimeout(g);g=null;c(document).unbind("mouseup.jsp",n)};j();c(document).bind("mouseup.jsp",n);return!1}}),T&&S.bind("mousedown.jsp",function(b){if(b.originalTarget===a||b.originalTarget==b.currentTarget){var d=c(this),e=d.offset(),f=b.pageX-e.left-ba,g,h=!0,j=function(){var a=d.offset(),a=b.pageX-a.left-ma/2,c=I*C.scrollPagePercent,e=ja*c/(R-I);if(0>f)ba-e>a?F.scrollByX(-c):y(a);else if(0<f)ba+e<a?F.scrollByX(c):
y(a);else{n();return}g=setTimeout(j,h?C.initialDelay:C.trackClickRepeatFreq);h=!1},n=function(){g&&clearTimeout(g);g=null;c(document).unbind("mouseup.jsp",n)};j();c(document).bind("mouseup.jsp",n);return!1}}));a:if(location.hash&&1<location.hash.length){var Va,kb;h=escape(location.hash.substr(1));try{Va=c("#"+h+', a[name="'+h+'"]')}catch(Bb){break a}Va.length&&A.find(h)&&(0===L.scrollTop()?kb=setInterval(function(){0<L.scrollTop()&&(H(Va,!0),c(document).scrollTop(L.position().top),clearInterval(kb))},
50):(H(Va,!0),c(document).scrollTop(L.position().top)))}C.hijackInternalLinks&&(c(document.body).data("jspHijack")||(c(document.body).data("jspHijack",!0),c(document.body).delegate("a[href*=#]","click",function(a){var d=this.href.substr(0,this.href.indexOf("#")),e=location.href,f;-1!==location.href.indexOf("#")&&(e=location.href.substr(0,location.href.indexOf("#")));if(d===e){d=escape(this.href.substr(this.href.indexOf("#")+1));f;try{f=c("#"+d+', a[name="'+d+'"]')}catch(g){return}f.length&&(d=f.closest(".jspScrollable"),
e=d.data("jsp"),e.scrollToElement(f,!0),d[0].scrollIntoView&&(e=c(b).scrollTop(),f=f.offset().top,(f<e||f>e+c(b).height())&&d[0].scrollIntoView()),a.preventDefault())}})))}C.autoReinitialise&&!Aa?Aa=setInterval(function(){j(C)},C.autoReinitialiseDelay):!C.autoReinitialise&&Aa&&clearInterval(Aa);xa&&d.scrollTop(0)&&v(xa,!1);Ha&&d.scrollLeft(0)&&D(Ha,!1);d.trigger("jsp-initialised",[T||O])}function m(){fa.height(U+"px");Z=0;k=C.verticalGutter+fa.outerWidth();A.width(I-na);try{0===oa.position().left&&
A.css("margin-left",k+"px")}catch(a){}}function p(){L.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ia-=c(this).outerWidth()});S.width(ia+"px");ba=0}function g(a,b,c,d){var e="before",f="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split");b==e?f=b:b==f&&(e=b,b=c,c=d,d=b);a[e](c)[f](d)}function n(a,b,d){return function(){var e=this,f=d,e=c(e).addClass("jspActive"),g,h,j=!0,n=function(){0!==a&&F.scrollByX(a*C.arrowButtonSpeed);0!==b&&F.scrollByY(b*
C.arrowButtonSpeed);h=setTimeout(n,j?C.initialDelay:C.arrowRepeatFreq);j=!1};n();g=f?"mouseout.jsp":"mouseup.jsp";f=f||c("html");f.bind(g,function(){e.removeClass("jspActive");h&&clearTimeout(h);h=null;f.unbind(g)});this.blur();return!1}}function q(){S&&S.unbind("mousedown.jsp");fa&&fa.unbind("mousedown.jsp")}function u(){c("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");ha&&ha.removeClass("jspActive");aa&&aa.removeClass("jspActive")}function r(b,c){O&&(0>
b?b=0:b>la&&(b=la),c===a&&(c=C.animateScroll),c?F.animate(ha,"top",b,x):(ha.css("top",b),x(b)))}function x(b){b===a&&(b=ha.position().top);L.scrollTop(0);Z=b;var c=0===Z,e=Z==la;b=-(b/la)*(N-K);if(ta!=c||Ba!=e)ta=c,Ba=e,d.trigger("jsp-arrow-change",[ta,Ba,qa,ua]);C.showArrows&&(M[c?"addClass":"removeClass"]("jspDisabled"),P[e?"addClass":"removeClass"]("jspDisabled"));A.css("top",b);d.trigger("jsp-scroll-y",[-b,c,e]).trigger("scroll")}function y(b,c){T&&(0>b?b=0:b>ja&&(b=ja),c===a&&(c=C.animateScroll),
c?F.animate(aa,"left",b,w):(aa.css("left",b),w(b)))}function w(b){b===a&&(b=aa.position().left);L.scrollTop(0);ba=b;var c=0===ba,e=ba==ja;b=-(b/ja)*(R-I);if(qa!=c||ua!=e)qa=c,ua=e,d.trigger("jsp-arrow-change",[ta,Ba,qa,ua]);C.showArrows&&(za[c?"addClass":"removeClass"]("jspDisabled"),sa[e?"addClass":"removeClass"]("jspDisabled"));A.css("left",b);d.trigger("jsp-scroll-x",[-b,c,e]).trigger("scroll")}function v(a,b){r(a/(N-K)*la,b)}function D(a,b){y(a/(R-I)*ja,b)}function H(a,b,d){var e,f,g=0,h=0,j,
n,k;try{e=c(a)}catch(m){return}f=e.outerHeight();a=e.outerWidth();L.scrollTop(0);for(L.scrollLeft(0);!e.is(".jspPane");)if(g+=e.position().top,h+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;e=E();j=e+K;g<e||b?n=g-C.verticalGutter:g+f>j&&(n=g-K+f+C.verticalGutter);n&&v(n,d);g=s();n=g+I;h<g||b?k=h-C.horizontalGutter:h+a>n&&(k=h-I+a+C.horizontalGutter);k&&D(k,d)}function s(){return-A.position().left}function E(){return-A.position().top}function G(){return!1}var C,F=
this,A,I,K,L,R,N,Q,J,O,T,ha,la,Z,aa,ja,ba,oa,fa,k,U,B,M,P,V,S,ia,ma,za,sa,Aa,da,na,Da,ta=!0,qa=!0,Ba=!1,ua=!1,W=d.clone(!1,!1).empty(),Fa=c.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";da=d.css("paddingTop")+" "+d.css("paddingRight")+" "+d.css("paddingBottom")+" "+d.css("paddingLeft");na=(parseInt(d.css("paddingLeft"),10)||0)+(parseInt(d.css("paddingRight"),10)||0);c.extend(F,{reinitialise:function(a){a=c.extend({},C,a);j(a)},scrollToElement:function(a,b,c){H(a,b,c)},scrollTo:function(a,b,
c){D(a,c);v(b,c)},scrollToX:function(a,b){D(a,b)},scrollToY:function(a,b){v(a,b)},scrollToPercentX:function(a,b){D(a*(R-I),b)},scrollToPercentY:function(a,b){v(a*(N-K),b)},scrollBy:function(a,b,c){F.scrollByX(a,c);F.scrollByY(b,c)},scrollByX:function(a,b){var c=(s()+Math[0>a?"floor":"ceil"](a))/(R-I);y(c*ja,b)},scrollByY:function(a,b){var c=(E()+Math[0>a?"floor":"ceil"](a))/(N-K);r(c*la,b)},positionDragX:function(a,b){y(a,b)},positionDragY:function(a,b){r(a,b)},animate:function(a,b,c,d){var e={};
e[b]=c;a.animate(e,{duration:C.animateDuration,easing:C.animateEase,queue:!1,step:d})},getContentPositionX:function(){return s()},getContentPositionY:function(){return E()},getContentWidth:function(){return R},getContentHeight:function(){return N},getPercentScrolledX:function(){return s()/(R-I)},getPercentScrolledY:function(){return E()/(N-K)},getIsScrollableH:function(){return T},getIsScrollableV:function(){return O},getContentPane:function(){return A},scrollToBottom:function(a){r(la,a)},hijackInternalLinks:c.noop,
destroy:function(){var a=E(),b=s();d.removeClass("jspScrollable").unbind(".jsp");d.replaceWith(W.append(A.children()));W.scrollTop(a);W.scrollLeft(b);Aa&&clearInterval(Aa)}});j(e)}d=c.extend({},c.fn.jScrollPane.defaults,d);c.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){d[this]=d[this]||d.speed});return this.each(function(){var a=c(this),b=a.data("jsp");b?b.reinitialise(d):(c("script",a).filter('[type="text/javascript"],:not([type])').remove(),b=new e(a,
d),a.data("jsp",b))})};c.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:a,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,
trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);
(function(){function c(a){return function(b){this[a]=b}}function b(a){return function(){return this[a]}}function a(b,c,d){this.extend(a,google.maps.OverlayView);this.c=b;this.a=[];this.f=[];this.ca=[53,56,66,78,90];this.j=[];this.A=!1;d=d||{};this.g=d.gridSize||60;this.l=d.minimumClusterSize||2;this.J=d.maxZoom||q;this.j=d.styles||[];this.X=d.imagePath||this.Q;this.W=d.imageExtension||this.P;this.O=!0;void 0!=d.zoomOnClick&&(this.O=d.zoomOnClick);this.r=!1;void 0!=d.averageCenter&&(this.r=d.averageCenter);
if(!this.j.length){d=0;for(var e;e=this.ca[d];d++)this.j.push({url:this.X+(d+1)+"."+this.W,height:e,width:e})}this.setMap(b);this.K=this.c.getZoom();var f=this;google.maps.event.addListener(this.c,"zoom_changed",function(){var a=f.c.getZoom();f.K!=a&&(f.K=a,f.m())});google.maps.event.addListener(this.c,"idle",function(){f.i()});c&&c.length&&this.C(c,!1)}function d(a,b){b.s=!1;b.draggable&&google.maps.event.addListener(b,"dragend",function(){b.s=!1;a.L()});a.a.push(b)}function e(a,b){var c=-1;if(a.a.indexOf)c=
a.a.indexOf(b);else for(var d=0,e;e=a.a[d];d++)if(e==b){c=d;break}if(-1==c)return!1;b.setMap(q);a.a.splice(c,1);return!0}function f(a){if(a.A)for(var b=a.v(new google.maps.LatLngBounds(a.c.getBounds().getSouthWest(),a.c.getBounds().getNorthEast())),c=0,d;d=a.a[c];c++)if(!d.s&&b.contains(d.getPosition())){for(var e=a,f=4E4,g=q,j=0,n=void 0;n=e.f[j];j++){var m=n.getCenter();if(m){var p=d.getPosition();if(!m||!p)m=0;else var u=(p.lat()-m.lat())*Math.PI/180,A=(p.lng()-m.lng())*Math.PI/180,m=Math.sin(u/
2)*Math.sin(u/2)+Math.cos(m.lat()*Math.PI/180)*Math.cos(p.lat()*Math.PI/180)*Math.sin(A/2)*Math.sin(A/2),m=12742*Math.atan2(Math.sqrt(m),Math.sqrt(1-m));m<f&&(f=m,g=n)}}g&&g.F.contains(d.getPosition())?g.q(d):(n=new h(e),n.q(d),e.f.push(n))}}function h(a){this.k=a;this.c=a.getMap();this.g=a.w();this.l=a.l;this.r=a.r;this.d=q;this.a=[];this.F=q;this.n=new m(this,a.z(),a.w())}function j(a){a.F=a.k.v(new google.maps.LatLngBounds(a.d,a.d))}function m(a,b,c){a.k.extend(m,google.maps.OverlayView);this.j=
b;this.fa=c||0;this.u=a;this.d=q;this.c=a.getMap();this.B=this.b=q;this.t=!1;this.setMap(this.c)}function p(a,b){var c=a.getProjection().fromLatLngToDivPixel(b);c.x-=parseInt(a.p/2,10);c.y-=parseInt(a.h/2,10);return c}function g(a){a.b&&(a.b.style.display="none");a.t=!1}function n(a,b){var c=[];c.push("background-image:url("+a.da+");");c.push("background-position:"+(a.D?a.D:"0 0")+";");"object"===typeof a.e?("number"===typeof a.e[0]&&0<a.e[0]&&a.e[0]<a.h?c.push("height:"+(a.h-a.e[0])+"px; padding-top:"+
a.e[0]+"px;"):c.push("height:"+a.h+"px; line-height:"+a.h+"px;"),"number"===typeof a.e[1]&&0<a.e[1]&&a.e[1]<a.p?c.push("width:"+(a.p-a.e[1])+"px; padding-left:"+a.e[1]+"px;"):c.push("width:"+a.p+"px; text-align:center;")):c.push("height:"+a.h+"px; line-height:"+a.h+"px; width:"+a.p+"px; text-align:center;");c.push("cursor:pointer; top:"+b.y+"px; left:"+b.x+"px; color:"+(a.M?a.M:"black")+"; position:absolute; font-size:"+(a.N?a.N:11)+"px; font-family:Arial,sans-serif; font-weight:bold");return c.join("")}
var q=null,u;u=a.prototype;u.Q="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m";u.P="png";u.extend=function(a,b){return function(a){for(var b in a.prototype)this.prototype[b]=a.prototype[b];return this}.apply(a,[b])};u.onAdd=function(){this.A||(this.A=!0,f(this))};u.draw=function(){};u.S=function(){for(var a=this.o(),b=new google.maps.LatLngBounds,c=0,d;d=a[c];c++)b.extend(d.getPosition());this.c.fitBounds(b)};u.z=b("j");u.o=b("a");u.V=function(){return this.a.length};
u.ba=c("J");u.I=b("J");u.G=function(a,b){for(var c=0,d=a.length,e=d;0!==e;)e=parseInt(e/10,10),c++;c=Math.min(c,b);return{text:d,index:c}};u.$=c("G");u.H=b("G");u.C=function(a,b){for(var c=0,e;e=a[c];c++)d(this,e);b||this.i()};u.q=function(a,b){d(this,a);b||this.i()};u.Y=function(a,b){var c=e(this,a);return!b&&c?(this.m(),this.i(),!0):!1};u.Z=function(a,b){for(var c=!1,d=0,f;f=a[d];d++)f=e(this,f),c=c||f;if(!b&&c)return this.m(),this.i(),!0};u.U=function(){return this.f.length};u.getMap=b("c");u.setMap=
c("c");u.w=b("g");u.aa=c("g");u.v=function(a){var b=this.getProjection(),c=new google.maps.LatLng(a.getNorthEast().lat(),a.getNorthEast().lng()),d=new google.maps.LatLng(a.getSouthWest().lat(),a.getSouthWest().lng()),c=b.fromLatLngToDivPixel(c);c.x+=this.g;c.y-=this.g;d=b.fromLatLngToDivPixel(d);d.x-=this.g;d.y+=this.g;c=b.fromDivPixelToLatLng(c);b=b.fromDivPixelToLatLng(d);a.extend(c);a.extend(b);return a};u.R=function(){this.m(!0);this.a=[]};u.m=function(a){for(var b=0,c;c=this.f[b];b++)c.remove();
for(b=0;c=this.a[b];b++)c.s=!1,a&&c.setMap(q);this.f=[]};u.L=function(){var a=this.f.slice();this.f.length=0;this.m();this.i();window.setTimeout(function(){for(var b=0,c;c=a[b];b++)c.remove()},0)};u.i=function(){f(this)};u=h.prototype;u.q=function(a){var b;a:if(this.a.indexOf)b=-1!=this.a.indexOf(a);else{b=0;for(var c;c=this.a[b];b++)if(c==a){b=!0;break a}b=!1}if(b)return!1;this.d?this.r&&(c=this.a.length+1,b=(this.d.lat()*(c-1)+a.getPosition().lat())/c,c=(this.d.lng()*(c-1)+a.getPosition().lng())/
c,this.d=new google.maps.LatLng(b,c),j(this)):(this.d=a.getPosition(),j(this));a.s=!0;this.a.push(a);b=this.a.length;b<this.l&&a.getMap()!=this.c&&a.setMap(this.c);if(b==this.l)for(c=0;c<b;c++)this.a[c].setMap(q);b>=this.l&&a.setMap(q);a=this.c.getZoom();if((b=this.k.I())&&a>b)for(a=0;b=this.a[a];a++)b.setMap(this.c);else this.a.length<this.l?g(this.n):(b=this.k.H()(this.a,this.k.z().length),this.n.setCenter(this.d),a=this.n,a.B=b,a.ga=b.text,a.ea=b.index,a.b&&(a.b.innerHTML=b.text),b=Math.max(0,
a.B.index-1),b=Math.min(a.j.length-1,b),b=a.j[b],a.da=b.url,a.h=b.height,a.p=b.width,a.M=b.textColor,a.e=b.anchor,a.N=b.textSize,a.D=b.backgroundPosition,this.n.show());return!0};u.getBounds=function(){for(var a=new google.maps.LatLngBounds(this.d,this.d),b=this.o(),c=0,d;d=b[c];c++)a.extend(d.getPosition());return a};u.remove=function(){this.n.remove();this.a.length=0;delete this.a};u.T=function(){return this.a.length};u.o=b("a");u.getCenter=b("d");u.getMap=b("c");u=m.prototype;u.onAdd=function(){this.b=
document.createElement("DIV");this.t&&(this.b.style.cssText=n(this,p(this,this.d)),this.b.innerHTML=this.B.text);this.getPanes().overlayMouseTarget.appendChild(this.b);var a=this;google.maps.event.addDomListener(this.b,"click",function(){var b=a.u.k;google.maps.event.trigger(b,"clusterclick",a.u);b.O&&a.c.fitBounds(a.u.getBounds())})};u.draw=function(){if(this.t){var a=p(this,this.d);this.b.style.top=a.y+"px";this.b.style.left=a.x+"px"}};u.show=function(){this.b&&(this.b.style.cssText=n(this,p(this,
this.d)),this.b.style.display="");this.t=!0};u.remove=function(){this.setMap(q)};u.onRemove=function(){this.b&&this.b.parentNode&&(g(this),this.b.parentNode.removeChild(this.b),this.b=q)};u.setCenter=c("d");window.MarkerClusterer=a;a.prototype.addMarker=a.prototype.q;a.prototype.addMarkers=a.prototype.C;a.prototype.clearMarkers=a.prototype.R;a.prototype.fitMapToMarkers=a.prototype.S;a.prototype.getCalculator=a.prototype.H;a.prototype.getGridSize=a.prototype.w;a.prototype.getExtendedBounds=a.prototype.v;
a.prototype.getMap=a.prototype.getMap;a.prototype.getMarkers=a.prototype.o;a.prototype.getMaxZoom=a.prototype.I;a.prototype.getStyles=a.prototype.z;a.prototype.getTotalClusters=a.prototype.U;a.prototype.getTotalMarkers=a.prototype.V;a.prototype.redraw=a.prototype.i;a.prototype.removeMarker=a.prototype.Y;a.prototype.removeMarkers=a.prototype.Z;a.prototype.resetViewport=a.prototype.m;a.prototype.repaint=a.prototype.L;a.prototype.setCalculator=a.prototype.$;a.prototype.setGridSize=a.prototype.aa;a.prototype.setMaxZoom=
a.prototype.ba;a.prototype.onAdd=a.prototype.onAdd;a.prototype.draw=a.prototype.draw;h.prototype.getCenter=h.prototype.getCenter;h.prototype.getSize=h.prototype.T;h.prototype.getMarkers=h.prototype.o;m.prototype.onAdd=m.prototype.onAdd;m.prototype.draw=m.prototype.draw;m.prototype.onRemove=m.prototype.onRemove})();
(function(){var c=function(){this.options_index=0;this.parsed=[]};c.prototype.add_node=function(b){return"OPTGROUP"===b.nodeName.toUpperCase()?this.add_group(b):this.add_option(b)};c.prototype.add_group=function(b){var a,c,e,f,h,j;a=this.parsed.length;this.parsed.push({array_index:a,group:!0,label:b.label,children:0,disabled:b.disabled});h=b.childNodes;j=[];e=0;for(f=h.length;e<f;e++)c=h[e],j.push(this.add_option(c,a,b.disabled));return j};c.prototype.add_option=function(b,a,c){if("OPTION"===b.nodeName.toUpperCase())return""!==
b.text?(null!=a&&(this.parsed[a].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:b.value,text:b.text,html:b.innerHTML,selected:b.selected,disabled:!0===c?c:b.disabled,group_array_index:a,classes:b.className,style:b.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1};c.select_to_array=function(b){var a,d,e,f;a=new c;f=b.childNodes;d=0;for(e=f.length;d<e;d++)b=f[d],a.add_node(b);
return a.parsed};this.SelectParser=c}).call(this);
(function(){var c=function(b,a){this.form_field=b;this.options=null!=a?a:{};this.set_default_values();this.is_multiple=this.form_field.multiple;this.set_default_text();this.setup();this.set_up_html();this.register_observers();this.finish_setup()};c.prototype.set_default_values=function(){var b=this;this.click_test_action=function(a){return b.test_active_click(a)};this.activate_action=function(a){return b.activate_field(a)};this.results_showing=this.mouse_on_container=this.active_field=!1;this.result_single_selected=
this.result_highlighted=null;this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||!1;this.search_contains=this.options.search_contains||!1;this.choices=0;this.single_backstroke_delete=this.options.single_backstroke_delete||!1;return this.max_selected_options=
this.options.max_selected_options||Infinity};c.prototype.set_default_text=function(){this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option";return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||
"No results match"};c.prototype.mouse_enter=function(){return this.mouse_on_container=!0};c.prototype.mouse_leave=function(){return this.mouse_on_container=!1};c.prototype.input_focus=function(){var b=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()};c.prototype.input_blur=function(){var b=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return b.blur_test()},
100)};c.prototype.result_add_option=function(b){var a,c;if(b.disabled)return"";b.dom_id=this.container_id+"_o_"+b.array_index;a=b.selected&&this.is_multiple?[]:["active-result"];b.selected&&a.push("result-selected");null!=b.group_array_index&&a.push("group-option");""!==b.classes&&a.push(b.classes);c=""!==b.style.cssText?' style="'+b.style+'"':"";return'<li id="'+b.dom_id+'" class="'+a.join(" ")+'"'+c+">"+b.html+"</li>"};c.prototype.results_update_field=function(){this.is_multiple||this.results_reset_cleanup();
this.result_clear_highlight();this.result_single_selected=null;return this.results_build()};c.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()};c.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()};c.prototype.keyup_checker=function(b){var a,c;a=null!=(c=b.which)?c:b.keyCode;this.search_field_scale();switch(a){case 8:if(this.is_multiple&&1>this.backstroke_length&&0<this.choices)return this.keydown_backstroke();
if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:b.preventDefault();if(this.results_showing)return this.result_select(b);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};c.prototype.generate_field_id=function(){var b;b=this.generate_random_id();return this.form_field.id=b};c.prototype.generate_random_char=function(){var b;b=Math.floor(36*
Math.random());return"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(b,b+1)};this.AbstractChosen=c}).call(this);
(function(){var c,b,a,d,e=Object.prototype.hasOwnProperty;d=this;c=jQuery;c.fn.extend({chosen:function(a){return c.browser.msie&&("6.0"===c.browser.version||"7.0"===c.browser.version&&7===document.documentMode)?this:this.each(function(){var d;d=c(this);if(!d.hasClass("chzn-done"))return d.data("chosen",new b(this,a))})}});var f=function(){f.__super__.constructor.apply(this,arguments)},h=f,j=AbstractChosen,m=function(){this.constructor=h},p;for(p in j)e.call(j,p)&&(h[p]=j[p]);m.prototype=j.prototype;
h.prototype=new m;h.__super__=j.prototype;f.prototype.setup=function(){this.form_field_jq=c(this.form_field);this.current_value=this.form_field_jq.val();return this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")};f.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")};f.prototype.set_up_html=function(){var b;this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id();this.container_id+="_chzn";this.f_width=this.form_field_jq.outerWidth();
b=c("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"});this.is_multiple?b.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):b.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>'+this.default_text+
'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off"  /></div><ul class="chzn-results"></ul></div>');this.form_field_jq.hide().after(b);this.container=c("#"+this.container_id);this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single"));this.dropdown=this.container.find("div.chzn-drop").first();b=this.container.height();a(this.dropdown);this.dropdown.css({width:"175px",top:b+"px"});this.search_field=
this.container.find("input").first();this.search_results=this.container.find("ul.chzn-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),b=175-a(this.search_container)-
a(this.search_field),this.search_field.css({width:b+"px"}));this.results_build();this.set_tab_index();return this.form_field_jq.trigger("liszt:ready",{chosen:this})};f.prototype.register_observers=function(){var a=this;this.container.mousedown(function(b){return a.container_mousedown(b)});this.container.mouseup(function(b){return a.container_mouseup(b)});this.container.mouseenter(function(b){return a.mouse_enter(b)});this.container.mouseleave(function(b){return a.mouse_leave(b)});this.search_results.mouseup(function(b){return a.search_results_mouseup(b)});
this.search_results.mouseover(function(b){return a.search_results_mouseover(b)});this.search_results.mouseout(function(b){return a.search_results_mouseout(b)});this.form_field_jq.bind("liszt:updated",function(b){return a.results_update_field(b)});this.form_field_jq.bind("liszt:activate",function(b){return a.activate_field(b)});this.form_field_jq.bind("liszt:open",function(b){return a.container_mousedown(b)});this.search_field.blur(function(b){return a.input_blur(b)});this.search_field.keyup(function(b){return a.keyup_checker(b)});
this.search_field.keydown(function(b){return a.keydown_checker(b)});this.search_field.focus(function(b){return a.input_focus(b)});return this.is_multiple?this.search_choices.click(function(b){return a.choices_click(b)}):this.container.click(function(a){return a.preventDefault()})};f.prototype.search_field_disabled=function(){if(this.is_disabled=this.form_field_jq[0].disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",
this.activate_action),this.close_field();this.container.removeClass("chzn-disabled");this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)};f.prototype.container_mousedown=function(a){var b;if(!this.is_disabled){b=null!=a?c(a.target).hasClass("search-choice-close"):!1;a&&("mousedown"===a.type&&!this.results_showing)&&a.stopPropagation();if(!this.pending_destroy_click&&!b){if(this.active_field){if(!this.is_multiple&&a&&(c(a.target)[0]===
this.selected_item[0]||c(a.target).parents("a.chzn-single").length))a.preventDefault(),this.results_toggle()}else this.is_multiple&&this.search_field.val(""),c(document).click(this.click_test_action),this.results_show();return this.activate_field()}return this.pending_destroy_click=!1}};f.prototype.container_mouseup=function(a){if("ABBR"===a.target.nodeName&&!this.is_disabled)return this.results_reset(a)};f.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()};
f.prototype.close_field=function(){c(document).unbind("click",this.click_test_action);this.active_field=!1;this.results_hide();this.container.removeClass("chzn-container-active");this.winnow_results_clear();this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};f.prototype.activate_field=function(){this.container.addClass("chzn-container-active");this.active_field=!0;this.search_field.val(this.search_field.val());return this.search_field.focus()};f.prototype.test_active_click=
function(a){return c(a.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()};f.prototype.results_build=function(){var a,b,c,e,f;this.parsing=!0;this.results_data=d.SelectParser.select_to_array(this.form_field);this.is_multiple&&0<this.choices?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?
this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch"));a="";f=this.results_data;c=0;for(e=f.length;c<e;c++)b=f[c],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()));this.search_field_disabled();
this.show_search_field_default();this.search_field_scale();this.search_results.html(a);return this.parsing=!1};f.prototype.result_add_group=function(a){if(a.disabled)return"";a.dom_id=this.container_id+"_g_"+a.array_index;return'<li id="'+a.dom_id+'" class="group-result">'+c("<div />").text(a.label).html()+"</li>"};f.prototype.result_do_highlight=function(a){var b,c,d,e;if(a.length){this.result_clear_highlight();this.result_highlight=a;this.result_highlight.addClass("highlighted");c=parseInt(this.search_results.css("maxHeight"),
10);e=this.search_results.scrollTop();d=c+e;b=this.result_highlight.position().top+this.search_results.scrollTop();a=b+this.result_highlight.outerHeight();if(a>=d)return this.search_results.scrollTop(0<a-c?a-c:0);if(b<e)return this.search_results.scrollTop(b)}};f.prototype.result_clear_highlight=function(){this.result_highlight&&this.result_highlight.removeClass("highlighted");return this.result_highlight=null};f.prototype.results_show=function(){var a;if(this.is_multiple){if(this.max_selected_options<=
this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);a=this.is_multiple?this.container.height():this.container.height()-1;this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this});this.dropdown.css({top:a+"px",left:0});this.results_showing=!0;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};
f.prototype.results_hide=function(){this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop");this.result_clear_highlight();this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this});this.dropdown.css({left:"-9000px"});return this.results_showing=!1};f.prototype.set_tab_index=function(){var a;if(this.form_field_jq.attr("tabindex"))return a=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.search_field.attr("tabindex",a)};f.prototype.show_search_field_default=
function(){if(this.is_multiple&&1>this.choices&&!this.active_field)return this.search_field.val(this.default_text),this.search_field.addClass("default");this.search_field.val("");return this.search_field.removeClass("default")};f.prototype.search_results_mouseup=function(a){var b;b=c(a.target).hasClass("active-result")?c(a.target):c(a.target).parents(".active-result").first();if(b.length)return this.result_highlight=b,this.result_select(a),this.search_field.focus()};f.prototype.search_results_mouseover=
function(a){if(a=c(a.target).hasClass("active-result")?c(a.target):c(a.target).parents(".active-result").first())return this.result_do_highlight(a)};f.prototype.search_results_mouseout=function(a){if(c(a.target).hasClass("active-result"))return this.result_clear_highlight()};f.prototype.choices_click=function(a){a.preventDefault();if(this.active_field&&!c(a.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()};f.prototype.choice_build=function(a){var b,d=this;if(this.is_multiple&&
this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;b=this.container_id+"_c_"+a.array_index;this.choices+=1;this.search_container.before(a.disabled?'<li class="search-choice search-choice-disabled" id="'+b+'"><span>'+a.html+"</span></li>":'<li class="search-choice" id="'+b+'"><span>'+a.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+a.array_index+'"></a></li>');return c("#"+b).find("a").first().click(function(a){return d.choice_destroy_link_click(a)})};
f.prototype.choice_destroy_link_click=function(a){a.preventDefault();if(this.is_disabled)return a.stopPropagation;this.pending_destroy_click=!0;return this.choice_destroy(c(a.target))};f.prototype.choice_destroy=function(a){if(this.result_deselect(a.attr("rel")))return this.choices-=1,this.show_search_field_default(),this.is_multiple&&(0<this.choices&&1>this.search_field.val().length)&&this.results_hide(),a.parents("li").first().remove()};f.prototype.results_reset=function(){this.form_field.options[0].selected=
!0;this.selected_item.find("span").text(this.default_text);this.is_multiple||this.selected_item.addClass("chzn-default");this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()};f.prototype.results_reset_cleanup=function(){this.current_value=this.form_field_jq.val();return this.selected_item.find("abbr").remove()};f.prototype.result_select=function(a){var b,c;if(this.result_highlight)return b=this.result_highlight,
c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),b=c.substr(c.lastIndexOf("_")+1),b=this.results_data[b],b.selected=!0,this.form_field.options[b.options_index].selected=!0,this.is_multiple?this.choice_build(b):(this.selected_item.find("span").first().text(b.text),this.allow_single_deselect&&
this.single_deselect_control_build()),(!a.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[b.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()};f.prototype.result_activate=function(a){return a.addClass("active-result")};f.prototype.result_deactivate=function(a){return a.removeClass("active-result")};
f.prototype.result_deselect=function(a){var b;b=this.results_data[a];if(this.form_field.options[b.options_index].disabled)return!1;b.selected=!1;this.form_field.options[b.options_index].selected=!1;c("#"+this.container_id+"_o_"+a).removeClass("result-selected").addClass("active-result").show();this.result_clear_highlight();this.winnow_results();this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value});this.search_field_scale();return!0};f.prototype.single_deselect_control_build=
function(){if(this.allow_single_deselect&&1>this.selected_item.find("abbr").length)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')};f.prototype.winnow_results=function(){var a,b,d,e,f,h,j,m,p,D,H,s,E,G,C;this.no_results_clear();m=0;p=this.search_field.val()===this.default_text?"":c("<div/>").text(c.trim(this.search_field.val())).html();f=RegExp((this.search_contains?"":"^")+p.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i");D=RegExp(p.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,
"\\$&"),"i");C=this.results_data;H=0;for(E=C.length;H<E;H++)if(b=C[H],!b.disabled&&!b.empty)if(b.group)c("#"+b.dom_id).css("display","none");else if(!this.is_multiple||!b.selected){a=!1;j=b.dom_id;h=c("#"+j);if(f.test(b.html))a=!0,m+=1;else if(0<=b.html.indexOf(" ")||0===b.html.indexOf("["))if(e=b.html.replace(/\[|\]/g,"").split(" "),e.length){s=0;for(G=e.length;s<G;s++)d=e[s],f.test(d)&&(a=!0,m+=1)}a?(p.length?(a=b.html.search(D),d=b.html.substr(0,a+p.length)+"</em>"+b.html.substr(a+p.length),d=
d.substr(0,a)+"<em>"+d.substr(a)):d=b.html,h.html(d),this.result_activate(h),null!=b.group_array_index&&c("#"+this.results_data[b.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&j===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(h))}return 1>m&&p.length?this.no_results(p):this.winnow_results_set_highlight()};f.prototype.winnow_results_clear=function(){var a,b,d,e,f;this.search_field.val("");b=this.search_results.find("li");f=[];
d=0;for(e=b.length;d<e;d++)a=b[d],a=c(a),a.hasClass("group-result")?f.push(a.css("display","auto")):!this.is_multiple||!a.hasClass("result-selected")?f.push(this.result_activate(a)):f.push(void 0);return f};f.prototype.winnow_results_set_highlight=function(){var a;if(!this.result_highlight&&(a=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[],a=a.length?a.first():this.search_results.find(".active-result").first(),null!=a))return this.result_do_highlight(a)};f.prototype.no_results=
function(a){var b;b=c('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');b.find("span").first().html(a);return this.search_results.append(b)};f.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};f.prototype.keydown_arrow=function(){var a;this.result_highlight?this.results_showing&&(a=this.result_highlight.nextAll("li.active-result").first())&&this.result_do_highlight(a):(a=this.search_results.find("li.active-result").first())&&this.result_do_highlight(c(a));
if(!this.results_showing)return this.results_show()};f.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight){a=this.result_highlight.prevAll("li.active-result");if(a.length)return this.result_do_highlight(a.first());0<this.choices&&this.results_hide();return this.result_clear_highlight()}};f.prototype.keydown_backstroke=function(){var a;if(this.pending_backstroke)return this.choice_destroy(this.pending_backstroke.find("a").first()),
this.clear_backstroke();a=this.search_container.siblings("li.search-choice").last();if(a.length&&!a.hasClass("search-choice-disabled"))return this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")};f.prototype.clear_backstroke=function(){this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus");return this.pending_backstroke=null};f.prototype.keydown_checker=function(a){var b,c;b=null!=(c=
a.which)?c:a.keyCode;this.search_field_scale();8!==b&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a);this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault();this.keyup_arrow();break;case 40:this.keydown_arrow()}};f.prototype.search_field_scale=function(){var a,b,d,e,f;if(this.is_multiple){b="position:absolute; left: -1000px; top: -1000px; display:none;";
d="font-size font-style font-weight font-family line-height text-transform letter-spacing".split(" ");e=0;for(f=d.length;e<f;e++)a=d[e],b+=a+":"+this.search_field.css(a)+";";a=c("<div />",{style:b});a.text(this.search_field.val());c("body").append(a);b=a.width()+25;a.remove();b>this.f_width-10&&(b=this.f_width-10);this.search_field.css({width:b+"px"});a=this.container.height();return this.dropdown.css({top:a+"px"})}};f.prototype.generate_random_id=function(){var a;for(a="sel"+this.generate_random_char()+
this.generate_random_char()+this.generate_random_char();0<c("#"+a).length;)a+=this.generate_random_char();return a};b=f;a=function(a){return a.outerWidth()-a.width()};d.get_side_border_padding=a}).call(this);
window.Socialite=function(c,b,a){var d=0,e=[],f={},h={},j=/^($|loaded|complete)/,m=c.encodeURIComponent,p={settings:{},trim:function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},hasClass:function(a,b){return-1!==(" "+a.className+" ").indexOf(" "+b+" ")},addClass:function(a,b){p.hasClass(a,b)||(a.className=""===a.className?b:a.className+" "+b)},removeClass:function(a,b){a.className=p.trim(" "+a.className+" ".replace(" "+b+" "," "))},extendObject:function(b,c,d){for(var e in c){var f=b[e]!==
a;if(f&&"object"===typeof c[e])p.extendObject(b[e],c[e],d);else if(d||!f)b[e]=c[e]}},getElements:function(a,b){for(var c=0,d=[],e=!!a.getElementsByClassName,f=e?a.getElementsByClassName(b):a.getElementsByTagName("*");c<f.length;c++)(e||p.hasClass(f[c],b))&&d.push(f[c]);return d},getDataAttributes:function(a,b,c){var d=0,e="",f={};for(a=a.attributes;d<a.length;d++){var h=a[d].name,j=a[d].value;j.length&&0===h.indexOf("data-")&&(b&&(h=h.substring(5)),c?f[h]=j:e+=m(h)+"="+m(j)+"&")}return c?f:e},copyDataAttributes:function(a,
b,c,d){a=p.getDataAttributes(a,c,!0);for(var e in a)b.setAttribute(d?e.replace(/-/g,"_"):e,a[e])},createIframe:function(a,c){var d=b.createElement("iframe");d.style.cssText="overflow: hidden; border: none;";p.extendObject(d,{src:a,allowtransparency:"true",frameborder:"0",scrolling:"no"},!0);c&&(d.onload=d.onreadystatechange=function(){if(j.test(d.readyState||""))d.onload=d.onreadystatechange=null,p.activateInstance(c)});return d},networkReady:function(b){return f[b]?f[b].loaded:a},appendNetwork:function(a){a&&
!a.appended&&("function"===typeof a.append&&!1===a.append(a)?(a.appended=a.loaded=!0,p.activateAll(a)):(a.script&&(a.el=b.createElement("script"),p.extendObject(a.el,a.script,!0),a.el.async=!0,a.el.onload=a.el.onreadystatechange=function(){if(j.test(a.el.readyState||""))a.el.onload=a.el.onreadystatechange=null,a.loaded=!0,"function"===typeof a.onload&&!1===a.onload(a)||p.activateAll(a)},b.body.appendChild(a.el)),a.appended=!0))},removeNetwork:function(a){if(!p.networkReady(a.name))return!1;a.el.parentNode&&
a.el.parentNode.removeChild(a.el);return!(a.appended=a.loaded=!1)},reloadNetwork:function(a){(a=f[a])&&p.removeNetwork(a)&&p.appendNetwork(a)},createInstance:function(b,c){var f=!0,h={el:b,uid:d++,widget:c};e.push(h);c.process!==a&&(f="function"===typeof c.process?c.process(h):!1);f&&p.processInstance(h);h.el.setAttribute("data-socialite",h.uid);h.el.className="socialite "+c.name+" socialite-instance";return h},processInstance:function(a){var c=a.el;a.el=b.createElement("div");a.el.className=c.className;
p.copyDataAttributes(c,a.el);"a"===c.nodeName.toLowerCase()&&!c.getAttribute("data-default-href")&&a.el.setAttribute("data-default-href",c.getAttribute("href"));var d=c.parentNode;d.insertBefore(a.el,c);d.removeChild(c)},activateInstance:function(a){if(a&&!a.loaded)return a.loaded=!0,"function"===typeof a.widget.activate&&a.widget.activate(a),p.addClass(a.el,"socialite-loaded"),a.onload?a.onload(a.el):null},activateAll:function(a){"string"===typeof a&&(a=f[a]);for(var b=0;b<e.length;b++){var c=e[b];
c.init&&c.widget.network===a&&p.activateInstance(c)}},load:function(a,c,d,f,j){a=a&&"object"===typeof a&&1===a.nodeType?a:b;if(!c||"object"!==typeof c)p.load(a,p.getElements(a,"socialite"),d,f,j);else{var m;if(/Array/.test(Object.prototype.toString.call(c)))for(m=0;m<c.length;m++)p.load(a,c[m],d,f,j);else if(1===c.nodeType){if(!d||!h[d]){d=null;a=c.className.split(" ");for(m=0;m<a.length;m++)if(h[a[m]]){d=a[m];break}if(!d)return}var y;d=h[d];a=parseInt(c.getAttribute("data-socialite"),10);if(isNaN(a))y=
p.createInstance(c,d);else for(m=0;m<e.length;m++)if(e[m].uid===a){y=e[m];break}!j&&y&&(y.init||(y.init=!0,y.onload="function"===typeof f?f:null,d.init(y)),d.network.appended?p.networkReady(d.network.name)&&p.activateInstance(y):p.appendNetwork(d.network))}}},activate:function(a,b,d){c.Socialite.load(null,a,b,d)},process:function(a,b,d){c.Socialite.load(a,b,d,null,!0)},network:function(a,b){f[a]={name:a,el:null,appended:!1,loaded:!1,widgets:{}};b&&p.extendObject(f[a],b)},widget:function(a,b,c){c.name=
a+"-"+b;f[a]&&!h[c.name]&&(c.network=f[a],f[a].widgets[b]=h[c.name]=c)},setup:function(a){p.extendObject(p.settings,a,!0)}};return p}(window,window.document);
(function(c,b,a){a.setup({facebook:{lang:"en_GB",appId:null},twitter:{lang:"en"},googleplus:{lang:"en-GB"}});a.network("facebook",{script:{src:"//connect.facebook.net/{{language}}/all.js",id:"facebook-jssdk"},append:function(d){var e=b.createElement("div"),f=a.settings.facebook,p={onlike:"edge.create",onunlike:"edge.remove",onsend:"message.send"};e.id="fb-root";b.body.appendChild(e);d.script.src=d.script.src.replace("{{language}}",f.lang);c.fbAsyncInit=function(){c.FB.init({appId:f.appId,xfbml:!0});
for(var a in p)"function"===typeof f[a]&&c.FB.Event.subscribe(p[a],f[a])}}});a.widget("facebook","like",{init:function(d){var e=b.createElement("div");e.className="fb-like";a.copyDataAttributes(d.el,e);d.el.appendChild(e);c.FB&&c.FB.XFBML&&c.FB.XFBML.parse(d.el)}});a.network("twitter",{script:{src:"//platform.twitter.com/widgets.js",id:"twitter-wjs",charset:"utf-8"},append:function(){var b="object"!==typeof c.twttr,d=a.settings.twitter,e=["click","tweet","retweet","favorite","follow"];b&&(c.twttr=
t={_e:[],ready:function(a){t._e.push(a)}});c.twttr.ready(function(b){for(var c=0;c<e.length;c++){var f=e[c];"function"===typeof d["on"+f]&&b.events.bind(f,d["on"+f])}a.activateAll("twitter")});return b}});var d=function(c){var d=b.createElement("a");d.className=c.widget.name+"-button";a.copyDataAttributes(c.el,d);d.setAttribute("href",c.el.getAttribute("data-default-href"));d.setAttribute("data-lang",c.el.getAttribute("data-lang")||a.settings.twitter.lang);c.el.appendChild(d)},e=function(){c.twttr&&
("object"===typeof c.twttr.widgets&&"function"===typeof c.twttr.widgets.load)&&c.twttr.widgets.load()};a.widget("twitter","share",{init:d,activate:e});a.widget("twitter","follow",{init:d,activate:e});a.widget("twitter","hashtag",{init:d,activate:e});a.widget("twitter","mention",{init:d,activate:e});a.widget("twitter","embed",{process:function(c){c.innerEl=c.el;c.innerEl.getAttribute("data-lang")||c.innerEl.setAttribute("data-lang",a.settings.twitter.lang);c.el=b.createElement("div");c.el.className=
c.innerEl.className;c.innerEl.className="";c.innerEl.parentNode.insertBefore(c.el,c.innerEl);c.el.appendChild(c.innerEl)},init:function(a){a.innerEl.className="twitter-tweet"},activate:e});a.network("googleplus",{script:{src:"//apis.google.com/js/plusone.js"},append:function(){if(c.gapi)return!1;c.___gcfg={lang:a.settings.googleplus.lang,parsetags:"explicit"}}});var d=function(c){var d=b.createElement("div");d.className="g-"+c.widget.gtype;a.copyDataAttributes(c.el,d);c.el.appendChild(d);c.gplusEl=
d},f=function(a,b){return"function"!==typeof b?null:function(c){b(a.el,c)}},e=function(b){var d=b.widget.gtype;if(c.gapi&&c.gapi[d]){for(var e=a.settings.googleplus,p=a.getDataAttributes(b.el,!0,!0),g=["onstartinteraction","onendinteraction","callback"],n=0;n<g.length;n++)p[g[n]]=f(b,e[g[n]]);c.gapi[d].render(b.gplusEl,p)}};a.widget("googleplus","one",{init:d,activate:e,gtype:"plusone"});a.widget("googleplus","share",{init:d,activate:e,gtype:"plus"});a.widget("googleplus","badge",{init:d,activate:e,
gtype:"plus"});a.network("linkedin",{script:{src:"//platform.linkedin.com/in.js"}});d=function(d){var e=b.createElement("script");e.type="IN/"+d.widget.intype;a.copyDataAttributes(d.el,e);d.el.appendChild(e);"object"===typeof c.IN&&"function"===typeof c.IN.parse&&(c.IN.parse(d.el),a.activateInstance(d))};a.widget("linkedin","share",{init:d,intype:"Share"});a.widget("linkedin","recommend",{init:d,intype:"RecommendProduct"})})(window,window.document,window.Socialite);
(function(){var c=window._socialite;if(/Array/.test(Object.prototype.toString.call(c)))for(var b=0,a=c.length;b<a;b++)if("function"===typeof c[b])c[b]()})();
(function(c,b,a){var d=[];a.setup({vkontakte:{apiId:null,group:{id:0,mode:0,width:300,height:290},like:{type:"mini"}}});a.network("vkontakte",{script:{src:"//userapi.com/js/api/openapi.js?49",id:"vk-jsapi"},onload:function(){VK.init({apiId:a.settings.vkontakte.apiId,onlyWidgets:!0});for(var b=0,c=d.length;b<c;d[b].call(this),b++);}});var e=function(a,b,c){for(var d={},e,g=0,n=b.length;g<n;e=b[g],d[e]=a.getAttribute("data-"+e)||c[e],g++);return d};a.widget("vkontakte","group",{init:function(f){"object"!==
typeof c.VK&&d.push(function(){var c=b.createElement("div"),d=a.settings.vkontakte;c.className="vk-group";c.id="vkontakte-group-"+(new Date).getTime();a.copyDataAttributes(f.el,c);group=e(f.el,["id","mode","width","height"],d.group);f.el.appendChild(c);VK.Widgets.Group(c.id,group,group.id)})}});a.widget("vkontakte","like",{init:function(f){"object"!==typeof c.VK&&d.push(function(){var c=b.createElement("div"),d=a.settings.vkontakte;c.className="vk-like";c.id="vkontakte-like-"+(new Date).getTime()+
Math.random().toString().replace(".","-");a.copyDataAttributes(f.el,c);like=e(f.el,["type"],d.like);f.el.appendChild(c);VK.Widgets.Like(c.id,like)})}})})(window,window.document,window.Socialite);
var isIphone=!1,isAndroidPhone=!1,isTierTablet=!1,isTierIphone=!1,isTierRichCss=!1,isTierGenericMobile=!1,engineWebKit="webkit",deviceIphone="iphone",deviceIpod="ipod",deviceIpad="ipad",deviceMacPpc="macintosh",deviceAndroid="android",deviceGoogleTV="googletv",deviceXoom="xoom",deviceHtcFlyer="htc_flyer",deviceNuvifone="nuvifone",deviceSymbian="symbian",deviceS60="series60",deviceS70="series70",deviceS80="series80",deviceS90="series90",deviceWinPhone7="windows phone os 7",deviceWinMob="windows ce",
deviceWindows="windows",deviceIeMob="iemobile",devicePpc="ppc",enginePie="wm5 pie",deviceBB="blackberry",vndRIM="vnd.rim",deviceBBStorm="blackberry95",deviceBBBold="blackberry97",deviceBBBoldTouch="blackberry 99",deviceBBTour="blackberry96",deviceBBCurve="blackberry89",deviceBBCurveTouch="blackberry 938",deviceBBTorch="blackberry 98",deviceBBPlaybook="playbook",devicePalm="palm",deviceWebOS="webos",deviceWebOShp="hpwos",engineBlazer="blazer",engineXiino="xiino",deviceKindle="kindle",engineSilk="silk",
vndwap="vnd.wap",wml="wml",deviceTablet="tablet",deviceBrew="brew",deviceDanger="danger",deviceHiptop="hiptop",devicePlaystation="playstation",deviceNintendoDs="nitro",deviceNintendo="nintendo",deviceWii="wii",deviceXbox="xbox",deviceArchos="archos",engineOpera="opera",engineNetfront="netfront",engineUpBrowser="up.browser",engineOpenWeb="openweb",deviceMidp="midp",uplink="up.link",engineTelecaQ="teleca q",devicePda="pda",mini="mini",mobile="mobile",mobi="mobi",maemo="maemo",linux="linux",qtembedded=
"qt embedded",mylocom2="com2",manuSonyEricsson="sonyericsson",manuericsson="ericsson",manuSamsung1="sec-sgh",manuSony="sony",manuHtc="htc",svcDocomo="docomo",svcKddi="kddi",svcVodafone="vodafone",disUpdate="update",uagent="";navigator&&navigator.userAgent&&(uagent=navigator.userAgent.toLowerCase());function DetectIphone(){return-1<uagent.search(deviceIphone)?DetectIpad()||DetectIpod()?!1:!0:!1}function DetectIpod(){return-1<uagent.search(deviceIpod)?!0:!1}
function DetectIpad(){return-1<uagent.search(deviceIpad)&&DetectWebkit()?!0:!1}function DetectIphoneOrIpod(){return-1<uagent.search(deviceIphone)||-1<uagent.search(deviceIpod)?!0:!1}function DetectIos(){return DetectIphoneOrIpod()||DetectIpad()?!0:!1}function DetectAndroid(){return-1<uagent.search(deviceAndroid)||DetectGoogleTV()?!0:-1<uagent.search(deviceHtcFlyer)?!0:!1}
function DetectAndroidPhone(){return DetectAndroid()&&-1<uagent.search(mobile)||DetectOperaAndroidPhone()?!0:-1<uagent.search(deviceHtcFlyer)?!0:!1}function DetectAndroidTablet(){return!DetectAndroid()||DetectOperaMobile()||-1<uagent.search(deviceHtcFlyer)?!1:-1<uagent.search(mobile)?!1:!0}function DetectAndroidWebKit(){return DetectAndroid()&&DetectWebkit()?!0:!1}function DetectGoogleTV(){return-1<uagent.search(deviceGoogleTV)?!0:!1}
function DetectWebkit(){return-1<uagent.search(engineWebKit)?!0:!1}function DetectS60OssBrowser(){return DetectWebkit()?-1<uagent.search(deviceS60)||-1<uagent.search(deviceSymbian)?!0:!1:!1}function DetectSymbianOS(){return-1<uagent.search(deviceSymbian)||-1<uagent.search(deviceS60)||-1<uagent.search(deviceS70)||-1<uagent.search(deviceS80)||-1<uagent.search(deviceS90)?!0:!1}function DetectWindowsPhone7(){return-1<uagent.search(deviceWinPhone7)?!0:!1}
function DetectWindowsMobile(){return DetectWindowsPhone7()?!1:-1<uagent.search(deviceWinMob)||(-1<uagent.search(deviceIeMob)||-1<uagent.search(enginePie))||-1<uagent.search(devicePpc)&&!(-1<uagent.search(deviceMacPpc))?!0:-1<uagent.search(manuHtc)&&-1<uagent.search(deviceWindows)?!0:!1}function DetectBlackBerry(){return-1<uagent.search(deviceBB)?!0:-1<uagent.search(vndRIM)?!0:!1}function DetectBlackBerryTablet(){return-1<uagent.search(deviceBBPlaybook)?!0:!1}
function DetectBlackBerryWebKit(){return DetectBlackBerry()&&-1<uagent.search(engineWebKit)?!0:!1}function DetectBlackBerryTouch(){return DetectBlackBerry()&&(-1<uagent.search(deviceBBStorm)||-1<uagent.search(deviceBBTorch)||-1<uagent.search(deviceBBBoldTouch)||-1<uagent.search(deviceBBCurveTouch))?!0:!1}
function DetectBlackBerryHigh(){return DetectBlackBerryWebKit()?!1:DetectBlackBerry()?DetectBlackBerryTouch()||-1<uagent.search(deviceBBBold)||-1<uagent.search(deviceBBTour)||-1<uagent.search(deviceBBCurve)?!0:!1:!1}function DetectBlackBerryLow(){return DetectBlackBerry()?DetectBlackBerryHigh()||DetectBlackBerryWebKit()?!1:!0:!1}function DetectPalmOS(){return-1<uagent.search(devicePalm)||-1<uagent.search(engineBlazer)||-1<uagent.search(engineXiino)?DetectPalmWebOS()?!1:!0:!1}
function DetectPalmWebOS(){return-1<uagent.search(deviceWebOS)?!0:!1}function DetectWebOSTablet(){return-1<uagent.search(deviceWebOShp)&&-1<uagent.search(deviceTablet)?!0:!1}function DetectGarminNuvifone(){return-1<uagent.search(deviceNuvifone)?!0:!1}
function DetectSmartphone(){return DetectIphoneOrIpod()||DetectAndroidPhone()||DetectS60OssBrowser()||DetectSymbianOS()||DetectWindowsMobile()||DetectWindowsPhone7()||DetectBlackBerry()||DetectPalmWebOS()||DetectPalmOS()||DetectGarminNuvifone()?!0:!1}function DetectArchos(){return-1<uagent.search(deviceArchos)?!0:!1}function DetectBrewDevice(){return-1<uagent.search(deviceBrew)?!0:!1}function DetectDangerHiptop(){return-1<uagent.search(deviceDanger)||-1<uagent.search(deviceHiptop)?!0:!1}
function DetectMaemoTablet(){return-1<uagent.search(maemo)?!0:-1<uagent.search(linux)&&-1<uagent.search(deviceTablet)&&!DetectWebOSTablet()&&!DetectAndroid()?!0:!1}function DetectSonyMylo(){return-1<uagent.search(manuSony)?-1<uagent.search(qtembedded)||-1<uagent.search(mylocom2)?!0:!1:!1}function DetectOperaMobile(){return-1<uagent.search(engineOpera)?-1<uagent.search(mini)||-1<uagent.search(mobi)?!0:!1:!1}
function DetectOperaAndroidPhone(){return-1<uagent.search(engineOpera)&&-1<uagent.search(deviceAndroid)&&-1<uagent.search(mobi)?!0:!1}function DetectOperaAndroidTablet(){return-1<uagent.search(engineOpera)&&-1<uagent.search(deviceAndroid)&&-1<uagent.search(deviceTablet)?!0:!1}function DetectSonyPlaystation(){return-1<uagent.search(devicePlaystation)?!0:!1}function DetectNintendo(){return-1<uagent.search(deviceNintendo)||-1<uagent.search(deviceWii)||-1<uagent.search(deviceNintendoDs)?!0:!1}
function DetectXbox(){return-1<uagent.search(deviceXbox)?!0:!1}function DetectGameConsole(){return DetectSonyPlaystation()||DetectNintendo()?!0:DetectXbox()?!0:!1}function DetectKindle(){return-1<uagent.search(deviceKindle)&&!DetectAndroid()?!0:!1}function DetectAmazonSilk(){return-1<uagent.search(engineSilk)?!0:!1}
function DetectMobileQuick(){return DetectTierTablet()?!1:DetectSmartphone()||(-1<uagent.search(deviceMidp)||DetectBrewDevice())||DetectOperaMobile()||-1<uagent.search(engineNetfront)||-1<uagent.search(engineUpBrowser)||-1<uagent.search(engineOpenWeb)||DetectDangerHiptop()||DetectMaemoTablet()||DetectArchos()||-1<uagent.search(devicePda)&&!(-1<uagent.search(disUpdate))||-1<uagent.search(mobile)||DetectKindle()||DetectAmazonSilk()?!0:!1}
function DetectMobileLong(){return DetectMobileQuick()||DetectGameConsole()||DetectSonyMylo()||(-1<uagent.search(manuSamsung1)||-1<uagent.search(manuSonyEricsson)||-1<uagent.search(manuericsson))||-1<uagent.search(svcDocomo)||-1<uagent.search(svcKddi)||-1<uagent.search(svcVodafone)?!0:!1}function DetectTierTablet(){return DetectIpad()||DetectAndroidTablet()||DetectBlackBerryTablet()||DetectWebOSTablet()?!0:!1}
function DetectTierIphone(){return DetectIphoneOrIpod()||DetectAndroidPhone()||DetectBlackBerryWebKit()&&DetectBlackBerryTouch()||DetectWindowsPhone7()||DetectPalmWebOS()?!0:DetectGarminNuvifone()?!0:!1}function DetectTierRichCss(){return DetectMobileQuick()?DetectTierIphone()||DetectKindle()?!1:DetectWebkit()||DetectS60OssBrowser()||DetectBlackBerryHigh()||DetectWindowsMobile()?!0:-1<uagent.search(engineTelecaQ)?!0:!1:!1}
function DetectTierOtherPhones(){return DetectMobileLong()?DetectTierIphone()||DetectTierRichCss()?!1:!0:!1}function InitDeviceScan(){isIphone=DetectIphoneOrIpod();isAndroidPhone=DetectAndroidPhone();isTierIphone=DetectTierIphone();isTierTablet=DetectTierTablet();isTierRichCss=DetectTierRichCss();isTierGenericMobile=DetectTierOtherPhones()}InitDeviceScan();Date.fromIso=function(c){return"string"==typeof c?(c=c.split("-"),new Date(c[0],c[1]-1,c[2])):c};
(function(){var c=new Date("2011-06-02T09:34:29+02:00");Date.fromISO=isNaN(c)||5!==c.getUTCMonth()||2!==c.getUTCDate()||7!==c.getUTCHours()||34!==c.getUTCMinutes()?function(b){var a,c=/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/.exec(b)||[];if(c[1]){b=c[1].split(/\D/);a=0;for(var e=b.length;a<e;a++)b[a]=parseInt(b[a],10)||0;b[1]-=1;b=new Date(Date.UTC.apply(Date,b));if(!b.getDate())return NaN;c[5]&&(a=60*parseInt(c[5],10),c[6]&&(a+=parseInt(c[6],10)),"+"==c[4]&&(a*=-1),a&&b.setUTCMinutes(b.getUTCMinutes()+
a));return b}return NaN}:function(b){return new Date(b)}})();MouseDraggable={options:{animate:!1,slider:!1},_create:function(){this._mouseInit()},destroy:function(){this._mouseDestroy()},_mouseStart:function(c){this.options.startEvent(c,this.element)},_mouseDrag:function(c){this.options.dragEvent(c,this.element)},_mouseStop:function(c){this.options.endEvent(c,this.element);return!1}};$.widget("ui.MouseDraggable",$.ui.mouse,MouseDraggable);
VoyangaCalendarSlider=function(c){c=$.extend({},{monthArray:[],jObj:null,totalLines:1,knobWidth:1,knobPos:0,linesWidth:5,width:0,knobSlideAction:!1,animateScrollAction:!1,onresize:function(){this.width=this.jObj.find(".monthLineVoyanga").width()},startEvent:function(b,a){if(this.knobSlideAction&&(a.data("xStart",b.pageX),a.data("posStart",this.knobPos),100>this.width))this.onresize()},endEvent:function(){this.knobSlideAction&&(this.knobSlideAction=!1)},dragEvent:function(b,a){if(this.knobSlideAction){var c=
b.pageX-a.data("xStart"),c=Math.round(1E4*(c/this.width))/100;this.knobPos=a.data("posStart")+c;0>this.knobPos&&(this.knobPos=0);this.knobPos>100-this.knobWidth&&(this.knobPos=100-this.knobWidth);this.jObj.find(".knobVoyanga").css("left",this.knobPos+"%");this.jObj.find(".knobUpAllMonth").css("left",this.getKnobUpLeft());c=this.jObj.find(".calendarGridVoyanga").prop("scrollHeight");c=Math.round(c*(this.knobPos/100));this.jObj.find(".calendarGridVoyanga").scrollTop(c);this.knobMove()}},mouseDown:function(b){var a=
Math.round(this.jObj.find(".knobVoyanga").offset().left),c=a+Math.round(this.jObj.find(".knobVoyanga").width());b.pageX>=a&&b.pageX<=c&&(this.knobSlideAction=!0,this.animateScrollAction&&(this.jObj.find(".knobVoyanga").stop(!0),this.animateScrollAction=!1))},mouseUp:function(){this.knobSlideAction=!1},mousewheelEvent:function(b){var a=0,a=b.originalEvent,a="wheelDelta"in a?a.wheelDelta:-40*a.detail;b=0<a?1:-1;60<Math.abs(a)&&(a=60*b);a=this.jObj.find(".calendarGridVoyanga").scrollTop()-a;this.jObj.find(".calendarGridVoyanga").scrollTop(a);
return!1},animateStep:function(b,a){this.knobPos="px"==a.unit?Math.round(1E4*(b/this.width))/100:b;this.jObj.find(".knobUpAllMonth").css("left",this.getKnobUpLeft());var c=this.jObj.find(".calendarGridVoyanga").prop("scrollHeight"),c=Math.round(c*(this.knobPos/100));this.jObj.find(".calendarGridVoyanga").scrollTop(c);this.knobMove()},getKnobUpLeft:function(){return this.knobPos+"%"},getPercent:function(b){if(-1!=b.indexOf("px")){if(100>this.width)this.onresize();b=b.substr(0,b.length-2);b=Math.round(1E4*
(b/this.width))/100}else-1!=b.indexOf("%")&&(b=b.substr(0,b.length-1),b=Math.round(100*b)/100);return b},knobMove:function(){var b=this.knobPos,a=b+this.knobWidth,c=this;this.jObj.find(".monthNameVoyanga").each(function(){var e=c.getPercent($(this).css("left")),f=c.getPercent($(this).css("width"));a-e>0.6*f&&e+f-b>0.6*f?$(this).addClass("highlited"):$(this).removeClass("highlited")})},monthMouseUp:function(b){if(!this.knobSlideAction){this.animateScrollAction=!0;this.jObj.find(".knobVoyanga").stop(!0);
b=$(b).parent().css("left");b=this.getPercent(b)+"%";var a=this;if(100>this.width)this.onresize();this.jObj.find(".knobVoyanga").animate({left:[b,"easeOutCubic"]},{duration:800,step:function(b,c){a.animateStep(b,c)},easing:"easeOutCubic",complete:function(){a.animateScrollAction=!1}})}},scrollEvent:function(){if(!this.animateScrollAction){var b=this.jObj.find(".calendarGridVoyanga").prop("scrollHeight");this.knobPos=Math.round(1E3*(this.jObj.find(".calendarGridVoyanga").scrollTop()/b))/10;this.jObj.find(".knobVoyanga").css("left",
this.knobPos+"%");this.jObj.find(".knobUpAllMonth").css("left",this.getKnobUpLeft());this.knobMove()}},init:function(){}},c);for(key in c)this[key]=c[key]};
VoyangaCalendarClass=function(c){c=$.extend({},{jObj:null,weekDays:"\u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431 \u0412\u0441".split(" "),monthNames:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),dayCellWidth:180,
getDay:function(b){b=b.getDay();return 0==b?6:b-1}},c);for(key in c)this[key]=c[key]};VoyangaCalendarStandart=new VoyangaCalendarClass({values:[]});VoyangaCalendarStandart.initialized=!1;
VoyangaCalendarStandart.slider=new VoyangaCalendarSlider({init:function(){var c=this,b;for(b in this.monthArray){var a=this.monthArray[b].line/(this.totalLines-this.linesWidth),a=Math.round(1E3*(1-this.linesWidth/this.totalLines)*a)/10;if(b<this.monthArray.length-1)var d=parseInt(b)+1,d=(this.monthArray[d].line-this.monthArray[b].line)/this.totalLines;else d=(this.totalLines-this.monthArray[b].line)/this.totalLines;d=Math.round(1E3*d)/10;a='<div class="monthNameVoyanga" style="left: '+a+"%; width: "+
d+'%"><div class="monthWrapper">'+this.monthArray[b].name+"</div></div>";this.jObj.find(".monthLineVoyanga").append(a)}this.knobWidth=Math.round(1E4*(this.linesWidth/this.totalLines))/100;this.jObj.find(".knobVoyanga").css("width",this.knobWidth+"%");this.jObj.find(".knobUpAllMonth").css("width",this.knobWidth+"%");$(window).on("resize",function(){c.onresize()});$(window).load(function(){c.onresize();c.knobMove()});this.jObj.find(".calendarGridVoyanga").on("scroll",function(a){c.scrollEvent(a);return!1});
this.jObj.find(".calendarGridVoyanga").on("mousewheel",function(a){c.mousewheelEvent(a);a.preventDefault&&a.preventDefault();a.returnValue=!1});this.jObj.find(".calendarGridVoyanga").on("DOMMouseScroll",function(a){c.mousewheelEvent(a);a.preventDefault&&a.preventDefault();a.returnValue=!1});this.jObj.find(".monthLineVoyanga").mousedown(function(a){c.mouseDown(a)});this.jObj.find(".monthLineVoyanga").mouseup(function(a){c.mouseUp(a)});this.jObj.find(".monthLineVoyanga .monthNameVoyanga .monthWrapper").mouseup(function(a){c.monthMouseUp(this,
a)});this.jObj.find(".monthLineVoyanga").MouseDraggable({startEvent:function(a,b){c.startEvent(a,b)},endEvent:function(a,b){c.endEvent(a,b)},dragEvent:function(a,b){c.dragEvent(a,b)}});this.minimalLine&&(b=this.minimalLine/this.totalLines*this.jObj.find(".calendarGridVoyanga").prop("scrollHeight"),this.jObj.find(".calendarGridVoyanga").scrollTop(b))}});
VoyangaCalendarStandart.setCellFrom=function(c){c.hasClass("from")||(c.addClass("from"),VoyangaCalendarStandart.valuesDescriptions[0]&&0==c.find(".fromDesc").length&&c.append('<div class="fromDesc"><div class="relate"><div class="absUp">'+VoyangaCalendarStandart.valuesDescriptions[0]+'</div><div class="visHid">'+VoyangaCalendarStandart.valuesDescriptions[0]+"</div></div>"));VoyangaCalendarStandart.lastFromOverCell=c};
VoyangaCalendarStandart.unsetCellFrom=function(c){c.hasClass("from")&&c.removeClass("from");c.find(".fromDesc").length&&c.find(".fromDesc").remove()};
VoyangaCalendarStandart.setCellTo=function(c){c.hasClass("to")||(c.addClass("to"),1<VoyangaCalendarStandart.valuesDescriptions.length&&VoyangaCalendarStandart.valuesDescriptions[1]&&!c.hasClass("from")&&0==c.find(".toDesc").length&&c.append('<div class="toDesc"><div class="relate"><div class="absUp">'+VoyangaCalendarStandart.valuesDescriptions[1]+'</div><div class="visHid">'+VoyangaCalendarStandart.valuesDescriptions[1]+"</div></div>"),2<VoyangaCalendarStandart.valuesDescriptions.length&&(VoyangaCalendarStandart.valuesDescriptions[2]&&
c.hasClass("from"))&&(c.addClass("fromTo"),0==c.find(".fromToDesc").length&&c.append('<div class="fromToDesc"><div class="relate"><div class="absUp">'+VoyangaCalendarStandart.valuesDescriptions[2]+'</div><div class="visHid">'+VoyangaCalendarStandart.valuesDescriptions[2]+"</div></div>")));VoyangaCalendarStandart.lastToOverCell=c};
VoyangaCalendarStandart.unsetCellTo=function(c){c.hasClass("to")&&c.removeClass("to");c.hasClass("fromTo")&&c.removeClass("fromTo");c.find(".toDesc").length&&c.find(".toDesc").remove();c.find(".fromToDesc").length&&c.find(".fromToDesc").remove()};
VoyangaCalendarStandart.setCellInterval=function(c,b){VoyangaCalendarStandart.intervalLastCell&&VoyangaCalendarStandart.unsetCellInterval();VoyangaCalendarStandart.intervalLastCell=c;if(!c.hasClass("intervalDescription")){c.addClass("intervalDescription");var a=b-parseInt(VoyangaCalendarStandart.intervalDescription),a="\u0432\u0441\u0435\u0433\u043e "+Utils.wordAfterNum(a,VoyangaCalendarStandart.intervalWords[0],VoyangaCalendarStandart.intervalWords[1],VoyangaCalendarStandart.intervalWords[2]);c.append('<div class="intDesc">'+
a+"</div>")}};VoyangaCalendarStandart.unsetCellInterval=function(){VoyangaCalendarStandart.intervalLastCell&&VoyangaCalendarStandart.intervalLastCell.hasClass("intervalDescription")&&(VoyangaCalendarStandart.intervalLastCell.removeClass("intervalDescription"),VoyangaCalendarStandart.intervalLastCell.find(".intDesc").length&&VoyangaCalendarStandart.intervalLastCell.find(".intDesc").remove());VoyangaCalendarStandart.intervalLastCell=!1};
VoyangaCalendarStandart.onCellOver=function(c){if(!VoyangaCalendarStandart.isMobileDevice&&(c=$(c),!c.hasClass("inactive"))){var b=Date.fromIso(c.data("cell-date"));1==this.values.length?b<this.values[0]?VoyangaCalendarStandart.setCellFrom(c):this.twoSelect?VoyangaCalendarStandart.setCellTo(c):VoyangaCalendarStandart.setCellFrom(c):VoyangaCalendarStandart.setCellFrom(c)}};
VoyangaCalendarStandart.onCellOut=function(c){if(!VoyangaCalendarStandart.isMobileDevice&&(c=$(c),!c.hasClass("inactive"))){var b=Date.fromIso(c.data("cell-date"));1==this.values.length?b<this.values[0]?VoyangaCalendarStandart.unsetCellFrom(c):this.twoSelect?VoyangaCalendarStandart.unsetCellTo(c):VoyangaCalendarStandart.unsetCellFrom(c):VoyangaCalendarStandart.unsetCellFrom(c);0<this.values.length&&this.values[0].valueOf()==b.valueOf()&&(VoyangaCalendarStandart.setCellFrom(c),c.addClass("selectData"));
1<this.values.length&&this.values[1].valueOf()==b.valueOf()&&(VoyangaCalendarStandart.setCellTo(c),c.addClass("selectData"))}};VoyangaCalendarStandart.getCellByDate=function(c){if(c)return c=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),$("#dayCell-"+c);console.log("bad date value:",c);return!1};
VoyangaCalendarStandart.update=function(c){VoyangaCalendarStandart.unsetCellInterval();var b=0;VoyangaCalendarStandart.lastFromCell&&(console.log("try unset from",VoyangaCalendarStandart.lastFromCell),VoyangaCalendarStandart.unsetCellFrom(VoyangaCalendarStandart.lastFromCell));VoyangaCalendarStandart.lastToCell&&(console.log("try unset to",VoyangaCalendarStandart.lastToCell),VoyangaCalendarStandart.unsetCellTo(VoyangaCalendarStandart.lastToCell));$(".dayCellVoyanga").removeClass("selectData from to selectDay");
console.log("dontset is "+(c?"true":"false")+" values:",this.values);if(this.values.length){var a=this.getCellByDate(this.values[0]);VoyangaCalendarStandart.setCellFrom(a);VoyangaCalendarStandart.lastFromCell=a;a.addClass("selectData");b=1;if(1<this.values.length){b=2;a=this.getCellByDate(this.values[1]);VoyangaCalendarStandart.setCellTo(a);VoyangaCalendarStandart.lastToCell=a;a.addClass("selectData");a=moment(moment(this.values[0]))._d;for(a.setDate(a.getDate()+1);a<this.values[1];)this.getCellByDate(a).addClass("selectDay"),
a.setDate(a.getDate()+1);if(VoyangaCalendarStandart.intervalDescription){var d=moment(this.values[1]).diff(moment(this.values[0]),"days");2<=d&&(a.setDate(a.getDate()-1),a=this.getCellByDate(a),VoyangaCalendarStandart.setCellInterval(a,d))}}c||(console.log("sat date and value will be updated",this.panel()),VoyangaCalendarStandart.scrollDate=this.values[0],this.panel().setDate&&this.panel().setDate(this.values))}VoyangaCalendarStandart.selectionIndex&&VoyangaCalendarStandart.selectionIndex(b)};
VoyangaCalendarStandart.onCellClick=function(c){c=$(c);if(!c.hasClass("inactive")){var b=Date.fromIso(c.data("cell-date")),a=!0;if(this.twoSelect)if(2==this.values.length)this.values=[];else{if(1==this.values.length)if(b<this.values[0])this.values=[];else{if(this.hotels&&0==moment(this.values[0]).diff(moment(b),"days"))return;a=!1;this.values.push(b)}}else 0!=this.values.length&&(this.values=[]),a=!1;VoyangaCalendarStandart.unsetCellFrom(c);VoyangaCalendarStandart.unsetCellTo(c);0==this.values.length&&
this.values.push(b);VoyangaCalendarStandart.update(a)}};
VoyangaCalendarStandart.generateGrid=function(){var c=new Date,b=new Date;b.setMinutes(0,0,0);b.setHours(0);var a=this,d=c.getMonth(),e=moment(moment(c))._d;e.setDate(1);e.setDate(e.getDate()-this.getDay(e));this.getDay(e);c.getDate();var c=c.getFullYear(),f=!1,h=0;for(this.slider.monthArray=[];!f;){for(var j='<div class="calendarLineVoyanga" id="weekNum-'+h+'" data-weeknum="'+h+'">',m=0;7>m;m++){var p='<div class="dayLabel'+(5<=m&&7>m?" weekEnd":"")+'">'+e.getDate()+"</div>";if(1==e.getDate()){var p=
p+' <div class="monthLabel">'+this.monthNames[e.getMonth()]+"</div>",g={};g.line=h;g.name=this.monthNames[e.getMonth()];this.slider.monthArray.push(g)}var g=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),n=e.getDate()+"."+(e.getMonth()+1)+"."+e.getFullYear(),j=j+'<div class="dayCellVoyanga'+(e<b?" inactive":"")+(1==e.getDate()?" startMonth":"")+'" id="dayCell-'+g+'" data-cell-date="'+g+'" data-cell-date-api="'+n+'"><div class="innerDayCellVoyanga">'+p+"</div></div>";e.setDate(e.getDate()+1)}j+=
"</div>";this.jObj.find(".calendarDIVVoyanga").append(j);e.getFullYear()>c&&e.getMonth()>=d&&(f=!0);h++}2>h-this.slider.monthArray[this.slider.monthArray.length-1].line&&this.slider.monthArray.pop();this.jObj.find(".dayCellVoyanga").hover(function(b){a.onCellOver(this,b)},function(b){a.onCellOut(this,b)});this.jObj.find(".dayCellVoyanga").click(function(b){a.onCellClick(this,b)});this.slider.totalLines=h};
VoyangaCalendarStandart.clear=function(){console.log("clear all values");VoyangaCalendarStandart.values=[];VoyangaCalendarStandart.update(!0)};
VoyangaCalendarStandart.minimalDateUpdated=function(){var c=this.minimalDate.getFullYear()+"-"+(this.minimalDate.getMonth()+1)+"-"+this.minimalDate.getDate();this.slider.minimalLine=$("#dayCell-"+c).parent().data("weeknum");dayCell=this.jObj.find("#weekNum-0 .dayCellVoyanga:eq(0)");if(dayCell.length)for(var b=Date.fromIso(dayCell.data("cell-date")),a=!1;!a;)for(var d=0;7>d;d++){c=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate();if(b<this.minimalDate)$("#dayCell-"+c).addClass("inactive");else if($("#dayCell-"+
c).hasClass("inactive"))$("#dayCell-"+c).removeClass("inactive");else{a=!0;break}b.setDate(b.getDate()+1)}};
VoyangaCalendarStandart.scrollToDate=function(c,b){if(VoyangaCalendarStandart.checkCalendarValue()){b||(b=!1);var a=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),a=$("#dayCell-"+a).parent().data("weeknum")/this.slider.totalLines*this.jObj.find(".calendarGridVoyanga").prop("scrollHeight"),d=a-this.jObj.find(".calendarGridVoyanga").scrollTop(),e=Math.round(this.jObj.find(".calendarGridVoyanga").prop("scrollHeight")/VoyangaCalendarStandart.slider.totalLines);console.log("delta need scroll",d,
e);(0>d||d>VoyangaCalendarStandart.slider.linesWidth*e||b)&&this.jObj.find(".calendarGridVoyanga").scrollTop(Math.abs(a-e))}};
VoyangaCalendarStandart.newValueHandler=function(c){console.log("send new value handler, now values:",VoyangaCalendarStandart.values," calVal:",c);c.hotels?(VoyangaCalendarStandart.hotels=!0,$("#voyanga-calendar").addClass("hotel")):(VoyangaCalendarStandart.hotels=!1,$("#voyanga-calendar").removeClass("hotel"));VoyangaCalendarStandart.lastFromOverCell&&VoyangaCalendarStandart.unsetCellFrom(VoyangaCalendarStandart.lastFromOverCell);VoyangaCalendarStandart.lastToOverCell&&VoyangaCalendarStandart.unsetCellTo(VoyangaCalendarStandart.lastToOverCell);
void 0!==c.values&&0==c.values.length&&(console.log("values defined",c.values),c.values.push(new Date),VoyangaCalendarStandart.values=[],VoyangaCalendarStandart.values.push(new Date),c.from=new Date);VoyangaCalendarStandart.selectionIndex=void 0!==c.selectionIndex?c.selectionIndex:!1;VoyangaCalendarStandart.valuesDescriptions=void 0!==c.valuesDescriptions?c.valuesDescriptions:["",""];VoyangaCalendarStandart.intervalDescription=void 0!==c.intervalDescription&&c.intervalDescription?c.intervalDescription:
!1;var b=!0;VoyangaCalendarStandart.twoSelect=c.twoSelect;!c.twoSelect&&0<VoyangaCalendarStandart.values.length&&(VoyangaCalendarStandart.values=Array(VoyangaCalendarStandart.values[0]),b=!1);console.log("values(1):",VoyangaCalendarStandart.values);var a=VoyangaCalendarStandart.minimalDateChanged=!1;if(c.activeSearchPanel){if(c.activeSearchPanel.prevSearchPanel()){if(minDt=c.activeSearchPanel.prevSearchPanel().checkOut(),!VoyangaCalendarStandart.minimalDate&&minDt||minDt&&VoyangaCalendarStandart.minimalDate.toString()!=
minDt.toString())VoyangaCalendarStandart.minimalDate=minDt,a=!0,VoyangaCalendarStandart.scrollDate=VoyangaCalendarStandart.minimalDate,VoyangaCalendarStandart.minimalDateChanged=!0}else if(minDt=new Date,minDt.setHours(0),minDt.setMinutes(0),minDt.setSeconds(0),minDt.setMilliseconds(0),!VoyangaCalendarStandart.minimalDate||VoyangaCalendarStandart.minimalDate&&VoyangaCalendarStandart.minimalDate.toString()!=minDt.toString())VoyangaCalendarStandart.minimalDate=minDt,a=!0,VoyangaCalendarStandart.scrollDate=
VoyangaCalendarStandart.minimalDate,VoyangaCalendarStandart.minimalDateChanged=!0;VoyangaCalendarStandart.alreadyInited&&VoyangaCalendarStandart.minimalDateChanged?VoyangaCalendarStandart.minimalDateUpdated():VoyangaCalendarStandart.alreadyInited&&console.log("not inited",VoyangaCalendarStandart.minimalDateChanged)}else console.log("else????");console.log("values(2):",VoyangaCalendarStandart.values);if(c.from&&!a||c.from&&c.from.toString()!=VoyangaCalendarStandart.scrollDate.toString())a=!0,VoyangaCalendarStandart.scrollDate=
c.from;console.log("values(3):",VoyangaCalendarStandart.values);console.log("if conductions. newCalendarValue.twoSelect == false:",!1==c.twoSelect,"VoyangaCalendarStandart.values.length,",VoyangaCalendarStandart.values.length);!1==c.twoSelect&&VoyangaCalendarStandart&&VoyangaCalendarStandart.values&&1==VoyangaCalendarStandart.values.length?b=!1:!0==c.twoSelect&&(!c.from||!c.to)||!1==c.twoSelect&&!c.from?void 0!=VoyangaCalendarStandart&&(VoyangaCalendarStandart.values=[]):(VoyangaCalendarStandart.values=
[],VoyangaCalendarStandart.values.push(c.from),c.twoSelect&&VoyangaCalendarStandart.values.push(c.to),b=!1);console.log("values(4):",VoyangaCalendarStandart.values);a&&(console.log("scrollDate",VoyangaCalendarStandart.scrollDate),VoyangaCalendarStandart.scrollToDate(VoyangaCalendarStandart.scrollDate));VoyangaCalendarStandart.update(b)};
VoyangaCalendarStandart.compareArrays=function(c,b){if(!(!c&&b||!b&&c)&&"object"==typeof c&&typeof c==typeof b&&c.length==b.length){for(var a in c)if(c[a]!=b[a])return!1;return!0}return!1};
VoyangaCalendarStandart.compareCalendarValue=function(c,b){if(!c&&b||!b&&c)return!1;for(var a in b)if("from"==a){if(c[a]!=b[a]&&b[a]!=VoyangaCalendarStandart.values[0])return!1}else if("to"==a){if(c[a]!=b[a]&&b[a]!=VoyangaCalendarStandart.values[1])return!1}else if($.isArray(c[a])){if(!VoyangaCalendarStandart.compareArrays(c[a],b[a]))return!1}else if(c[a]!=b[a])return!1;return!0};
VoyangaCalendarStandart.init=function(c,b){this.jObj=$(b);VoyangaCalendarStandart.slider.jObj=this.jObj;this.minimalDateChanged=this.alreadyInited=!1;this.valuesDescriptions=["",""];this.intervalDescription=!1;this.intervalWords=["\u043d\u043e\u0447\u044c","\u043d\u043e\u0447\u0438","\u043d\u043e\u0447\u0435\u0439"];this.lastToOverCell=this.lastFromOverCell=this.lastToCell=this.lastFromCell=this.selectionIndex=this.intervalLastCell=!1;this.checkCalendarValue=ko.observable(!0);this.isMobileDevice=
DetectMobileQuick()||DetectTierTablet();var a=this;console.log("ReINIT calendar");this.oldCalendarValue=null;!this.panel||this.panel&&c()!=this.panel()?(this.panel=c,c.subscribe(function(b){b.template&&(VoyangaCalendarStandart.subscription&&VoyangaCalendarStandart.subscription.dispose(),console.log("iil be st new subscr"),VoyangaCalendarStandart.subscription=b.calendarValue.subscribe(function(b){VoyangaCalendarStandart.checkCalendarValue()&&!VoyangaCalendarStandart.compareCalendarValue(a.oldCalendarValue,
b)&&(console.log("values not same, new value detected"),a.oldCalendarValue=b,VoyangaCalendarStandart.newValueHandler(b))}),a.oldCalendarValue=b.calendarValue(),VoyangaCalendarStandart.values=[],VoyangaCalendarStandart.newValueHandler(b.calendarValue()))}),newPanel=c(),c.notifySubscribers(c())):console.log("Else",c,this.panel,this.panel(),c());VoyangaCalendarStandart.generateGrid();VoyangaCalendarStandart.slider.init();this.minimalDateChanged&&this.minimalDateUpdated();this.alreadyInited=!0}.bind(VoyangaCalendarStandart);
VoyangaCalendarTimeline=new VoyangaCalendarClass({jObj:"#voyanga-calendar-timeline",values:[],twoSelect:!0,monthNames:"\u042f\u041d\u0412 \u0424\u0415\u0412 \u041c\u0410\u0420 \u0410\u041f\u0420 \u041c\u0410\u0419 \u0418\u042e\u041d \u0418\u042e\u041b \u0410\u0412\u0413 \u0421\u0415\u041d \u041e\u041a\u0422 \u041d\u041e\u042f \u0414\u0415\u041a".split(" ")});
VoyangaCalendarTimeline.slider=new VoyangaCalendarSlider({init:function(){console.log(this.jObj);"string"==typeof this.jObj&&(this.jObj=$(this.jObj));var c=this;this.monthLineWidth=this.totalLines/this.totalShowLines;var b=Math.round(1E4*this.monthLineWidth)/100;this.jObj.find(".monthLineVoyanga").css("width",b+"%");this.monthLineLeftPercent=b=this.startLine/this.totalShowLines;b=Math.round(1E3*b)/10;this.jObj.find(".monthLineVoyanga").css("left",b+"%");var a=this.totalLines;this.totalLines==this.linesWidth?
(this.jObj.find(".knobVoyanga").css("display","none"),this.jObj.find(".knobUpAllMonth").css("display","none"),a++):(this.jObj.find(".knobVoyanga").css("display","block"),this.jObj.find(".knobUpAllMonth").css("display","block"));for(var d in this.monthShowArray){b=this.monthShowArray[d].line/(this.totalShowLines-this.linesWidth);b=Math.round(1E3*(1-this.linesWidth/this.totalShowLines)*b)/10;if(d<this.monthShowArray.length-1)var e=parseInt(d)+1,e=(this.monthShowArray[e].line-this.monthShowArray[d].line)/
this.totalShowLines;else e=(this.totalShowLines-this.monthShowArray[d].line)/this.totalShowLines;e=Math.round(1E3*e)/10;e=$('<div class="monthNameVoyangaSplit" style="left: '+b+"%; width: "+e+'%"></div><div class="monthNameVoyanga" style="left: '+b+"%; width: "+e+'%"><div class="monthWrapper">'+this.monthShowArray[d].name+"</div></div>");this.monthShowArray[d].line>=this.startLine-3&&this.monthShowArray[d].line<this.startLine+this.totalLines&&this.totalLines!=this.linesWidth?(this.monthShowArray[d].lineReal||
(this.monthShowArray[d].lineReal=0),b=this.monthShowArray[d].lineReal/(a-this.linesWidth),console.log("mmmm",this.monthShowArray[d].lineReal,a,this.linesWidth),b=Math.round(1E3*(1-this.linesWidth/a)*b)/10,e.data("clickable",!0),e.data("leftPos",b),e.addClass("highlited")):e.data("clickable",!1);this.monthShowArray[d].div=e;this.jObj.find(".monthLineVoyangaYear").append(e)}this.knobWidth=Math.round(1E4*(this.linesWidth/this.totalLines))/100;this.jObj.find(".knobVoyanga").css("width",this.knobWidth+
"%");knobUpWidth=Math.round(1E4*this.linesWidth/this.totalLines*this.monthLineWidth)/100;this.jObj.find(".knobUpAllMonth").css("width",knobUpWidth+"%");this.jObj.find(".knobUpAllMonth").css("left",this.getKnobUpLeft());$(window).on("resize",function(){c.onresize()});$(window).load(function(){c.onresize();c.knobMove()});this.jObj.find(".calendarGridVoyanga").on("scroll",function(a){c.scrollEvent(a)});this.jObj.find(".calendarGridVoyanga").on("mousewheel",function(a){c.mousewheelEvent(a);a.preventDefault&&
a.preventDefault();a.returnValue=!1});this.jObj.find(".calendarGridVoyanga").on("DOMMouseScroll",function(a){c.mousewheelEvent(a);a.preventDefault&&a.preventDefault();a.returnValue=!1});this.jObj.find(".monthLineWrapper").mousedown(function(a){c.mouseDown(a)});this.jObj.find(".monthLineWrapper").mouseup(function(a){c.mouseUp(a)});this.jObj.find(".monthLineVoyangaYear .monthNameVoyanga .monthWrapper").mouseup(function(a){c.monthMouseUp(this,a)});this.jObj.find(".monthLineWrapper").MouseDraggable({startEvent:function(a,
b){c.startEvent(a,b)},endEvent:function(a,b){c.endEvent(a,b)},dragEvent:function(a,b){c.dragEvent(a,b)}})},getKnobUpLeft:function(){leftPerc=Math.round(10*(100*this.monthLineLeftPercent+this.knobPos*this.monthLineWidth))/10;return leftPerc+"%"},monthMouseUp:function(c){if($(c).parent().data("clickable")&&!this.knobSlideAction){this.animateScrollAction=!0;this.jObj.find(".knobVoyanga").stop(!0);c=$(c).parent().data("leftPos");0>c&&(c=0);c>100-this.knobWidth&&(c=100-this.knobWidth);c+="%";var b=this;
this.jObj.find(".knobVoyanga").animate({left:[c,"easeOutCubic"]},{duration:800,step:function(a,c){b.animateStep(a,c)},easing:"easeOutCubic",complete:function(){b.animateScrollAction=!1}})}},knobMove:function(){var c=this;this.jObj.find(".monthNameVoyanga").each(function(){c.getPercent($(this).css("width"))})},linesWidth:3});VoyangaCalendarTimeline.onCellOver=function(){};VoyangaCalendarTimeline.onCellOut=function(){};
VoyangaCalendarTimeline.getCellByDate=function(c){c=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate();return $("#dayCell-"+c)};VoyangaCalendarTimeline.onCellClick=function(){};
VoyangaCalendarTimeline.generateGrid=function(){var c=moment(this.minDate),b=moment(this.maxDate),a=moment(c),d=moment(b);console.log("dates",this.minDate,this.maxDate);var e=this.minDate,f=new Date;f.setMinutes(0,0,0);f.setHours(0);var h=this;e.getMonth();e=moment(c)._d;e=this.getDay(this.maxDate)-this.getDay(this.minDate);b=Math.floor(b.diff(c,"days",!0));console.log("diff",e,b);e==b&&(a.subtract("d",7),d.add("d",7));a.date(a.date()-this.getDay(a._d));b=Math.floor(d.diff(a,"days",!0))+1;14>=b&&
(d.add("d",7),b=Math.floor(d.diff(a,"days",!0))+1);console.log("ds",a,"de",d,b);0!=b%7&&d.add("d",7-b%7);console.log("ds",a,"de",d,b);b=Math.floor(d.diff(a,"days",!0))+1;b=Math.floor((365-b)/2);e=moment(c)._d;e.setDate(e.getDate()-b);e.setDate(1);c=moment(d)._d;c.setDate(c.getDate()+b+3);c.setDate(1);c.setDate(0);c.setDate(c.getDate()-this.getDay(c));c.setDate(c.getDate()+7);this.getDay(e);e.getDate();e.getFullYear();e.setDate(e.getDate()-this.getDay(e));b=moment(e);moment(b);var j=b=0;console.log("date params",
e,"st",a,"en",d,"stp",c);this.slider.monthArray=[];this.slider.monthShowArray=[];for(this.slider.startLine=!1;e<c;){if(e<d._d&&e>=a){for(var m='<div class="calendarLineVoyanga" id="weekNum-'+b+'" data-weeknum="'+b+'">',p=0;7>p;p++){var g='<div class="dayLabel'+(5<=p&&7>p?" weekEnd":"")+'">'+e.getDate()+"</div>",g="";if(1==e.getDate()){var g=g+this.monthNames[e.getMonth()],n={};n.line=b;n.lineReal=j;n.name=this.monthNames[e.getMonth()];this.slider.monthArray.push(n);this.slider.monthShowArray.push(n)}else!1===
this.slider.startLine&&(this.slider.startLine=b,g+=this.monthNames[e.getMonth()]);g='<div class="dayLabel'+(5<=p&&7>p?" weekEnd":"")+'">'+e.getDate()+" "+g+"</div>";n=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();m=m+'<div class="dayCellVoyanga'+(e<f?" inactive":"")+(5<=p&&7>p?" weekEnd":"")+'" id="dayCell-'+n+'" data-cell-date="'+n+'"><div class="innerDayCellVoyanga">'+g+"</div></div>";e.setDate(e.getDate()+1)}m+="</div>";this.jObj.find(".calendarDIVVoyanga").append(m);j++}else for(p=0;7>
p;p++)1==e.getDate()&&(n={},n.line=b,n.name=this.monthNames[e.getMonth()],this.slider.monthShowArray.push(n)),e.setDate(e.getDate()+1);b++}console.log("monthArr",this.slider.monthArray.length,this.slider.monthArray);if(0<this.slider.monthShowArray.length&&this.slider.monthShowArray[this.slider.monthShowArray.length-1])var q=this.slider.monthShowArray[this.slider.monthShowArray.length-1].line;else Raven.captureMessage("cant define lastLineMonth",{monthShowArray:this.slider.monthShowArray,monthArray:this.slider.monthArray,
events:VoyangaCalendarTimeline.calendarEvents,stopDate:c,tmpDate:e});2>b-q&&this.slider.monthShowArray.pop();this.jObj.find(".dayCellVoyanga").hover(function(a){h.onCellOver(this,a)},function(a){h.onCellOut(this,a)});this.jObj.find(".dayCellVoyanga").on("click",function(a){h.onCellClick(this,a)});this.slider.totalLines=j;this.slider.totalShowLines=b;console.log(this.slider.totalLines)};VoyangaCalendarTimeline.calendarEvents=[];
VoyangaCalendarTimeline.eventsCompareFunction=function(c,b){return c.dayStart<b.dayStart?-1:c.dayStart>b.dayStart?1:"flight"==c.type&&"hotel"==b.type?-1:"hotel"==c.type&&"flight"==b.type?1:0};VoyangaCalendarTimeline.generateStartPoint=function(c){Math.round((c.dayEnd.valueOf()-c.dayStart.valueOf())/864E5);return'<div class="startYourTours"></div>'};
VoyangaCalendarTimeline.generateEndPoint=function(c){c=c.dayEnd.valueOf()-c.dayStart.valueOf();c=Math.round(c/864E5);0==c&&(c=1);var b=this.dayCellWidth;c='<div class="endYourTours" style="left: '+b*(c%7)+'%">';return c+"</div>"};
VoyangaCalendarTimeline.generateHotelDiv=function(c){var b=c.dayEnd.valueOf()-c.dayStart.valueOf(),b=Math.round(b/864E5);0==b&&(b=1);console.log(b);var a=this.dayCellWidth,d=0.5*(a/c.startInfo.count),b='<div class="yourTrip" style="width: '+(a*b-a+0.1+(d+0.5*(a/c.endInfo.count)))+'%" data-delta-left="'+d+'">',b=b+'<div class="startHotel"></div><div class="pathHotel"></div><div class="endHotel"></div>',b=b+'<div class="nameHotel">'+c.description+"</div>";return b+="</div></div>"};
VoyangaCalendarTimeline.generateFlightDiv=function(c){var b=c.dayEnd.valueOf()-c.dayStart.valueOf(),b=Math.floor(b/864E5),b=b+1,a=this.dayCellWidth,d=c.description.split("||");switch(b){case 1:var e="",f="/themes/v2/images/trip-line-01.png",h="flyTrip fd1";break;case 2:e=" twoDays";f="/themes/v2/images/trip-line-02.png";h="flyTrip fd2";break;case 3:e=" threeDays",f="/themes/v2/images/trip-line-03.png",h="flyTrip fd3"}if(1==b&&c.startInfo.position==c.endInfo.position){if(c.startInfo.point){var j=a/
c.startInfo.count*(0.5+c.startInfo.position);return h='<div class="flyTrip" style="width: 0%" data-delta-left="'+j+'"><div class="startYourTours"></div></div>'}return""}j=a/c.startInfo.count*(0.5+c.startInfo.position);b=(b-1)*a+a/c.endInfo.count*(0.5+c.endInfo.position);console.log("flightDiv",j,b);3==c.startInfo.count&&(d[0]=c.cityFrom);3==c.endInfo.count&&(d[1]=c.cityTo);h='<div class="'+h+'" style="width: '+(b-j)+'%" data-delta-left="'+j+'">';h+=c.startInfo.point?'<div class="startYourTours"></div>':
"";h=h+'<div class="tripFlyAll"><div class="jetFly'+e+'" style="top: 4px;"></div><img width="100%" height="40" src="'+f+'"></div>';h+=c.startInfo.city?'<div class="startNameCity">'+d[0]+"</div>":"";h+=c.endInfo.city?'<div class="endNameCity">'+d[1]+"</div>":"";h+=c.endInfo.point?'<div class="endYourTours"></div>':"";return h+="</div>"};
VoyangaCalendarTimeline.generateEvents=function(){this.dayCellWidth=this.jObj.find(".dayCellVoyanga:first").width()+2;this.dayCellWidth=14.2;var c=this,b={},a;for(a in this.calendarEvents){var d=this.calendarEvents[a].dayStart,e=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();"object"!=typeof b[e]&&(b[e]={types:{},count:0});"object"!=typeof b[e].types[this.calendarEvents[a].type]&&(b[e].types[this.calendarEvents[a].type]={s:[],e:[]});b[e].types[this.calendarEvents[a].type].s.push(a);b[e].count++;
d=this.calendarEvents[a].dayEnd;e=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();"object"!=typeof b[e]&&(b[e]={types:{},count:0});"object"!=typeof b[e].types[this.calendarEvents[a].type]&&(b[e].types[this.calendarEvents[a].type]={s:[],e:[]});b[e].types[this.calendarEvents[a].type].e.push(a);b[e].count++}console.log("eventDays",b);for(var f in b){var e=f,h="",j="",d=[],m=!0,p=!0,g=[],n=[],q=[],u=[];if("object"==typeof b[e].types.hotel){for(var r in b[e].types.hotel.s){sInd=b[e].types.hotel.s[r];
u.push(sInd);j=this.calendarEvents[sInd].city;p=!1;break}for(var x in b[e].types.hotel.e){eInd=b[e].types.hotel.e[x];g.push(eInd);h=this.calendarEvents[eInd].city;m=!1;break}}if("object"==typeof b[e].types.flight){b[e].types.flight.s.sort(function(a,b){return c.calendarEvents[a].sortInd>c.calendarEvents[b].sortInd?1:c.calendarEvents[a].sortInd<c.calendarEvents[b].sortInd?-1:0});b[e].types.flight.e.sort(function(a,b){return c.calendarEvents[a].sortInd>c.calendarEvents[b].sortInd?-1:c.calendarEvents[a].sortInd<
c.calendarEvents[b].sortInd?1:0});for(r in b[e].types.flight.s)sInd=b[e].types.flight.s[r],h&&this.calendarEvents[sInd].cityFrom==h?(g.push(sInd),this.calendarEvents[sInd].startInfo.point=!1):h?j&&this.calendarEvents[sInd].cityFrom==j?(u.push(sInd),this.calendarEvents[sInd].startInfo.point=!1):(n.push(sInd),-1==d.indexOf(this.calendarEvents[sInd].cityFrom)&&d.push(this.calendarEvents[sInd].cityFrom)):(h=this.calendarEvents[sInd].cityFrom,g.push(sInd),this.calendarEvents[sInd].startInfo.point=!0);
for(x in b[e].types.flight.e)eInd=b[e].types.flight.e[x],j&&this.calendarEvents[eInd].cityTo==j?(u.push(eInd),this.calendarEvents[eInd].endInfo.point=!1):j?h&&this.calendarEvents[eInd].cityTo==h?(g.push(eInd),this.calendarEvents[eInd].endInfo.point=!1):(q.push(eInd),-1==d.indexOf(this.calendarEvents[eInd].cityTo)&&d.push(this.calendarEvents[eInd].cityTo)):0==d.length&&h==this.calendarEvents[eInd].cityTo?g.push(eInd):(j=this.calendarEvents[eInd].cityTo,u.push(eInd),this.calendarEvents[eInd].endInfo.point=
!0)}h=0;if(0<g.length){var y=h;h++}if(0<n.length+q.length){var w=h;h++}if(0<u.length){var v=h;h++}var j=!0,D;for(D in g)if(sInd=g[D],"hotel"==this.calendarEvents[sInd].type)this.calendarEvents[sInd].endInfo.count=h,this.calendarEvents[sInd].endInfo.position=y;else{var H=this.calendarEvents[sInd].startInfo.dateLabel==e?"startInfo":"endInfo";this.calendarEvents[sInd][H].count=h;this.calendarEvents[sInd][H].position=y;this.calendarEvents[sInd][H].point=m;this.calendarEvents[sInd][H].city=j;m=j=!1}j=
1==d.length;m=!0;for(D in n)sInd=n[D],this.calendarEvents[sInd].startInfo.count=h,this.calendarEvents[sInd].startInfo.position=w,this.calendarEvents[sInd].startInfo.point=m,this.calendarEvents[sInd].startInfo.city=j,j=m=!1;1<d.length&&(this.calendarEvents[sInd].startInfo.point=!0);for(D in q)sInd=q[D],this.calendarEvents[sInd].endInfo.count=h,this.calendarEvents[sInd].endInfo.position=w,this.calendarEvents[sInd].endInfo.point=m,this.calendarEvents[sInd].endInfo.city=j,j=m=!1;j=!0;m=p;for(D in u)sInd=
u[D],"hotel"==this.calendarEvents[sInd].type?(this.calendarEvents[sInd].startInfo.count=h,this.calendarEvents[sInd].startInfo.position=v):(this.calendarEvents[sInd].endInfo.count=h,this.calendarEvents[sInd].endInfo.position=v,this.calendarEvents[sInd].endInfo.point=m,this.calendarEvents[sInd].endInfo.city=j,j=m=!1)}console.log("eventDays",b);console.log("calendarEvents",this.calendarEvents);b=!0;for(a in this.calendarEvents){var d=this.calendarEvents[a].dayStart,e=d.getFullYear()+"-"+(d.getMonth()+
1)+"-"+d.getDate(),e=this.jObj.find("#dayCell-"+e).parent(),s=e.data("weeknum");f=new Date(d.toString());r=this.calendarEvents[a].dayEnd.valueOf()-this.calendarEvents[a].dayStart.valueOf();x=this.dayCellWidth;r=Math.round(r/864E5);if("hotel"==this.calendarEvents[a].type){d=this.generateHotelDiv(this.calendarEvents[a]);y=0;w=!1;for(v=!0;!w;){var E=$(d),p=E.data("delta-left");v?(D=7-this.getDay(f)-1,p=(7-D)*x-p,v=!1):(D=7,p=-y*x-p);b&&(b=!1);E.css("left",p+"%");e.append(E);y+=D;y>=r&&(w=!0);s++;e=this.jObj.find("#weekNum-"+
s)}}else if("flight"==this.calendarEvents[a].type&&(d=this.generateFlightDiv(this.calendarEvents[a]),y=0,w=!1,v=!0,d))for(;!w;)E=$(d),p=E.data("delta-left"),v?(D=7-this.getDay(f),p=(7-D)*x+p,v=!1):(D=7,p=-y*x+p),b&&(b=!1),E.css("left",p+"%"),e.append(E),y+=D,y>=r&&(w=!0),s++,e=this.jObj.find("#weekNum-"+s)}s--;e=this.jObj.find("#weekNum-"+s);E.addClass("endPoint")};
VoyangaCalendarTimeline.prepareEvents=function(){console.log(this.calendarEvents);var c=this;$.each(this.calendarEvents,function(b,a){a.dayStart=Date.fromIso(a.dayStart);a.dayEnd=Date.fromIso(a.dayEnd);c.minDate?c.minDate>a.dayStart&&(c.minDate=a.dayStart):c.minDate=a.dayStart;c.maxDate?c.maxDate<a.dayEnd&&(c.maxDate=a.dayEnd):c.maxDate=a.dayEnd;if("flight"==a.type){var d=a.dayStart,d=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();a.startInfo={point:!0,city:!0,count:1,position:0,dateLabel:d};
d=a.dayEnd;d=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();a.endInfo={point:!0,city:!0,count:1,position:0,dateLabel:d};a.sortInd=b}else a.startInfo={count:1,position:0},a.endInfo={count:1,position:0}})};
VoyangaCalendarTimeline.init=function(){VoyangaCalendarTimeline.minDate=!1;VoyangaCalendarTimeline.maxDate=!1;this.prepareEvents();this.slider.jObj=this.jObj;"string"==typeof this.jObj&&(this.jObj=$(this.jObj));this.calendarEvents.sort(this.eventsCompareFunction);this.generateGrid();this.generateEvents();this.slider.init()};var GenericPopup,__bind=function(c,b){return function(){return c.apply(b,arguments)}};
GenericPopup=function(){function c(b,a,c){this.id=b;this.modal=null!=c?c:!1;this.zindex=__bind(this.zindex,this);this.close=__bind(this.close,this);this.rebind=__bind(this.rebind,this);window.popupStack||(window.popupStack=[]);this.inside=!1;0===window.popupStack.length&&$("body").css("overflow","hidden");this.overlay=$('<div id="popupOverlay" style="z-index:'+this.zindex()+'"></div>');$("body").prepend(this.overlay);b=$(this.id+"-template");if(void 0===b[0])throw"Wrong popup template";this.el=$(b.html());
$("body").prepend(this.el);this.el.css("z-index",this.zindex());ko.applyBindings({data:a,close:this.close},this.el[0]);ko.processAllDeferredBindingUpdates();this.modal||(window.popupStack.push(this),this.rebind())}c.prototype.rebind=function(){var b=this;$(window).unbind("keyup");$(window).keyup(function(a){if(27===a.keyCode)return console.error(b),b.close()});$(this.el.find("table")[0]||this.el.find(".wrapContent")).hover(function(){return b.inside=!0},function(){return b.inside=!1});return this.el.click(function(){if(!b.inside)return b.close()})};
c.prototype.close=function(){this.modal||$(window).unbind("keyup");this.el.remove();this["this"]=window.popupStack.pop();this.overlay.remove();return window.popupStack.length?window.popupStack[window.popupStack.length-1].rebind():$("body").css("overflow","auto")};c.prototype.zindex=function(){window.POPUP_NEXT_ZINDEX||(window.POPUP_NEXT_ZINDEX=2E3);return window.POPUP_NEXT_ZINDEX++};return c}();
var ERRORS,ErrorPopup,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};
ERRORS={avia404:{title:"\u041f\u0435\u0440\u0435\u043b\u0435\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b",text:"\u041f\u0435\u0440\u0435\u043b\u0435\u0442\u044b \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u0432 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0434\u043d\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0434\u0430\u0442\u044b \u0432 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u043c \u0437\u0430\u043f\u0440\u043e\u0441\u0435.",buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",
onclose:!1},avia500:{title:"\u0423\u043f\u0441",text:"\u041f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041c\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c \u0434\u0430\u043d\u043d\u043e\u0439 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u0437\u0436\u0435.",
buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"},aviaNoTicketOnValidation:{title:"\u041d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0441\u044f \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442",text:"\u041f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442 \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0441\u044f. \u042d\u0442\u043e \u043c\u043e\u0433\u043b\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0442\u0438 \u043f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u0442\u043e\u0433\u043e \u0447\u0442\u043e \u0431\u0438\u043b\u0435\u0442 \u043f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0442\u0430\u0440\u0438\u0444\u0443 \u0443\u0436\u0435 \u043a\u0443\u043f\u0438\u043b \u043a\u0442\u043e-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043f\u0435\u0440\u0435\u043b\u0435\u0442\u0430.",
buttonText:"Ok"},hotels404:{title:"\u0413\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b",text:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0435 \u0434\u043b\u044f \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0432 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c \u0433\u043e\u0440\u043e\u0434\u0435 \u0432 \u044d\u0442\u0438 \u0434\u043d\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430.",
buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"},hotelsNoTicketOnValidation:{title:"\u041d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0441\u044f \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u043e\u0442\u0435\u043b\u044c",text:"\u041f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438, \u043e\u0442\u0435\u043b\u044c \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u043d\u043e\u043c\u0435\u0440\u0430. \u042d\u0442\u043e \u043c\u043e\u0433\u043b\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0442\u0438 \u043f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u0442\u043e\u0433\u043e \u0447\u0442\u043e \u043d\u043e\u043c\u0435\u0440 \u0443\u0436\u0435 \u0437\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043b \u043a\u0442\u043e-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442.",
buttonText:"Ok"},toursNoTicketOnValidation:{title:"\u041d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0441\u044f \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442",text:"\u041f\u0440\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u043e\u0441\u0442\u0438, \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0437 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432 \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0438\u0441\u044c: TODO \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442.",
buttonText:"Ok"},e500withText:{title:"\u0423\u043f\u0441",text:"\u041f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041c\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c \u0434\u0430\u043d\u043d\u043e\u0439 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u0437\u0436\u0435: {0}",
buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"},e500:{title:"\u0423\u043f\u0441",text:"\u041f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041c\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c \u0434\u0430\u043d\u043d\u043e\u0439 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u0437\u0436\u0435.",
buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"},passport500:{title:"\u0423\u043f\u0441",text:"\u041f\u0440\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041c\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u043d\u0430\u0434 \u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435\u043c \u0434\u0430\u043d\u043d\u043e\u0439 \u043d\u0435\u0438\u0441\u043f\u0440\u0430\u0432\u043d\u043e\u0441\u0442\u0438, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441 \u043f\u043e\u0437\u0436\u0435.",
buttonText:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"},passportBookingError:{title:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",text:"\u041f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432: {0} \u042d\u0442\u043e \u043c\u043e\u0433\u043b\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0442\u0438 \u043f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u0442\u043e\u0433\u043e \u0447\u0442\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0443\u0436\u0435 \u043a\u0443\u043f\u0438\u043b \u043a\u0442\u043e-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0447\u0442\u043e-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0435.",
buttonText:"Ok"}};
ErrorPopup=function(c){function b(a,c,e){null==c&&(c=!1);this.onclose=null!=e?e:!1;this.close=__bind(this.close,this);a=ERRORS[a];a.text=a.text.format(c);this.onclose||(this.onclose=a.onclose);b.__super__.constructor.call(this,"#errorpopup",a,!0);ko.processAllDeferredBindingUpdates();SizeBox("errorpopup");ResizeBox("errorpopup")}__extends(b,c);b.prototype.close=function(){b.__super__.close.apply(this,arguments);return this.onclose?this.onclose():window.location="/#"+(window.app.activeModule()||"tours")};
return b}(GenericPopup);var PhotoBox,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};
PhotoBox=function(c){function b(a,c,e,f){this.photos=a;this.title=c;this.stars=null!=e?e:0;null==f&&(f=0);this._load=__bind(this._load,this);this.prev=__bind(this.prev,this);this.next=__bind(this.next,this);this.photoLoad=__bind(this.photoLoad,this);this.rebind=__bind(this.rebind,this);0!==a.length&&(this.activeIndex=ko.observable(f),this.length0=a.length-1,this.activePhoto=ko.observable(this.photos[this.activeIndex()].largeUrl),this.activeDesc=ko.observable(this.photos[this.activeIndex()].description),
this.busy=!1,b.__super__.constructor.call(this,"#photo-popup",this,!1),resizeLoad())}__extends(b,c);b.prototype.rebind=function(){var a=this;b.__super__.rebind.apply(this,arguments);return $(window).keyup(function(b){if(37===b.keyCode)return a.prev();if(39===b.keyCode)return a.next()})};b.prototype.photoLoad=function(a,b){var c;c=$(b.currentTarget);c.show();console.log(c);850<c.width()?c.css("width","850px"):c.css("width","auto");$("#hotel-img-load").hide();c.animate({opacity:1},300,function(){return console.log("opacitied")});
return this.busy=!1};b.prototype.next=function(){if(!this.busy&&!(this.activeIndex()>=this.length0))return this.activeIndex(this.activeIndex()+1),this._load()};b.prototype.prev=function(){if(!this.busy&&!(0>=this.activeIndex()))return this.activeIndex(this.activeIndex()-1),this._load()};b.prototype._load=function(){var a=this;$("#body-popup-Photo").find("table img").animate({opacity:0},300,function(){a.activePhoto(a.photos[a.activeIndex()].largeUrl);return a.activeDesc(a.photos[a.activeIndex()].description)});
return $("#hotel-img-load").show()};return b}(GenericPopup);var Slider,__bind=function(c,b){return function(){return c.apply(b,arguments)}};
Slider=function(){function c(){this.handler=__bind(this.handler,this);this.click=__bind(this.click,this);this.init=__bind(this.init,this);this.speed=400;this.plannerWidth=[143,0];this.aviaticketsWidth=[135,155];this.hotelWidth=[95,295];this.finishStagesWidth=[148,403]}c.prototype.init=function(){var b;b=$(".slide-turn-mode ul").find(".active").index();-1===b&&(b=1);console.log("activeLIindex",b);this.switchSlide=$(".slide-turn-mode").find(".switch");this.valueWidth=[this.plannerWidth,this.aviaticketsWidth,
this.hotelWidth,this.finishStagesWidth];this.switchSlide.css("width",this.valueWidth[b][0]+"px").css("left",this.valueWidth[b][1]+"px");return this.switchSlide.find(".c").css("width",this.valueWidth[b][0]-27+"px")};c.prototype.click=function(b,a){a.preventDefault();if(""!==window.location.pathname.replace("/",""))$("#loadWrapBgMin").show(),window.location.href=$(a.currentTarget).find("a").attr("href");else return window.app.navigate($(a.currentTarget).find("a").attr("href"),{trigger:!0})};c.prototype.handler=
function(b){var a;if(void 0!==b)return console.log("HANDLER: ",b),a=$("#h-"+b+"-slider"),b=a.index(),$(".btn").removeClass("active"),this.switchSlide.animate({width:this.valueWidth[b][0]+"px",left:this.valueWidth[b][1]+"px"},this.speed,function(){return a.addClass("active")}),this.switchSlide.find(".c").animate({width:this.valueWidth[b][0]-27+"px"},this.speed)};return c}();
var ACC_MONTHS,AVIA_TICKET_TIMELIMIT,HOTEL_TICKET_TIMELIMIT,MONTHS,SHORT_MONTHS,SHORT_WEEKDAYS,TOURS_TICKET_TIMELIMIT,Utils,calcOffset,dateUtils,exTrim,isEmail,waitElement,_this=this;TOURS_TICKET_TIMELIMIT=HOTEL_TICKET_TIMELIMIT=AVIA_TICKET_TIMELIMIT=900;MONTHS="\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u0440\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f".split(" ");
ACC_MONTHS="\u044f\u043d\u0432\u0430\u0440\u044c \u0444\u0435\u0432\u0440\u0430\u043b\u044c \u043c\u0430\u0440\u0442 \u0430\u043f\u0440\u0435\u043b\u044c \u043c\u0430\u0439 \u0438\u044e\u043d\u044c \u0438\u044e\u043b\u044c \u0430\u0432\u0433\u0443\u0441\u0442 \u0441\u0435\u043d\u0442\u0440\u044f\u0431\u0440\u044c \u043e\u043a\u0442\u044f\u0431\u0440\u044c \u043d\u043e\u044f\u0431\u0440\u044c \u0434\u0435\u043a\u0430\u0431\u0440\u044c".split(" ");SHORT_MONTHS="\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u044f \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" ");
SHORT_WEEKDAYS="\u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431 \u0412\u0441".split(" ");
dateUtils={formatDay:function(c){var b;if(0!==c.length)return c.getDay?c=c.getDate():(b=/(\d+)\.(\d+)\.(\d+)/,c=b.exec(c)[1]),c},formatMonth:function(c){var b;if(0!==c.length)return c.getMonth?c=c.getMonth():(b=/(\d+)\.(\d+)\.(\d+)/,c=b.exec(c)[2]-1),SHORT_MONTHS[c]},formatDayMonth:function(c){var b;if(0!==c.length)return b=""+c.getDate(),b+" "+MONTHS[c.getMonth()]},formatDayMonthYear:function(c){var b;if(0!==c.length)return console.log("dmy",c,c.getYear()),b=""+c.getDate(),b=b+" "+MONTHS[c.getMonth()],
b+=" ",b+c.getFullYear()},formatDayMonthInterval:function(c,b){var a;if(!(0===c.length||0===b.length))return a="\u0441 "+c.getDate(),c.getMonth()!==b.getMonth()&&(a+=" "+MONTHS[c.getMonth()]),a+=" \u043f\u043e "+b.getDate(),a+(" "+MONTHS[b.getMonth()])},formatDayShortMonth:function(c){var b;if(c&&0!==c.length)return b=""+c.getDate(),b+" "+SHORT_MONTHS[c.getMonth()]},formatHtmlDayShortMonth:function(c){var b;c.getDate||(c=c.toDate());b='<span class="f17">'+c.getDate();return b+"</span><br>"+SHORT_MONTHS[c.getMonth()]},
formatDayMonthWeekday:function(c){var b;console.log("formatDayMonthWeekday",c);c.getDate()||(c=c.toDate());b="<b>"+c.getDate();b=b+"</b> "+SHORT_MONTHS[c.getMonth()];b+=", ";return b+SHORT_WEEKDAYS[c.getDay()]},formatTime:function(c){var b;b=""+c.getHours();b+=":";c=c.getMinutes().toString();1===c.length&&(c="0"+c);return b+c},formatTimeInMinutes:function(c){return 60*c.getHours()+c.getMinutes()},formatDuration:function(c){var b;c/=60;b=c%60;return(c-b)/60+" \u0447. "+b+" \u043c."}};
calcOffset=function(){var c,b,a;a=-(new Date).getTimezoneOffset();c=Math.floor(a/60).toString();b=(a%60).toString();1===c.length&&(c="0"+c);1===b.length&&(b="0"+b);return(0>a?"-":"+")+c+":"+b};
Utils={tzOffset:calcOffset(),implode:function(c,b){return b instanceof Array?b.join(c):b},inRange:function(c,b){return b.from<=c&&c<=b.to},fromIso:function(c){return"string"===typeof c?(c=c.split("-"),new Date(c[0],c[1](-1),c[2])):c},scrollTo:function(c,b,a){var d;null==b&&(b=!0);null==a&&(a=null);"string"===typeof c?d=$(c).offset():"object"===typeof c?d=$(c).offset():(d={},d.top=c);if(d)return b?a?$("html,body").animate({scrollTop:d.top},1E3,a):$("html,body").animate({scrollTop:d.top}):$("html,body").scrollTop(d.top)},
wordAfterNum:function(c,b,a,d){var e;null==d&&(d=!1);d||(d=a);e=c%100;if(4<e&&21>e)return c+" "+d;e%=10;return 1===e?c+" "+b:1<e&&5>e?c+" "+a:c+" "+d},limitTextLenght:function(c,b){var a,d;d={};a=c.lastIndexOf(" ",b);a=c.substr(0,a);Utils.countRusChars(a)>b/2&&(b=Math.round(0.84*b));c.length>b?(a=c.lastIndexOf(" ",b),d.startText=c.substr(0,a),d.endText=c.substr(a),d.isBigText=!0):(d.isBigText=!1,d.startText=c,d.endText="");return d},countRusChars:function(c){var b;b=c.length;c=c.replace(RegExp("[\u0430-\u044f\u0410-\u042f\u0451\u0401]",
"gi"),"").length;return b-c},submitPayment:function(c){var b,a,d;b='<form id="buy-form" method="GET" action="'+c.url+'" target="payment_frame">';delete c.url;for(a in c)d=c[a],b+='<input type="hidden" name="'+a+'" value="'+d+'" />';return $(b+"</form>").appendTo("body").submit()},toBuySubmit:function(c){var b,a,d,e,f,h,j;b='<form id="buy-form" method="GET" action="/buy">';a=h=0;for(j=c.length;h<j;a=++h)for(d in e=c[a],e)f=e[d],d="item["+a+"]["+d+"]",b+='<input type="hidden" name="'+d+'" value="'+
f+'" />';$("body").append(b+"</form>");return $("#buy-form").submit()},formatPrice:function(c){var b,a,d,e,f;d=parseInt(c).toString();a="";b=0;for(c=e=f=d.length-1;0>=f?0>=e:0<=e;c=0>=f?++e:--e)0!==b&&0===b%3&&(a=" "+a),a=d[c]+a,b++;return a},calculateTheDistance:function(c,b,a,d){var e,f;c=c*Math.PI/180;a=a*Math.PI/180;e=b*Math.PI/180;f=d*Math.PI/180;d=Math.cos(c);b=Math.cos(a);c=Math.sin(c);a=Math.sin(a);f-=e;e=Math.cos(f);f=Math.sin(f);f=Math.sqrt(Math.pow(b*f,2)+Math.pow(d*a-c*b*e,2));return 6372795*
Math.atan2(f,c*a+d*b*e)},flashMessage:function(c){var b,a,d;a=20;b=0;for(d=[];10>b;)c.animate({"margin-left":"+="+(a=-a)+"px"},50),d.push(b++);return d}};exTrim=function(c,b){b=!b?" s\u00a0":b.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,"$1");return c.replace(RegExp("^["+b+"]+|["+b+"]+$","g"),"")};String.prototype.format=function(){var c;c=arguments;return this.replace(/{(\d+)}/g,function(b,a){return"undefined"!==typeof c[a]?c[a]:b})};isEmail=function(c){return c.match(emailPattern)};
waitElement=function(c,b){return $(c).size()?b($(c)):setTimeout(function(){return waitElement(c,b)},100)};ko.extenders.integerOnly=function(c,b){return ko.computed({read:c,write:function(a){var d,e;d=c();e=parseInt(a);if(isNaN(e)||0>e)e=0;b.max&&(e<b.min&&(e=b.min),e>b.max&&(e=b.max));e!==d&&c(e);if(a!==d)return c.notifySubscribers(e)}})};
ko.bindingHandlers.timeSlider={init:function(c,b){var a,d;d=ko.utils.unwrapObservable(b().selection);a=ko.utils.unwrapObservable(b().limits);a.from-=15;0>a.from&&(a.from=0);a.to+=15;1440<a.to&&(a.to=1440);Utils.inRange(d.from,a)||(d.from=a.from);Utils.inRange(d.to,a)||(d.to=a.to);$(c).val(d.from+";"+d.to);$(c).jslider({from:a.from,to:a.to,step:15,dimension:"",skin:"round_voyanga",scale:!1,limits:!1,minInterval:60,calculate:function(a){var b;b=Math.floor(a/60);a-=60*b;10>b&&(b="0"+b);0===a&&(a="00");
return b+":"+a},callback:function(a){return b().selection(a)}});return b().element=$(c)},update:function(c){var b;b=$(c).data("jslider");return setTimeout(function(){return b.onresize()},5)}};
ko.bindingHandlers.priceSlider={init:function(c,b){var a,d;d=ko.utils.unwrapObservable(b().selection);a=ko.utils.unwrapObservable(b().limits);0>a.from&&(a.from=0);console.log(a.to);Utils.inRange(d.from,a)||(d.from=a.from);Utils.inRange(d.to,a)||(d.to=a.to);$(c).val(d.from+";"+d.to);$(c).jslider({from:a.from,to:a.to,dimension:"&nbsp;\u0420",skin:"round_voyanga",scale:!1,limits:!1,minInterval:60,calculate:function(a){a=a.toString();3<a.length&&(a=a.substr(0,a.length-3)+"&nbsp;"+a.substr(-3));return a},
callback:function(a){return b().selection(a)}});return b().element=$(c)},update:function(c){var b;b=$(c).data("jslider");return setTimeout(function(){return b.onresize()},5)}};
ko.bindingHandlers.singleSlider={init:function(c,b){var a,d,e;e=ko.utils.unwrapObservable(b().selection);d=ko.utils.unwrapObservable(b().limits);0>d.from&&(d.from=0);e=d.to;(a=$(c).data("dimension"))&&(a="&nbsp;"+a);$(c).val(e);$(c).jslider({from:d.from,to:d.to,dimension:a,skin:"round_voyanga",scale:!1,limits:!1,round:1,calculate:function(a){a=a.toString();3<a.length&&(a=a.substr(0,a.length-3)+"&nbsp;"+a.substr(-3));return a},callback:function(a){return b().selection(a)}});return b().element=$(c)},
update:function(c){var b;b=$(c).data("jslider");return setTimeout(function(){return b.onresize()},5)}};ko.bindingHandlers.slider={init:function(c,b){ko.utils.unwrapObservable(b());return $(c).selectSlider({})},update:function(){}};ko.bindingHandlers.photoSlider={init:function(c,b){ko.utils.unwrapObservable(b());return $(c).photoSlider({})},update:function(){}};var checkVoybox,uncheckVoybox;checkVoybox=function(c){return c.find(".ui-control").addClass("on")};uncheckVoybox=function(c){return c.find(".ui-control").removeClass("on")};
ko.bindingHandlers.checkbox={init:function(c,b){var a,d,e,f;f=ko.utils.unwrapObservable(b().label);a=b().checked;d=$(c);e='<label class="ui-hover cF"><div class="ui-control checkbox"></div>';e+='<div class="fl">';e+='<div class="ui-label">'+f+"</div>";e+="</div>";e+="</label>";e=$(e);e.click(function(){d=$(this);if(!0!==d.find(".ui-control").hasClass("on"))return checkVoybox(d),_.isFunction(a)?a(!0):$(c).attr("checked","checked");_.isFunction(a)?a(!1):$(c).removeAttr("checked");return uncheckVoybox(d)});
d.after(e);return d.hide()},update:function(c,b){var a,d,e;e=ko.utils.unwrapObservable(b().label);a=ko.utils.unwrapObservable(b().checked);d=$(c).next();d.find(".ui-label").html(e);if(a){if(checkVoybox(d),_.isFunction(b().checked))return b().checked(1)}else if(uncheckVoybox(d),_.isFunction(b().checked))return b().checked(0)}};
ko.bindingHandlers.swapPanel={update:function(c,b){var a;a=ko.utils.unwrapObservable(b());$(c).off("click");return $(c).on("click",function(){var b;b=a.to;console.log("switching to "+b);return window.app.navigate(b,{trigger:!0})})}};
ko.bindingHandlers.gMap={init:function(c,b){var a,d;d=ko.utils.unwrapObservable(b());a=$(c).css("display");$(c).css("display","block");new google.maps.Map(c,{mapTypeControl:!1,panControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP,style:google.maps.ZoomControlStyle.SMALL},streetViewControl:!1,zoom:3,mapTypeId:google.maps.MapTypeId.TERRAIN,center:new google.maps.LatLng(d.lat,d.lng)});return window.setTimeout(function(){return $(c).css("display",a)},700)},update:function(){}};
var HotelPeopleSelector,Passengers,PeopleSelector,Roomers,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};
PeopleSelector=function(){function c(){this.afterRender=__bind(this.afterRender,this);this.afterRenderPeoplePopup=__bind(this.afterRenderPeoplePopup,this);this.showPeoplePopup=__bind(this.showPeoplePopup,this);this.show=__bind(this.show,this);this.inside3=this.inside2=this.inside=!1}c.prototype.show=function(){var b,a,c=this;b=$(".popup");if(b.hasClass("active"))return this.close();$(document.body).mousedown(function(a){console.log("click event",a);if(!(0<$(a.target).parents(".popup").length||0<$(a.target).parents(".how-many-man").length))return c.close()});
$(".how-many-man .btn").addClass("active");$(".how-many-man .content").addClass("active");a=b.width();b.addClass("active");$(".how-many-man").offset();b.css("right",-a+$(".how-many-man").innerWidth()+"px");b.css("top","63px");return b.css("position","absolute")};c.prototype.showPeoplePopup=function(){var b,a,c=this;a=$(".popupPeople");if(a.hasClass("active"))return this.close();$(document.body).mousedown(function(a){console.log("click event",a);if(!(0<$(a.target).parents(".popupPeople").length||0<
$(a.target).parents(".tdPeople").length))return c.close()});$(".how-many-man .btn").addClass("active");$(".how-many-man .content").addClass("active");a.addClass("active");b=$(".how-many-man").offset();return a.css("left",b.left)};c.prototype.afterRenderPeoplePopup=function(){$(".popupPeople").find("input").hover(function(){$(this).parent().find(".plusOne").show();return $(this).parent().find(".minusOne").show()});$(".adults,.childs,.small-childs").hover(null,function(){$(this).parent().find(".plusOne").hide();
return $(this).parent().find(".minusOne").hide()});$(".plusOne").hover(function(){$(this).addClass("active");return $(".minusOne").addClass("active")},function(){$(this).removeClass("active");return $(".minusOne").removeClass("active")});$(".minusOne").hover(function(){$(this).addClass("active");return $(".plusOne").addClass("active")},function(){$(this).removeClass("active");return $(".plusOne").removeClass("active")});$(".popupPeople").find("input").focus(function(){$(this).attr("rel",$(this).val());
return $(this).val("")});return $(".popupPeople").find("input").blur(function(){""===$(this).val()&&$(this).val($(this).attr("rel"));return $(this).trigger("change")})};c.prototype.afterRender=function(){var b=this;$(".how-many-man .popup").find("input").hover(function(){$(this).parent().find(".plusOne").show();return $(this).parent().find(".minusOne").show()});$(".adults,.childs,.small-childs").hover(null,function(){$(this).parent().find(".plusOne").hide();return $(this).parent().find(".minusOne").hide()});
$(".plusOne").hover(function(){$(this).addClass("active");return $(".minusOne").addClass("active")},function(){$(this).removeClass("active");return $(".minusOne").removeClass("active")});$(".minusOne").hover(function(){$(this).addClass("active");return $(".plusOne").addClass("active")},function(){$(this).removeClass("active");return $(".plusOne").removeClass("active")});$(".how-many-man .popup").find("input").focus(function(){$(this).attr("rel",$(this).val());return $(this).val("")});$(".how-many-man .popup").find("input").blur(function(){""===
$(this).val()&&$(this).val($(this).attr("rel"));return $(this).trigger("change")});$(".how-many-man").find(".popup").hover(function(){return b.inside=!0},function(){return b.inside=!1});return $(".how-many-man").find(".wrapDivContent").hover(function(){b.inside2=!0;return b.inside3=!0},function(){b.inside2=!1;return b.inside3=!1})};c.prototype.close=function(){$(document.body).unbind("mousedown");$(".how-many-man .btn").removeClass("active");$(".how-many-man .content").removeClass("active");$(".popupPeople").removeClass("active");
return $(".how-many-man").find(".popup").removeClass("active")};return c}();
Passengers=function(c){function b(){this.balanceTravelers=__bind(this.balanceTravelers,this);var a=this;this.template="passengers-template";this.adults=ko.observable(1).extend({integerOnly:{min:1,max:6}});this.children=ko.observable(0).extend({integerOnly:{min:0,max:4}});this.infants=ko.observable(0).extend({integerOnly:{min:0,max:3}});this.MAX_TRAVELERS=9;this.children.subscribe(function(b){b>a.MAX_TRAVELERS-1&&a.children(a.MAX_TRAVELERS-1);return a.balanceTravelers(["adults","infants"],a)});this.infants.subscribe(function(b){b>
a.adults()&&a.adults(a.infants());return a.balanceTravelers(["children","adults"],a)});this.sum_children=ko.computed(function(){return 1*a.children()+1*a.infants()});this.overall=ko.computed(function(){return 1*a.adults()+1*a.children()+1*a.infants()});this.adults.subscribe(function(b){a.infants()>a.adults()&&a.infants(a.adults());b>a.MAX_TRAVELERS&&a.adults(a.MAX_TRAVELERS);return a.balanceTravelers(["children","infants"],a)});this.overall.subscribe(function(){return resizePanel()})}__extends(b,
c);b.prototype.balanceTravelers=function(a,b){var c,f,h,j,m;if(this.overall()>this.MAX_TRAVELERS){c=b.overall()-this.MAX_TRAVELERS;m=[];h=0;for(j=a.length;h<j;h++)if(f=a[h],b[f]()>=c){b[f](b[f]()-c);break}else c-=b[f](),m.push(b[f](0));return m}};b.prototype.plusOne=function(a,b){var c;c=$(b.target).attr("rel");return a[c](a[c]()+1)};b.prototype.minusOne=function(a,b){var c;c=$(b.target).attr("rel");return a[c](a[c]()-1)};return b}(PeopleSelector);
Roomers=function(){function c(b,a,c){this.room=b;this.index=a;this.length=c;this.last=__bind(this.last,this);this.minusOne=__bind(this.minusOne,this);this.plusOne=__bind(this.plusOne,this);this.adults=this.room.adults;this.children=this.room.children;this.ages=this.room.ages;this.infants=this.room.infants}c.prototype.plusOne=function(b,a){var c;c=$(a.currentTarget).attr("rel");return this[c](this[c]()+1)};c.prototype.minusOne=function(b,a){var c;c=$(a.currentTarget).attr("rel");if(0<this[c]())return this[c](this[c]()-
1)};c.prototype.last=function(){return this.index+1===this.length};return c}();
HotelPeopleSelector=function(c){function b(a){var c=this;this.sp=a;this.removeRoom=__bind(this.removeRoom,this);this.addRoom=__bind(this.addRoom,this);b.__super__.constructor.apply(this,arguments);this.template="roomers-template";this.rawRooms=this.sp.rooms;this.roomsView=ko.computed(function(){var a,b,h,j,m,p,g;j=[];a=[];g=c.sp.rooms();b=m=0;for(p=g.length;m<p;b=++m)h=g[b],2===a.length&&(j.push(a),a=[]),b=new Roomers(h,b,c.sp.rooms().length),b.addRoom=c.addRoom,b.removeRoom=c.removeRoom,a.push(b);
j.push(a);return j});this.sp.overall.subscribe(resizePanel)}__extends(b,c);b.prototype.addRoom=function(){if(4!==this.sp.rooms().length&&!(8<this.sp.overall()))return this.sp.rooms.push(new SpRoom(this.sp))};b.prototype.removeRoom=function(a){if(1!==this.sp.rooms().length)return this.sp.rooms.splice(this.sp.rooms.indexOf(a.room),1)};return b}(PeopleSelector);var SearchParams;SearchParams=function(){return function(){this.date=ko.observable("")}}();
ko.rangeObservable=function(c,b){var a;a={from:ko.observable(c),to:ko.observable(b)};return ko.computed({read:function(){return{from:this.from(),to:this.to()}},write:function(a){a=a.split(";");this.from(+a[0]);return this.to(+a[1])},owner:a})};
var AviaFiltersT,DistancesFilter,Filter,HotelFiltersT,ListFilter,MaxStopoverFilter,OnlyDirectFilter,PriceFilter,ServiceClassFilter,StarOption,StarsFilter,TextFilter,TimeFilter,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};
Filter=function(){function c(){this.setConfig=__bind(this.setConfig,this);this.getConfig=__bind(this.getConfig,this)}c.prototype.filter=function(){throw"override me";};c.prototype.resetLimits=function(){};c.prototype.updateLimits=function(){};c.prototype.get=function(b,a){var c;c=ko.utils.unwrapObservable(b[a]);"function"===typeof c&&(c=c.apply(b));return c};c.prototype.getConfig=function(){return this.selection()};c.prototype.setConfig=function(b){return this.selection(b)};return c}();
TimeFilter=function(c){function b(a){this.key=a;this.setConfig=__bind(this.setConfig,this);this.filter=__bind(this.filter,this);this.limits=ko.rangeObservable(1440,0);this.selection=ko.rangeObservable(0,1440);this.element=!1;_.extend(this,Backbone.Events)}__extends(b,c);b.prototype.filter=function(a){return Utils.inRange(this.get(a,this.key),this.selection())};b.prototype.updateLimits=function(a){var b;b=this.get(a,this.key);a=this.limits();b<a.from&&(a.from=b);b>a.to&&(a.to=b);return this.limits(a.from+
";"+a.to)};b.prototype.setConfig=function(a){this.selection(a.from+";"+a.to);if(this.element)return this.element.jslider("value",a.from,a.to)};return b}(Filter);
PriceFilter=function(c){function b(a){this.key=a;this.setConfig=__bind(this.setConfig,this);this.filter=__bind(this.filter,this);this.limits=ko.rangeObservable(999E3,0);this.selection=ko.rangeObservable(0,999E3);this.element=!1;_.extend(this,Backbone.Events)}__extends(b,c);b.prototype.filter=function(a){return Utils.inRange(this.get(a,this.key),this.selection())};b.prototype.updateLimits=function(a){var b;b=this.get(a,this.key);a=this.limits();b<a.from&&(a.from=b);b>a.to&&(a.to=b);return this.limits(a.from+
";"+a.to)};b.prototype.setConfig=function(a){this.selection(a.from+";"+a.to);if(this.element)return this.element.jslider("value",a.from,a.to)};return b}(Filter);
DistancesFilter=function(c){function b(a){this.key=a;this.setConfig=__bind(this.setConfig,this);this.filter=__bind(this.filter,this);this.limits=ko.rangeObservable(999E3,0);this.selection=ko.observable(999E3);this.element=!1;_.extend(this,Backbone.Events)}__extends(b,c);b.prototype.filter=function(a){return this.get(a,this.key)<=this.selection()};b.prototype.updateLimits=function(a){var b;b=this.get(a,this.key);a=this.limits();b<a.from&&(a.from=b);b>a.to&&(a.to=b);return this.limits(a.from+";"+a.to)};
b.prototype.setConfig=function(a){this.selection(a);if(this.element)return this.element.jslider("value",a)};return b}(Filter);
ListFilter=function(c){function b(a,b,c){var f=this;this.keys=a;this.caption=b;this.moreLabel=c;this.setConfig=__bind(this.setConfig,this);this.getConfig=__bind(this.getConfig,this);this.showMore=__bind(this.showMore,this);this.reset=__bind(this.reset,this);this.filter=__bind(this.filter,this);this.options=ko.observableArray();this._known={};this.active=ko.computed(function(){return 1<f.options().length});this.selection=ko.computed(function(){var a,b,c,d,e;b=[];e=f.options();c=0;for(d=e.length;c<
d;c++)a=e[c],a.checked()&&b.push(a.key);return b});_.extend(this,Backbone.Events)}__extends(b,c);b.prototype.addOption=function(a){this._known[a]=1;this.options.remove(function(b){return b.key===a});return this.options.unshift({key:a,checked:ko.observable(0)})};b.prototype.updateLimits=function(a){var b,c,f,h,j,m,p;m=this.keys;p=[];h=0;for(j=m.length;h<j;h++)b=m[h],b=this.get(a,b),"undefined"!==typeof b&&("object"!==typeof b?(f=[],f.push(b)):f=b,f?p.push(function(){var a,b,d;d=[];a=0;for(b=f.length;a<
b;a++)c=f[a],this._known[c]||(this._known[c]=1,this.options.push({key:c,checked:ko.observable(0)}),d.push(this.options.sort(function(a,b){return a.key===b.key?0:a.key>b.key?1:-1})));return d}.call(this)):p.push(void 0));return p};b.prototype.filter=function(a){var b,c,f,h,j;if(0===this.selection().length)return!0;console.log("servFilters",this.selection());h=this.keys;c=0;for(f=h.length;c<f;c++)if(b=h[c],b=this.get(a,b),console.log("servFiltersProp",b),"object"!==typeof b){if(0>this.selection().indexOf(b))return!1}else{if(b){a=
!0;j=this.selection();f=0;for(h=j.length;f<h;f++)c=j[f],a=a&&0<=b.indexOf(c);return a}return!1}return!0};b.prototype.reset=function(){var a,b,c,f,h;f=this.options();h=[];b=0;for(c=f.length;b<c;b++)a=f[b],h.push(a.checked(!1));return h};b.prototype.showMore=function(a,b){var c,f;f=$(b.currentTarget);c=f.parent().parent().find(".more-filters");if("none"!==c.css("display"))return f.text(f.text().replace("\u0421\u043a\u0440\u044b\u0442\u044c","\u0412\u0441\u0435")),c.hide("fast",reInitJScrollPane);f.text(f.text().replace("\u0412\u0441\u0435",
"\u0421\u043a\u0440\u044b\u0442\u044c"));return c.show("fast",reInitJScrollPane)};b.prototype.getConfig=function(){var a,b,c,f,h;b={};h=this.options();c=0;for(f=h.length;c<f;c++)a=h[c],b[a.key]=a.checked();return b};b.prototype.setConfig=function(a){var b,c,f,h,j;h=this.options();j=[];c=0;for(f=h.length;c<f;c++)b=h[c],j.push(b.checked(a[b.key]));return j};return b}(Filter);
StarOption=function(){return function(c){var b=this;this.key=c;this.starName=STARS_VERBOSE[this.key-1];this.checked=ko.observable(0);this.cls=ko.computed(function(){return b.checked()?"active":""})}}();
StarsFilter=function(c){function b(a,b,c){var f=this;this.keys=a;this.caption=b;this.moreLabel=c;this.setConfig=__bind(this.setConfig,this);this.getConfig=__bind(this.getConfig,this);this.filter=__bind(this.filter,this);this.options=ko.observableArray();for(a=b=1;5>=b;a=++b)this.options.push(new StarOption(a));this.active=ko.computed(function(){return 1<f.options().length});this.selection=ko.computed(function(){var a,b,c,d,e;b=[];e=f.options();c=0;for(d=e.length;c<d;c++)a=e[c],a.checked()&&b.push(a.starName);
return b});_.extend(this,Backbone.Events)}__extends(b,c);b.prototype.updateLimits=function(){};b.prototype.filter=function(a){var b,c,f,h;if(0===this.selection().length)return!0;h=this.keys;c=0;for(f=h.length;c<f;c++)if(b=h[c],b=this.get(a,b),console.log(this.selection()),console.log(b),0>this.selection().indexOf(b))return!1;return!0};b.prototype.starClick=function(){console.log(this);return $(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")};b.prototype.getConfig=
function(){var a,b,c,f,h;b={};h=this.options();c=0;for(f=h.length;c<f;c++)a=h[c],b[a.starName]=a.checked();return b};b.prototype.setConfig=function(a){var b,c,f,h,j;h=this.options();j=[];c=0;for(f=h.length;c<f;c++)b=h[c],j.push(b.checked(a[b.starName]));return j};return b}(Filter);
MaxStopoverFilter=function(c){function b(a,b){this.value=a;this.field=null!=b?b:"stopoverLength";this.filter=__bind(this.filter,this);this.selection=ko.observable(0)}__extends(b,c);b.prototype.filter=function(a){return this.selection()?this.get(a,this.field)<=3600*this.value:!0};return b}(Filter);OnlyDirectFilter=function(c){function b(){this.filter=__bind(this.filter,this);this.selection=ko.observable(0)}__extends(b,c);b.prototype.filter=function(a){return+this.selection()?a.direct:!0};return b}(Filter);
ServiceClassFilter=function(c){function b(){this.filter=__bind(this.filter,this);this.selection=ko.observable("A")}__extends(b,c);b.prototype.filter=function(a){return"A"===this.selection()?"E"===a.serviceClass:"B"===a.serviceClass||"F"===a.serviceClass};return b}(Filter);
TextFilter=function(c){function b(a,b){this.key=a;this.caption=b;this.keyDown=__bind(this.keyDown,this);this.updateResults=__bind(this.updateResults,this);this.filter=__bind(this.filter,this);this.selection=ko.observable("");this.updateTimeout=null}__extends(b,c);b.prototype.filter=function(a){var b,c;b=this.selection();c=!0;""!==b&&(b=b.replace(/([\\\(\)\{\}\[\]\.\*\?\^\$\|\+\-])/g,"\\$1"),b=RegExp(b,"ig"),c=b.test(a[this.key]));return c};b.prototype.updateResults=function(){return this.updateTimeout=
null};b.prototype.keyDown=function(){var a=this;if(null!==this.updateTimeout)return window.clearTimeout(this.updateTimeout),this.updateTimeout=window.setTimeout(function(){return a.updateResults()},1E3)};return b}(Filter);
AviaFiltersT=function(){function c(b){var a=this;this.results=b;this.setConfig=__bind(this.setConfig,this);this.getConfig=__bind(this.getConfig,this);this.iterate=__bind(this.iterate,this);this.filter=__bind(this.filter,this);this.runFiltersFunc=__bind(this.runFiltersFunc,this);this.runFilters=__bind(this.runFilters,this);this.filterBackVoyage=__bind(this.filterBackVoyage,this);this.filterVoyage=__bind(this.filterVoyage,this);this.filterResult=__bind(this.filterResult,this);this.updateLimitsBackVoyage=
__bind(this.updateLimitsBackVoyage,this);this.updateLimitsVoyage=__bind(this.updateLimitsVoyage,this);this.updateLimitsResult=__bind(this.updateLimitsResult,this);this.template="avia-filters";this.rt=this.results.roundTrip;this.voyageFilters=["departure","shortStopover","irrelevantlyLong","onlyDirect"];this.rtVoyageFilters=["rtDeparture","shortStopover","irrelevantlyLong","onlyDirect"];this.resultFilters=["departureAirport","arrivalAirport","airline","serviceClass"];this.departure=new TimeFilter("departureTimeNumeric");
this.rt&&(this.rtDeparture=new TimeFilter("departureTimeNumeric"));b=this.rt?["departureAirport","rtArrivalAirport"]:["departureAirport"];this.departureAirport=new ListFilter(b,this.results.departureCity,"\u0412\u0441\u0435 \u0430\u044d\u0440\u043e\u043f\u043e\u0440\u0442\u044b");b=this.rt?["arrivalAirport","rtDepartureAirport"]:["arrivalAirport"];this.arrivalAirport=new ListFilter(b,this.results.arrivalCity,"\u0412\u0441\u0435 \u0430\u044d\u0440\u043e\u043f\u043e\u0440\u0442\u044b");this.airline=
new ListFilter(["airlineName"],"\u0410\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438","\u0412\u0441\u0435 \u0430\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438");this.shortStopover=new MaxStopoverFilter(2.5);this.irrelevantlyLong=new MaxStopoverFilter(30,"maxStopoverLength");this.irrelevantlyLong.selection(1);this.onlyDirect=new OnlyDirectFilter;this.serviceClass=new ServiceClassFilter;this.refilter=ko.computed(function(){var b,c,f,h,j;h=a.resultFilters;c=0;
for(f=h.length;c<f;c++)b=h[c],a[b].selection();h=a.voyageFilters;c=0;for(f=h.length;c<f;c++)b=h[c],a[b].selection();if(a.rt){h=a.rtVoyageFilters;j=[];c=0;for(f=h.length;c<f;c++)b=h[c],j.push(a[b].selection());return j}}).extend({throttle:50});this.refilter.subscribe(this.filter);this.iterate(this.updateLimitsResult,this.updateLimitsVoyage,this.updateLimitsBackVoyage)}c.prototype.updateLimitsResult=function(b){return this.runFiltersFunc(b,this.resultFilters,"updateLimits")};c.prototype.updateLimitsVoyage=
function(b){return this.runFiltersFunc(b,this.voyageFilters,"updateLimits")};c.prototype.updateLimitsBackVoyage=function(b){return this.runFiltersFunc(b,this.rtVoyageFilters,"updateLimits")};c.prototype.setVisibleIfChanged=function(b,a){if(b.visible()!==a)return b.visible(a)};c.prototype.filterResult=function(b){return this.runFilters(b,this.resultFilters)};c.prototype.filterVoyage=function(b){return this.runFilters(b,this.voyageFilters)};c.prototype.filterBackVoyage=function(b){return this.runFilters(b,
this.rtVoyageFilters)};c.prototype.runFilters=function(b,a){var c,e,f,h;e=!0;f=0;for(h=a.length;f<h&&!(c=a[f],e=e&&this[c].filter(b),!e);f++);return this.setVisibleIfChanged(b,e)};c.prototype.runFiltersFunc=function(b,a,c){var e,f,h,j;j=[];f=0;for(h=a.length;f<h;f++)e=a[f],j.push(this[e][c](b));return j};c.prototype.filter=function(){this.iterate(this.filterResult,this.filterVoyage,this.filterBackVoyage);ko.processAllDeferredBindingUpdates();return scrollValue("avia",{})};c.prototype.iterate=function(b,
a,c){var e,f,h,j,m,p,g,n,q,u,r,x;u=this.results.data;j=0;for(g=u.length;j<g;j++){f=u[j];b(f);r=f.voyages;m=0;for(n=r.length;m<n;m++)if(h=r[m],a(h),this.rt){x=h._backVoyages;p=0;for(q=x.length;p<q;p++)e=x[p],c(e);h.chooseActive()}f.chooseActive()}return this.results.postFilters()};c.prototype.getConfig=function(){var b,a,c,e,f;b={};f=this.resultFilters;c=0;for(e=f.length;c<e;c++)a=f[c],b[a]=this[a].getConfig();f=this.voyageFilters;c=0;for(e=f.length;c<e;c++)a=f[c],b[a]=this[a].getConfig();if(this.rt){f=
this.rtVoyageFilters;c=0;for(e=f.length;c<e;c++)a=f[c],b[a]=this[a].getConfig()}console.log("getConfig",b);return b};c.prototype.setConfig=function(b){var a,c,e;console.log("setConfig",b);e=[];for(c in b)a=b[c],e.push(this[c].setConfig(a));return e};return c}();
HotelFiltersT=function(){function c(b){var a=this;this.results=b;this.setConfig=__bind(this.setConfig,this);this.getConfig=__bind(this.getConfig,this);this.iterate=__bind(this.iterate,this);this.filter=__bind(this.filter,this);this.runFiltersFunc=__bind(this.runFiltersFunc,this);this.runFilters=__bind(this.runFilters,this);this.filterRoom=__bind(this.filterRoom,this);this.filterHotel=__bind(this.filterHotel,this);this.updateLimitsRoom=__bind(this.updateLimitsRoom,this);this.updateLimitsHotel=__bind(this.updateLimitsHotel,
this);this.showFullMap=__bind(this.showFullMap,this);this.template="hotels-filters";this.roomFilters=["price"];this.hotelFilters=["services","stars","distance","hotelName"];this.services=new ListFilter(["hotelServices"],"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","\u0412\u0441\u0435 \u0443\u0441\u043b\u0443\u0433\u0438");this.stars=new StarsFilter(["stars"],"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e","\u0412\u0441\u0435 \u0443\u0441\u043b\u0443\u0433\u0438");
this.price=new PriceFilter("pricePerNight");this.distance=new DistancesFilter("distanceToCenter");this.hotelName=new TextFilter("hotelName","\u043f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e");this.refilter=ko.computed(function(){var b,c,f,h,j;h=a.hotelFilters;c=0;for(f=h.length;c<f;c++)b=h[c],a[b].selection();h=a.roomFilters;j=[];c=0;for(f=h.length;c<f;c++)b=h[c],j.push(a[b].selection());return j}).extend({throttle:50});this.refilter.subscribe(this.filter);
this.iterate(this.updateLimitsHotel,this.updateLimitsRoom,!1);this.services.addOption("\u0424\u0438\u0442\u043d\u0435\u0441\u0441");this.services.addOption("\u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0430");this.services.addOption("\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442")}c.prototype.showFullMap=function(){console.log("FM");console.log();return this.results.showFullMapFunc()};c.prototype.updateLimitsHotel=function(b){return this.runFiltersFunc(b,this.hotelFilters,"updateLimits")};c.prototype.updateLimitsRoom=
function(b){return this.runFiltersFunc(b,this.roomFilters,"updateLimits")};c.prototype.setVisibleIfChanged=function(b,a){if(b.visible()!==a)return b.visible(a)};c.prototype.filterHotel=function(b){return this.runFilters(b,this.hotelFilters)};c.prototype.filterRoom=function(b){return this.runFilters(b,this.roomFilters)};c.prototype.runFilters=function(b,a){var c,e,f,h;e=!0;f=0;for(h=a.length;f<h&&!(c=a[f],e=e&&this[c].filter(b),!e);f++);return this.setVisibleIfChanged(b,e)};c.prototype.runFiltersFunc=
function(b,a,c){var e,f,h,j;j=[];f=0;for(h=a.length;f<h;f++)e=a[f],j.push(this[e][c](b));return j};c.prototype.filter=function(){return this.iterate(this.filterHotel,this.filterRoom)};c.prototype.iterate=function(b,a){var c,e,f,h,j,m,p,g,n;g=this.results.data();h=0;for(m=g.length;h<m;h++)if(c=g[h],b(c),c.visible()){f=!1;n=c.roomSets();j=0;for(p=n.length;j<p;j++)e=n[j],a(e),f=f||e.visible();c.visible(f)}return this.results.postFilters(!0)};c.prototype.getConfig=function(){var b,a,c,e,f;b={};f=this.hotelFilters;
c=0;for(e=f.length;c<e;c++)a=f[c],b[a]=this[a].getConfig();f=this.roomFilters;c=0;for(e=f.length;c<e;c++)a=f[c],b[a]=this[a].getConfig();console.log("getConfig",b);return b};c.prototype.setConfig=function(b){var a,c,e;console.log("setConfig",b);e=[];for(c in b)a=b[c],e.push(this[c].setConfig(a));return e};return c}();var SearchPanel,__bind=function(c,b){return function(){return c.apply(b,arguments)}};
SearchPanel=function(){function c(b,a){var c=this;null==b&&(b=!0);null==a&&(a=!1);this.afterRender=__bind(this.afterRender,this);this.handlePanelSubmit=__bind(this.handlePanelSubmit,this);this.showCalendar=__bind(this.showCalendar,this);this.minimizeCalendar=__bind(this.minimizeCalendar,this);this.minimize=__bind(this.minimize,this);this.toggleCalendar=__bind(this.toggleCalendar,this);this.togglePanel=__bind(this.togglePanel,this);this.minimized=ko.observable(!b);this.minimizedCalendar=ko.observable(b);
this.calendarHidden=ko.observable(this.minimizedCalendar);this.calendarShadow=ko.observable(this.minimizedCalendar);this.prevSearchPanel=ko.observable(null);this.nextSearchPanel=ko.observable(null);this.aPanelId=Math.floor(1E4*Math.random());this.oldCalendarState=this.minimizedCalendar();this.togglePanel(this.minimized(),a);this.toggleCalendar(this.minimizedCalendar(),!0);this.toggleSubscribers=this.minimized.subscribe(function(a){return c.togglePanel(a)});this.minimizedCalendar.subscribe(function(a){return c.toggleCalendar(a)})}
c.prototype.togglePanel=function(b,a){var c;null==a&&(a=!1);if(!a)return c=$(".sub-head").height(),b?$(".sub-head").animate({"margin-top":"-"+(c-4)+"px"},300):$(".sub-head").animate({"margin-top":"0px"},300)};c.prototype.toggleCalendar=function(b,a){var c=this;null==a&&(a=!1);$(".sub-head").height();$(".calenderWindow").height();if(b){this.calendarShadow(!0);if(a)return $(".calenderWindow .calendarSlide").css({top:"-341px"}),$(".calenderWindow").css({height:"0px"}),this.calendarHidden(!0),this.calendarShadow(!1);
ResizeAvia();this.calendarShadow(!0);$(".calenderWindow .calendarSlide").animate({top:"-341px"});return $(".calenderWindow").animate({height:"0px"},500,function(){c.calendarHidden(!0);return c.calendarShadow(!1)})}this.calendarHidden(!1);if(!a)return ResizeAvia(),$(".calenderWindow .calendarSlide").animate({top:"0px"}),$(".calenderWindow").animate({height:"341px"},500)};c.prototype.minimize=function(){if(this.minimized())return this.minimized(!1),this.minimizedCalendar(this.oldCalendarState);this.minimized(!0);
this.oldCalendarState=this.minimizedCalendar();if(!this.minimizedCalendar())return this.minimizedCalendar(!0)};c.prototype.minimizeCalendar=function(){return this.minimizedCalendar()?this.minimizedCalendar(!1):this.minimizedCalendar(!0)};c.prototype.showCalendar=function(){var b;b=$(".calenderWindow").height();console.log("show calend params",b,0===b,$(".calenderWindow").css("height"),$(".calenderWindow .calendarSlide").css("top"));if(0===b&&($(".calenderWindow").show(),console.log("show calendar"),
VoyangaCalendarStandart.scrollToDate(VoyangaCalendarStandart.scrollDate,!0),this.minimizedCalendar()))return this.minimizedCalendar(!1)};c.prototype.handlePanelSubmit=function(){app.navigate(this.sp.getHash(),{trigger:!0});return this.minimizedCalendar(!0)};c.prototype.afterRender=function(){throw"Implement me";};return c}();_this=this;
ko.bindingHandlers.autocomplete={init:function(c,b){var a;a=void 0===b().showCode?!0:b().showCode;setTimeout(function(){$(c).bind("focus",function(){return $(c).change()});return $(c).autocomplete({serviceUrl:window.apiEndPoint+"/helper/autocomplete/"+b().source,minChars:2,delimiter:/(,|;)\s*/,maxHeight:400,zIndex:9999,deferRequestBy:0,delay:0,showCode:a,onSelect:function(a,e){b().iata(e.code);b().readable(e.name);b().readableGen(e.nameGen);b().readableAcc(e.nameAcc);b().readablePre(e.namePre);$(c).val(e.name);
return $(c).siblings("input.input-path").val(a)},onActivate:function(a,e){b().readable(e.name);b().readableGen(e.nameGen);b().readableAcc(e.nameAcc);b().readablePre(e.namePre);$(c).val(e.name);return $(c).siblings("input.input-path").val(a)}},500)});return $(c).on("keyup",function(a){if(8===a.keyCode||46===a.keyCode)return b().iata(""),b().readable(""),b().readableGen(""),b().readableAcc(""),b().readablePre("")})},update:function(c,b){var a,d,e;d=b().iata();e=function(a){var b,c;c=window.apiEndPoint+
"/helper/autocomplete/citiesReadable?";b=[];b.push("codes[0]="+a);return c+=b.join("&")};a=function(a){b().readable(a[d].name);b().readableGen(a[d].nameGen);b().readableAcc(a[d].nameAcc);b().readablePre(a[d].namePre);if(0===$(c).val().length)return $(c).val(a[d].name),$(c).siblings("input.input-path").val(a[d].label)};if(0<d.length)return $.ajax({url:e(d),dataType:"json",success:a})}};
var API,AviaAPI,HotelsAPI,ToursAPI,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};
API=function(){function c(){this.call=__bind(this.call,this);this.endpoint=window.apiEndPoint}c.prototype.call=function(b,a,c){null==c&&(c=!0);c&&($("#loadWrapBg").show(),loaderChange(!0));return $.ajax({url:""+this.endpoint+b,dataType:"json",timeout:2E5,success:function(b){a(b);if(c)return $("#loadWrapBg").hide(),loaderChange(!1)},error:function(){var a,f;a=arguments[0];f=2<=arguments.length?__slice.call(arguments,1):[];c&&($("#loadWrapBg").hide(),loaderChange(!1));throw Error("Api call failed: Url: "+
b+" | Status: "+a.status+" | Status text '"+a.statusText+"' | "+a.getAllResponseHeaders().replace("\n",";")+" | "+f.join(" | "));}})};return c}();ToursAPI=function(c){function b(){this.search=__bind(this.search,this);return b.__super__.constructor.apply(this,arguments)}__extends(b,c);b.prototype.search=function(a,b){return this.call(a,function(a){return b(a)})};return b}(API);
AviaAPI=function(c){function b(){this.search=__bind(this.search,this);return b.__super__.constructor.apply(this,arguments)}__extends(b,c);b.prototype.search=function(a,b){return this.call(a,function(a){return b(a)})};return b}(API);HotelsAPI=function(c){function b(){this.search=__bind(this.search,this);return b.__super__.constructor.apply(this,arguments)}__extends(b,c);b.prototype.search=function(a,b,c){null==c&&(c=!0);return this.call(a,function(a){return b(a)},c)};return b}(API);
Socialite.setup({facebook:{lang:"ru",appId:463273800404070,onlike:function(){},onunlike:function(){},onsend:function(){}}});Socialite.setup({vkontakte:{apiId:3377254,group:{id:0,mode:0,width:300,height:290},like:{type:"mini"}}});$(function(){var c;c=$("#socialSource").html();$("#socialSource").empty();$(".shareSocial").html(c);return Socialite.load($("#social"))});
var AviaPanel,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};
AviaPanel=function(c){function b(){this.afterRender=__bind(this.afterRender,this);this.handlePanelSubmit=__bind(this.handlePanelSubmit,this);this.selectRoundTrip=__bind(this.selectRoundTrip,this);this.selectOneWay=__bind(this.selectOneWay,this);this.setDate=__bind(this.setDate,this);var a=this;b.__super__.constructor.call(this);this.prevPanel="tours";this.prevPanelLabel="\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f";this.nextPanel="hotels";this.nextPanelLabel="\u0422\u043e\u043b\u044c\u043a\u043e \u043e\u0442\u0435\u043b\u0438";
this.mainLabel="\u041f\u043e\u0438\u0441\u043a \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u043e\u0432";this.icon="fly-ico";this.template="avia-panel-template";this.sp=new AviaSearchParams;this.passengers=this.sp.passengers;this.departureDate=this.sp.date;this.departureCity=this.sp.dep;this.departureCityReadable=ko.observable("");this.departureCityReadableGen=ko.observable("");this.departureCityReadableAcc=ko.observable("");this.departureCityReadablePre=ko.observable("");this.rt=this.sp.rt;
this.rtDate=this.sp.rtDate;this.arrivalCity=this.sp.arr;this.arrivalCityReadable=ko.observable("");this.arrivalCityReadableGen=ko.observable("");this.arrivalCityReadableAcc=ko.observable("");this.arrivalCityReadablePre=ko.observable("");this.prefixText="\u0412\u0441\u0435 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f<br>500+ \u0430\u0432\u0438\u0430\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439";this.calendarActive=ko.observable(!0);this.selectionIndex=ko.observable("");this.selectionIndex.subscribe(function(b){if(1===
b&&a.rt())return VoyangaCalendarStandart.checkCalendarValue(!1),a.departureDate(""),a.rtDate("")});this.oldCalendarState=this.minimizedCalendar();this.show=this.passengers.show;this.fromChosen=ko.computed(function(){return a.departureDate().getDay?!0:0<a.departureDate().length});this.rtFromChosen=ko.computed(function(){return!a.rt()?!1:a.rtDate().getDay?!0:0<a.rtDate().length});this.formFilled=ko.computed(function(){var b;b=a.departureCity()&&a.arrivalCity()&&a.fromChosen();a.rt()&&(b=b&&a.rtFromChosen());
return b});this.formNotFilled=ko.computed(function(){return!a.formFilled()});this.maximizedCalendar=ko.computed(function(){return a.departureCity()&&a.arrivalCity()});this.maximizedCalendar.subscribe(function(b){b&&a.calendarActive()&&(a.rt()&&!a.rtFromChosen()?a.showCalendar():a.fromChosen()||a.showCalendar())});this.calendarValue=ko.computed(function(){return{twoSelect:a.rt(),from:a.departureDate(),to:a.rtDate(),hotels:!1,activeSearchPanel:a,valuesDescriptions:["\u0412\u044b\u043b\u0435\u0442 \u0442\u0443\u0434\u0430",
"\u0412\u044b\u043b\u0435\u0442 \u043e\u0431\u0440\u0430\u0442\u043d\u043e","\u0422\u0443\u0434\u0430 \u0438 \u043e\u0431\u0440\u0430\u0442\u043d\u043e"],selectionIndex:a.selectionIndex}});this.calendarValue.subscribe(function(){if(!VoyangaCalendarStandart.checkCalendarValue())return window.setTimeout(function(){return VoyangaCalendarStandart.checkCalendarValue(!0)},100)});this.departureDateDay=ko.computed(function(){return dateUtils.formatDay(a.departureDate())});this.departureDateMonth=ko.computed(function(){return dateUtils.formatMonth(a.departureDate())});
this.rtDateDay=ko.computed(function(){return dateUtils.formatDay(a.rtDate())});this.rtDateMonth=ko.computed(function(){return dateUtils.formatMonth(a.rtDate())});this.rt.subscribe(this.rtTumbler);this.rtTumbler(this.rt());$(".how-many-man .btn");this.calendarText=ko.computed(function(){var b;b=a.rt()?" \u2194 ":" \u2192 ";console.log("updating");0===a.departureCityReadable().length?b="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434 \u0432\u044b\u043b\u0435\u0442\u0430":
0===a.arrivalCityReadable().length?b="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434 \u043f\u0440\u0438\u043b\u0451\u0442\u0430":0===a.selectionIndex()?b="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0432\u044b\u043b\u0435\u0442\u0430 \u0438\u0437 "+a.departureCityReadableGen():a.rt()&&1===a.selectionIndex()?b="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u0432\u044b\u043b\u0435\u0442\u0430 \u0438\u0437 "+
a.arrivalCityReadableGen():(b=a.departureCityReadable()+b+a.arrivalCityReadable()+", "+dateUtils.formatDayShortMonth(a.departureDate()),a.rt()&&(b+=" - "+dateUtils.formatDayShortMonth(a.rtDate())));return b})}__extends(b,c);b.prototype.rtTumbler=function(a){return a?$(".tumblr .switch").animate({left:"35px"},200):$(".tumblr .switch").animate({left:"-1px"},200)};b.prototype.setDate=function(a){if(a.length&&((!this.departureDate()||moment(this.departureDate()).format("YYYY-MM-DD")!==moment(a[0]).format("YYYY-MM-DD"))&&
this.departureDate(a[0]),this.rt&&1<a.length))if(a[1]>=this.departureDate()){if(!this.rtDate()||moment(this.rtDate()).format("YYYY-MM-DD")!==moment(a[1]).format("YYYY-MM-DD"))return this.rtDate(a[1])}else return this.rtDate("")};b.prototype.selectOneWay=function(){return this.rt(!1)};b.prototype.selectRoundTrip=function(){return this.rt(!0)};b.prototype.handlePanelSubmit=function(){if(""!==window.location.pathname.replace("/",""))$("#loadWrapBgMin").show(),window.location.href="/#"+this.sp.getHash();
else return app.navigate(this.sp.getHash(),{trigger:!0}),this.minimizedCalendar(!0)};b.prototype.navigateToNewSearch=function(){var a;if(this.formNotFilled())a=$("div.innerCalendar").find("h1"),Utils.flashMessage(a);else return this.handlePanelSubmit(),this.minimizedCalendar(!0)};b.prototype.returnRecommend=function(a,b){$(".recomended-content").slideDown();$(".order-hide").fadeIn();return $(b.currentTarget).animate({top:"-19px"},500,null,function(){return ResizeAvia()})};b.prototype.afterRender=
function(){var a=this;$(function(){a.sp.passengers.afterRender();a.rtTumbler(a.rt());$(".how-many-man .btn");if(a.departureCity()&&0<a.arrivalCity().length&&(!a.departureDate()||a.rt()&&!a.rtDate))return a.minimizedCalendar(!1)});return resizePanel()};return b}(SearchPanel);$(document).on("autocompleted","input.departureCity",function(){return $("input.arrivalCity.second-path").focus()});
$(document).on("keyup change","input.second-path",function(c){var b,a;b=$(this).val();a=$(this).siblings("input.input-path");if(8===c.keyCode||3>b.length)return a.val("")});var Sibling,Siblings,__bind=function(c,b){return function(){return c.apply(b,arguments)}};
Sibling=function(){function c(b,a,c,e,f){var h=this;this.graphHeight=b;this.parent=a;this.price=c;null==f&&(f=!1);this.rawDate=e;this.date=e.format("D");this.dow=e.format("dd");this.month=e.format("MMM");this.data=[];this.nodata=!1;this.isActive=ko.observable(f);this.initialActive=f;!1!==this.price&&this.parent.price&&(this.price=2*this.price-this.parent.price);this.scaledHeight=ko.computed(function(){var a;if(!1===h.price)return 0;a=h.height/h.absDelta;a*=0.6;isNaN(a)&&(a=0);0<a&&0.1>a&&!0;return a*
(h.graphHeight()-10)+10-5})}c.prototype.columnValue=function(){return this.price};c.prototype.background=function(){return this.nodata?"center "+this.graphHeight()+"px":"center "+this.scaledHeight()+"px"};return c}();
Siblings=function(){function c(b,a,c,e){this.roundTrip=a;this.populate=__bind(this.populate,this);this.search=__bind(this.search,this);this.handleSearch=__bind(this.handleSearch,this);this.priceDisplay=__bind(this.priceDisplay,this);this.showPrice=__bind(this.showPrice,this);this.showControls=__bind(this.showControls,this);this.select=__bind(this.select,this);this.data=[];this.graphHeight=ko.observable(50);this.populate(this,b,c,e);this.active=ko.observable(this.data[3]);this.selection=ko.observable(!1)}
c.prototype.select=function(b){var a,c,e,f;if(b.data.length){this.active(b);f=b.data;c=0;for(e=f.length;c<e;c++)if(a=f[c],a.isActive()){this.selection(a);break}}else this.selection(b);f=b.parent.data;c=0;for(e=f.length;c<e;c++)a=f[c],a.isActive(!1);return b.isActive(!0)};c.prototype.showControls=function(){return!this.selection()||this.active().initialActive&&this.selection().initialActive||this.active().nonsearchable||this.selection().nonsearchable?!1:!0};c.prototype.showPrice=function(){return!this.selection()||
this.active().nodata||this.selection().nodata?!1:!0};c.prototype.priceDisplay=function(){return!this.showPrice()?"":this.roundTrip?this.active().price+this.selection().price:this.selection().price};c.prototype.handleSearch=function(b,a){var c,e;null==a&&(a=!1);c=window.app;e=c.fakoPanel();e.sp.date(b.toDate());!1!==a&&e.sp.rtDate(a.toDate());return c.navigate(e.sp.getHash(),{trigger:!0})};c.prototype.search=function(){if(this.roundTrip)this.handleSearch(this.active().rawDate,this.selection().rawDate);
else return this.handleSearch(this.selection().rawDate)};c.prototype.populate=function(b,a,c,e,f){var h,j,m,p,g,n,q,u,r;null==f&&(f=!1);q=_.filter(a,function(a){return!1!==a.price});q=0===q.length?1:q[0].price;j=u=0;for(r=a.length;u<r;j=++u)n=a[j],m=n.price,h=c.clone().subtract("days",3-j),g=!1,0===j&&(g=!0,p=h.month()),p!==h.month()&&(g=!0,p=h.month()),j=3===j?!0:!1,m=new Sibling(this.graphHeight,b,m,h,j),!1===n.price&&(m.nodata=!0),f&&h<e&&(m.nonsearchable=!0),m.showMonth=g,b.data.push(m),n.siblings.length&&
this.populate(m,n.siblings,e,h,!0);c=_.min(b.data,function(a){return!1===a.price?q:a.price});a=_.max(b.data,function(a){return!1===a.price?q:a.price});!1===a.price&&(a={price:q});!1===c.price&&(c={price:q});c=a.price-c.price;h=b.data;p=[];e=0;for(f=h.length;e<f;e++)b=h[e],b.height=!1===b.price?0:a.price-b.price,p.push(b.absDelta=c);return p};return c}();
var AviaResult,AviaResultSet,AviaSearchParams,FlightPart,Voyage,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};
FlightPart=function(){function c(b){this.part=b;this.departureDate=Date.fromISO(b.datetimeBegin+Utils.tzOffset);this.arrivalDate=Date.fromISO(b.datetimeEnd+Utils.tzOffset);this.departureCity=b.departureCity;this.departureCityPre=b.departureCityPre;this.departureAirport=b.departureAirport;this.aircraftName=b.aircraftName;this.arrivalCity=b.arrivalCity;this.arrivalCityPre=b.arrivalCityPre;this.arrivalAirport=b.arrivalAirport;this._duration=b.duration;this.transportAirline=b.transportAirline;this.transportAirlineName=
b.transportAirlineNameEn;this.markAirline=b.markAirline;this.markAirlineName=b.markAirlineNameEn;this.flightCode=b.markAirline+" "+b.flightCode;this.stopoverLength=0}c.prototype.departureTime=function(){return dateUtils.formatTime(this.departureDate)};c.prototype.arrivalTime=function(){return dateUtils.formatTime(this.arrivalDate)};c.prototype.duration=function(){return dateUtils.formatDuration(this._duration)};c.prototype.departureCityStopoverText=function(){return"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430 \u0432 "+
this.departureCityPre+", "+this.stopoverText()};c.prototype.calculateStopoverLength=function(b){return this.stopoverLength=Math.floor((b.departureDate.getTime()-this.arrivalDate.getTime())/1E3)};c.prototype.stopoverText=function(){return dateUtils.formatDuration(this.stopoverLength)};return c}();
Voyage=function(){function c(b,a){var c,e,f,h,j;this.airline=a;this.parts=[];h=b.flightParts;c=0;for(f=h.length;c<f;c++)e=h[c],this.parts.push(new FlightPart(e));this.flightKey=b.flightKey;this.hasStopover=1<this.stopoverCount?!0:!1;this.maxStopoverLength=this.stopoverLength=0;this.direct=1===this.parts.length;if(!this.direct){j=this.parts;c=f=0;for(h=j.length;f<h;c=++f)e=j[c],c<this.parts.length-1&&e.calculateStopoverLength(this.parts[c+1]),this.stopoverLength+=e.stopoverLength,e.stopoverLength>
this.maxStopoverLength&&(this.maxStopoverLength=e.stopoverLength)}this.departureDate=Date.fromISO(b.departureDate+Utils.tzOffset);this.arrivalDate=new Date(this.parts[this.parts.length-1].arrivalDate);this._duration=b.fullDuration;this.departureAirport=this.parts[0].departureAirport;this.arrivalAirport=this.parts[this.parts.length-1].arrivalAirport;this.departureCity=b.departureCity;this.arrivalCity=b.arrivalCity;this.departureCityPre=b.departureCityPre;this.arrivalCityPre=b.arrivalCityPre;this._backVoyages=
[];this.activeBackVoyage=ko.observable();this.visible=ko.observable(!0)}c.prototype.departureInt=function(){return this.departureDate.getTime()};c.prototype.hash=function(){return this.departureTime()+this.arrivalTime()};c.prototype.similarityHash=function(){return this.hash()+this.airline};c.prototype.push=function(b){return this._backVoyages.push(b)};c.prototype.stacked=function(){var b,a,c,e,f,h;a=!1;b=0;h=this._backVoyages;e=0;for(f=h.length;e<f;e++)if(c=h[e],c.visible()&&b++,1<b){a=!0;break}return a};
c.prototype.departureDayMo=function(){return dateUtils.formatDayMonth(this.departureDate)};c.prototype.departurePopup=function(){return dateUtils.formatDayMonthWeekday(this.departureDate)};c.prototype.departureTime=function(){return dateUtils.formatTime(this.departureDate)};c.prototype.departureTimeNumeric=function(){return dateUtils.formatTimeInMinutes(this.departureDate)};c.prototype.arrivalDayMo=function(){return dateUtils.formatDayMonth(this.arrivalDate)};c.prototype.arrivalTime=function(){return dateUtils.formatTime(this.arrivalDate)};
c.prototype.arrivalTimeNumeric=function(){return dateUtils.formatTimeInMinutes(this.arrivalDate)};c.prototype.duration=function(){return dateUtils.formatDuration(this._duration)};c.prototype.stopoverText=function(){var b,a,c,e,f;if(this.direct)return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";a=[];if(2===this.parts.length)return b=this.parts[0],"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430 \u0432 "+b.arrivalCityPre+", "+this.parts[0].stopoverText();f=this.parts.slice(0,
-1);c=0;for(e=f.length;c<e;c++)b=f[c],a.push(b.arrivalCityPre);return"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430 \u0432 "+a.join(", ")};c.prototype.stopoverRelText=function(){var b,a,c,e,f;if(this.direct)return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";a=[];f=this.parts.slice(0,-1);c=0;for(e=f.length;c<e;c++)b=f[c],a.push("\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430 \u0432 "+b.arrivalCityPre+", "+b.stopoverText());return a.join("<br />")};c.prototype.stopsRatio=
function(){var b,a,c,e,f,h;c=[];if(this.direct)return'<span class="down"></span>';b=_.reduce(this.parts,function(a,b){return a+b._duration},0);h=this.parts.slice(0,-1);e=0;for(f=h.length;e<f;e++)a=h[e],c.push({left:Math.ceil(80*(a._duration/b)),part:a});a=e=0;for(f=c.length;e<f;a=++e)b=c[a],18>b.left&&(b.left=18),c[a].left=0<a?c[a-1].left+b.left:b.left;a="";e=0;for(f=c.length;e<f;e++)b=c[e],a+=this.getCupHtmlForPart(b.part,"left: "+b.left+"%");return a+'<span class="down"></span>'};c.prototype.stopoverHtml=
function(){var b,a,c,e,f;if(this.direct)return'<span class="path"></span>';b="";f=this.parts.slice(0,-1);c=0;for(e=f.length;c<e;c++)a=f[c],console.log(a),0<a.stopoverLength&&(b+=this.getCupHtmlForPart(a));return b};c.prototype._formatStopOver=function(b){return"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430 \u0432 "+b.arrivalCityPre+", "+b.stopoverText()};c.prototype.getCupHtmlForPart=function(b,a){null==a&&(a="");return'<span class="'+(9E3>b.stopoverLength?"cup":"cup long")+' tooltip" rel="'+
this._formatStopOver(b)+'" style="'+a+'"></span>'};c.prototype.recommendStopoverIco=function(){var b,a,c,e,f;if(!this.direct){a=[];f=this.parts.slice(0,-1);c=0;for(e=f.length;c<e;c++)b=f[c],a.push(this._formatStopOver(b));return'<span class="cup tooltip" rel="'+a.join("<br>")+'"></span>'}};c.prototype.sort=function(){this._backVoyages.sort(function(b,a){return b.departureInt()-a.departureInt()});return this.activeBackVoyage(this._backVoyages[0])};c.prototype.removeSimilar=function(){var b,a,c,e,f,
h,j;if(!(2>this._backVoyages.length)){e={};j=this._backVoyages;f=0;for(h=j.length;f<h;f++)c=j[f],a=c.airline+c.departureInt(),b=e[a],e[a]=b?b.stopoverLength<c.stopoverLength?b:c:c;this._backVoyages=[];for(a in e)b=e[a],this._backVoyages.push(b);return this.activeBackVoyage(this._backVoyages[0])}};c.prototype.chooseActive=function(){var b;if(0!==this._backVoyages.length&&!this.activeBackVoyage().visible()){if(b=_.find(this._backVoyages,function(a){return a.visible()}))return this.activeBackVoyage(b);
this.visible(!1)}};return c}();
AviaResult=function(){function c(b,a){var c,e,f,h,j;this.parent=a;this.getPostData=__bind(this.getPostData,this);this.getParams=__bind(this.getParams,this);this.directRating=__bind(this.directRating,this);this.chooseActive=__bind(this.chooseActive,this);this.showDetailsOverview=__bind(this.showDetailsOverview,this);this.showDetails=__bind(this.showDetails,this);this.showDetailsPopup=__bind(this.showDetailsPopup,this);this.minimizeRtStacked=__bind(this.minimizeRtStacked,this);this.minimizeStacked=
__bind(this.minimizeStacked,this);this.chooseNextRtStacked=__bind(this.chooseNextRtStacked,this);this.choosePrevRtStacked=__bind(this.choosePrevRtStacked,this);this.chooseRtStacked=__bind(this.chooseRtStacked,this);this.chooseNextStacked=__bind(this.chooseNextStacked,this);this.choosePrevStacked=__bind(this.choosePrevStacked,this);this.chooseStacked=__bind(this.chooseStacked,this);this.rtFlightCodes=__bind(this.rtFlightCodes,this);this.flightCodes=__bind(this.flightCodes,this);this.flightKey=__bind(this.flightKey,
this);this.rtServiceClass=__bind(this.rtServiceClass,this);this.rtFlightCodesText=__bind(this.rtFlightCodesText,this);this.isFlight=!0;this.isHotel=!1;_.extend(this,Backbone.Events);this._data=b;this._stacked_data=[];c=b.flights;this.searchId=b.searchId;this.cacheId=b.cacheId;this.key=b.key;this.pdfLink="/buy/pdf/id/"+this.key;this.price=Math.ceil(b.price);this._stacked=!1;c||console.log("data",b);this.roundTrip=2===c.length;this.visible=ko.observable(!0);this.airline=b.valCompany;this.searchService=
b.service;this.airlineName=b.valCompanyNameEn;this.serviceClass=b.serviceClass;this.serviceClassReadable="E"===b.serviceClass?"\u042d\u043a\u043e\u043d\u043e\u043c":"\u0411\u0438\u0437\u043d\u0435\u0441";this.refundableText=(this.refundable=b.refundable)?"\u0411\u0438\u043b\u0435\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u044b\u0439":"\u0411\u0438\u043b\u0435\u0442 \u043d\u0435 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u044b\u0439";this.freeWeight=b.freeWeight;"0"===this.freeWeight&&
(this.freeWeight="$");this.freeWeightText=b.freeWeightDescription;c[0].flightKey=b.flightKey;this.activeVoyage=new Voyage(c[0],this.airline);this.roundTrip&&(c[1].flightKey=b.flightKey,this.activeVoyage.push(new Voyage(c[1],this.airline)));this.voyages=[];this.voyages.push(this.activeVoyage);this.activeVoyage=ko.observable(this.activeVoyage);this.stackedMinimized=ko.observable(!0);this.rtStackedMinimized=ko.observable(!0);this.flightCodesText=1<_.size(this.activeVoyage().parts)?"\u0420\u0435\u0439\u0441\u044b":
"\u0420\u0435\u0439\u0441";this.totalPeople=0;c="departureCity departureAirport departureDayMo departureDate departurePopup departureTime arrivalCity arrivalAirport arrivalDayMo arrivalDate arrivalTime duration _duration direct stopoverText stopoverRelText departureTimeNumeric arrivalTimeNumeric hash similarityHash stopsRatio recommendStopoverIco".split(" ");h=0;for(j=c.length;h<j;h++)e=c[h],this[e]=function(a){return function(){var b;b=this.activeVoyage()[a];return"function"===typeof b?b.apply(this.activeVoyage()):
b}}(e),f="rt"+e.charAt(0).toUpperCase()+e.slice(1),this[f]=function(a){return function(){var b;b=this.activeVoyage().activeBackVoyage()[a];return"function"===typeof b?b.apply(this.activeVoyage().activeBackVoyage()):b}}(e)}c.prototype.rtFlightCodesText=function(){return 1<_.size(this.activeVoyage().activeBackVoyage().parts)?"\u0420\u0435\u0439\u0441\u044b":"\u0420\u0435\u0439\u0441"};c.prototype.rtServiceClass=function(){return this.activeVoyage().serviceClass};c.prototype.flightKey=function(){return this.roundTrip?
this.activeVoyage().activeBackVoyage().flightKey:this.activeVoyage().flightKey};c.prototype.flightCodes=function(){var b;b=_.map(this.activeVoyage().parts,function(a){return'<span class="tooltip" rel="'+a.departureCity+" - "+a.arrivalCity+'"><nobr>'+a.flightCode+"</nobr></span>"});return Utils.implode(", ",b)};c.prototype.rtFlightCodes=function(){var b;b=_.map(this.activeVoyage().activeBackVoyage().parts,function(a){return'<span class="tooltip" rel="'+a.departureCity+" - "+a.arrivalCity+'"><nobr>'+
a.flightCode+"</nobr></span>"});return Utils.implode(", ",b)};c.prototype.isActive=function(){console.log(this.parent.selected_key(),this.key,this.parent.selected_best());this.parent.selected_best();return this.parent.selected_key()===this.key};c.prototype.stacked=function(){var b,a,c,e,f;b=0;f=this.voyages;c=0;for(e=f.length;c<e;c++)if(a=f[c],a.visible()&&b++,1<b)return!0;return!1};c.prototype.rtStacked=function(){var b,a,c,e,f;b=0;f=this.activeVoyage()._backVoyages;c=0;for(e=f.length;c<e;c++)if(a=
f[c],a.visible()&&b++,1<b)return!0;return!1};c.prototype.push=function(b){var a,c;this._stacked=!0;b.flights[0].flightKey=b.flightKey;a=new Voyage(b.flights[0],this.airline);this._stacked_data.push(b);if(this.roundTrip&&(b.flights[1].flightKey=b.flightKey,b=new Voyage(b.flights[1],this.airline),a.push(b),c=_.find(this.voyages,function(b){return b.hash()===a.hash()}))){c.push(b);return}return this.voyages.push(a)};c.prototype.chooseStacked=function(b){var a;this.roundTrip&&(a=this.activeVoyage().activeBackVoyage().hash());
this.activeVoyage(b);if(b=_.find(b._backVoyages,function(b){return b.visible()&&b.hash()===a}))return this.activeVoyage().activeBackVoyage(b)};c.prototype.choosePrevStacked=function(){var b,a,c,e,f,h;b=0;h=this.voyages;a=e=0;for(f=h.length;e<f;a=++e)c=h[a],c.hash()===this.hash()&&(b=a);if(0!==b)return this.activeVoyage(this.voyages[b-1])};c.prototype.chooseNextStacked=function(){var b,a,c,e,f,h;b=0;h=this.voyages;a=e=0;for(f=h.length;e<f;a=++e)c=h[a],c.hash()===this.hash()&&(b=a);if(b!==this.voyages.length-
1)return this.activeVoyage(this.voyages[b+1])};c.prototype.chooseRtStacked=function(b){window.voyanga_debug("Choosing RT stacked voyage",b);return this.activeVoyage().activeBackVoyage(b)};c.prototype.choosePrevRtStacked=function(){var b,a,c,e,f,h;b=0;c=this.rtVoyages();a=f=0;for(h=c.length;f<h;a=++f)e=c[a],e.hash()===this.rtHash()&&(b=a);if(0!==b)return this.activeVoyage().activeBackVoyage(c[b-1])};c.prototype.chooseNextRtStacked=function(){var b,a,c,e,f,h;b=0;c=this.rtVoyages();a=f=0;for(h=c.length;f<
h;a=++f)e=c[a],e.hash()===this.rtHash()&&(b=a);if(b!==c.length-1)return this.activeVoyage().activeBackVoyage(c[b+1])};c.prototype.minimizeStacked=function(){return this.stackedMinimized(!this.stackedMinimized())};c.prototype.minimizeRtStacked=function(){return this.rtStackedMinimized(!this.rtStackedMinimized())};c.prototype.rtVoyages=function(){return this.activeVoyage()._backVoyages};c.prototype.sort=function(){this.voyages.sort(function(b,a){return b.departureInt()-a.departureInt()});this.roundTrip&&
_.each(this.voyages,function(b){b.sort();return b.removeSimilar()});return this.activeVoyage(this.voyages[0])};c.prototype.removeSimilar=function(){var b,a,c,e,f,h,j;if(!(2>this.voyages.length)){e={};j=this.voyages;f=0;for(h=j.length;f<h;f++)c=j[f],a=c.airline+c.departureInt(),b=e[a],e[a]=b?b.stopoverLength<c.stopoverLength?b:c:c;this.activeVoyage(e[a]);this.voyages=[];c=[];for(a in e)b=e[a],b.stopoverLength<this.activeVoyage().stopoverLength&&this.activeVoyage(b),c.push(this.voyages.push(b));return c}};
c.prototype.showDetailsPopup=function(){this.parent._popup=new GenericPopup("#avia-body-popup",this);ko.processAllDeferredBindingUpdates();SizeBox("avia-body-popup");return ResizeBox("avia-body-popup")};c.prototype.showDetails=function(){this.overviewMode=!1;return this.showDetailsPopup()};c.prototype.showDetailsOverview=function(){this.overviewMode=!0;return this.showDetailsPopup()};c.prototype.chooseActive=function(){var b;if(!1!==this.visible()&&!this.activeVoyage().visible()){if(b=_.find(this.voyages,
function(a){return a.visible()}))return this.activeVoyage(b);this.visible(!1)}};c.prototype.directRating=function(){var b,a;b=1;this.direct()&&(b+=1);this.roundTrip&&this.rtDirect()&&(b+=1);a=this._duration();this.roundTrip&&(a+=this.rt_duration());return a/b};c.prototype.getParams=function(){var b;b={};this.activeVoyage()&&(b.airlineCode=this.airline,b.rt=this.roundTrip?"true":"false",b.departureDateTime=this.departureDate(),b.arrivalDateTime=this.arrivalDate(),this.roundTrip&&(b.rtDepartureDateTime=
this.rtDepartureDate(),b.rtArrivalDateTime=this.rtArrivalDate()));return JSON.stringify(b)};c.prototype.getPostData=function(){var b;b={};b.data=this._data;b.type="avia";return b};return c}();
AviaResultSet=function(){function c(b,a){var c,e,f,h,j,m,p,g,n,q,u,r;this.siblings=null!=a?a:!1;this.getFilterLessBest=__bind(this.getFilterLessBest,this);this.setBest=__bind(this.setBest,this);this.updateBest=__bind(this.updateBest,this);this.updateCheapest=__bind(this.updateCheapest,this);this.postFilters=__bind(this.postFilters,this);this.processSiblings=__bind(this.processSiblings,this);this.postInit=__bind(this.postInit,this);this.findAndSelect=__bind(this.findAndSelect,this);this.onAfterSelect=
__bind(this.onAfterSelect,this);this.select=__bind(this.select,this);this.injectSearchParams=__bind(this.injectSearchParams,this);this.recommendTemplate="avia-cheapest-result";this.tours=!1;this.selected_key=ko.observable("");this.selected_best=ko.observable(!1);this.showBest=ko.observable(!1);this.creationMoment=moment();this._results={};this.noresults=0===b.length;j={};c=0;for(g=b.length;c<g;c++){f=b[c];h="";u=f.flights;m=0;for(n=u.length;m<n;m++){e=u[m];r=e.flightParts;p=0;for(q=r.length;p<q;p++)e=
r[p],h+=e.datetimeBegin,h+=e.datetimeEnd}j[h]?j[h].price>f.price&&(j[h]=f):j[h]=f}c=[];for(h in j)f=j[h],c.push(f);j=0;for(m=c.length;j<m;j++)f=c[j],h=f.price+"_"+f.valCompany,this._results[h]?this._results[h].push(f):(f=new AviaResult(f,this),this._results[h]=f,f.key=h);this.cheapest=ko.observable();this.best=ko.observable();this.data=[];this.numResults=ko.observable(0);this.filtersConfig=!1;j=this._results;for(h in j)f=j[h],f.sort(),f.removeSimilar(),this.data.push(f);this.data.sort(function(a,
b){return a.price-b.price});this.postFilters()}c.prototype.injectSearchParams=function(b){this.rawSP=b;this.arrivalCity=b.destinations[0].arrival;this.departureCity=b.destinations[0].departure;this.rawDate=moment(Date.fromISO(b.destinations[0].date+Utils.tzOffset));this.dateHeadingText=this.date=dateUtils.formatDayShortMonth(Date.fromISO(b.destinations[0].date+Utils.tzOffset));if(this.roundTrip=b.isRoundTrip)return this.rtDate=dateUtils.formatDayShortMonth(Date.fromISO(b.destinations[1].date+Utils.tzOffset)),
this.rawRtDate=moment(Date.fromISO(b.destinations[1].date+Utils.tzOffset)),this.dateHeadingText+=", "+this.rtDate};c.prototype.select=function(b){var a;b=b.ribbon?b.data:b;a=$.Deferred();a.done(function(a){var b;b={module:"Avia",type:"avia"};b.searchId=a.cacheId;b.searchKey=a.flightKey();return Utils.toBuySubmit([b])});return this.checkTicket(b,a)};c.prototype.onAfterSelect=function(){if(this._popup)return this._popup.close()};c.prototype.findAndSelect=function(b){var a,c,e,f,h,j,m,p,g,n,q,u,r;e=
b.similarityHash();console.log("hash find avia ",e);q=this.data;h=0;for(p=q.length;h<p;h++){b=q[h];u=b.voyages;j=0;for(g=u.length;j<g;j++)if(f=u[j],f.similarityHash()===e){b.activeVoyage(f);if(!this.roundTrip)return b;a=f.activeBackVoyage().similarityHash();r=f._backVoyages;m=0;for(n=r.length;m<n;m++)if(c=r[m],c.similarityHash()===a)return f.activeBackVoyage(c),b}}return!1};c.prototype.postInit=function(){var b,a,c=this;this.filters=new AviaFiltersT(this);this.filters.serviceClass.selection.subscribe(function(a){if("B"===
a)c.showBest(!0);else return c.showBest(!1)});if(this.siblings)return a=_.reduce(this.data,function(a,b){return a.price<b.price?a:b},this.data[0]),b=_.filter(this.data,function(a){return"B"===a.serviceClass}),b=_.reduce(b,function(a,b){return a.price<b.price?a:b},b[0]),a||(a={price:0}),b||(b={price:0}),this.ESiblings=this.processSiblings(this.siblings.E,a),this.siblings=ko.observable(this.ESiblings)};c.prototype.processSiblings=function(b,a){var c,e,f,h,j,m,p;c=function(a,b){var c,d,e,f,h;h=[];c=
e=0;for(f=b.length;e<f;c=++e)d=b[c],h.push(a[c]={price:d,siblings:[]});return h};this.roundTrip?b[3][3]=Math.ceil(a.price/2):b[3]=a.price;if(b[3].length){h=[];j=[];e=m=0;for(p=b.length;m<p;e=++m)f=b[e],f=_.filter(f,function(a){return!1!==a}),f=f.length?_.min(f):!1,j[e]=f;c(h,j,!0);e=j=0;for(m=b.length;j<m;e=++j)f=b[e],c(h[e].siblings,f)}else h=[],c(h,b,!0);return new Siblings(h,this.roundTrip,this.rawDate,this.rawRtDate)};c.prototype.hideRecommend=function(b,a){return hideRecomendedBlockTicket.apply(a.currentTarget)};
c.prototype.postFilters=function(){var b;b=_.filter(this.data,function(a){return a.visible()});this.numResults(b.length);this.updateCheapest(b);this.updateBest(b);ko.processAllDeferredBindingUpdates();jsPaneScrollHeight();return ResizeAvia()};c.prototype.updateCheapest=function(b){if(0!==b.length)if(b=_.reduce(b,function(a,b){return a.price<b.price?a:b},b[0]),void 0===this.cheapest())this.cheapest(b);else if(this.cheapest().key!==b.key)return this.cheapest(b)};c.prototype.updateBest=function(b){var a,
c,e,f,h,j,m,p,g,n,q;if(0!==b.length){b=_.sortBy(b,function(a){return a.price});j=0;for(g=b.length;j<g;j++){e=b[j];h=_.sortBy(e.voyages,function(a){return a._duration});m=0;for(n=h.length;m<n;m++)if(f=h[m],f.visible()&&10800>f.maxStopoverLength)if(e.roundTrip){c=_.sortBy(f._backVoyages,function(a){return a._duration});p=0;for(q=c.length;p<q;p++)if(a=c[p],a.visible()&&10800>a.maxStopoverLength){f.activeBackVoyage(a);e.activeVoyage(f);this.setBest(e);return}}else{e.activeVoyage(f);this.setBest(e);return}}return this.setBest(b[0],
!0)}};c.prototype.setBest=function(b,a){var c,e,f,h,j,m;null==a&&(a=!1);e=b.key;f=new AviaResult(b._data,this);m=b._stacked_data;h=0;for(j=m.length;h<j;h++)c=m[h],f.push(c);f.sort();f.removeSimilar();f.best=!0;f.key=e+"_optima";a||(f.voyages=_.filter(f.voyages,function(a){return 10800>a.maxStopoverLength}),_.each(f.voyages,function(a){return a._backVoyages=_.filter(a._backVoyages,function(a){return 10800>a.maxStopoverLength})}));f.chooseStacked(b.activeVoyage());if(void 0===this.best())this.best(f);
else if(this.best().key!==f.key)return this.best(f)};c.prototype.getFilterLessBest=function(){var b,a,c,e,f,h,j,m,p,g,n,q;q=this.data;h=0;for(p=q.length;h<p;h++){c=q[h];f=_.sortBy(c.voyages,function(a){return a._duration});j=0;for(g=f.length;j<g;j++)if(e=f[j],10800>e.maxStopoverLength)if(c.roundTrip){a=_.sortBy(e._backVoyages,function(a){return a._duration});m=0;for(n=a.length;m<n;m++)if(b=a[m],10800>b.maxStopoverLength)return e.activeBackVoyage(b),c.activeVoyage(e),c}else return c.activeVoyage(e),
c}return this.data[0]};c.prototype.filtersRendered=function(){return ko.processAllDeferredBindingUpdates()};return c}();
AviaSearchParams=function(c){function b(){b.__super__.constructor.apply(this,arguments);this.dep=window.currentCityCode?ko.observable(window.currentCityCode):ko.observable("LED");this.arr=ko.observable("");this.rt=ko.observable(!0);this.rtDate=ko.observable("");this.passengers=new Passengers;this.adults=this.passengers.adults;this.children=this.passengers.children;this.infants=this.passengers.infants}__extends(b,c);b.prototype.url=function(){var a,b;b="flight/search/BE?";a=[];a.push("destinations[0][departure]="+
this.dep());a.push("destinations[0][arrival]="+this.arr());a.push("destinations[0][date]="+moment(this.date()).format("D.M.YYYY"));this.rt()&&(a.push("destinations[1][departure]="+this.arr()),a.push("destinations[1][arrival]="+this.dep()),a.push("destinations[1][date]="+moment(this.rtDate()).format("D.M.YYYY")));a.push("adt="+this.adults());a.push("chd="+this.children());a.push("inf="+this.infants());b+=a.join("&");window.voyanga_debug("Generated search url",b);return b};b.prototype.key=function(){var a;
a=this.dep()+this.arr()+this.date();this.rt()&&(a+=this.rtDate(),a+="_rt");a+=this.adults();a+=this.children();return a+=this.infants()};b.prototype.getHash=function(){var a;a=[this.dep(),this.arr(),moment(this.date()).format("D.M.YYYY"),this.adults(),this.children(),this.infants()];this.rt()&&a.push(moment(this.rtDate()).format("D.M.YYYY"));a="avia/search/"+a.join("/")+"/";window.voyanga_debug("Generated hash for avia search",a);return a};b.prototype.fromList=function(a){this.dep(a[0]);this.arr(a[1]);
this.date(moment(a[2],"D.M.YYYY").toDate());this.adults(a[3]);this.children(a[4]);this.infants(a[5]);return 7===a.length?(this.rt(!0),this.rtDate(moment(a[6],"D.M.YYYY").toDate())):this.rt(!1)};b.prototype.fromObject=function(a){console.log(a);this.adults(a.adt);this.children(a.chd);this.infants(a.inf);this.rt(a.isRoundTrip);this.dep(a.destinations[0].departure_iata);this.arr(a.destinations[0].arrival_iata);this.date(new Date(a.destinations[0].date));if(this.rt())return this.rtDate(new Date(a.destinations[1].date))};
return b}(SearchParams);var AviaController,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__slice=[].slice;
AviaController=function(){function c(b){this.searchParams=b;this.checkTicketAction=__bind(this.checkTicketAction,this);this.indexAction=__bind(this.indexAction,this);this.handleResults=__bind(this.handleResults,this);this.search=__bind(this.search,this);this.searchAction=__bind(this.searchAction,this);this.api=new AviaAPI;this.routes={"/search/:from/:to/:when/:adults/:children/:infants/:rtwhen/":this.searchAction,"/search/:from/:to/:when/:adults/:children/:infants/":this.searchAction,"":this.indexAction};
this.results=ko.observable();_.extend(this,Backbone.Events)}c.prototype.searchAction=function(){var b;b=1<=arguments.length?__slice.call(arguments,0):[];window.voyanga_debug("AVIA: Invoking searchAction",b);this.searchParams.fromList(b);return this.search()};c.prototype.search=function(){var b=this;return this.api.search(this.searchParams.url(),function(a){var c;try{c=b.handleResults(a)}catch(e){if("404"===e){new ErrorPopup("avia404");return}throw Error("Unable to build AviaResultSet from search response");
}b.results(c);b.render("results",{results:b.results});return ko.processAllDeferredBindingUpdates()})};c.prototype.handleResults=function(b){var a;window.voyanga_debug("searchAction: handling results",b);a=new AviaResultSet(b.flights.flightVoyages,b.siblings);a.injectSearchParams(b.searchParams);a.postInit();a.checkTicket=this.checkTicketAction;return a};c.prototype.indexAction=function(){window.voyanga_debug("AVIA: invoking indexAction");return this.render("index",{})};c.prototype.checkTicketAction=
function(b,a){var c=this;if(moment().diff(this.results().creationMoment,"seconds")<AVIA_TICKET_TIMELIMIT)a.resolve(b);else return this.api.search(this.searchParams.url(),function(e){var f;try{f=c.handleResults(e)}catch(h){throw Error("Unable to build AviaResultSet from search response. Check ticket");}if(b=f.findAndSelect(b))return a.resolve(b);new ErrorPopup("aviaNoTicketOnValidation","\u0411\u0438\u043b\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439.",
!1,function(){});return c.results(f)})};c.prototype.render=function(b,a){return this.trigger("viewChanged",b,a)};return c}();var AviaModule;AviaModule=function(){function c(){this.panel=new AviaPanel;this.controller=new AviaController(this.panel.sp)}c.prototype.resize=function(){return ResizeAvia()};return c}();
var Voyasha,VoyashaCheapest,VoyashaOptima,VoyashaRich,scaledValue,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};scaledValue=function(c,b,a,d){null==d&&(d=!1);return c>=b?d?0:a:d?a-c*a/b:c*a/b};
Voyasha=function(){function c(b){var a=this;this.toursResultSet=b;this.choose=__bind(this.choose,this);this.handleHotels=__bind(this.handleHotels,this);this.handleAvia=__bind(this.handleAvia,this);this.init&&this.init();this.selected=ko.computed(function(){var b,c,f,h,j;c=[];j=a.toursResultSet.data();f=0;for(h=j.length;f<h;f++)b=j[f],b.isAvia()?c.push(!b.noresults?a.handleAvia(b):null):c.push(!b.noresults?a.handleHotels(b):null);return c});this.price=ko.computed(function(){var b,c,f,h,j;c=0;j=a.selected();
f=0;for(h=j.length;f<h;f++)b=j[f],null!=b&&(c+=b.price);return c});this.title=this.getTitle()}c.prototype.handleAvia=function(){throw"Implement me";};c.prototype.getRating=function(b,a,c){var e,f;f="-"===b.rating?0:scaledValue(b.rating,5,this.RATING_WEIGHT);e=scaledValue(b.starsNumeric,5,this.STARS_WEIGHT);c=scaledValue(b.distanceToCenter,c,this.DISTANCE_WEIGHT,!0);b=scaledValue(b.roomSets()[0].discountPrice,a,this.PRICE_WEIGHT,!0);return Math.sqrt(e*e+f*f+c*c+b*b)};c.prototype.handleHotels=function(b){var a,
c,e,f=this;b=b.results().data();e=_.reduce(b,function(a,b){return a>b.roomSets()[0].discountPrice?a:b.roomSets()[0].discountPrice},b[0].roomSets()[0].discountPrice);c=_.reduce(b,function(a,b){return!b.distanceToCenter?a:a>b.distanceToCenter?a:b.distanceToCenter},0);a=_.reduce(b,function(a,b){return f.getRating(a,e,c)>f.getRating(b,e,c)?a:b},b[0]);return{roomSet:a.roomSets()[0],hotel:b,price:a.roomSets()[0].discountPrice}};c.prototype.choose=function(){var b,a,c,e;e=this.toursResultSet.data();a=0;
for(c=e.length;a<c;a++)b=e[a],b.isAvia()?b.select(b.noresults?null:this.handleAvia(b)):b.select(b.noresults?null:this.handleHotels(b));return this.toursResultSet.showOverview()};return c}();
VoyashaCheapest=function(c){function b(){this.handleAvia=__bind(this.handleAvia,this);this.getTitle=__bind(this.getTitle,this);this.init=__bind(this.init,this);return b.__super__.constructor.apply(this,arguments)}__extends(b,c);b.prototype.init=function(){this.PRICE_WEIGHT=5;return this.DISTANCE_WEIGHT=this.STARS_WEIGHT=this.RATING_WEIGHT=0};b.prototype.getTitle=function(){return"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"};b.prototype.handleAvia=function(a){return _.reduce(a.results().data,
function(a,b){return a.price<b.price?a:b},a.results().data[0])};return b}(Voyasha);
VoyashaOptima=function(c){function b(){this.handleAvia=__bind(this.handleAvia,this);this.getTitle=__bind(this.getTitle,this);this.init=__bind(this.init,this);return b.__super__.constructor.apply(this,arguments)}__extends(b,c);b.prototype.init=function(){this.PRICE_WEIGHT=5;this.RATING_WEIGHT=3;this.STARS_WEIGHT=4;return this.DISTANCE_WEIGHT=2};b.prototype.getTitle=function(){return"\u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442"};b.prototype.handleAvia=
function(a){return a.results().getFilterLessBest()};return b}(Voyasha);
VoyashaRich=function(c){function b(){this.handleAvia=__bind(this.handleAvia,this);this.getTitle=__bind(this.getTitle,this);this.init=__bind(this.init,this);return b.__super__.constructor.apply(this,arguments)}__extends(b,c);b.prototype.init=function(){this.PRICE_WEIGHT=5;this.RATING_WEIGHT=3;return this.DISTANCE_WEIGHT=this.STARS_WEIGHT=5};b.prototype.getTitle=function(){return"\u0420\u043e\u0441\u043a\u043e\u0448\u043d\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442"};b.prototype.handleAvia=
function(a){var b,c,f,h,j,m;h=a.results().data;b=h[0].directRating();c=h[0].price;f=h[0];j=0;for(m=h.length;j<m;j++)a=h[j],a.directRating()<b?(b=a.directRating(),c=a.price,f=a):a.directRating()===b&&a.price<c&&(c=a.price,f=a);return f};return b}(Voyasha);var Timeline,__bind=function(c,b){return function(){return c.apply(b,arguments)}};
Timeline=function(){function c(b){var a=this;this.toursData=b;this.scrollTimelineLeft=__bind(this.scrollTimelineLeft,this);this.scrollTimelineRight=__bind(this.scrollTimelineRight,this);this.showTimeline=__bind(this.showTimeline,this);this.showConditions=__bind(this.showConditions,this);this.timelinePosition=ko.observable(0);this.termsActive=!0;this.data=ko.computed(function(){var b,c,f,h,j,m,p,g,n,q,u,r;c=[];b={};h={};q=a.toursData();f=0;for(g=q.length;f<g;f++)j=q[f],n={start:moment(j.timelineStart()).clone().hours(0).minutes(5),
end:moment(j.timelineEnd()).clone().hours(0).minutes(5)},c.push(n),j.isHotel()?h[n.start.format("M.D")]={duration:n.end.diff(n.start,"days"),item:j}:b[n.start.format("M.D")]={duration:n.end.diff(n.start,"days"),item:j};n=c[0].start;c=c[c.length-1].end;j=a.toursData()[0];j.isAvia()&&j.rt()&&(c=moment(j.rtTimelineStart()).clone().hours(0).minutes(5),b[c.format("M.D")]={duration:1,item:j});c=c.diff(n,"days");j=n.clone().add("days",c/2);23>c&&(c=23);g=Math.round(c/2);u=Math.round(c/2);q=[];f=c=!1;for(n=
r=2;2<=g?r<=g:r>=g;n=2<=g?++r:--r){n={date:j.clone().subtract("days",g-n+1)};n.day=n.date.format("D");n.hotel=!1;n.avia=!1;n.first=!1;m=b[n.date.format("M.D")];if(p=h[n.date.format("M.D")])n.hotel=p,!1===f&&(f=n.first=!0);m&&(n.avia=m,!1===c&&(c=n.first=!0));q.push(n)}for(n=g=0;0<=u?g<=u:g>=u;n=0<=u?++g:--g){n={date:j.clone().add("days",n)};n.day=n.date.format("D");n.hotel=!1;n.avia=!1;n.first=!1;m=b[n.date.format("M.D")];if(p=h[n.date.format("M.D")])n.hotel=p,!1===f&&(f=n.first=!0);m&&(n.avia=m,
!1===c&&(c=n.first=!0));q.push(n)}return q})}c.prototype.showConditions=function(b,a){var c,e=this;c=$(a.currentTarget);if(!c.hasClass("active"))return $(".btn-timeline-and-condition a").removeClass("active"),c.addClass("active"),$(".divTimeline").addClass("hide"),$(".divTimeline").animate({top:"-"+$(".divTimeline").height()+"px"},400,function(){$(".slide-tmblr").css("overflow","visible");return e.termsActive=!0}),$(".divCondition").animate({top:"0px"},400).removeClass("hide")};c.prototype.showTimeline=
function(b,a){var c,e=this;c=$(a.currentTarget);if(!c.hasClass("active"))return $(".slide-tmblr").css("overflow","hidden"),$(".btn-timeline-and-condition a").removeClass("active"),c.addClass("active"),$(".divTimeline").animate({top:"0px"},400).removeClass("hide"),$(".divCondition").animate({top:"64px"},400,function(){return e.termsActive=!1}).addClass("hide")};c.prototype.scrollTimelineRight=function(){var b;b=32*this.data().length-736;if(!(0>b)&&(this.timelinePosition(this.timelinePosition()+32),
this.timelinePosition()>b))return this.timelinePosition(b)};c.prototype.scrollTimelineLeft=function(){if(!(0>32*this.data().length-736)&&(this.timelinePosition(this.timelinePosition()-32),0>this.timelinePosition()))return this.timelinePosition(0)};return c}();
var TourPanel,TourPanelSet,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};
TourPanelSet=function(){function c(){this.afterRender=__bind(this.afterRender,this);this.calendarHidden=__bind(this.calendarHidden,this);this.setDate=__bind(this.setDate,this);this.showPanelCalendar=__bind(this.showPanelCalendar,this);this.addPanel=__bind(this.addPanel,this);this.isFirst=__bind(this.isFirst,this);this.deletePanel=__bind(this.deletePanel,this);this.saveStartParams=__bind(this.saveStartParams,this);this.navigateToNewSearchMainPage=__bind(this.navigateToNewSearchMainPage,this);this.navigateToNewSearch=
__bind(this.navigateToNewSearch,this);var b=this;_.extend(this,Backbone.Events);window.voyanga_debug("Init of TourPanelSet");this.template="tour-panel-template";this.sp=new TourSearchParams;this.prevPanel="hotels";this.prevPanelLabel="\u0422\u043e\u043b\u044c\u043a\u043e \u043e\u0442\u0435\u043b\u0438";this.nextPanel="avia";this.nextPanelLabel="\u0422\u043e\u043b\u044c\u043a\u043e \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u044b";this.icon="constructor-ico";this.mainLabel='\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u0435: \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442 + \u043e\u0442\u0435\u043b\u044c <img src="/themes/v2/images/saleTitle.png">';
this.indexMode=!0;this.startCity=this.sp.startCity;this.startCityReadable=ko.observable("");this.startCityReadableGen=ko.observable("");this.startCityReadableAcc=ko.observable("");this.startCityReadablePre=ko.observable("");this.selectionIndex=ko.observable("");this.selectionIndex.subscribe(function(a){if(1===a)return VoyangaCalendarStandart.checkCalendarValue(!1),b.activeCalendarPanel().checkIn(""),b.activeCalendarPanel().checkOut("")});this.startCityReadableAccShort=ko.computed(function(){return 15<
b.startCityReadableAcc().length?'<div class="backCity">'+b.startCityReadableAcc()+"</div>":b.startCityReadableAcc()});this.returnBack=this.sp.returnBack;this.returnBackLabel=ko.computed(function(){return"\u0418 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432<br/>"+b.startCityReadableAccShort()});this.panels=ko.observableArray([]);this.activeCity=ko.observable("");this.activeCityAcc=ko.observable("");this.activeCityGen=ko.observable("");this.sp.calendarActivated=ko.observable(!0);this.calendarText=
ko.computed(function(){var a;a="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434";b.activeCity()&&(0===b.selectionIndex()?a="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u0440\u0438\u0435\u0437\u0434\u0430 \u0432 \u0433\u043e\u0440\u043e\u0434 "+b.activeCity():1===b.selectionIndex()?a="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043e\u0442\u044a\u0435\u0437\u0434\u0430 \u0438\u0437 \u0433\u043e\u0440\u043e\u0434\u0430 "+
b.activeCity():2===b.selectionIndex()&&(a=b.activeCity()+", "+dateUtils.formatDayShortMonth(b.activeCalendarPanel().checkIn())+" - "+dateUtils.formatDayShortMonth(b.activeCalendarPanel().checkOut())));return a});this.lastPanel=null;this.i=0;this.addPanel();this.activeCalendarPanel=ko.observable(this.panels()[0]);this.height=ko.computed(function(){return 64*b.panels().length+"px"});this.heightPanelSet=ko.computed(function(){return 64*b.panels().length});this.isMaxReached=ko.computed(function(){return 4<
b.panels().length});this.calendarValue=ko.computed(function(){return{twoSelect:!0,hotels:!0,from:b.activeCalendarPanel().checkIn(),to:b.activeCalendarPanel().checkOut(),activeSearchPanel:b.activeCalendarPanel(),valuesDescriptions:["\u0417\u0430\u0435\u0437\u0434 \u0432 \u043e\u0442\u0435\u043b\u044c<br>\u0432 "+b.activeCalendarPanel().cityReadablePre(),"\u0412\u044b\u0435\u0437\u0434 \u0438\u0437 \u043e\u0442\u0435\u043b\u044f<br>\u0432 "+b.activeCalendarPanel().cityReadablePre()],intervalDescription:"0",
selectionIndex:b.selectionIndex}});this.calendarValue.subscribe(function(){if(!VoyangaCalendarStandart.checkCalendarValue())return window.setTimeout(function(){return VoyangaCalendarStandart.checkCalendarValue(!0)},100)});this.formFilled=ko.computed(function(){var a;a=b.startCity();_.each(b.panels(),function(b){return a=a&&b.formFilled()});return a});this.formNotFilled=ko.computed(function(){return!b.formFilled()})}c.prototype.navigateToNewSearch=function(){var b;if(this.formNotFilled())b=$("div.innerCalendar").find("h1"),
Utils.flashMessage(b);else return _.last(this.panels()).handlePanelSubmit(),_.last(this.panels()).minimizedCalendar(!0)};c.prototype.navigateToNewSearchMainPage=function(){if(!this.formNotFilled())return this.selectedParams&&(_.last(this.panels()).selectedParams=this.selectedParams),_.last(this.panels()).handlePanelSubmit(!1)};c.prototype.saveStartParams=function(){return _.last(this.panels()).saveStartParams()};c.prototype.deletePanel=function(b){var a;a=this.panels.indexOf(b);this.panels.remove(b);
this.sp.destinations.splice(a,1);return _.last(this.panels()).isLast(!0)};c.prototype.isFirst=function(){return 1===this.i};c.prototype.addPanel=function(b){var a,c,e=this;null==b&&(b=!1);if(!b&&0<this.panels().length&&2!==this.selectionIndex())console.log(this.panels()[0].city()),1===this.panels().length&&0===this.panels()[0].city().length?(b=$("div.from"),$(b).find(".second-path").attr("placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u0439 \u0433\u043e\u0440\u043e\u0434")):
b=$("div.innerCalendar").find("h1"),Utils.flashMessage(b);else return this.sp.destinations.push(new DestinationSearchParams),_.last(this.panels())&&(_.last(this.panels()).isLast(!1),c=_.last(this.panels())),a=new TourPanel(this.sp,this.i,0===this.i),a.on("tourPanel:showCalendar",function(){var b;b=1<=arguments.length?__slice.call(arguments,0):[];e.activeCity(a.cityReadable());e.activeCityAcc(a.cityReadableAcc());e.activeCityGen(a.cityReadableGen());return e.showPanelCalendar(b)}),a.on("tourPanel:hasFocus",
function(){var b;b=1<=arguments.length?__slice.call(arguments,0):[];e.activeCity(a.cityReadable());return e.showPanelCalendar(b)}),c&&(a.prevSearchPanel(c),c.nextSearchPanel(a)),this.panels.push(a),this.lastPanel=a,this.i=this.panels().length,VoyangaCalendarStandart.clear(),this.activeCity(""),this.activeCityAcc(""),this.activeCityGen("")};c.prototype.showPanelCalendar=function(b){this.activeCalendarPanel(b[0]);if(this.activeCity()&&(!this.activeCalendarPanel().checkIn()||!this.activeCalendarPanel().checkOut()))return this.activeCalendarPanel().showCalendar(!1)};
c.prototype.setDate=function(b){var a;if(b&&b.length&&((!this.activeCalendarPanel().checkIn()||moment(this.activeCalendarPanel().checkIn()).format("YYYY-MM-DD")!==moment(b[0]).format("YYYY-MM-DD"))&&this.activeCalendarPanel().checkIn(b[0]),a=this.activeCalendarPanel().checkIn(),1<b.length&&(this.activeCalendarPanel().checkIn()<b[1]?(!this.activeCalendarPanel().checkOut()||moment(this.activeCalendarPanel().checkOut()).format("YYYY-MM-DD")!==moment(b[1]).format("YYYY-MM-DD"))&&this.activeCalendarPanel().checkOut(b[1]):
this.activeCalendarPanel().checkOut(""),a<this.activeCalendarPanel().checkOut()&&(a=this.activeCalendarPanel().checkOut())),this.activeCalendarPanel().nextSearchPanel()&&a>this.activeCalendarPanel().nextSearchPanel().checkIn()))return this.activeCalendarPanel().nextSearchPanel().checkIn(null),this.activeCalendarPanel().nextSearchPanel().checkOut(null)};c.prototype.calendarHidden=function(){return this.activeCalendarPanel().calendarHidden()};c.prototype.afterRender=function(){resizePanel();if(this.activeCity()&&
(!this.activeCalendarPanel().checkIn()||!this.activeCalendarPanel().checkOut()))return this.activeCalendarPanel().showCalendar(!1)};c.prototype.beforeRemove=function(b){return $(b).hasClass("panel")?($(b).remove(),resizePanel()):$(b).remove()};return c}();
TourPanel=function(c){function b(a,c,e){this.checkOutHtml=__bind(this.checkOutHtml,this);this.checkInHtml=__bind(this.checkInHtml,this);this.showCalendar=__bind(this.showCalendar,this);this.saveStartParams=__bind(this.saveStartParams,this);this.handlePanelSubmit=__bind(this.handlePanelSubmit,this);this.handlePanelSubmitToMain=__bind(this.handlePanelSubmitToMain,this);var f=this;b.__super__.constructor.call(this,e,!0);this.toggleSubscribers.dispose();_.extend(this,Backbone.Events);this.hasfocus=ko.observable(!1);
this.sp=a;this.isLast=ko.observable(!0);this.peopleSelectorVM=new HotelPeopleSelector(a);this.destinationSp=_.last(a.destinations());this.city=this.destinationSp.city;this.checkIn=this.destinationSp.dateFrom;this.checkOut=this.destinationSp.dateTo;this.cityReadable=ko.observable("");this.cityReadableGen=ko.observable("");this.cityReadableAcc=ko.observable("");this.cityReadablePre=ko.observable("");this.oldCalendarState=this.minimizedCalendar();this.formFilled=ko.computed(function(){return f.city()&&
f.checkIn()&&f.checkOut()});this.formNotFilled=ko.computed(function(){return!f.formFilled()});this.maximizedCalendar=ko.computed(function(){return 0<f.city().length});this.calendarText=ko.computed(function(){return"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u043e\u0435\u0437\u0434\u043a\u0438 "});this.hasfocus.subscribe(function(){return f.trigger("tourPanel:hasFocus",f)});this.city.subscribe(function(){if(f.sp.calendarActivated())return f.showCalendar()})}__extends(b,
c);b.prototype.handlePanelSubmitToMain=function(){return handlePanelSubmit(!1)};b.prototype.handlePanelSubmit=function(a){null==a&&(a=!0);if(a)return app.navigate(this.sp.getHash(),{trigger:!0});a="/#"+this.sp.getHash();this.startParams===a&&(a+="eventId/"+this.selectedParams.eventId);return window.location.href=a};b.prototype.saveStartParams=function(){return this.startParams="/#"+this.sp.getHash()};b.prototype.close=function(){$(document.body).unbind("mousedown");$(".how-many-man .btn").removeClass("active");
$(".how-many-man .content").removeClass("active");return $(".how-many-man").find(".popup").removeClass("active")};b.prototype.showFromCityInput=function(a,b){var c;b.stopPropagation();c=$(".cityStart").find(".second-path");c.data("old",c.val());c=c.closest(".cityStart");c.closest(".tdCityStart").animate({width:"+=130",300:300});c.closest(".tdCityStart").find(".bgInput").animate({width:"+=150",300:300});c.closest(".tdCityStart").next().find(".data").animate({width:"-=130",300:300});c.find(".startInputTo").show();
return c.find(".cityStart").animate({width:"261px"},300,function(){},c.find(".startInputTo").find("input").focus())};b.prototype.hideFromCityInput=function(a,b){return hideFromCityInput(a,b)};b.prototype.showCalendar=function(a){null==a&&(a=!0);console.log("show calendar func");$(".calenderWindow").show();window.setTimeout(function(){return VoyangaCalendarStandart.scrollToDate(VoyangaCalendarStandart.scrollDate,!0)},50);a&&this.trigger("tourPanel:showCalendar",this);if(this.minimizedCalendar())return ResizeAvia(),
this.minimizedCalendar(!1)};b.prototype.checkInHtml=function(){return this.checkIn()?dateUtils.formatHtmlDayShortMonth(this.checkIn()):""};b.prototype.checkOutHtml=function(){return this.checkOut()?dateUtils.formatHtmlDayShortMonth(this.checkOut()):""};return b}(SearchPanel);$(document).on("keyup change","input.second-path",function(c){var b,a;b=$(this).val();a=$(this).siblings("input.input-path");if(8===c.keyCode||3>b.length)return a.val("")});
$(document).on("keyup change",".cityStart input.second-path",function(c){var b;b=$(".from.active .second-path");if(13===c.keyCode&&b.parent().hasClass("overflow"))return b.parent().animate({width:"271px"},300,function(){}),$(this).removeClass("overflow"),$(".from.active .second-path").focus(),$(".cityStart").animate({width:"115px"},300),$(".cityStart").find(".startInputTo").animate({opacity:"1"},300,function(){}),$(this).hide()});
var DestinationSearchParams,RoomsSearchParams,TourEntry,TourSearchParams,TourTripResultSet,ToursAviaResultSet,ToursHotelsResultSet,ToursOverviewVM,ToursResultSet,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};
TourEntry=function(){function c(){this.beforeRender=__bind(this.beforeRender,this);this.rt=__bind(this.rt,this);this.savings=__bind(this.savings,this);this.maxPriceHtml=__bind(this.maxPriceHtml,this);this.minPriceHtml=__bind(this.minPriceHtml,this);this.priceHtml=__bind(this.priceHtml,this);this.price=__bind(this.price,this);this.isHotel=__bind(this.isHotel,this);this.isAvia=__bind(this.isAvia,this);_.extend(this,Backbone.Events);this.savingsWithAviaOnly=!1}c.prototype.isAvia=function(){return this.avia};
c.prototype.isHotel=function(){return this.hotels};c.prototype.price=function(){return null===this.selection()?0:this.selection().price};c.prototype.priceHtml=function(){return this.noresults?"\u041d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432":null===this.selection()?"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e":this.price()+'<span class="rur">o</span>'};c.prototype.minPriceHtml=function(){return this.minPrice()+'<span class="rur">o</span>'};c.prototype.maxPriceHtml=
function(){return this.maxPrice()+'<span class="rur">o</span>'};c.prototype.savings=function(){this.selection();return 0};c.prototype.rt=function(){return!1};c.prototype.beforeRender=function(){};return c}();
ToursAviaResultSet=function(c){function b(a,c){this.afterRender=__bind(this.afterRender,this);this.beforeRender=__bind(this.beforeRender,this);this.rt=__bind(this.rt,this);this.timelineStartDate=__bind(this.timelineStartDate,this);this.timelineEndDate=__bind(this.timelineEndDate,this);this.rt=__bind(this.rt,this);this.rtTimelineStart=__bind(this.rtTimelineStart,this);this.timelineEnd=__bind(this.timelineEnd,this);this.timelineStart=__bind(this.timelineStart,this);this.dateHtml=__bind(this.dateHtml,
this);this.dateClass=__bind(this.dateClass,this);this.additionalText=__bind(this.additionalText,this);this.destinationText=__bind(this.destinationText,this);this.maxPrice=__bind(this.maxPrice,this);this.minPrice=__bind(this.minPrice,this);this.numAirlines=__bind(this.numAirlines,this);this.overviewPeople=__bind(this.overviewPeople,this);this.overviewText=__bind(this.overviewText,this);this.doNewSearch=__bind(this.doNewSearch,this);this.toBuyRequest=__bind(this.toBuyRequest,this);this._selectResult=
__bind(this._selectResult,this);this.select=__bind(this.select,this);this.findAndSelect=__bind(this.findAndSelect,this);this.newResults=__bind(this.newResults,this);b.__super__.constructor.apply(this,arguments);this.api=new AviaAPI;this.template="avia-results";this.overviewTemplate="tours-overview-avia-no-selection";this.panel=new AviaPanel;this.panel.handlePanelSubmit=this.doNewSearch;this.panel.sp.fromObject(c);this.panel.original_template=this.panel.template;this.results=ko.observable();this.selection=
ko.observable(null);this.newResults(a,c);this.data={results:this.results}}__extends(b,c);b.prototype.newResults=function(a,b){var c,f=this;this.rawSP=b;c=new AviaResultSet(a);c.injectSearchParams(b);c.postInit();c.recommendTemplate="avia-tours-recommend";c.tours=!0;c.select=function(a){f.select(a,c);return f.trigger("next")};this.avia=!0;this.noresults=c.noresults;return this.results(c)};b.prototype.findAndSelect=function(a){if(!this.noresults){a=this.results().findAndSelect(a);if(!a)return!1;this._selectResult(a);
return a}};b.prototype.select=function(a){if(null!=a)return a.ribbon&&(a=a.data),this._selectResult(a)};b.prototype._selectResult=function(a){this.results().selected_key(a.key);a.parent.filtersConfig=a.parent.filters.getConfig();this.results().selected_best(a.best|0);this.overviewTemplate="tours-overview-avia-ticket";return this.selection(a)};b.prototype.toBuyRequest=function(){var a;a={type:"avia"};a.searchId=this.selection().cacheId;a.searchKey=this.selection().flightKey();a.adults=this.rawSP.adt;
a.children=this.rawSP.chd;a.infants=this.rawSP.inf;return a};b.prototype.doNewSearch=function(){var a=this;return this.api.search(this.panel.sp.url(),function(b){return a.newResults(b.flights.flightVoyages,b.searchParams)})};b.prototype.overviewText=function(){return"\u041f\u0435\u0440\u0435\u043b\u0435\u0442 "+this.results().departureCity+" &rarr; "+this.results().arrivalCity};b.prototype.overviewPeople=function(){var a;a=this.panel.sp.adults()+this.panel.sp.children()+this.panel.sp.infants();return Utils.wordAfterNum(a,
"\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a")};b.prototype.numAirlines=function(){return this.results().filters.airline.options().length};b.prototype.minPrice=function(){return this.noresults?0:_.reduce(this.results().data,function(a,b){return a.price<b.price?a:b},this.results().data[0]).price};b.prototype.maxPrice=function(){return this.noresults?0:_.reduce(this.results().data,function(a,b){return a.price>
b.price?a:b},this.results().data[0]).price};b.prototype.destinationText=function(){return"<span class='left-avia-city'>"+this.results().departureCity+"&rarr;</span> <span class='left-avia-city'>"+this.results().arrivalCity+"</span>"};b.prototype.additionalText=function(){return null===this.selection()?"":this.rt()?"":", "+this.selection().departureTime()+" - "+this.selection().arrivalTime()};b.prototype.dateClass=function(){return this.rt()?"blue-two":"blue-one"};b.prototype.dateHtml=function(a){var b;
null==a&&(a=!1);b='<div class="day">'+dateUtils.formatHtmlDayShortMonth(moment(this.rawSP.destinations[0].date));b+="</div>";if(a)return b;this.rt()&&(b=b+'<div class="day">'+dateUtils.formatHtmlDayShortMonth(moment(this.rawSP.destinations[1].date)),b+="</div>");return b};b.prototype.timelineStart=function(){var a;a=this.selection();return null===a?this.rawSP.destinations[0].date:a.departureDate()};b.prototype.timelineEnd=function(){var a;a=this.selection();return null===a?this.rawSP.destinations[0].date:
a.arrivalDate()};b.prototype.rtTimelineStart=function(){var a;a=this.selection();return null===a?this.rawSP.destinations[1].date:a.rtDepartureDate()};b.prototype.rt=function(){var a;a=this.selection();null===a&&(a=this.results().data[0]);return a.roundTrip};b.prototype.timelineEndDate=function(){var a;a=this.selection();return null===a?moment(this.rawSP.destinations[0].date).toDate():a.arrivalDate()};b.prototype.timelineStartDate=function(){var a;a=this.selection();return null===a?moment(this.rawSP.destinations[0].date).toDate():
a.departureDate()};b.prototype.rt=function(){return this.results().roundTrip};b.prototype.beforeRender=function(){if(this.results().selectedKey)return this.results().filters.getConfig(this.results().filtersConfig)};b.prototype.afterRender=function(){if(this.results()&&(console.log("avia after rend"),this.results().selected_key))return console.log("Yes, have selected"),window.setTimeout(function(){if($(".ticket-content .pressButton.selected").parent().parent().parent().parent().length)return Utils.scrollTo($(".ticket-content .pressButton.selected").parent().parent().parent().parent())},
50)};return b}(TourEntry);
ToursHotelsResultSet=function(c){function b(a,c){this.savings=__bind(this.savings,this);this.afterRender=__bind(this.afterRender,this);this.beforeRender=__bind(this.beforeRender,this);this.timelineEndDate=__bind(this.timelineEndDate,this);this.timelineStartDate=__bind(this.timelineStartDate,this);this.timelineEnd=__bind(this.timelineEnd,this);this.timelineStart=__bind(this.timelineStart,this);this.dateHtml=__bind(this.dateHtml,this);this.dateClass=__bind(this.dateClass,this);this.additionalText=__bind(this.additionalText,
this);this.price=__bind(this.price,this);this.destinationText=__bind(this.destinationText,this);this.maxPrice=__bind(this.maxPrice,this);this.minPrice=__bind(this.minPrice,this);this.numHotels=__bind(this.numHotels,this);this.overviewPeople=__bind(this.overviewPeople,this);this.overviewText=__bind(this.overviewText,this);this.doNewSearch=__bind(this.doNewSearch,this);this.toBuyRequest=__bind(this.toBuyRequest,this);this._selectRoomSet=__bind(this._selectRoomSet,this);this.select=__bind(this.select,
this);this.findAndSelectSame=__bind(this.findAndSelectSame,this);this.findAndSelect=__bind(this.findAndSelect,this);this.newResults=__bind(this.newResults,this);b.__super__.constructor.apply(this,arguments);this.api=new HotelsAPI;this.panel=new HotelsPanel;this.panel.handlePanelSubmit=this.doNewSearch;this.panel.sp.fromObject(c);this.panel.original_template=this.panel.template;this.overviewTemplate="tours-overview-hotels-no-selection";this.template="hotels-results";this.activeHotel=ko.observable(0);
this.selection=ko.observable(null);this.results=ko.observable();this.data={results:this.results};this.savingsWithAviaOnly=!0;this.newResults(a,c)}__extends(b,c);b.prototype.newResults=function(a,b){var c,f=this;this.rawSP=b;c=new HotelsResultSet(a,b,this.activeHotel);c.tours(!0);c.postInit();c.select=function(a){a.parent=c;a.oldPageTop=$("html").scrollTop()|$("body").scrollTop();a.off("back");a.on("back",function(){return f.trigger("setActive",f,!1,!1,a.oldPageTop,function(){return a.parent.showFullMap()?
a.parent.showFullMapFunc(null,null,!0):Utils.scrollTo("#hotelResult"+a.hotelId)})});a.getFullInfo();a.off("select");a.on("select",function(a){f.select(a);return f.trigger("next")});return f.trigger("setActive",{data:a,template:"hotels-info-template",parent:f})};c.selectFromPopup=function(a){a.parent=c;a.activePopup.close();a.oldPageTop=$("html").scrollTop()|$("body").scrollTop();a.off("back");a.on("back",function(){return f.trigger("setActive",f,!1,!1,a.oldPageTop,function(){if(!a.parent.showFullMap())return Utils.scrollTo("#hotelResult"+
a.hotelId)})});a.off("select");a.on("select",function(a){f.select(a);return f.trigger("next")});return f.trigger("setActive",{data:a,template:"hotels-info-template",parent:f})};this.hotels=!0;this.selection(null);this.noresults=c.noresults;return this.results(c)};b.prototype.findAndSelect=function(a){console.log("find THRS ",a);a&&(a.roomSet?a=this.results().findAndSelect(ko.utils.unwrapObservable(a.roomSet)):(console.log(ko.utils.unwrapObservable(a.roomSets)),a=this.results().findAndSelect(ko.utils.unwrapObservable(a.roomSets)[0])));
return!a?(console.log("not found =(",a),!1):this._selectRoomSet(a)};b.prototype.findAndSelectSame=function(a){var b;console.log("find THRS ",a);if(this.results()&&this.results().data()&&this.results().data().length)return a.roomSet?(console.log("inif"),b=this.results().findAndSelectSame(ko.utils.unwrapObservable(a.roomSet))):(console.log("inelse"),console.log(ko.utils.unwrapObservable(a.roomSets)),b=this.results().findAndSelectSame(ko.utils.unwrapObservable(a.roomSets)[0])),console.log("ret?",b),
b||(console.log("same not found and find by stars and coords"),b=this.results().findAndSelectSameParams(a.categoryId,a.getLatLng())),this._selectRoomSet(b)};b.prototype.select=function(a){if(null!=a)return this._selectRoomSet(a.roomSet)};b.prototype._selectRoomSet=function(a){var b;b=a.parent;b.parent=this.results();this.activeHotel(b.hotelId);this.overviewTemplate="tours-overview-hotels-ticket";this.selection({roomSet:a,hotel:b});b.parent.filtersConfig=b.parent.filters.getConfig();return b.parent.pagesLoad=
b.parent.showParts()};b.prototype.toBuyRequest=function(){var a,b,c,f,h;a={type:"hotel"};a.searchId=this.selection().hotel.cacheId;a.searchKey=this.selection().roomSet.resultId;a.adults=0;a.age=!1;a.cots=0;h=this.rawSP.rooms;c=0;for(f=h.length;c<f;c++)b=h[c],a.adults+=1*b.adultCount,b.childAge&&(a.age=b.childAgeage),a.cots+=1*b.cots;return a};b.prototype.doNewSearch=function(){var a=this;return this.api.search(this.panel.sp.url(),function(b){b.searchParams.cacheId=b.cacheId;return a.newResults(b,
b.searchParams)})};b.prototype.overviewText=function(){return this.destinationText()};b.prototype.overviewPeople=function(){var a;a=this.panel.sp.overall();return Utils.wordAfterNum(a,"\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a")+", "+this.results().wordDays};b.prototype.numHotels=function(){return this.results().data().length};b.prototype.minPrice=function(){return this.results().minPrice};b.prototype.maxPrice=
function(){return this.results().maxPrice};b.prototype.destinationText=function(){return this.noresults?this.rawSP.cityFull.caseNom:"<span class='hotel-left-long'>\u041e\u0442\u0435\u043b\u044c \u0432 "+this.rawSP.cityFull.casePre+"</span><span class='hotel-left-short'>"+this.rawSP.cityFull.caseNom+"</span>"};b.prototype.price=function(){return null===this.selection()?0:this.selection().roomSet.price};b.prototype.additionalText=function(){return null===this.selection()?"":", "+this.selection().hotel.hotelName};
b.prototype.dateClass=function(){return"orange-two"};b.prototype.dateHtml=function(a){var b;null==a&&(a=!1);b='<div class="day">'+dateUtils.formatHtmlDayShortMonth(this.results().checkIn);b+="</div>";if(a)return b;b=b+'<div class="day">'+dateUtils.formatHtmlDayShortMonth(this.results().checkOut);return b+"</div>"};b.prototype.timelineStart=function(){return this.results().checkIn};b.prototype.timelineEnd=function(){return this.results().checkOut};b.prototype.timelineStartDate=function(){return this.results().checkIn._d};
b.prototype.timelineEndDate=function(){return this.results().checkOut._d};b.prototype.beforeRender=function(){console.log("beforeRender hotels");if(this.results())return this.results().toursOpened=!0,this.activeHotel()?(this.results().filters.setConfig(this.results().filtersConfig),this.results().showParts(this.results().pagesLoad)):this.results().postFilters()};b.prototype.afterRender=function(){if(this.results()&&this.activeHotel())return window.setTimeout(function(){if($(".hotels-tickets .pressButton.selected").parent().parent().parent().parent().length)return Utils.scrollTo($(".hotels-tickets .pressButton.selected").parent().parent().parent().parent())},
50)};b.prototype.savings=function(){return null===this.selection()?0:this.selection().roomSet.price-this.selection().roomSet.discountPrice};return b}(TourEntry);
ToursResultSet=function(){function c(b,a){var c,e,f,h,j=this;this.searchParams=a;this.findAndSelectItems=__bind(this.findAndSelectItems,this);this.findAndSelect=__bind(this.findAndSelect,this);this.buy=__bind(this.buy,this);this.showOverview=__bind(this.showOverview,this);this.removeItem=__bind(this.removeItem,this);this.nextEntry=__bind(this.nextEntry,this);this.setActiveTimelineHotels=__bind(this.setActiveTimelineHotels,this);this.setActiveTimelineAvia=__bind(this.setActiveTimelineAvia,this);this.setActive=
__bind(this.setActive,this);_.extend(this,Backbone.Events);this.creationMoment=moment();this.data=ko.observableArray();h=b.allVariants;e=0;for(f=h.length;e<f;e++)if(c=h[e])c=c.flights?new ToursAviaResultSet(c.flights.flightVoyages,c.searchParams):new ToursHotelsResultSet(c,c.searchParams),this.data.push(c),c.on("setActive",function(a,b,c,d,e){null==b&&(b=!0);null==c&&(c=!0);null==d&&(d=0);null==e&&(e=null);return j.setActive(a,b,c,d,e)}),c.on("next",function(){return j.nextEntry()});this.timeline=
new Timeline(this.data);this.selection=ko.observable(this.data()[0]);this.panel=ko.computed({read:function(){j.selection().panel&&(j.panelContainer=j.selection().panel);null==j.panelContainer.minimizedCalendar&&(j.panelContainer.minimizedCalendar=function(){return!0});j.panelContainer.timeline=j.timeline;j.panelContainer.setActiveTimelineAvia=j.setActiveTimelineAvia;j.panelContainer.setActiveTimelineHotels=j.setActiveTimelineHotels;j.panelContainer.onlyTimeline?j.panelContainer.timeline.termsActive=
!1:(j.panelContainer.onlyTimeline=!1,j.panelContainer.timeline.termsActive=!0);j.panelContainer.selection=j.selection;j.panelContainer.template="tours-panel-template";return j.panelContainer}});this.price=ko.computed(function(){var a,b,c,d,e;b=0;e=j.data();c=0;for(d=e.length;c<d;c++)a=e[c],b+=a.price();return b});this.savings=ko.computed(function(){var a,b,c,d,e,f;a=!1;e=j.data();c=0;for(d=e.length;c<d;c++)b=e[c],b.selection()&&b.isAvia()&&(a=!0);c=0;f=j.data();d=0;for(e=f.length;d<e;d++)b=f[d],b.savingsWithAviaOnly?
a&&(c+=b.savings()):c+=b.savings();return c});this.someSegmentsSelected=ko.computed(function(){var a,b,c,d;d=j.data();b=0;for(c=d.length;b<c;b++)if(a=d[b],a.selection())return!0;return!1});this.someSegmentsSelected.subscribe(function(a){return a?$("#tour-buy-btn").show("fast"):$("#tour-buy-btn").hide("fast")});this.vm=new ToursOverviewVM(this);this.voyashki=[];this.voyashki.push(new VoyashaCheapest(this));this.voyashki.push(new VoyashaOptima(this));this.voyashki.push(new VoyashaRich(this))}c.prototype.setActive=
function(b,a,c,e,f){var h=this;null==a&&(a=!0);null==c&&(c=!0);null==e&&(e=0);null==f&&(f=null);$("#loadWrapBgMin").show();b.overview?($(".btn-timeline-and-condition").hide(),window.toursOverviewActive=!0):window.toursOverviewActive=!1;b.beforeRender&&a&&b.beforeRender();this.trigger("inner-template",b.template);return window.setTimeout(function(){console.log("TourOut",window.hrs.data()[0]);b.afterRender&&c&&(console.log("arin"),b.afterRender());h.selection(b);ko.processAllDeferredBindingUpdates();
ResizeAvia();$("#loadWrapBgMin").hide();!1!==e&&Utils.scrollTo(e,!1);if(f)return f()},100)};c.prototype.setActiveTimelineAvia=function(b){return this.setActive(b.avia.item)};c.prototype.setActiveTimelineHotels=function(b){return this.setActive(b.hotel.item)};c.prototype.nextEntry=function(){var b,a,c,e;e=this.data();a=0;for(c=e.length;a<c;a++)if(b=e[a],!b.selection()){this.setActive(b);return}return this.showOverview()};c.prototype.removeItem=function(b,a){var c;a.stopPropagation();if(!(2>this.data().length)&&
(c=this.data.indexOf(b),-1!==c&&(this.data.splice(c,1),b===this.selection())))return this.setActive(this.data()[0])};c.prototype.showOverview=function(){var b,a=this;b={onlyTimeline:!0,calendarHidden:function(){return!0},calendarValue:ko.observable({values:[]})};this.setActive({template:"tours-overview",data:this,overview:!0,panel:b});ResizeAvia();return window.setTimeout(function(){var b,c,f,h,j,m,p,g,n,q,u;console.log("after render tours all tour page");console.log(a.data());c=[];q=a.data();m=0;
for(g=q.length;m<g;m++){j=q[m];if(j.isAvia()){console.log("avia",j.data.results(),j.rawSP);f=[];u=j.rawSP.destinations;p=0;for(n=u.length;p<n;p++)h=u[p],b={type:"flight",description:h.departure+" || "+h.arrival,cityFrom:h.departure_iata,cityTo:h.arrival_iata},b.dayStart=moment(h.date)._d,b.dayEnd=moment(h.date)._d,f.push(b);j.selection()&&(console.log("select:",j.selection()),b=j.selection(),f[0].dayEnd=b.arrivalDate(),b.roundTrip&&(f[1].dayEnd=b.rtArrivalDate()),console.log("city:",b.arrivalCity(),
"date:",b.arrivalDate()));h=0;for(p=f.length;h<p;h++)b=f[h],c.push(b)}j.isHotel()&&(console.log("hotel",j.data.results(),j.rawSP),f=moment(j.rawSP.checkIn).add("h",8),b=moment(j.rawSP.checkIn).add("d",j.rawSP.duration),f={dayStart:f._d,dayEnd:b._d,type:"hotel",description:"",city:j.rawSP.city},j.selection()&&(console.log("select:",j.selection()),f.description=j.selection().hotel.hotelName),c.push(f))}c.sort(function(a,b){return a.dayStart>b.dayStart?1:a.dayStart<b.dayStart?-1:0});console.log(c);VoyangaCalendarTimeline.calendarEvents=
c;VoyangaCalendarTimeline.jObj="#voyanga-calendar-timeline";return VoyangaCalendarTimeline.init()},1E3)};c.prototype.buy=function(){var b;b=$.Deferred();b.done(function(a){var b,c,f,h;b=[];h=a.data();c=0;for(f=h.length;c<f;c++)a=h[c],a.selection()&&(b.push({module:"Tours"}),b.push(a.toBuyRequest()));return Utils.toBuySubmit(b)});return this.checkTicket(this.data(),b)};c.prototype.findAndSelect=function(b){var a,c,e,f,h;console.log("findAndSelect");e=!0;c=f=0;for(h=b.length;f<h;c=++f)a=b[c],this.data()[c].findAndSelect(a.selection())||
(e=!1);return e};c.prototype.findAndSelectItems=function(b){var a,c,e,f,h,j;if(b.length!==this.data().length)return!1;console.log("findAndSelectItems",b);f=!0;this.data.sort(function(a,b){var c,d,e,f;c=dateUtils.formatDayMonthYear(a.timelineStartDate());d=dateUtils.formatDayMonthYear(b.timelineStartDate());return c===d&&a.isAvia()!==b.isAvia()?null!=(e=a.timelineEndDate()>b.timelineEndDate())?e:NaN:null!=(f=a.timelineStartDate()>b.timelineStartDate())?f:NaN});h=this.data();c=0;for(e=h.length;c<e;c++)a=
h[c],console.log("ts entry",a.timelineStart());console.log("allTs",this.data());c=h=0;for(j=b.length;h<j;c=++h)a=b[c],console.log("findAndSelectItems entry",a," in ",c,this.data()[c]),this.data()[c].isAvia()?(e=this.data()[c].findAndSelect(this.data()[c].results().cheapest()),e||(f=!1,console.log("false res1:",e,this.data()[c],this.data()[c].results().cheapest()))):(e=this.data()[c].findAndSelectSame(a),e||(f=!1,console.log("false res2:",e,this.data()[c],a)));return f};return c}();
DestinationSearchParams=function(){return function(){this.city=ko.observable("");this.dateFrom=ko.observable("");this.dateTo=ko.observable("")}}();RoomsSearchParams=function(){return function(){this.adt=ko.observable(2);this.chd=ko.observable(0);this.chdAge=ko.observable(!1);this.cots=ko.observable(!1)}}();
TourSearchParams=function(c){function b(){this.removeItem=__bind(this.removeItem,this);this.addSpRoom=__bind(this.addSpRoom,this);var a=this;b.__super__.constructor.call(this);this.startCity=window.currentCityCode?ko.observable(window.currentCityCode):ko.observable("LED");this.returnBack=ko.observable(1);this.destinations=ko.observableArray([]);this.rooms=ko.observableArray([new SpRoom(this)]);this.overall=ko.computed(function(){var b,c,f,h,j;b=0;j=a.rooms();f=0;for(h=j.length;f<h;f++)c=j[f],b+=c.adults(),
b+=c.children();return b});this.adults=ko.computed(function(){var b,c,f,h,j;b=0;j=a.rooms();f=0;for(h=j.length;f<h;f++)c=j[f],b+=c.adults();return b});this.children=ko.computed(function(){var b,c,f,h,j;b=0;j=a.rooms();f=0;for(h=j.length;f<h;f++)c=j[f],b+=c.children();return b})}__extends(b,c);b.prototype.addSpRoom=function(){return this.rooms.push(new SpRoom(this))};b.prototype.url=function(){var a,b;b="tour/search?";a=[];a.push("start="+this.startCity());a.push("return="+this.returnBack());_.each(this.destinations(),
function(b,c){a.push("destinations["+c+"][city]="+b.city());a.push("destinations["+c+"][dateFrom]="+moment(b.dateFrom()).format("D.M.YYYY"));return a.push("destinations["+c+"][dateTo]="+moment(b.dateTo()).format("D.M.YYYY"))});_.each(this.rooms(),function(b,c){return a.push(b.getUrl(c))});this.eventId&&a.push("eventId="+this.eventId);b+=a.join("&");window.voyanga_debug("Generated search url for tours",b);return b};b.prototype.key=function(){var a;a=this.startCity();_.each(this.destinations(),function(b){return a+=
b.city()+b.dateFrom()+b.dateTo()});_.each(this.rooms(),function(b){return a+=b.getHash()});return a};b.prototype.getHash=function(){var a,b;b=[this.startCity(),this.returnBack()];_.each(this.destinations(),function(a){b.push(a.city());b.push(moment(a.dateFrom()).format("D.M.YYYY"));return b.push(moment(a.dateTo()).format("D.M.YYYY"))});b.push("rooms");_.each(this.rooms(),function(a){return b.push(a.getHash())});a="tours/search/"+b.join("/")+"/";window.voyanga_debug("Generated hash for tour search",
a);return a};b.prototype.fromList=function(a){var b,c,f,h;this.startCity(a[0]);this.returnBack(a[1]);this.destinations([]);this.rooms([]);c=f=2;for(h=a.length;f<=h&&"rooms"!==a[c];c=f+=3)b=new DestinationSearchParams,b.city(a[c]),b.dateFrom(moment(a[c+1],"D.M.YYYY").toDate()),b.dateTo(moment(a[c+2],"D.M.YYYY").toDate()),this.destinations.push(b);c+=1;for(b=!1;c<a.length;){if("eventId"===a[c]){b=!0;break}f=new SpRoom(this);f.fromList(a[c]);this.rooms.push(f);c++}b&&(console.log("really have oldParams"),
c++,console.log("old params is",a[c]),this.eventId=a[c]);return window.voyanga_debug("Result",this)};b.prototype.fromObject=function(a){window.voyanga_debug("Restoring TourSearchParams from object");_.each(a.destinations,function(a){a=new DestinationSearchParams;a.city(a.city);a.dateFrom(moment(a.dateFrom,"D.M.YYYY").toDate());a.dateTo(moment(a.dateTo,"D.M.YYYY").toDate());return this.destinations.push(a)});_.each(a.rooms,function(a){a=new SpRoom(this);return this.rooms.push(this.room.fromObject(a))});
a.eventId&&(this.eventId=a.eventId);return window.voyanga_debug("Result",this)};b.prototype.removeItem=function(a,b){var c;b.stopPropagation();if(!(2>this.data().length)&&(c=this.data.indexOf(a),-1!==c&&(this.data.splice(c,1),a===this.selection())))return this.setActive(this.data()[0])};return b}(SearchParams);
ToursOverviewVM=function(){function c(b){this.resultSet=b;this.afterRender=__bind(this.afterRender,this);this.dateHtml=__bind(this.dateHtml,this);this.dateClass=__bind(this.dateClass,this);this.startCity=__bind(this.startCity,this)}c.prototype.startCity=function(){var b;b=this.resultSet.data()[0];return b.isAvia()?b.results().departureCity:b.results().city.caseNom};c.prototype.dateClass=function(){return"blue-one"};c.prototype.dateHtml=function(){return this.resultSet.data()[0].dateHtml(!0)};c.prototype.afterRender=
function(){};return c}();
TourTripResultSet=function(){return function(c){var b,a=this;this.resultSet=c;this.items=[];this.cities=[];this.hasHotel=this.hasFlight=!1;this.flightCounter=ko.observable(0);this.hotelCounter=ko.observable(0);this.selected_key=ko.observable("");this.selected_best=ko.observable("");this.totalCostWithoutDiscount=this.totalCostWithDiscount=this.totalCost=0;this.additional=this.tour=!1;this.flightIds=ko.observableArray([]);this.flightIdsString=ko.computed(function(){return a.flightIds().join(":")});this.showTariffRules=
function(){console.log("i wonna show tariff rules");return(new AviaAPI).search("flight/search/tariffRules?flightIds="+a.flightIdsString(),function(b){var c,f,h,j,m,p,g,n;if(b){j=[];g=a.items;m=0;for(p=g.length;m<p;m++)if(c=g[m],c.isFlight&&b[c._data.flightKey]){h={};h.route="\u041f\u0435\u0440\u0435\u043b\u0435\u0442 \u0438\u0437 "+c.departureCity()+" \u0432 "+c.arrivalCity();h.codes=[];n=b[c._data.flightKey];for(f in n)c=n[f],h.codes.push(c);j.push(h)}if(j)return console.log(j),new GenericPopup("#tariff-rules",
{tariffs:j})}})};this.flightCounterWord=ko.computed(function(){var b;if(0!==a.flightCounter())return b=Utils.wordAfterNum(a.flightCounter(),"\u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442","\u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u0430","\u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u043e\u0432"),0<a.hotelCounter()&&(b+=", "),b});this.hotelCounterWord=ko.computed(function(){if(0!==a.hotelCounter())return Utils.wordAfterNum(a.hotelCounter(),"\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0430",
"\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b","\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446")});_.each(this.resultSet.items,function(b){var c,f;if(b.isFlight)return a.tour=!0,a.hasFlight=!0,a.flightCounter(a.flightCounter()+1),a.roundTrip=2===b.flights.length,c=new AviaResult(b,a),a.flightIds.push(c._data.flightKey),c.sort(),c.totalPeople=Utils.wordAfterNum(b.searchParams.adt+b.searchParams.chd+b.searchParams.inf,"\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430",
"\u0447\u0435\u043b\u043e\u0432\u0435\u043a"),c.totalPeopleGen=Utils.wordAfterNum(b.searchParams.adt+b.searchParams.chd+b.searchParams.inf,"\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a"),a.roundTrip?(a.cities.push({isLast:!1,cityName:b.flights[0].departureCity}),a.cities.push({isLast:!1,cityName:b.flights[0].arrivalCity}),a.additional={isLast:!1,cityName:b.flights[0].departureCity}):(a.cities.push({isLast:!1,
cityName:b.flights[0].departureCity}),a.cities.push({isLast:!1,cityName:b.flights[0].arrivalCity})),a.items.push(c),a.totalCostWithDiscount+=c.price,a.totalCostWithoutDiscount=a.totalCostWithDiscount;if(b.isHotel)return a.hasHotel=!0,a.hotelCounter(a.hotelCounter()+1),a.lastHotel=new HotelResult(b,a,b.duration,b,b.hotelDetails),a.cities.push({cityName:a.lastHotel.activeHotel.city}),f=0,_.each(b.searchParams.rooms,function(a){return f+=a.adultCount/1+a.childCount/1+a.cots/1}),a.lastHotel.totalPeople=
Utils.wordAfterNum(f,"\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a"),a.lastHotel.totalPeopleGen=Utils.wordAfterNum(f,"\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430","\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a"),a.items.push(a.lastHotel),a.totalCostWithDiscount+=a.lastHotel.roomSets()[0].discountPrice,a.totalCostWithoutDiscount+=a.lastHotel.roomSets()[0].price});
this.additional&&this.cities.push(this.additional);b=[];_.each(this.cities,function(a){var c;c=_.last(b);_.isObject(c)||b.push(a);if(_.last(b).cityName!==a.cityName)return b.push(a)});this.cities=b;_.each(this.cities,function(b,c){if(c===a.cities.length-1)return b.isLast=!0;b.left=Math.round(100/a.cities.length*(c+1)-8.4);return 0>b.left?b.left="0%":b.left+="%"});this.totalCost=this.tour?this.totalCostWithDiscount:this.totalCostWithoutDiscount}}();
var ToursController,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__slice=[].slice;
ToursController=function(){function c(b){this.searchParams=b;this.checkTicketAction=__bind(this.checkTicketAction,this);this.handleResults=__bind(this.handleResults,this);this.searchAction=__bind(this.searchAction,this);this.indexAction=__bind(this.indexAction,this);this.api=new ToursAPI;this.routes={"/search/*rest":this.searchAction,"":this.indexAction};this.key="tours_10";_.extend(this,Backbone.Events)}c.prototype.indexAction=function(){var b;b=1<=arguments.length?__slice.call(arguments,0):[];window.voyanga_debug("TOURS: Invoking indexAction",
b);this.trigger("index",{});this.render("index");return ResizeAvia()};c.prototype.searchAction=function(){var b,a=this;b=1<=arguments.length?__slice.call(arguments,0):[];b[0]=exTrim(b[0],"/");b=b[0].split("/");window.voyanga_debug("TOURS: Invoking searchAction",b);this.searchParams.fromList(b);return this.api.search(this.searchParams.url(),function(b){if(!b||b.error)throw Error("Successfull api call with wrong/error response");a.stacked=a.handleResults(b);a.stacked.on("inner-template",function(b){return a.trigger("inner-template",
b)});a.trigger("results",a.stacked);a.render("results",a.stacked);return ko.processAllDeferredBindingUpdates()})};c.prototype.handleResults=function(b){var a,c,e,f,h;console.log("Handling results",b);e=new ToursResultSet(b,this.searchParams);if(b.items){c=[];h=b.items;b=0;for(f=h.length;b<f;b++)a=h[b],a.isHotel?(a=new HotelResult(a,e,a.duration,a,a.hotelDetails),c.push(a)):c.push(new AviaResult(a,e));if(e.findAndSelectItems(c)){e.showOverview();console.log("ssseeellleecctt",c,!0);c=[];a=e.data();
f=0;for(h=a.length;f<h;f++)b=a[f],b.isAvia()?c.push(b.selection().getPostData()):c.push(b.selection().hotel.getPostData()),console.log("result:",b.selection());console.log("post data",c,this.searchParams);$.ajax({url:this.api.endpoint+"tour/search/updateEvent",data:{eventId:this.searchParams.eventId,startCity:this.searchParams.startCity(),items:c},dataType:"json",timeout:9E4,type:"POST",success:function(a){cb(a);if(showLoad)return $("#loadWrapBg").hide(),loaderChange(!1)},error:function(){}})}else console.log("ssseeellleecctt",
c,!1)}e.checkTicket=this.checkTicketAction;return e};c.prototype.checkTicketAction=function(b,a){var c=this;if(moment().diff(this.stacked.creationMoment,"seconds")<TOURS_TICKET_TIMELIMIT)a.resolve(this.stacked);else return this.api.search(this.searchParams.url(),function(e){var f;try{f=c.handleResults(e)}catch(h){new ErrorPopup("avia500");return}if(f.findAndSelect(b))return a.resolve(f);new ErrorPopup("toursNoTicketOnValidation",!1,function(){});return c.results(f)})};c.prototype.render=function(b,
a){return this.trigger("viewChanged",b,a)};return c}();var ToursModule;
ToursModule=function(){function c(){var b=this;this.panel=ko.observable(null);this.p=new TourPanelSet;this.innerTemplate="";this.controller=new ToursController(this.p.sp);this.controller.on("results",function(a){b.panel(a.panel);return ko.processAllDeferredBindingUpdates()});this.controller.on("index",function(){return b.panel(b.p)});this.controller.on("inner-template",function(a){return b.innerTemplate=a})}c.prototype.resize=function(){return ResizeAvia()};return c}();
var HotelsPanel,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};
HotelsPanel=function(c){function b(){this.afterRender=__bind(this.afterRender,this);this.setDate=__bind(this.setDate,this);this.haveDates=__bind(this.haveDates,this);this.checkOutHtml=__bind(this.checkOutHtml,this);this.checkInHtml=__bind(this.checkInHtml,this);this.handlePanelSubmit=__bind(this.handlePanelSubmit,this);var a=this;this.template="hotels-panel-template";b.__super__.constructor.call(this);this.prevPanel="avia";this.prevPanelLabel="\u0422\u043e\u043b\u044c\u043a\u043e \u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u044b";
this.nextPanel="tours";this.nextPanelLabel="\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f";this.icon="hotel-ico";this.mainLabel="\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0435\u043b\u0435\u0439";this.indexMode=ko.observable(!0);this.sp=new HotelsSearchParams;this.calendarHidden=ko.observable(!0);this.city=this.sp.city;this.checkIn=this.sp.checkIn;this.checkOut=this.sp.checkOut;this.peopleSelectorVM=new HotelPeopleSelector(this.sp);
this.cityReadable=ko.observable();this.cityReadableAcc=ko.observable();this.cityReadableGen=ko.observable();this.cityReadablePre=ko.observable();this.selectionIndex=ko.observable("");this.selectionIndex.subscribe(function(b){if(1===b)return VoyangaCalendarStandart.checkCalendarValue(!1),a.checkIn(""),a.checkOut("")});this.calendarActive=ko.observable(!0);this.calendarText=ko.computed(function(){var b;b="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434";a.city()&&(0===a.selectionIndex()?
b="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043f\u0440\u0438\u0435\u0437\u0434\u0430 \u0432 "+a.cityReadableAcc():1===a.selectionIndex()?b="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443 \u043e\u0442\u044a\u0435\u0437\u0434\u0430 \u0438\u0437 "+a.cityReadableGen():2===a.selectionIndex()&&(b=a.cityReadable()+", "+dateUtils.formatDayShortMonth(a.checkIn())+" - "+dateUtils.formatDayShortMonth(a.checkOut())));return b});this.prefixText="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434<br>200 000+ \u043e\u0442\u0435\u043b\u0435\u0439";
$("div.innerCalendar").find("h1").removeClass("highlight");this.formFilled=ko.computed(function(){var b,c;b=a.checkIn().getDay?!0:0<a.checkIn().length;c=a.checkOut().getDay?!0:0<a.checkOut().length;return a.city()&&b&&c});this.formNotFilled=ko.computed(function(){return!a.formFilled()});this.maximizedCalendar=ko.computed(function(){return 0<a.city().length&&!_.isObject(a.checkIn())});this.maximizedCalendar.subscribe(function(b){if(a.calendarActive()&&b)return a.showCalendar()});this.calendarValue=
ko.computed(function(){return{twoSelect:!0,hotels:!0,from:a.checkIn(),to:a.checkOut(),activeSearchPanel:a,valuesDescriptions:['\u0417\u0430\u0435\u0437\u0434 \u0432 \u043e\u0442\u0435\u043b\u044c<div class="breakWord">\u0432 '+a.cityReadablePre()+"</div>",'\u0412\u044b\u0435\u0437\u0434 \u0438\u0437 \u043e\u0442\u0435\u043b\u044f<div class="breakWord">\u0432 '+a.cityReadablePre()+"</div>"],intervalDescription:"0",selectionIndex:a.selectionIndex}});this.calendarValue.subscribe(function(){if(!VoyangaCalendarStandart.checkCalendarValue())return window.setTimeout(function(){return VoyangaCalendarStandart.checkCalendarValue(!0)},
100)})}__extends(b,c);b.prototype.handlePanelSubmit=function(){if(""!==window.location.pathname.replace("/",""))$("#loadWrapBgMin").show(),window.location.href="/#"+this.sp.getHash();else return app.navigate(this.sp.getHash(),{trigger:!0}),this.minimizedCalendar(!0)};b.prototype.checkInHtml=function(){return this.checkIn()?dateUtils.formatHtmlDayShortMonth(this.checkIn()):""};b.prototype.checkOutHtml=function(){return this.checkOut()?dateUtils.formatHtmlDayShortMonth(this.checkOut()):""};b.prototype.haveDates=
function(){return this.checkOut()&&this.checkIn()};b.prototype.navigateToNewSearch=function(){var a;if(this.formNotFilled())a=$("div.innerCalendar").find("h1"),Utils.flashMessage(a);else return this.handlePanelSubmit(),this.minimizedCalendar(!0)};b.prototype.setDate=function(a){if(a.length&&((!this.checkIn()||moment(this.checkIn()).format("YYYY-MM-DD")!==moment(a[0]).format("YYYY-MM-DD"))&&this.checkIn(a[0]),1<a.length))if(a[1]>this.checkIn()){if(!this.checkOut()||moment(this.checkOut()).format("YYYY-MM-DD")!==
moment(a[1]).format("YYYY-MM-DD"))return this.checkOut(a[1])}else return this.checkOut("")};b.prototype.afterRender=function(){resizePanel();if(this.city()&&(!this.checkIn()||!this.checkOut()))return this.minimizedCalendar(!1)};return b}(SearchPanel);var HOTEL_SERVICE_VERBOSE,HotelResult,HotelsResultSet,MEAL_VERBOSE,Room,RoomSet,STARS_VERBOSE,__bind=function(c,b){return function(){return c.apply(b,arguments)}};STARS_VERBOSE=["one","two","three","four","five"];
HOTEL_SERVICE_VERBOSE={"\u0421\u0435\u0440\u0432\u0438\u0441":"service","\u0421\u043f\u043e\u0440\u0442 \u0438 \u043e\u0442\u0434\u044b\u0445":"sport","\u0422\u0443\u0440\u0438\u0441\u0442\u0430\u043c":"turist","\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442":"internet","\u0420\u0430\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u044f \u0438 \u0434\u043e\u0441\u0443\u0433":"dosug","\u041f\u0430\u0440\u043a\u043e\u0432\u043a\u0430":"parkovka","\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e":"dop",
"\u0412 \u043e\u0442\u0435\u043b\u0435":"in-hotel"};
MEAL_VERBOSE={"\u0410\u043c\u0435\u0440\u0438\u043a\u0430\u043d\u0441\u043a\u0438\u0439 \u0437\u0430\u0432\u0442\u0440\u0430\u043a":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a","\u0410\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439 \u0437\u0430\u0432\u0442\u0440\u0430\u043a":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a","\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0432 \u043d\u043e\u043c\u0435\u0440":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a","\u0417\u0430\u0432\u0442\u0440\u0430\u043a + \u043e\u0431\u0435\u0434":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0438 \u043e\u0431\u0435\u0434",
"\u0417\u0430\u0432\u0442\u0440\u0430\u043a + \u043e\u0431\u0435\u0434 + \u0443\u0436\u0438\u043d":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0438 \u043e\u0431\u0435\u0434 \u0438 \u0443\u0436\u0438\u043d","\u0417\u0430\u0432\u0442\u0440\u0430\u043a + \u043e\u0431\u0435\u0434 + \u0443\u0436\u0438\u043d + \u043d\u0430\u043f\u0438\u0442\u043a\u0438":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0438 \u043e\u0431\u0435\u0434 \u0438 \u0443\u0436\u0438\u043d \u0438 \u043d\u0430\u043f\u0438\u0442\u043a\u0438",
"\u0417\u0430\u0432\u0442\u0440\u0430\u043a + \u0443\u0436\u0438\u043d":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0438 \u0443\u0436\u0438\u043d","\u041a\u043e\u043d\u0442\u0438\u043d\u0435\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u0437\u0430\u0432\u0442\u0440\u0430\u043a":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a","\u0417\u0430\u0432\u0442\u0440\u0430\u043a \u0428\u0432\u0435\u0434\u0441\u043a\u0438\u0439 \u0441\u0442\u043e\u043b":"\u0417\u0430\u0432\u0442\u0440\u0430\u043a"};
Room=function(){function c(b){this.getParams=__bind(this.getParams,this);this.printDebug=__bind(this.printDebug,this);this.key=__bind(this.key,this);var a=this;this.name=b.showName;this.nameNemo=b.roomNemoName;if(!this.nameNemo||b.roomName)this.nameNemo=b.roomName;""!==this.nameNemo&&"undefined"!==typeof this.nameNemo?this.haveNemoName=!0:(this.haveNemoName=!1,this.nameNemo="");this.roomData=b;this.meal=b.meal;b.mealName&&(this.meal=b.mealName);this.last=ko.observable(!1);if("undefined"===typeof this.meal||
""===this.meal)this.meal="\u041d\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e";this.mealIcon="ico-breakfast";MEAL_VERBOSE[this.meal]&&(this.meal=MEAL_VERBOSE[this.meal]);if((this.hasMeal="\u0411\u0435\u0437 \u043f\u0438\u0442\u0430\u043d\u0438\u044f"!==this.meal&&"\u041d\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e"!==this.meal)&&"\u0417\u0430\u0432\u0442\u0440\u0430\u043a"!==this.meal)this.mealIcon="ico-breakfast-dinner";this.debugInfo=ko.computed(function(){var b,c,f,h;if(window.app.debugMode()){f=
"debugInfo:{";h=a.roomData;for(b in h)c=h[b],f+=b+"="+c+", ";return f+"}"}return!1})}c.prototype.key=function(){return this.nameNemo+this.name+this.meal};c.prototype.printDebug=function(){return console.log("room data:",this.roomData)};c.prototype.getParams=function(){var b;b={};b.showName=this.name;b.nemoName=this.nameNemo;b.meal=this.meal;return b};return c}();
RoomSet=function(){function c(b,a,c){var e,f=this;this.parent=a;null==c&&(c=1);this.hideCancelationRules=__bind(this.hideCancelationRules,this);this.showCancelationRules=__bind(this.showCancelationRules,this);this.addCancelationRules=__bind(this.addCancelationRules,this);this.similarityHash=__bind(this.similarityHash,this);this.key=__bind(this.key,this);this.minusCount=__bind(this.minusCount,this);this.plusCount=__bind(this.plusCount,this);this.checkCount=__bind(this.checkCount,this);this.getParams=
__bind(this.getParams,this);this.price=Math.ceil(b.rubPrice);this.discountPrice=Math.ceil(b.discountPrice);this.savings=0;this.resultId=b.resultId;this.searchId=b.searchId;this._data=b;this.pricePerNight=Math.ceil(this.price/c);this.visible=ko.observable(!0);this.cancelRules=ko.observable(!1);this.cancelText=ko.computed(function(){var a,b,c,d,e,n;if(f.cancelRules()){c=[];n=f.cancelRules();d=0;for(e=n.length;d<e;d++)a=n[d],a.charge?(b=dateUtils.formatDayMonth(moment()._d),b===dateUtils.formatDayMonth(a.cancelDate._d)?
c.push("\u0428\u0442\u0440\u0430\u0444 \u0432\u0437\u044b\u043c\u0430\u0435\u0442\u0441\u044f \u0432 \u0440\u0430\u0437\u043c\u0435\u0440\u0435 "+Math.ceil(a.price)+" \u0440\u0443\u0431"):c.push("\u0428\u0442\u0440\u0430\u0444 \u0432\u0437\u044b\u043c\u0430\u0435\u0442\u0441\u044f \u0432 \u0440\u0430\u0437\u043c\u0435\u0440\u0435 "+Math.ceil(a.price)+" \u0440\u0443\u0431 \u0441 "+dateUtils.formatDayMonth(a.cancelDate._d))):c.push("\u0428\u0442\u0440\u0430\u0444 \u0437\u0430 \u043e\u0442\u043c\u0435\u043d\u0443 \u043d\u0435 \u0432\u0437\u044b\u043c\u0430\u0435\u0442\u0441\u044f ");
return c.join("<br>")}return"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043d\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b"});this.specialOffer=ko.observable("");this.rooms=[];e=b.rooms;a=0;for(c=e.length;a<c;a++)b=e[a],b.offerText&&!this.specialOffer()&&this.specialOffer(b.offerText),this.rooms.push(new Room(b));this.rooms[this.rooms.length-1].last(!0);this.selectedCount=ko.observable(0);this.selectedCount.subscribe(function(a){return f.checkCount(a)});
this.selectText=ko.computed(function(){return!f.parent.tours()?"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c":f.parent.activeResultId()?"\u0412\u044b\u0431\u0440\u0430\u043d":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"})}c.prototype.getParams=function(){var b,a,c,e,f;a=[];f=this.rooms;c=0;for(e=f.length;c<e;c++)b=f[c],a.push(b.getParams());return a};c.prototype.checkCount=function(b){b=parseInt(b);return 0>b||isNaN(b)?this.selectedCount(0):this.selectedCount(b)};
c.prototype.plusCount=function(){return this.selectedCount(this.selectedCount()+1)};c.prototype.minusCount=function(){if(0<this.selectedCount())return this.selectedCount(this.selectedCount()-1)};c.prototype.key=function(){var b,a,c,e,f;b=this.price;f=this.rooms;c=0;for(e=f.length;c<e;c++)a=f[c],b+=a.key();return b};c.prototype.similarityHash=function(){var b,a,c,e,f;b="";f=this.rooms;c=0;for(e=f.length;c<e;c++)a=f[c],b+=a.key();return b};c.prototype.addCancelationRules=function(b){var a,c,e,f;if(b.cancelCharges){b.cancelCharges.sort(function(a,
b){return a.fromTimestamp<b.fromTimestamp?1:a.fromTimestamp>b.fromTimestamp?-1:0});console.log("adding cancel rules",b.cancelCharges);f=b.cancelCharges;c=0;for(e=f.length;c<e;c++)a=f[c],a.cancelDate=moment.unix(a.fromTimestamp),console.log("date convert",a,a.fromTimestamp,a.cancelDate);return this.cancelRules(b.cancelCharges)}};c.prototype.showCancelationRules=function(b,a){var c,e;console.log(a);e=$(a.currentTarget).width();this.parent.activeRoomSet(this);this.parent.showRulesPopup(!0);c=$("#content > :eq(0)").offset();
return $(".miniPopUp").css("left",a.pageX-e/2-c.left+"px").css("top",a.pageY+50-c.top+"px")};c.prototype.hideCancelationRules=function(){return this.parent.showRulesPopup(!1)};return c}();
HotelResult=function(){function c(b,a,c,e,f){var h,j,m,p,g,n,q,u,r,x=this;this.activeHotel=e;this.getPostData=__bind(this.getPostData,this);this.getParams=__bind(this.getParams,this);this.getLatLng=__bind(this.getLatLng,this);this.putToMap=__bind(this.putToMap,this);this.smallMapUrl=__bind(this.smallMapUrl,this);this.select=__bind(this.select,this);this.back=__bind(this.back,this);this.combinationClick=__bind(this.combinationClick,this);this.getFullInfo=__bind(this.getFullInfo,this);this.initFullInfo=
__bind(this.initFullInfo,this);this.showMap=__bind(this.showMap,this);this.showMapInfo=__bind(this.showMapInfo,this);this.showMapDetails=__bind(this.showMapDetails,this);this.selectFromPopup=__bind(this.selectFromPopup,this);this.showDetails=__bind(this.showDetails,this);this.showPhoto=__bind(this.showPhoto,this);this.isActive=__bind(this.isActive,this);this.isFlight=!1;this.isHotel=!0;_.extend(this,Backbone.Events);f||(f={});this.totalPeople=0;this.tours=a.tours||this.falseFunction;this.hotelId=
b.hotelId;this.checkIn=moment(b.checkIn)||!1;this.checkOut=moment(b.checkOut)||!1;this.cityCode=b.cityCode||!1;this.key=b.key;!this.checkOut&&(this.checkIn&&c)&&(this.checkOut=moment(this.checkIn),this.checkOut.add("d",c));this.checkOut&&(this.checkOutText=this.checkOut.format("LL"));this.cacheId=a.cacheId;this.activeResultId=ko.observable(0);this.hotelName=b.hotelName;this.address=f.address;this.description=f.description;this.description||(this.description="");this.limitDesc=Utils.limitTextLenght(this.description,
195);this.showMoreDesc=ko.observable(!0);this.showMoreDescText=ko.computed(function(){return x.showMoreDesc()?"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435":"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c"});this.photos=f.images;this.site=f.site;this.metroList=[];if(f.metroList)for(h in m=f.metroList,m)e=m[h],this.metroList.push(e);this.locations=[];if(f.locations)for(h in m=f.locations,m)e=m[h],this.locations.push(e);this.phone=f.phone;this.fax=f.fax;this.email=f.email;this.numberFloors=
parseInt(f.numberFloors);this.builtIn=parseInt(f.builtIn);this.numPhotos=0;this.parent=a;(this.checkInTime=f.earliestCheckInTime)?this.checkIn?this.checkInText=this.checkIn.format("LL")+", c "+this.checkInTime:console.log("strange ...",this.checkIn,this.checkInText,this.hotelName,this.hotelId):this.checkInText=this.checkIn.format("LL");this.frontPhoto={smallUrl:"http://upload.wikimedia.org/wikipedia/en/thumb/7/78/Trollface.svg/200px-Trollface.svg.png",largeUrl:"http://ya.ru"};this.photos&&this.photos.length&&
(this.frontPhoto=this.photos[0],this.numPhotos=this.photos.length);this.activePhoto=this.frontPhoto.largeUrl;this.starsNumeric=b.categoryId;this.stars=STARS_VERBOSE[this.starsNumeric-1];this.rating=b.rating;"-"===this.rating&&(this.rating=0);this.ratingName="";if(0<=(p=this.rating)&&2>p)this.ratingName="\u0440\u0435\u0439\u0442\u0438\u043d\u0433<br>\u043e\u0442\u0435\u043b\u044f";else if(2<=(g=this.rating)&&2.5>g)this.ratingName="\u0441\u0440\u0435\u0434\u043d\u0438\u0439<br>\u043e\u0442\u0435\u043b\u044c";
else if(2.5<=(n=this.rating)&&3.5>n)this.ratingName="\u043d\u0435\u043f\u043b\u043e\u0445\u043e\u0439<br>\u043e\u0442\u0435\u043b\u044c";else if(3.5<=(q=this.rating)&&4>q)this.ratingName="\u0445\u043e\u0440\u043e\u0448\u0438\u0439<br>\u043e\u0442\u0435\u043b\u044c";else if(4<=(u=this.rating)&&4.5>u)this.ratingName="\u043e\u0447\u0435\u043d\u044c \u0445\u043e\u0440\u043e\u0448\u0438\u0439<br>\u043e\u0442\u0435\u043b\u044c";else if(4.5<=(r=this.rating)&&5>=r)this.ratingName="\u0432\u0435\u043b\u0438\u043a\u043e\u043b\u0435\u043f\u043d\u044b\u0439<br>\u043e\u0442\u0435\u043b\u044c";
this.lat=f.latitude/1;this.lng=f.longitude/1;this.distanceToCenter=Math.ceil(b.centerDistance/1E3);30<this.distanceToCenter&&(this.distanceToCenter=30);this.duration=c;this.haveFullInfo=ko.observable(!1);this.selectText=ko.computed(function(){return!x.tours()?"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c":x.isActive()?"\u0412\u044b\u0431\u0440\u0430\u043d":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"});this.showRulesPopup=ko.observable(!1);this.activeRoomSet=ko.observable(null);
this.hasHotelServices=f.hotelServices?!0:!1;this.hotelServices=f.hotelServices;this.hasHotelGroupServices=f.hotelGroupServices?!0:!1;this.hotelGroupServices=[];if(f.hotelGroupServices)for(j in a=f.hotelGroupServices,a)e=a[j],this.hotelGroupServices.push({groupName:j,elements:e,groupIcon:HOTEL_SERVICE_VERBOSE[j]});this.hasRoomAmenities=f.roomAmenities?!0:!1;this.roomAmenities=f.roomAmenities;this.roomSets=ko.observableArray([]);this.visible=ko.observable(!0);this.wordDays=this.parent.wordDays;this.visibleRoomSets=
ko.computed(function(){var a,b,c,d,e;a=[];e=x.roomSets();c=0;for(d=e.length;c<d;c++)b=e[c],b.visible()&&a.push(b);return a});this.isShowAll=ko.observable(!1);this.showAllText=ko.computed(function(){return x.isShowAll()?"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432\u0441\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b":"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"});this.push(b)}
c.prototype.falseFunction=function(){return!1};c.prototype.push=function(b){var a;a=new RoomSet(b,this,this.duration);a.resultId=b.resultId;a.searchId=b.searchId;"17897"===this.hotelId&&console.log("setPrice",a.price);0===this.roomSets().length?(this.cheapest=a.price,this.cheapestSet=a,this.maxPrice=this.minPrice=a.pricePerNight):(a.price<this.cheapest&&(this.cheapestSet=a,console.log("set cheapest setPrice",a.price)),this.cheapest=a.price<this.cheapest?a.price:this.cheapest,this.minPrice=a.pricePerNight<
this.minPrice?a.pricePerNight:this.minPrice,this.maxPrice=a.pricePerNight>this.maxPrice?a.pricePerNight:this.maxPrice);this.roomSets.push(a);this.activeRoomSet(a);return this.roomSets.sort(function(a,b){return a.price>b.price?1:a.price<b.price?-1:0})};c.prototype.isActive=function(){return this.activeHotel?this.activeHotel()===this.hotelId:!1};c.prototype.showPhoto=function(b,a){var c;(c=$(a.currentTarget).data("photo-index"))||(c=0);return new PhotoBox(this.photos,this.hotelName,this.stars,c)};c.prototype.showAllResults=
function(b,a){if(this.isShowAll())return $(a.currentTarget).parent().parent().find(".hidden-roomSets").hide("fast",function(){return jsPaneScrollHeight()}),this.isShowAll(!1);$(a.currentTarget).parent().parent().find(".hidden-roomSets").show("fast",function(){return jsPaneScrollHeight()});return this.isShowAll(!0)};c.prototype.showDetails=function(){this.oldPageTop=$("html").scrollTop()|$("body").scrollTop();this.readMoreExpanded=!1;this.activePopup=new GenericPopup("#hotels-body-popup",this);SizeBox("hotels-body-popup");
ResizeBox("hotels-body-popup");return this.mapInitialized=!1};c.prototype.selectFromPopup=function(b){this.activePopup.close();b.off("back");b.on("back",function(){window.app.render({results:ko.observable(b.parent)},"results");return window.setTimeout(function(){Utils.scrollTo(b.oldPageTop,!1);return console.log(b.oldPageTop)},50)});b.getFullInfo();window.app.render(b,"info-template");return Utils.scrollTo("#content",!1)};c.prototype.showMapDetails=function(b,a){this.showDetails(b,a);return this.showMap()};
c.prototype.showMapInfo=function(b,a){var c,e;a.preventDefault();c=$("#hotel-info-tumblr-map");if(!c.hasClass("active")&&($(".place-buy .tmblr li").removeClass("active"),c.addClass("active"),$("#descr").hide(),$("#map").show(),!this.mapInitialized))return c=new google.maps.LatLng(this.lat,this.lng),e={center:c,zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},e=new google.maps.Map($("#hotel-info-gmap")[0],e),new google.maps.Marker({position:c,map:e,icon:"http://voyanga.com/themes/v2/images/pin1.png",
title:this.hotelName}),this.mapInitialized=!0};c.prototype.showDescriptionInfo=function(){var b;b=$("#hotel-info-tumblr-description");if(!b.hasClass("active"))return $(".place-buy .tmblr li").removeClass("active"),b.addClass("active"),$("#map").hide(),$("#descr").show(),$("#boxContent").css("height","auto")};c.prototype.showMap=function(){var b,a;b=$("#hotels-popup-tumblr-map");if(!b.hasClass("active"))return $(".place-buy .tmblr li").removeClass("active"),b.addClass("active"),$(".tab").hide(),$("#hotels-popup-map").show(),
$("#boxContent").css("height",$("#hotels-popup-map").height()+$("#hotels-popup-header1").height()+$("#hotels-popup-header2").height()+"px"),this.mapInitialized||(b=new google.maps.LatLng(this.lat,this.lng),a={center:b,zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP},a=new google.maps.Map($("#hotels-popup-gmap")[0],a),new google.maps.Marker({position:b,map:a,icon:"http://voyanga.com/themes/v2/images/pin1.png",title:this.hotelName}),this.mapInitialized=!0),SizeBox("hotels-popup-body")};c.prototype.showDescription=
function(){var b;b=$("#hotels-popup-tumblr-description");if(!b.hasClass("active"))return $(".place-buy .tmblr li").removeClass("active"),b.addClass("active"),$(".tab").hide(),$("#hotels-popup-description").show(),$("#boxContent").css("height","auto"),SizeBox("hotels-popup-body")};c.prototype.initFullInfo=function(){var b=this;this.roomCombinations=ko.observableArray([]);this.combinedPrice=ko.computed(function(){var a,c,e,f,h;a=0;h=b.roomCombinations();e=0;for(f=h.length;e<f;e++)c=h[e],c.selectedCount()&&
(a+=c.selectedCount()*c.price);return a});return this.combinedButtonLabel=ko.computed(function(){return 0<b.combinedPrice()?b.selectText():"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b \u043d\u043e\u043c\u0435\u0440\u0430"})};c.prototype.getFullInfo=function(){var b,a,c,e,f,h,j,m=this;if(!this.haveFullInfo()){b=new HotelsAPI;a=[];j=this.roomSets();f=0;for(h=j.length;f<h;f++)e=j[f],c=e.resultId,a.push(e.resultId+":"+e.searchId);f="hotel/search/info?hotelId="+this.hotelId;f+="&hotelResult="+
a.join(",");console.log(this.parent.cacheId);return b.search(f,function(a){var b,f,h;window.voyanga_debug("searchInfo",a);if(!a.hotel)return!1;m.initFullInfo();h=a.hotel.details;for(f in h)e=h[f],b=new RoomSet(e,m,m.duration),m.roomCombinations.push(b);b={};a=a.hotel.oldHotels;for(f in a)e=a[f],c=e.resultId,b[c]=e;console.log(b);h=m.roomSets();f=0;for(a=h.length;f<a;f++)e=h[f],c=e.resultId,b[c]?e.addCancelationRules(b[c]):console.log("not found result with key",c);m.roomMixed=ko.computed(function(){var a,
b,f,g;b={};g=m.roomSets();a=0;for(f=g.length;a<f;a++)e=g[a],c=e.key(),"undefined"===typeof b[c]&&(b[c]=e);g=m.roomCombinations();a=0;for(f=g.length;a<f;a++)e=g[a],c=e.key(),"undefined"===typeof b[c]&&(b[c]=e);a=[];for(c in b)e=b[c],a.push(e);return a});m.haveFullInfo(!0);return console.log(m.roomCombinations())},!1)}};c.prototype.combinationClick=function(){return console.log("combinati data = _.filter @data(), (el) -> el.visible()on click")};c.prototype.readMore=function(b,a){var c;c=$(a.currentTarget).parent().find(".text");
this.showMoreDesc()?(c.find(".endDesc").fadeIn("fast",function(){return c.find(".endDesc").css("display","inline")}),this.showMoreDesc(!1)):(c.find(".endDesc").fadeOut("fast"),this.showMoreDesc(!0));return SizeBox("hotels-popup-body")};c.prototype.back=function(){return this.trigger("back")};c.prototype.select=function(b){var a,c=this;console.log(b);if(b.roomSets)b=b.roomSets()[0],Utils.scrollTo(".info-trip");else{if(this.tours())return this.activeResultId(b.resultId),this.trigger("select",{roomSet:b,
hotel:this});a=$.Deferred();a.done(function(a){var f,h,j;f={module:"Hotels",type:"hotel"};f.searchId=a.parent.cacheId;f.searchKey=a.resultId;f.adults=0;f.age=!1;f.cots=0;j=c.parent.rawSP.rooms;a=0;for(h=j.length;a<h;a++)b=j[a],f.adults+=1*b.adultCount,b.childAge&&(f.age=b.childAgeage),f.cots+=1*b.cots;return Utils.toBuySubmit([f])});return this.parent.checkTicket(b,a)}};c.prototype.smallMapUrl=function(){var b;b="//maps.googleapis.com/maps/api/staticmap?zoom=13&size=310x259&maptype=roadmap&markers=icon:http://voyanga.com/themes/v2/images/pin1.png%7Ccolor:red%7Ccolor:red%7C%7C"+
(this.lat+","+this.lng);return b+="&sensor=false"};c.prototype.putToMap=function(b){var a,c=this;return this.lat&&this.lng?(console.log("add point to coords",this.lat,this.lng),a=new google.maps.LatLng(this.lat,this.lng),this.parent.addMapPoint(a),this.gMarker=a=new google.maps.Marker({position:a,map:b,icon:this.parent.markerImage,draggable:!1}),google.maps.event.addListener(a,"mouseover",function(a){return function(b){return c.parent.gMapPointShowWin(b,a)}}(this)),google.maps.event.addListener(a,
"mouseout",function(a){return function(b){return c.parent.gMapPointHideWin(b,a)}}(this)),google.maps.event.addListener(a,"click",function(a){return function(b){return c.parent.gMapPointClick(b,a)}}(this)),this.parent.gMarkers.push(a)):this.parent.gMapGeocoder.geocode({address:this.address+", "+this.parent.city.localEn+(this.parent.city.country?", "+this.parent.city.country:"")},function(a,f){console.log(a);if(f===google.maps.GeocoderStatus.OK)return c.lat=a[0].geometry.location.lat(),c.lng=a[0].geometry.location.lng(),
c.putToMap(b),c.parent.mapCluster.addMarker(c.gMarker)})};c.prototype.getLatLng=function(){var b,a,c,e=this;this.latLng=ko.observable(new google.maps.LatLng(this.lat,this.lng));if(!this.lat||!this.lng)b=this.parent.city.localEn,a=this.parent.city.country?", "+this.parent.city.country:"",c=new google.maps.Geocoder,c.geocode({address:this.address+", "+b+a},function(a,b){console.log(a);if(b===google.maps.GeocoderStatus.OK)return e.lat=a[0].geometry.location.lat(),e.lng=a[0].geometry.location.lng(),e.latLng(new google.maps.LatLng(e.lat,
e.lng))});return this.latLng};c.prototype.getParams=function(){var b;b={};b.hotelId=this.hotelId;b.roomSet=this.roomSets()[0].getParams();return JSON.stringify(b)};c.prototype.getPostData=function(){var b;b={};b.data=this.roomSets()[0]._data;b.type="hotel";return b};return c}();
HotelsResultSet=function(){function c(b,a,c){var e,f,h,j,m,p=this;this.searchParams=a;this.activeHotel=c;this.afterRender=__bind(this.afterRender,this);this.postFilters=__bind(this.postFilters,this);this.postInit=__bind(this.postInit,this);this.selectHotel=__bind(this.selectHotel,this);this.sortByRating=__bind(this.sortByRating,this);this.sortByPrice=__bind(this.sortByPrice,this);this.checkShowMore=__bind(this.checkShowMore,this);this.showMoreResults=__bind(this.showMoreResults,this);this.getDateInterval=
__bind(this.getDateInterval,this);this.selectFromPopup=__bind(this.selectFromPopup,this);this.gMapPointClick=__bind(this.gMapPointClick,this);this.gMapPointHideWin=__bind(this.gMapPointHideWin,this);this.gMapPointShowWin=__bind(this.gMapPointShowWin,this);this.hideFullMap=__bind(this.hideFullMap,this);this.showFullMapFunc=__bind(this.showFullMapFunc,this);this.setFullMapZoom=__bind(this.setFullMapZoom,this);this.addMapPoint=__bind(this.addMapPoint,this);this.resetMapCenter=__bind(this.resetMapCenter,
this);this.findAndSelectSameParams=__bind(this.findAndSelectSameParams,this);this.findAndSelectSame=__bind(this.findAndSelectSame,this);this.findAndSelect=__bind(this.findAndSelect,this);this.select=__bind(this.select,this);this._results={};if(b.error)throw b.error;if(!b.hotels)throw"404";this.noresults=0===b.hotels.length;this.creationMoment=moment();this.rawSP=this.searchParams;this.cacheId=b.cacheId;this.tours=ko.observable(!1);this.checkIn=moment(this.searchParams.checkIn);this.checkOut=moment(this.checkIn).add("days",
this.searchParams.duration);window.voyanga_debug("checkOut",this.checkOut);this.city=this.searchParams.cityFull;this.searchParams.duration&&(e=this.searchParams.duration);if(0===e||"undefined"===typeof e){c=b.hotels;for(a=c.length;0<a;){a=c[0];"undefined"===typeof a.duration?(e=dateUtils.fromIso(a.checkIn),console.log(e),c=dateUtils.fromIso(a.checkOut),console.log(a.checkOut),console.log(c),e=c.valueOf()-e.valueOf(),e=Math.floor(e/864E5)):(e=a.duration,console.log("yes set"));break}}this.wordDays=
Utils.wordAfterNum(e,"\u0434\u0435\u043d\u044c","\u0434\u043d\u044f","\u0434\u043d\u0435\u0439");this.wordNights=Utils.wordAfterNum(e,"\u043d\u043e\u0447\u044c","\u043d\u043e\u0447\u0438","\u043d\u043e\u0447\u0435\u0439");this.fullMapInitialized=!1;this.showFullMap=ko.observable(!1);this.maxPrice=this.minPrice=!1;m=b.hotels;c=0;for(j=m.length;c<j;c++)a=m[c],f=a.hotelId,this._results[f]?(this._results[f].push(a),this.minPrice=this._results[f].minPrice<this.minPrice?this._results[f].minPrice:this.minPrice,
this.maxPrice=this._results[f].maxPrice>this.maxPrice?this._results[f].maxPrice:this.maxPrice):(h=new HotelResult(a,this,e,this.activeHotel,b.hotelsDetails[f+"d"]),this._results[f]=h,!1===this.minPrice?(this.minPrice=this._results[f].minPrice,this.maxPrice=this._results[f].maxPrice):(this.minPrice=this._results[f].minPrice<this.minPrice?this._results[f].minPrice:this.minPrice,this.maxPrice=this._results[f].maxPrice>this.maxPrice?this._results[f].maxPrice:this.maxPrice));this.data=ko.observableArray();
this.showParts=ko.observable(1);this.showLimit=20;this.sortBy=ko.observable("minPrice");this.ordBy=ko.observable(1);this.resultsForRender=ko.computed(function(){var a,b,c,d,e,f,j;a=p.showParts()*p.showLimit;c=[];d=p.sortBy();b=p.ordBy();p.data.sort(function(a,c){return a[d]<c[d]?-1*b:a[d]>c[d]?1*b:0});j=p.data();e=0;for(f=j.length;e<f&&!(h=j[e],h.visible()&&(c.push(h),a--),0>=a);e++);return c});this.numResults=ko.observable(0);this.toursOpened=this.pagesLoad=this.filtersConfig=!1;b=this._results;
for(f in b)h=b[f],h.numPhotos&&this.data.push(h);this.sortByPriceClass=ko.computed(function(){var a;a="hotel-sort-by-item";"minPrice"===p.sortBy()&&(a+=" active");return a});this.sortByRatingClass=ko.computed(function(){var a;a="hotel-sort-by-item";"rating"===p.sortBy()&&(a+=" active");return a});this.data.sort(function(a,b){return a.minPrice<b.minPrice?-1:a.minPrice>b.minPrice?1:0});this.showButtonMoreResults=ko.computed(function(){return p.numResults()>p.showParts()*p.showLimit&&(DetectMobileQuick()||
DetectTierTablet())});window.hrs=this}c.prototype.select=function(b){var a=this;window.voyanga_debug(" i wonna get hotel for you",b);b.oldPageTop=$("html").scrollTop()|$("body").scrollTop();b.off("back");b.on("back",function(){window.app.render({results:ko.observable(a)},"results");return window.setTimeout(function(){if(a.showFullMap())return a.showFullMapFunc(null,null,!0),a.gAllMap.setCenter(a.gMapCenter),a.gAllMap.setZoom(a.gMapZoom);Utils.scrollTo(b.oldPageTop,!1);return Utils.scrollTo("#hotelResult"+
b.hotelId)},50)});b.getFullInfo();window.app.render(b,"info-template");return Utils.scrollTo("#content",!1)};c.prototype.findAndSelect=function(b){var a,c,e,f,h,j,m;console.log("find roomSet",b,"hotelId",b.parent.hotelId);j=this.data();c=0;for(f=j.length;c<f;c++)if(a=j[c],a.hotelId===b.parent.hotelId){console.log("ok, hotel found2");m=a.roomSets();e=0;for(h=m.length;e<h;e++)if(a=m[e],a.similarityHash()===b.similarityHash())return a}return!1};c.prototype.findAndSelectSame=function(b){var a,c,e,f,h,
j;c=this.findAndSelect(b);if(!c){h=this.data();e=0;for(f=h.length;e<f;e++)if(a=h[e],a.hotelId===b.parent.hotelId){console.log("ok, hotel found");j=a.roomSets();for(a=j.length;0<a;)return b=j[0]}}return c};c.prototype.findAndSelectSameParams=function(b,a){var c,e,f,h,j,m,p,g;j=!1;f=5E3;h=99999;g=this.data();m=0;for(p=g.length;m<p;m++)e=g[m],j||(j=e),e.categoryId===b&&(c=Utils.calculateTheDistance(a().lat(),a().lng(),e.lat,e.lng),5E3<c&&(c=5E3),2*c+e.minPrice<2*f+h&&(j=e,f=c,h=e.minPrice));if(j){e=
j.roomSets();for(c=e.length;0<c;)return c=e[0]}};c.prototype.resetMapCenter=function(){return this.computedCenter=new google.maps.LatLngBounds};c.prototype.addMapPoint=function(b){return this.computedCenter.extend(b)};c.prototype.setFullMapZoom=function(){this.gAllMap.fitBounds(this.computedCenter);return this.gAllMap.setCenter(this.computedCenter.getCenter())};c.prototype.showFullMapFunc=function(b,a,c,e){var f,h=this;null==c&&(c=!1);null==e&&(e=!1);console.log("show full map",c,e);this.oldPageTop=
$("html").scrollTop()|$("body").scrollTop();this.showFullMap()||Utils.scrollTo("#content");f=400;b=$("#content").offset();a=$("html").scrollTop()||$("body").scrollTop();if(!this.showFullMap()||4>Math.abs(a-b.top))f=100;return window.setTimeout(function(){var a,b,f,g;h.showFullMap(!0);$("#all-hotels-results").hide();$("#all-hotels-map").show();mapAllPageView();a=new google.maps.LatLng(h.city.latitude,h.city.longitude);b={zoom:10,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP};h.fullMapInitialized=
!1;h.mapCluster=null;h.fullMapInitialized||(h.gAllMap=new google.maps.Map($("#all-hotels-map")[0],b),window.gmap=h.gAllMap,h.markerImage=new google.maps.MarkerImage("/themes/v2/images/pin1.png",new google.maps.Size(31,31)),h.markerImageHover=new google.maps.MarkerImage("/themes/v2/images/pin2.png",new google.maps.Size(31,31)),h.gMapGeocoder=new google.maps.Geocoder,h.resetMapCenter(),h.gMapOverlay=new googleInfoDiv,console.log(h.gMapOverlay),h.gMapOverlay.setPosition(a),h.gMapOverlay.setMap(h.gAllMap),
console.log(h.gMapOverlay),h.gMapOverlay.hide(),h.clusterStyle=[{url:"/themes/v2/images/cluster_one.png",height:43,width:31,anchor:[7,0],textColor:"#000",textSize:18},{url:"/themes/v2/images/cluster_two.png",height:54,width:39,anchor:[11,0],textColor:"#000",textSize:18},{url:"/themes/v2/images/cluster_three.png",height:65,width:47,anchor:[15,0],textColor:"#000",textSize:18}]);h.gMarkers=[];g=h.data();b=0;for(f=g.length;b<f;b++)a=g[b],a.visible()&&a.putToMap(h.gAllMap);h.fullMapInitialized?h.mapCluster.addMarkers(h.gMarkers):
(h.mapCluster=new MarkerClusterer(h.gAllMap,h.gMarkers,{styles:h.clusterStyle}),h.fullMapInitialized=!0);console.log(h.gAllMap);console.log(h.gMapInfoWin);c&&h.gMapCenter&&h.gMapZoom?(h.gAllMap.setCenter(h.gMapCenter),h.gAllMap.setZoom(h.gMapZoom)):0<h.gMarkers.length&&h.setFullMapZoom();if(!e)return console.log("minimizeFilter"),minimizeFilter()},f)};c.prototype.hideFullMap=function(){var b=this;console.log("hideFullMap");$("#all-hotels-results").show();$("#all-hotels-map").hide();this.showFullMap(!1);
return window.setTimeout(function(){removeFilterShow();jsPaneScrollHeight();return Utils.scrollTo(b.oldPageTop)},50)};c.prototype.gMapPointShowWin=function(b,a){console.log("showDiv",b);this.gMapOverlay.setContent('<div id="relInfoPosition"><div id="infoWrapperDiv"><div class="hotelMapInfo"><div class="hotelMapImage"><img src="'+a.frontPhoto.largeUrl+'"></div><div class="stars '+a.stars+'"></div><div class="hotelMapName">'+a.hotelName+'</div><div class="mapPriceDiv">\u043e\u0442 <div class="mapPriceValue">'+
a.minPrice+'</div> <span class="rur">o</span>/\u043d\u043e\u0447\u044c</div></div></div></div>');this.gMapOverlay.setPosition(b.latLng);this.gMapOverlay.show();console.log(this.gMapOverlay);return a.gMarker.setIcon(this.markerImageHover)};c.prototype.gMapPointHideWin=function(b,a){var c;a.gMarker.setIcon(this.markerImage);console.log("mouseout");c=Math.round(5*Math.random());this.gMapOverlay.hide();if(40===c)return this.gMapInfoWin.close()};c.prototype.gMapPointClick=function(b,a){this.gMapCenter=
this.gAllMap.getCenter();this.gMapZoom=this.gAllMap.getZoom();console.log("save map params",this.gMapCenter,this.gMapZoom);this.select(a);return console.log("gMapEventClick",b,a)};c.prototype.selectFromPopup=function(b){b.activePopup.close();b.off("back");b.on("back",function(){window.app.render({results:ko.observable(b.parent)},"results");return window.setTimeout(function(){Utils.scrollTo(b.oldPageTop,!1);Utils.scrollTo("#hotelResult"+b.hotelId);return console.log(b.oldPageTop)},50)});b.getFullInfo();
window.app.render(b,"info-template");return Utils.scrollTo("#content",!1)};c.prototype.getDateInterval=function(){return dateUtils.formatDayMonthInterval(this.checkIn._d,this.checkOut._d)};c.prototype.showMoreResults=function(){var b,a;b=this.data()[0];a=this.data()[1];console.log("before more results",b,a,this.showParts());this.numResults()>this.showParts()*this.showLimit&&this.showParts(this.showParts()+1);b=this.data()[0];a=this.data()[1];return console.log("after more results",b,a,this.showParts(),
"resultsForRender length",this.resultsForRender().length)};c.prototype.checkShowMore=function(){var b,a,c;a=$("html").scrollTop()||$("body").scrollTop();b=$("html")[0].scrollHeight||$("body")[0].scrollHeight;c=$(window).height();if(2>b-(a+c)&&!this.showFullMap()&&("hotels-results"===window.app.activeView()||"tours-results"===window.app.activeView()&&"hotels-results"===window.app.activeModuleInstance().innerTemplate))return this.showMoreResults()};c.prototype.sortByPrice=function(){if("minPrice"!==
this.sortBy())return this.sortBy("minPrice"),this.ordBy(1),this.showParts(1)};c.prototype.sortByRating=function(){if("rating"!==this.sortBy())return this.sortBy("rating"),this.ordBy(-1),this.showParts(1)};c.prototype.selectHotel=function(b,a){return this.select(b,a)};c.prototype.postInit=function(){return this.filters=new HotelFiltersT(this)};c.prototype.postFilters=function(b){var a,c=this;null==b&&(b=!1);this.data();this.data();a=_.filter(this.data(),function(a){return a.visible()});this.numResults(a.length);
!this.pagesLoad||b?this.showParts(1):this.showParts(this.pagesLoad);window.setTimeout(function(){var a,f;c.data();c.data();b&&jsPaneScrollHeight();"hotels-results"===window.app.activeView()?(a=$("#content").offset(),f=$("html").scrollTop()||$("body").scrollTop(),f>a.top&&(!b||!c.showFullMap())&&Utils.scrollTo("#content")):c.toursOpened&&c.tours()&&c.filtersConfig||c.tours()&&c.showFullMap()||Utils.scrollTo(0,!1);c.showFullMap()&&c.showFullMapFunc(null,null,!1,!0);c.toursOpened=!1;c.data();return c.data()[1]},
50);this.data();return this.data()[1]};c.prototype.afterRender=function(){var b=this;return window.hotelsScrollCallback=function(a){return b.checkShowMore(a)}};return c}();var HotelsSearchParams,SpRoom,__bind=function(c,b){return function(){return c.apply(b,arguments)}};
SpRoom=function(){function c(b){var a=this;this.parent=b;this.getUrl=__bind(this.getUrl,this);this.getHash=__bind(this.getHash,this);console.log("SpRoom Constructor");this.adults=ko.observable(1).extend({integerOnly:{min:1,max:4}});this.children=ko.observable(0).extend({integerOnly:{min:0,max:1}});this.ages=ko.observableArray();this.infants=ko.observable(0).extend({integerOnly:{min:0,max:2}});this.adults.subscribe(function(b){4<b+a.children()&&a.adults(4-a.children());if(9<a.parent.overall()-a.adults()+
b)return a.adults(9-a.parent.overall()+a.adults())});this.children.subscribe(function(b){var c;4<b+a.adults()&&(b=4-a.adults(),a.children(b));9<a.parent.overall()-a.children()+b&&a.children(9-a.parent.overall()+a.children());if(a.ages().length!==b){if(a.ages().length<b){c=0;for(b=b-a.ages().length-1;0<=b?c<=b:c>=b;0<=b?++c:--c)a.ages.push({age:ko.observable(12).extend({integerOnly:{min:0,max:12}})})}else a.ages().length>b&&a.ages.splice(b);return ko.processAllDeferredBindingUpdates()}})}c.prototype.fromList=
function(b){var a,c,e;console.log("SpRoom FromList",b);a=b.split(":");console.log("parts:",a);this.adults(a[0]);this.children(a[1]);this.infants(a[2]);if(0<this.children()){b=c=0;for(e=this.children()-1;0<=e?c<=e:c>=e;b=0<=e?++c:--c)this.ages.push({age:ko.observable(a[3+b]).extend({integerOnly:{min:0,max:12}})})}return console.log("ages:",this.ages())};c.prototype.fromObject=function(b){var a,c,e;this.adults(b.adultCount);this.children(b.childCount);this.infants(b.cots);if(0<this.children()){e=[];
a=0;for(c=this.children()-1;0<=c?a<=c:a>=c;0<=c?++a:--a)e.push(this.ages.push({age:ko.observable(b.childAge).extend({integerOnly:{min:0,max:12}})}));return e}};c.prototype.getHash=function(){var b,a,c,e,f;a=[this.adults(),this.children(),this.infants()];f=this.ages();c=0;for(e=f.length;c<e;c++)b=f[c],a.push(b.age());return a.join(":")};c.prototype.getUrl=function(b){var a,c,e,f;a="";console.log("age p",this.ages(),this);f=this.ages();c=0;for(e=f.length;c<e;c++)a=f[c],console.log("age",a,a.age()),
a="rooms["+b+"][chdAge]="+a.age();a||(a="rooms["+b+"][chdAge]=0");return"rooms["+b+"][adt]="+this.adults()+("&rooms["+b+"][chd]=")+this.children()+"&"+a+("&rooms["+b+"][cots]=")+this.infants()};return c}();
HotelsSearchParams=function(){function c(){this.url=__bind(this.url,this);this.fromObject=__bind(this.fromObject,this);this.fromList=__bind(this.fromList,this);this.getHash=__bind(this.getHash,this);var b=this;this.city=ko.observable("");this.checkIn=ko.observable(!1);this.checkOut=ko.observable(!1);this.rooms=ko.observableArray([new SpRoom(this)]);this.overall=ko.computed(function(){var a,c,e,f,h;a=0;h=b.rooms();e=0;for(f=h.length;e<f;e++)c=h[e],a+=c.adults(),a+=c.children();return a})}c.prototype.getHash=
function(){var b,a,c,e,f;b=[this.city(),moment(this.checkIn()).format("D.M.YYYY"),moment(this.checkOut()).format("D.M.YYYY")];f=this.rooms();c=0;for(e=f.length;c<e;c++)a=f[c],b.push(a.getHash());b="hotels/search/"+b.join("/")+"/";window.voyanga_debug("Generated hash for hotels search",b);return b};c.prototype.fromList=function(b){var a,c,e,f,h;this.city(b[0]);this.checkIn(moment(b[1],"D.M.YYYY").toDate());this.checkOut(moment(b[2],"D.M.YYYY").toDate());this.rooms.splice(0);c=b[3].split("/");h=[];
e=0;for(f=c.length;e<f;e++)(b=c[e])?(a=new SpRoom(this),a.fromList(b),h.push(this.rooms.push(a))):h.push(void 0);return h};c.prototype.fromObject=function(b){var a,c,e,f,h;this.city(b.city);this.checkIn(moment(b.checkIn,"YYYY-M-D").toDate());this.checkOut(moment(b.checkIn,"YYYY-M-D").add("days",b.duration).toDate());this.rooms.splice(0);f=b.rooms;h=[];c=0;for(e=f.length;c<e;c++)b=f[c],a=new SpRoom(this),a.fromObject(b),h.push(this.rooms.push(a));return h};c.prototype.url=function(){var b,a,c,e,f,
h;a="hotel/search?city="+this.city();a+="&checkIn="+moment(this.checkIn()).format("YYYY-M-D");a+="&duration="+moment(this.checkOut()).diff(moment(this.checkIn()),"days");h=this.rooms();b=e=0;for(f=h.length;e<f;b=++e)c=h[b],a+="&"+c.getUrl(b);return a};return c}();var HotelsController,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__slice=[].slice;
HotelsController=function(){function c(b){this.searchParams=b;this.timelineAction=__bind(this.timelineAction,this);this.indexAction=__bind(this.indexAction,this);this.checkTicketAction=__bind(this.checkTicketAction,this);this.handleResults=__bind(this.handleResults,this);this.searchAction=__bind(this.searchAction,this);this.api=new HotelsAPI;this.routes={"/search/:from/:in/:out/*rest":this.searchAction,"/timeline/":this.timelineAction,"":this.indexAction};this.results=ko.observable();_.extend(this,
Backbone.Events)}c.prototype.searchAction=function(){var b,a=this;b=1<=arguments.length?__slice.call(arguments,0):[];window.voyanga_debug("HOTELS: Invoking searchAction",b);this.searchParams.fromList(b);return this.api.search(this.searchParams.url(),function(b){var c;try{c=a.handleResults(b)}catch(f){if("e404"===f){new ErrorPopup("hotels404");return}throw Error("Unable to build HotelResultSet from search response");}a.results(c);return a.render("results",{results:a.results})})};c.prototype.handleResults=
function(b){window.voyanga_debug("HOTELS: searchAction: handling results",b);b=new HotelsResultSet(b,b.searchParams);b.postInit();b.checkTicket=this.checkTicketAction;return b};c.prototype.checkTicketAction=function(b,a){var c=this;if(moment().diff(this.results().creationMoment,"seconds")<HOTEL_TICKET_TIMELIMIT)a.resolve(b);else return this.api.search(this.searchParams.url(),function(e){var f;try{f=c.handleResults(e)}catch(h){throw Error("Unable to bould HotelResultSet from api response. Check ticket.");
}if(e=f.findAndSelect(b))return a.resolve(e);new ErrorPopup("hotelsNoTicketOnValidation",!1,function(){});return c.results(f)})};c.prototype.indexAction=function(){window.voyanga_debug("HOTELS: indexAction");return this.render("index",{})};c.prototype.timelineAction=function(){this.render("timeline-template");return window.setTimeout(function(){VoyangaCalendarTimeline.calendarEvents=[{dayStart:Date.fromIso("2012-10-23"),dayEnd:Date.fromIso("2012-10-23"),type:"flight",color:"red",description:"\u041c\u043e\u0441\u043a\u0432\u0430 || \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",
cityFrom:"MOW",cityTo:"LED"},{dayStart:Date.fromIso("2012-10-23"),dayEnd:Date.fromIso("2012-10-28"),type:"hotel",color:"red",description:"Californication Hotel2",city:"LED"},{dayStart:Date.fromIso("2012-10-28"),dayEnd:Date.fromIso("2012-10-28"),type:"flight",color:"red",description:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433 || \u041c\u043e\u0441\u043a\u0432\u0430",cityFrom:"LED",cityTo:"MOW"},{dayStart:Date.fromIso("2012-10-28"),dayEnd:Date.fromIso("2012-10-28"),
type:"flight",color:"red",description:"\u041c\u043e\u0441\u043a\u0432\u0430 || \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",cityFrom:"MOW",cityTo:"LED"},{dayStart:Date.fromIso("2012-11-21"),dayEnd:Date.fromIso("2012-11-22"),type:"flight",color:"red",description:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433 || \u041c\u043e\u0441\u043a\u0432\u0430",cityFrom:"LED",cityTo:"MOW"},{dayStart:Date.fromIso("2012-11-21"),dayEnd:Date.fromIso("2012-11-28"),
type:"hotel",color:"red",description:"Californication Hotel",city:"MOW"},{dayStart:Date.fromIso("2012-11-28"),dayEnd:Date.fromIso("2012-11-28"),type:"flight",color:"red",description:"\u041c\u043e\u0441\u043a\u0432\u0430 || \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",cityFrom:"MOW",cityTo:"LED"},{dayStart:Date.fromIso("2012-11-28"),dayEnd:Date.fromIso("2012-11-28"),type:"flight",color:"red",description:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433 || \u0410\u043c\u0441\u0442\u0435\u0440\u0434\u0430\u043c",
cityFrom:"LED",cityTo:"AMS"},{dayStart:Date.fromIso("2012-11-28"),dayEnd:Date.fromIso("2012-11-28"),type:"flight",color:"red",description:"\u0410\u043c\u0441\u0442\u0435\u0440\u0434\u0430\u043c || \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",cityFrom:"AMS",cityTo:"LED"},{dayStart:Date.fromIso("2012-11-28"),dayEnd:Date.fromIso("2012-11-28"),type:"flight",color:"red",description:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433 || \u041c\u043e\u0441\u043a\u0432\u0430",
cityFrom:"LED",cityTo:"MOW"}];VoyangaCalendarTimeline.calendarEvents=[{dayStart:Date.fromIso("2012-11-29"),dayEnd:Date.fromIso("2012-11-29"),type:"flight",color:"red",description:"\u041c\u043e\u0441\u043a\u0432\u0430 || \u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",cityFrom:"MOW",cityTo:"LED"},{dayStart:Date.fromIso("2012-11-29"),dayEnd:Date.fromIso("2012-12-01"),type:"hotel",color:"red",description:"Californication Hotel2",city:"LED"}];return VoyangaCalendarTimeline.init()},
1E3)};c.prototype.render=function(b,a){window.voyanga_debug("HOTELS: rendering",b,a);return this.trigger("viewChanged",b,a)};return c}();var HotelsModule;HotelsModule=function(){function c(){this.panel=new HotelsPanel;this.controller=new HotelsController(this.panel.sp)}c.prototype.resize=function(){return ResizeAvia()};return c}();
var City,Event,EventCategory,EventCategorySet,EventLink,EventLinkSet,EventPhotoBox,EventPrice,EventPriceSet,EventSet,EventTag,EventTagSet,EventTour,EventTourResultSet,EventTourSet,__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c},__bind=function(c,b){return function(){return c.apply(b,arguments)}};
ko.bindingHandlers.highlightChange={update:function(c,b,a){var d;b=b();c=a();a=ko.utils.unwrapObservable(b);c=c.previousImage;$('<div class="IMGmain" style="visible:hidden"><img src=""></div>').appendTo(".centerTours");$(".IMGmain").eq(0).find("img").attr("src",c());CenterIMGResize(0);$(".IMGmain").eq(0).show();b=$(".IMGmain").eq(1).css("left");d=$(".IMGmain").eq(1).css("top");b=parseInt(b.slice(0,-2));d=parseInt(d.slice(0,-2));$(".IMGmain").eq(1).css("opacity","0").css("left",b+"px").css("top",d+
"px").find("img").attr("src",a);c(a);slideToursSlide();return $(".IMGmain").eq(1).find("img").load(function(){CenterIMGResize(1);$(".IMGmain").eq(0).animate({opacity:0},speedAnimateChangePic,function(){return $(".IMGmain:not(:last-child)").eq(0).remove()});return $(".IMGmain").eq(1).animate({opacity:1},speedAnimateChangePic)})}};
Event=function(c){function b(a){var b=this;this.startDate=ko.observable(new Date(a.startDate));this.endDate=ko.observable(new Date(a.endDate));this.address=ko.observable(a.address);this.contact=ko.observable(a.contact);this.eventId=a.id;this.eventPageUrl="/eventInfo/info/eventId/"+this.eventId;this.preview=ko.observable(a.preview);this.description=ko.observable(a.description);this.title=ko.observable(a.title);this.categories=ko.observableArray(new EventCategorySet(a.categories));this.links=ko.observableArray(new EventLinkSet(a.links));
this.tags=ko.observableArray(new EventTagSet(a.tags));this.prices=ko.observableArray(new EventPriceSet(a.prices));this.tour=ko.observable(new EventTourSet(a.tours));this.image=ko.observable(a.image);this.thumb=ko.observable(a.thumb);this.active=ko.observable(a.active);this.minimalPrice=ko.computed(function(){return b.prices()[0]?b.prices()[0].price:0})}__extends(b,c);b.prototype.duration=function(){return dateUtils.formatDuration(this._duration)};return b}(Backbone.Events);
EventSet=function(){function c(b){this.afterRender=__bind(this.afterRender,this);this.mapsInit=__bind(this.mapsInit,this);this.closeEventsMaps=__bind(this.closeEventsMaps,this);this.closeEventsPhoto=__bind(this.closeEventsPhoto,this);this.setActive=__bind(this.setActive,this);var a=this;this.events=ko.observableArray(b);this.currentTitle=ko.observable("HUY");this.currentEvent=ko.computed(function(){var b;b=_.filter(a.events(),function(a){return a.active()});console.log("SETTING TAITL",b[0].title());
a.currentTitle(b[0].title());return b[0]});this.previousImage=ko.observable("");this.activeMaps=0;this.isRendered=this.mapsInited=!1}c.prototype.setActive=function(b,a){if($(a.target).hasClass("lookEyes"))return!0;1===this.activeMaps&&this.closeEventsMaps();$(".slideTours").find(".triangle").animate({top:"0px"},200);this.events(_.map(this.events(),function(a){return a.active(!1)}));b.active(!0);return $(a.target).closest(".toursTicketsMain").find(".triangle").animate({top:"-16px"},200)};c.prototype.closeEventsPhoto=
function(){if(!$(".mapsBigAll").is(":visible"))return $(".slideTours").find(".active").find(".triangle").animate({top:"0px"},200),$(".toursTicketsMain").removeClass("active"),$(".mapsBigAll").css("opacity","0"),$(".toursBigAll").animate({opacity:0},700,function(){return $(this).css("display","none")}),$(".mapsBigAll").show(),this.mapsInited||this.mapsInit(),$(".mapsBigAll").animate({opacity:1},700),this.activeMaps=1};c.prototype.closeEventsMaps=function(){$(".toursBigAll").css("opacity","0");$(".mapsBigAll").animate({opacity:0},
700,function(){return $(this).css("display","none")});$(".toursBigAll").show();$(".toursBigAll").animate({opacity:1},700);return this.activeMaps=0};c.prototype.mapsInit=function(){if(google)return this.mapsInited=!0,waitElement(".mapsBigAll",function(b){return new google.maps.Map(b[0],{mapTypeControl:!1,panControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP,style:google.maps.ZoomControlStyle.SMALL},streetViewControl:!1,zoom:3,mapTypeId:google.maps.MapTypeId.TERRAIN,center:new google.maps.LatLng(52,
10)})})};c.prototype.afterRender=function(){this.mapsInited=!1;window.app.toggleGMaps(!0);this.isRendered=!0;return ResizeAvia()};return c}();EventCategory=function(){return function(c){this.id=ko.observable(c.id);this.title=ko.observable(c.title)}}();EventCategorySet=function(){return function(c){var b;b=[];$.each(c,function(a,c){return b.push(new EventCategory(c))});return b}}();EventLink=function(){return function(c){this.title=ko.observable(c.title);this.url=ko.observable(c.url)}}();
EventLinkSet=function(){return function(c){var b;b=[];$.each(c,function(a,c){return b.push(new EventLink(c))});return b}}();EventTag=function(){return function(c){this.name=ko.observable(c.name)}}();EventTagSet=function(){return function(c){var b;b=[];$.each(c,function(a,c){return b.push(new EventTag(c))});return b}}();City=function(){return function(c){this.title=ko.observable(c.title)}}();EventPrice=function(){return function(c){this.city=ko.observable(new City(c.city));this.price=ko.observable(c.price)}}();
EventPriceSet=function(){return function(c){var b;b=[];$.each(c,function(a,c){return b.push(new EventPrice(c))});return b}}();EventTour=function(){return function(c){this.name=c.name}}();EventTourSet=function(){return function(c){var b;b=[];$.each(c,function(a,c){return b.push(new EventTour(c))});return b}}();
EventTourResultSet=function(){function c(b,a){var c=this;this.eventId=a;this.hidePanel=__bind(this.hidePanel,this);this.showPanel=__bind(this.showPanel,this);this.togglePanel=__bind(this.togglePanel,this);this.gotoAndShowPanel=__bind(this.gotoAndShowPanel,this);this.reinit=__bind(this.reinit,this);this.items=ko.observableArray([]);this.selectedCity=ko.observable(b.city.id);this.fullPrice=ko.observable(0);this.fullPriceUpdateTime=ko.observable(window.priceData[this.selectedCity()].updateTime);this.fullPriceUpdateTimeText=
ko.computed(function(){var a;a=moment(c.fullPriceUpdateTime());console.log("upDate",a,a._d);return dateUtils.formatDayMonth(a._d)+", "+dateUtils.formatTime(a._d)});this.selectedCity.subscribe(function(a){c.fullPriceUpdateTime(window.priceData[a].updateTime);return c.reinit(window.toursArr[a])});this.startCity=ko.observable(b.city.localRu);this.activePanel=ko.observable(null);this.overviewPeople=ko.observable(0);this.overviewPricePeople=ko.observable("");this.photoBox=new EventPhotoBox(window.eventPhotos);
this.visiblePanel=ko.observable(!1);this.visiblePanel.subscribe(function(a){return a?c.showPanel():c.hidePanel()});this.showPanelText=ko.computed(function(){return c.visiblePanel()?"\u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c":"\u0440\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c"});this.reinit(b)}c.prototype.reinit=function(b){var a,c,e,f,h,j,m,p,g,n,q=this;this.resultSet=b;this.hasHotel=this.hasFlight=!1;this.items([]);this.flightCounter=ko.observable(0);this.hotelCounter=ko.observable(0);
this.selected_key=ko.observable("");this.selected_best=ko.observable("");this.correctTour=ko.observable(!1);this.totalCost=0;b=new TourPanelSet;this.activePanel(b);this.activePanel().startCity(this.resultSet.city.code);this.activePanel().selectedParams={ticketParams:[],eventId:this.eventId};this.activePanel().sp.calendarActivated(!1);window.app.fakoPanel(b);this.startCity(this.resultSet.city.localRu);console.log("reinitEventData",this);this.flightCounterWord=ko.computed(function(){var a;a=Utils.wordAfterNum(q.flightCounter(),
"\u0430\u0432\u0438\u0432\u0430\u0431\u0438\u043b\u0435\u0442","\u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u0430","\u0430\u0432\u0438\u0430\u0431\u0438\u043b\u0435\u0442\u043e\u0432");0<q.hotelCounter()&&(a+=", ");return a});this.hotelCounterWord=ko.computed(function(){return Utils.wordAfterNum(q.hotelCounter(),"\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0430","\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b","\u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446")});try{_.each(this.resultSet.items,
function(a){var b;if(a.isFlight)return q.hasFlight=!0,q.flightCounter(q.flightCounter()+1),q.roundTrip=2===a.flights.length,b=new AviaResult(a,q),b.sort(),b.priceHtml=ko.observable(b.price+'<span class="rur">o</span>'),b.overviewText=ko.observable("\u041f\u0435\u0440\u0435\u043b\u0435\u0442 "+b.departureCity()+" &rarr; "+b.arrivalCity()),b.overviewTemplate="tours-event-avia-ticket",b.dateClass=ko.observable(q.roundTrip?"blue-two":"blue-one"),b.isAvia=ko.observable(a.isFlight),b.isHotel=ko.observable(a.isHotel),
b.startDate=b.departureDate(),b.dateHtml=ko.observable('<div class="day">'+dateUtils.formatHtmlDayShortMonth(b.departureDate())+"</div>"+(q.roundTrip?'<div class="day">'+dateUtils.formatHtmlDayShortMonth(b.rtDepartureDate())+"</div>":"")),q.activePanel().selectedParams.ticketParams.push(b.getParams()),b.overviewPeople=ko.observable,q.items.push(b),q.totalCost+=b.price;if(a.isHotel)return q.hasHotel=!0,q.hotelCounter(q.hotelCounter()+1),q.lastHotel=new HotelResult(a,q,a.duration,a,a.hotelDetails),
q.lastHotel.priceHtml=ko.observable(q.lastHotel.roomSets()[0].price+'<span class="rur">o</span>'),q.lastHotel.dateClass=ko.observable("orange-two"),q.lastHotel.overviewTemplate="tours-event-hotels-ticket",q.lastHotel.isAvia=ko.observable(a.isFlight),q.lastHotel.isHotel=ko.observable(a.isHotel),q.lastHotel.startDate=q.lastHotel.checkIn,q.lastHotel.serachParams=a.searchParams,q.lastHotel.overviewText=ko.observable("<span class='hotel-left-long'>\u041e\u0442\u0435\u043b\u044c \u0432 "+q.lastHotel.serachParams.cityFull.casePre+
"</span><span class='hotel-left-short'>"+q.lastHotel.address+"</span>"),q.lastHotel.dateHtml=ko.observable('<div class="day">'+dateUtils.formatHtmlDayShortMonth(q.lastHotel.checkIn)+'</div><div class="day">'+dateUtils.formatHtmlDayShortMonth(q.lastHotel.checkOut)+"</div>"),q.activePanel().selectedParams.ticketParams.push(q.lastHotel.getParams()),console.log("Add to items hotel ",q.lastHotel),q.items.push(q.lastHotel),q.totalCost+=q.lastHotel.roomSets()[0].discountPrice});_.sortBy(this.items(),function(a){return a.startDate});
this.startDate=this.items()[0].startDate;this.dateHtml=ko.observable('<div class="day">'+dateUtils.formatHtmlDayShortMonth(this.startDate)+"</div>");a=!0;console.log("items",this.items());g=this.items();h=0;for(m=g.length;h<m;h++)if(e=g[h],e.isHotel()){if(a){c=0;n=e.serachParams.rooms;j=0;for(p=n.length;j<p;j++)f=n[j],this.activePanel().sp.rooms()[c]||this.activePanel().sp.addSpRoom(),this.activePanel().sp.rooms()[c].adults(f.adultCount),this.activePanel().sp.rooms()[c].children(f.childCount),this.activePanel().sp.rooms()[c].ages(f.childAge),
c++;a=!1}else this.activePanel().addPanel(!0);this.activePanel().lastPanel.checkIn(moment(e.checkIn)._d);this.activePanel().lastPanel.checkOut(moment(e.checkOut)._d);this.activePanel().lastPanel.city(e.cityCode);console.log("try set destData",moment(e.checkIn)._d,moment(e.checkOut)._d,e.cityCode,"to",this.activePanel().lastPanel,this.activePanel().lastPanel.checkIn())}this.overviewPeople(Utils.wordAfterNum(this.activePanel().sp.overall(),"\u0447\u0435\u043b\u043e\u0432\u0435\u043a","\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430",
"\u0447\u0435\u043b\u043e\u0432\u0435\u043a"));this.overviewPricePeople("\u0426\u0435\u043d\u0430 \u0437\u0430 "+(this.activePanel().sp.adults()?Utils.wordAfterNum(this.activePanel().sp.adults(),"\u0432\u0437\u0440\u043e\u0441\u043b\u043e\u0433\u043e","\u0432\u0437\u0440\u043e\u0441\u043b\u044b\u0445","\u0432\u0437\u0440\u043e\u0441\u043b\u044b\u0445"):"")+(this.activePanel().sp.children()?" "+Utils.wordAfterNum(this.activePanel().sp.children(),"\u0440\u0435\u0431\u0435\u043d\u043a\u0430","\u0434\u0435\u0442\u0435\u0439",
"\u0434\u0435\u0442\u0435\u0439"):""));console.log("activePanel",this.activePanel());this.activePanel().saveStartParams();_.last(this.activePanel().panels()).minimizedCalendar(!0);window.setTimeout(function(){console.log("calendar activated");return q.activePanel().sp.calendarActivated(!0)},1E3);window.setTimeout(function(){if(q.visiblePanel())return console.log("need showPanel"),$(".sub-head.event").css("margin-top","0px");$(".sub-head.event").stop(!0);$(".sub-head.event").css("height",q.activePanel().heightPanelSet()+
"px");$(".sub-head.event").css("margin-top",-q.activePanel().heightPanelSet()+4+"px");return console.log("need hidePanel",$(".sub-head.event"),q.activePanel().heightPanelSet(),$(".sub-head.event").css("margin-top"))},200);this.correctTour(!0)}catch(u){console.log("Cannot process tour"),this.correctTour(!1)}this.resultSet.price&&(this.totalCost=this.resultSet.price);return this.fullPrice(this.totalCost)};c.prototype.gotoAndShowPanel=function(){Utils.scrollTo(".panel");return this.visiblePanel(!0)};
c.prototype.togglePanel=function(){return this.visiblePanel(!this.visiblePanel())};c.prototype.showPanel=function(){console.log("showPanel");return $(".sub-head.event").animate({"margin-top":"0px"})};c.prototype.hidePanel=function(){console.log("hidePanel",this.activePanel().heightPanelSet());$(".sub-head.event").css("height",this.activePanel().heightPanelSet()+"px");return $(".sub-head.event").animate({"margin-top":-this.activePanel().heightPanelSet()+4+"px"})};return c}();
EventPhotoBox=function(){function c(b){this.next=__bind(this.next,this);this.prev=__bind(this.prev,this);this.onResize=__bind(this.onResize,this);this.onComplete=__bind(this.onComplete,this);this.onAnimate=__bind(this.onAnimate,this);this.afterLoad=__bind(this.afterLoad,this);this.afterRender=__bind(this.afterRender,this);this.getIndex=__bind(this.getIndex,this);var a,c,e,f,h=this;this.photos=ko.observableArray([]);this.imagesServer=ko.observable("");this.unloadedCount=this.totalCount=0;this.activeIndex=
ko.observable(0);this.picturesPadding=ko.observable(5);this.animation=!1;this.boxHeight=ko.observable(0);this.afterRendered=this.picturesLoaded=!1;this.renderedPhotos=ko.computed(function(){return[]});e=0;for(f=b.length;e<f;e++)a=b[e],c=new Image,this.unloadedCount++,$(c).bind("load error",function(a){var b;console.log("image is loaded",a,h);"load"===a.type&&(h.totalCount++,b={},b.url=a.currentTarget.src,b.height=a.currentTarget.height,b.width=a.currentTarget.width,b.width=Math.round(b.width*(400/
b.height)),b.height=400,h.boxHeight(400),h.photos.push(b));h.unloadedCount--;if(0>=h.unloadedCount)return h.picturesLoaded=!0,h.afterLoad()}),c.src=this.imagesServer()+a.url}c.prototype.getIndex=function(b){b%=this.totalCount;0>b&&(b=this.totalCount+b);return b};c.prototype.afterRender=function(){this.afterRendered=!0;return this.afterLoad()};c.prototype.afterLoad=function(){var b,a,c,e;if(this.afterRendered&&this.picturesLoaded){this.renderedDivs=[];console.log("phts",this.photos(),this.boxHeight());
for(c=a=-2;2>=a;c=++a)b={},console.log("cmpW",c,"out",this.getIndex(c)),b.div=$('<div class="eventPhoto"><img src="'+this.photos()[this.getIndex(c)].url+'" height="400"/></div>'),b.prevInd=this.getIndex(c-1),b.nextInd=this.getIndex(c+1),b.thisInd=this.getIndex(c),this.renderedDivs.push(b);a=Math.round(this.photos()[this.renderedDivs[2].thisInd].width/2);b=a+this.picturesPadding();this.renderedDivs[2].left=-a;for(c=e=3;4>=e;c=++e)this.renderedDivs[c].left=b,b+=this.photos()[this.renderedDivs[c].thisInd].width+
this.picturesPadding();b=-a;for(c=a=1;0<=a;c=--a)b-=this.photos()[this.renderedDivs[c].thisInd].width+this.picturesPadding(),this.renderedDivs[c].left=b;e=this.renderedDivs;b=0;for(a=e.length;b<a;b++)c=e[b],c.div.css("left",c.left+"px"),$("#eventsContent .photoGallery .centerPosition").append(c.div);console.log("all loaded",this.renderedDivs);return $(".events .center-block").css("position","static")}};c.prototype.onAnimate=function(b,a){var c,e,f,h,j,m;c=b-a.start;j=this.renderedDivs;m=[];f=0;for(h=
j.length;f<h;f++)e=j[f],m.push(e.div.css("left",e.left+c+"px"));return m};c.prototype.onComplete=function(){var b,a,c,e;console.log("animation complete");e=this.renderedDivs;a=0;for(c=e.length;a<c;a++)b=e[a],b.left+=this.delta;0>this.delta?(console.log("next"),this.renderedDivs[0].div.remove(),this.renderedDivs.shift(),a=this.renderedDivs[3].nextInd,c=this.renderedDivs[3].left+this.photos()[this.renderedDivs[3].thisInd].width+this.picturesPadding()):(console.log("prev"),this.renderedDivs[4].div.remove(),
this.renderedDivs.pop(),a=this.renderedDivs[0].prevInd,c=this.renderedDivs[0].left-this.photos()[a].width-this.picturesPadding());b={};b.div=$('<div class="eventPhoto"><img src="'+this.photos()[this.getIndex(a)].url+'" height="400"/></div>');b.prevInd=this.getIndex(a-1);b.nextInd=this.getIndex(a+1);b.thisInd=this.getIndex(a);b.left=c;b.div.css("left",b.left+"px");0>this.delta?(this.renderedDivs.push(b),$("#eventsContent .photoGallery .centerPosition").append(b.div)):(this.renderedDivs.unshift(b),
$("#eventsContent .photoGallery .centerPosition").prepend(b.div));console.log("divs",this.renderedDivs);return this.animation=!1};c.prototype.onResize=function(){return console.log("resize")};c.prototype.prev=function(){var b,a=this;if(!this.animation)return this.animation=!0,b=-Math.round(this.photos()[this.renderedDivs[1].thisInd].width/2),this.delta=b-this.renderedDivs[1].left,console.log("delta",this.delta),this.renderedDivs[1].div.animate({left:b+"px"},{step:function(b,c){return a.onAnimate(b,
c)},complete:function(){return a.onComplete()}})};c.prototype.next=function(){var b,a=this;if(!this.animation)return this.animation=!0,b=-Math.round(this.photos()[this.renderedDivs[3].thisInd].width/2),this.delta=b-this.renderedDivs[3].left,console.log("delta",this.delta),this.renderedDivs[3].div.animate({left:b+"px"},{step:function(b,c){return a.onAnimate(b,c)},complete:function(){return a.onComplete()}})};return c}();
var Application,__bind=function(c,b){return function(){return c.apply(b,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(c,b){function a(){this.constructor=c}for(var d in b)__hasProp.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c},__slice=[].slice;
Application=function(c){function b(){this.isEvent=__bind(this.isEvent,this);this.isNotEvent=__bind(this.isNotEvent,this);this.mapRendered=__bind(this.mapRendered,this);this.contentRendered=__bind(this.contentRendered,this);this.handle404=__bind(this.handle404,this);this.bindItemsToEvent=__bind(this.bindItemsToEvent,this);this.bindItemsToBuy=__bind(this.bindItemsToBuy,this);this.bindEvents=__bind(this.bindEvents,this);this.runWithModule=__bind(this.runWithModule,this);this.render=__bind(this.render,
this);this.reRenderCalendarEvent=__bind(this.reRenderCalendarEvent,this);this.reRenderCalendarStatic=__bind(this.reRenderCalendarStatic,this);this.reRenderCalendar=__bind(this.reRenderCalendar,this);this.minimizeCalendar=__bind(this.minimizeCalendar,this);this.initCalendar=__bind(this.initCalendar,this);var a,b,c=this;b=window.onerror;window.onerror=function(){var a;a=1<=arguments.length?__slice.call(arguments,0):[];if(!(3===a.length&&0===a[2])&&(new ErrorPopup("e500"),b))return b.apply(c,a)};this.activeModule=
ko.observable(null);this.activeModuleInstance=ko.observable(null);this.activeSearchPanel=ko.observable(null);a={template:"",data:{},rt:function(){return!0},departureDate:function(){return"12.11.2013"},arrivalDate:function(){return"12.12.2013"},calendarText:"DOH",minimizeCalendar:function(){return!0},calendarHidden:function(){return!0},calendarShadow:function(){return!0},afterRender:function(){}};this.fakoPanel=ko.observable(a);this.panel=ko.computed(function(){var b;if(b=c.activeModuleInstance())if(a=
ko.utils.unwrapObservable(b.panel),a=ko.utils.unwrapObservable(a),null!==a)return c.fakoPanel(a),c.activeSearchPanel(c.fakoPanel()),ko.processAllDeferredBindingUpdates(),$("div.innerCalendar").find("h1").removeClass("highlight")});this._view=ko.observable(!1);this.activeView=ko.computed(function(){return!c._view()?"stub":c.activeModule()+"-"+c._view()});this.in1=ko.observable(0);this.indexMode=ko.computed(function(){return c.in1("index"===c._view())});this.calendarInitialized=!1;this.showEventsPicture=
ko.computed(function(){return"tours-index"===c.activeView()});this.viewData=ko.observable({});this.slider=new Slider;this.slider.init();this.activeModule.subscribe(this.slider.handler);this.debugMode=ko.observable(!1);this.breakdown=ko.observable(!1)}__extends(b,c);b.prototype.initCalendar=function(){throw"Deprecated";};b.prototype.minimizeCalendar=function(){console.log("activeSearchPanel",this.activeSearchPanel());if(this.activeSearchPanel())return this.activeSearchPanel().minimizedCalendar(!0)};
b.prototype.reRenderCalendar=function(a){var b=this;VoyangaCalendarStandart.panel=!1;VoyangaCalendarStandart.init(this.fakoPanel,a[1]);this.fakoPanel.subscribe(function(a){if(a.panels)return b.activeSearchPanel(_.last(a.panels()))});if(this.fakoPanel().panels)return this.activeSearchPanel(_.last(this.fakoPanel().panels()))};b.prototype.reRenderCalendarStatic=function(a){var b=this;$(".calenderWindow").css("position","static").find(".calendarSlide").css("position","static");VoyangaCalendarStandart.init(this.fakoPanel,
a[1]);this.fakoPanel.subscribe(function(a){console.log("change panel",a,a.panels);return a.panels?b.activeSearchPanel(_.last(a.panels())):b.activeSearchPanel(a)});console.log("set panel",this.fakoPanel(),this.fakoPanel().panels);return this.fakoPanel().panels?this.activeSearchPanel(_.last(this.fakoPanel().panels())):this.activeSearchPanel(this.fakoPanel())};b.prototype.reRenderCalendarEvent=function(a){console.log("rerender calendar");$(".calenderWindow").css("position","static").find(".calendarSlide").css("position",
"static");VoyangaCalendarStandart.init(this.itemsToBuy.activePanel,a[1]);return this.activeSearchPanel(_.last(this.itemsToBuy.activePanel().panels()))};b.prototype.render=function(a,b){this.viewData(a);this._view(b);return $(window).resize()};b.prototype.register=function(a,b,c){var f,h,j,m=this;null==c&&(c=!1);f=b.controller;f.on("viewChanged",function(a,b){return m.render(b,a)});j=f.routes;for(h in j)f=j[h],window.voyanga_debug("APP: registreing route",a,h,f),this.route(a+h,a,f),c&&""===h&&this.route(h,
a,f);return this.on("beforeroute:"+a,function(){var c;c=1<=arguments.length?__slice.call(arguments,0):[];window.voyanga_debug("APP: routing",c);if(void 0===this.panel()||a!==this.activeModule())return this.minimizeCalendar(),window.voyanga_debug("APP: switching active module to",a),this.activeModule(a),window.voyanga_debug("APP: activating panel",ko.utils.unwrapObservable(b.panel)),this.activeModuleInstance(b),$(window).unbind("resize"),$(window).resize(b.resize),ko.processAllDeferredBindingUpdates(),
this.toggleGMaps(!1)})};b.prototype.toggleGMaps=function(a){if("avia"===this.activeModule()||"hotels"===this.activeModule()){if(a||this.events&&this.events.isRendered)return this.events.closeEventsPhoto()}else if(a||this.events&&this.events.isRendered)return this.events.closeEventsMaps()};b.prototype.run=function(){Backbone.history.start();this.bindEvents();return this.slider.handler(this.activeModule())};b.prototype.runWithModule=function(a){Backbone.history.start({silent:!0});window.app.navigate("#"+
a,{replace:!0});this.activeModule(a);$(window).unbind("resize");$(window).resize(ResizeAvia);return $(window).resize()};b.prototype.bindEvents=function(){var a;a=[];$.each(window.eventsRaw,function(b,c){return a.push(new Event(c))});return this.events=new EventSet(a)};b.prototype.bindItemsToBuy=function(){return this.itemsToBuy=new TourTripResultSet(window.tripRaw)};b.prototype.bindItemsToEvent=function(){return this.itemsToBuy=new EventTourResultSet(window.tripRaw,window.eventId)};b.prototype.handle404=
function(){return new ErrorPopup("avia500")};b.prototype.route=function(a,b,c){return Backbone.Router.prototype.route.call(this,a,b,function(){this.trigger.apply(this,["beforeroute:"+b].concat(_.toArray(arguments)));return c.apply(this,arguments)})};b.prototype.contentRendered=function(){window.voyanga_debug("APP: Content rendered");this.trigger(this.activeModule()+":contentRendered");ResizeFun();return WidthMine()};b.prototype.mapRendered=function(){return $(".slideTours").find(".active").find(".triangle").animate({top:"-16px"},
200)};b.prototype.isNotEvent=function(){return!this.isEvent()};b.prototype.isEvent=function(){return"tours-index"===this.activeView()};return b}(Backbone.Router);window.voyanga_debug=function(){var c;c=1<=arguments.length?__slice.call(arguments,0):[];return console.log.apply(console,c)};console.log=function(){};console.error=function(){};console.warn=function(){};console.info=function(){};console.time=function(){};console.timeEnd=function(){};
//@ sourceMappingURL=/js/all.min.js.map
